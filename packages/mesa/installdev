#!/bin/sh

. config/options

egl_install () {
  do_installdev usr/include/KHR
  do_installdev usr/include/EGL
  do_installdev usr/lib/libEGL.so*
  do_installdev usr/lib/egl
}

cd $BUILD/$1*

do_installdev usr/include/GL

do_installdev usr/lib/libGL.so*
do_installdev usr/lib/libGLU.so*
do_installdev usr/lib/libglut.so*
do_installdev usr/lib/libOSMesa.so*
do_installdev usr/lib/dri
do_installdev usr/lib/mesa
do_installdev usr/lib/pkgconfig

[ -z "$GLES_PROVIDER" -a -z "$OVG_PROVIDER" ] && egl_install

if [ "$GLES_PROVIDER" = mesa -o "$OVG_PROVIDER" = mesa ]; then
  if pkg_uses $1 opengles || pkg_uses $1 openvg; then
    egl_install
  fi
fi

if pkg_uses $1 opengles && [ "$GLES_PROVIDER" = mesa ]; then
  do_installdev usr/include/GLES
  do_installdev usr/include/GLES2
  do_installdev usr/lib/libGLES*.so*
fi

if pkg_uses $1 openvg && [ "$OVG_PROVIDER" = mesa ]; then
  do_installdev usr/include/VG
fi

exit 0
