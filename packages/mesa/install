#!/bin/sh

. config/options

cd $BUILD/$1*

do_install usr/lib/dri
do_install usr/lib/egl

for i in OSMesa GLU glut; do
  do_install usr/lib/lib$i.so*
done

do_install usr/lib/mesa

MESA_LIBS="GL"
[ -z "$GLES_PROVIDER" -a -z "$OVG_PROVIDER" ] && MESA_LIBS="$MESA_LIBS EGL"

if pkg_uses $1 opengles && [ "$GLES_PROVIDER" = mesa ]; then
  MESA_LIBS="$MESA_LIBS EGL GLESv1_CM GLESv2"
fi

for i in $MESA_LIBS; do
  ln -s /usr/lib/mesa/lib$i.so.1 $INSTALL/usr/lib/lib$i.so.1
  ln -s lib$i.so.1 $INSTALL/usr/lib/lib$i.so
done

exit 0
