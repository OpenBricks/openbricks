#!/bin/sh

. config/options

cd $BUILD/$1*

do_install bin
do_install lib
do_install etc/dbus-1
do_install etc/systemd
do_install usr/bin
do_install usr/share/dbus-1
do_install usr/share/systemd

mkdir -p $INSTALL/etc/tmpfiles.d
mkdir -p $INSTALL/etc/modules-load.d

# add symlinks for legacy SystemV utils
mkdir -p $INSTALL/sbin
ln -s ../bin/systemctl $INSTALL/sbin/halt
ln -s ../bin/systemctl $INSTALL/sbin/poweroff
ln -s ../bin/systemctl $INSTALL/sbin/reboot

if [ -n "$MEDIA_CENTER_FRONTEND" ]; then
  mkdir -p $INSTALL/etc/systemd/system
  ln -s /lib/systemd/system/${MEDIA_CENTER_FRONTEND}.target \
    $INSTALL/etc/systemd/system/default.target
fi

exit 0
