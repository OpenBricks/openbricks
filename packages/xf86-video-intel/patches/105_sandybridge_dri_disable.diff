From 30cc87d498285a77127b7aba1381ef878ebe632a Mon Sep 17 00:00:00 2001
From: Robert Hooker <sarvatt@ubuntu.com>
Date: Thu, 23 Sep 2010 20:01:24 -0400
Subject: [PATCH] Disable non-functional DRI completely on Sandybridge.

Revert after Intel 2010Q4 release that will support it.
---
 src/i830_driver.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/src/i830_driver.c b/src/i830_driver.c
index b8e0c0b..c9072d4 100644
--- a/src/i830_driver.c
+++ b/src/i830_driver.c
@@ -1037,6 +1037,8 @@ I830ScreenInit(int scrnIndex, ScreenPtr screen, int argc, char **argv)
 	scrn->videoRam = device->regions[fb_bar].size / 1024;
 
 #ifdef DRI2
+	if (IS_GEN6(intel))
+		intel->directRenderingType = DRI_DISABLED;
 	if (intel->directRenderingType == DRI_NONE
 	    && I830DRI2ScreenInit(screen))
 		intel->directRenderingType = DRI_DRI2;
-- 
1.7.2

