#!/bin/sh

. config/options

if pkg_uses $1 games; then
  GAMES_OPT="--enable-activity-games"
else
  GAMES_OPT="--disable-activity-games"
fi

if pkg_uses $1 vdr; then
  VDR_OPT="--enable-activity-tv --enable-libsvdrp"
else
  VDR_OPT="--disable-activity-tv --disable-libsvdrp"
fi

if pkg_uses $1 cdda; then
  CDDA_OPT="--enable-browser-cdda --enable-libcddb"
else
  CDDA_OPT="--disable-browser-cdda --disable-libcddb"
fi

if pkg_uses $1 dvd; then
  DVD_OPT="--enable-browser-dvd"
else
  DVD_OPT="--disable-browser-dvd"
fi

if pkg_uses $1 netstream; then
  NETSTREAM_OPT="--enable-browser-netstreams"
else
  NETSTREAM_OPT="--disable-browser-netstreams"
fi

if pkg_uses $1 podcast; then
  PODCAST_OPT="--enable-browser-podcast"
else
  PODCAST_OPT="--disable-browser-podcast"
fi

if pkg_uses $1 upnp; then
  UPNP_OPT="--enable-browser-upnp"
else
  UPNP_OPT="--disable-browser-upnp"
fi

if pkg_uses $1 x11; then
  X11_OPT="--enable-libxrandr"
else
  X11_OPT="--disable-libxrandr"
fi

cd $BUILD/$1*
export LIBS="$EXTRA_LIBS -lintl"
sed -i "s%eina-0%eina%g" configure
do_configure \
            --enable-static-modules \
            $GAMES_OPT \
            $CDDA_OPT \
            $DVD_OPT \
            $NETSTREAM_OPT \
            $PODCAST_OPT \
            $UPNP_OPT \
            $X11_OPT \
            $VDR_OPT \

make
make_install
