diff -Naur vlc-1.1.5.orig//bin/Makefile.in vlc-1.1.5/bin/Makefile.in
--- vlc-1.1.5.orig//bin/Makefile.in	2010-12-04 15:18:21.272122003 +0100
+++ vlc-1.1.5/bin/Makefile.in	2010-12-04 15:19:38.842121991 +0100
@@ -308,6 +308,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//compat/Makefile.in vlc-1.1.5/compat/Makefile.in
--- vlc-1.1.5.orig//compat/Makefile.in	2010-12-04 15:18:21.402122007 +0100
+++ vlc-1.1.5/compat/Makefile.in	2010-12-04 15:19:38.952122004 +0100
@@ -269,6 +269,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//config.h.in vlc-1.1.5/config.h.in
--- vlc-1.1.5.orig//config.h.in	2010-12-04 15:18:19.542122001 +0100
+++ vlc-1.1.5/config.h.in	2010-12-04 15:19:36.672122003 +0100
@@ -363,6 +363,10 @@
 /* Define this if you have libcddb installed */
 #undef HAVE_LIBCDDB
 
+/* Define to 1 if you have the <libcrystalhd/libcrystalhd_if.h> header file.
+   */
+#undef HAVE_LIBCRYSTALHD_LIBCRYSTALHD_IF_H
+
 /* Define to 1 if you have the <libdvdread/dvd_reader.h> header file. */
 #undef HAVE_LIBDVDREAD_DVD_READER_H
 
diff -Naur vlc-1.1.5.orig//configure vlc-1.1.5/configure
--- vlc-1.1.5.orig//configure	2010-12-04 15:18:21.402122007 +0100
+++ vlc-1.1.5/configure	2010-12-04 15:19:34.942122002 +0100
@@ -1033,6 +1033,7 @@
 MERGE_FFMPEG_TRUE
 LTLIBid3tag
 LTLIBmpgatofixed32
+LTLIBcrystalhd
 LTLIBomxil
 LTLIBshine
 LTLIBwma_fixed
@@ -1410,6 +1411,7 @@
 enable_wma_fixed
 enable_shine
 enable_omxil
+enable_crystalhd
 enable_mad
 with_mad
 with_mad_tree
@@ -2430,6 +2432,7 @@
   --enable-wma-fixed      libwma-fixed module (default disabled)
   --enable-shine          shine mp3 encoding module (default disabled)
   --enable-omxil          openmax il codec module (default disabled)
+  --enable-crystalhd       crystalhd codec plugin (default disabled)
   --enable-mad            libmad module (default enabled)
   --with-mad=PATH         path to libmad
   --with-mad-tree=PATH    mad tree for static linking
@@ -10275,13 +10278,13 @@
 else
   lt_cv_nm_interface="BSD nm"
   echo "int some_variable = 0;" > conftest.$ac_ext
-  (eval echo "\"\$as_me:10278: $ac_compile\"" >&5)
+  (eval echo "\"\$as_me:10281: $ac_compile\"" >&5)
   (eval "$ac_compile" 2>conftest.err)
   cat conftest.err >&5
-  (eval echo "\"\$as_me:10281: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
+  (eval echo "\"\$as_me:10284: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
   (eval "$NM \"conftest.$ac_objext\"" 2>conftest.err > conftest.out)
   cat conftest.err >&5
-  (eval echo "\"\$as_me:10284: output\"" >&5)
+  (eval echo "\"\$as_me:10287: output\"" >&5)
   cat conftest.out >&5
   if $GREP 'External.*some_variable' conftest.out > /dev/null; then
     lt_cv_nm_interface="MS dumpbin"
@@ -11483,7 +11486,7 @@
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 11486 "configure"' > conftest.$ac_ext
+  echo '#line 11489 "configure"' > conftest.$ac_ext
   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
@@ -13238,11 +13241,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:13241: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:13244: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:13245: \$? = $ac_status" >&5
+   echo "$as_me:13248: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -13577,11 +13580,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:13580: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:13583: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:13584: \$? = $ac_status" >&5
+   echo "$as_me:13587: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -13682,11 +13685,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:13685: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:13688: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:13689: \$? = $ac_status" >&5
+   echo "$as_me:13692: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -13737,11 +13740,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:13740: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:13743: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:13744: \$? = $ac_status" >&5
+   echo "$as_me:13747: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -16121,7 +16124,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 16124 "configure"
+#line 16127 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -16217,7 +16220,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 16220 "configure"
+#line 16223 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -18173,11 +18176,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:18176: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:18179: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:18180: \$? = $ac_status" >&5
+   echo "$as_me:18183: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -18272,11 +18275,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:18275: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:18278: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:18279: \$? = $ac_status" >&5
+   echo "$as_me:18282: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -18324,11 +18327,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:18327: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:18330: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:18331: \$? = $ac_status" >&5
+   echo "$as_me:18334: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -32263,6 +32266,44 @@
 
 fi
 
+# Check whether --enable-crystalhd was given.
+if test "${enable_crystalhd+set}" = set; then :
+  enableval=$enable_crystalhd;
+fi
+
+if test "${enable_crystalhd}" == "yes"; then
+    for ac_header in libcrystalhd/libcrystalhd_if.h
+do :
+  ac_fn_c_check_header_mongrel "$LINENO" "libcrystalhd/libcrystalhd_if.h" "ac_cv_header_libcrystalhd_libcrystalhd_if_h" "$ac_includes_default"
+if test "x$ac_cv_header_libcrystalhd_libcrystalhd_if_h" = x""yes; then :
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBCRYSTALHD_LIBCRYSTALHD_IF_H 1
+_ACEOF
+
+
+
+    PLUGINS="${PLUGINS} crystalhd"
+    LTLIBcrystalhd=libcrystalhd_plugin.la
+
+
+
+
+
+    eval "LIBS_crystalhd="'"'"-lcrystalhd "'$'"{LIBS_crystalhd}"'"'
+    am_modules_with_libs="${am_modules_with_libs} crystalhd"
+
+
+
+else
+
+      as_fn_error $? "\"Could not find CrystalHD development headers\"" "$LINENO" 5
+
+fi
+
+done
+
+fi
+
 # Check whether --enable-mad was given.
 if test "${enable_mad+set}" = set; then :
   enableval=$enable_mad;
diff -Naur vlc-1.1.5.orig//configure.ac vlc-1.1.5/configure.ac
--- vlc-1.1.5.orig//configure.ac	2010-12-04 15:18:21.272122003 +0100
+++ vlc-1.1.5/configure.ac	2010-12-04 15:18:29.272122004 +0100
@@ -2567,6 +2567,20 @@
 fi
 
 dnl
+dnl CrystalHD codec plugin
+dnl
+AC_ARG_ENABLE(crystalhd,
+  [  --enable-crystalhd       crystalhd codec plugin (default disabled)])
+if test "${enable_crystalhd}" == "yes"; then
+    AC_CHECK_HEADERS(libcrystalhd/libcrystalhd_if.h, [
+      VLC_ADD_PLUGIN([crystalhd])
+      VLC_ADD_LIBS([crystalhd], [-lcrystalhd])
+    ],[
+      AC_MSG_ERROR("Could not find CrystalHD development headers")
+    ])
+fi
+
+dnl
 dnl  mad plugin
 dnl
 AC_ARG_ENABLE(mad,
diff -Naur vlc-1.1.5.orig//doc/Makefile.in vlc-1.1.5/doc/Makefile.in
--- vlc-1.1.5.orig//doc/Makefile.in	2010-12-04 15:18:19.922122007 +0100
+++ vlc-1.1.5/doc/Makefile.in	2010-12-04 15:19:39.052122002 +0100
@@ -259,6 +259,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//extras/package/ipkg/Makefile.in vlc-1.1.5/extras/package/ipkg/Makefile.in
--- vlc-1.1.5.orig//extras/package/ipkg/Makefile.in	2010-12-04 15:18:19.602122001 +0100
+++ vlc-1.1.5/extras/package/ipkg/Makefile.in	2010-12-04 15:19:39.132122008 +0100
@@ -232,6 +232,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//libs/loader/Makefile.in vlc-1.1.5/libs/loader/Makefile.in
--- vlc-1.1.5.orig//libs/loader/Makefile.in	2010-12-04 15:18:21.302122000 +0100
+++ vlc-1.1.5/libs/loader/Makefile.in	2010-12-04 15:19:39.252122003 +0100
@@ -297,6 +297,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//libs/srtp/Makefile.in vlc-1.1.5/libs/srtp/Makefile.in
--- vlc-1.1.5.orig//libs/srtp/Makefile.in	2010-12-04 15:18:21.392122003 +0100
+++ vlc-1.1.5/libs/srtp/Makefile.in	2010-12-04 15:19:39.372122001 +0100
@@ -300,6 +300,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//libs/unzip/Makefile.in vlc-1.1.5/libs/unzip/Makefile.in
--- vlc-1.1.5.orig//libs/unzip/Makefile.in	2010-12-04 15:18:21.382122002 +0100
+++ vlc-1.1.5/libs/unzip/Makefile.in	2010-12-04 15:19:39.482121998 +0100
@@ -274,6 +274,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//m4/Makefile.in vlc-1.1.5/m4/Makefile.in
--- vlc-1.1.5.orig//m4/Makefile.in	2010-12-04 15:18:19.772121997 +0100
+++ vlc-1.1.5/m4/Makefile.in	2010-12-04 15:19:39.572122001 +0100
@@ -232,6 +232,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//Makefile.in vlc-1.1.5/Makefile.in
--- vlc-1.1.5.orig//Makefile.in	2010-12-04 15:18:18.732121998 +0100
+++ vlc-1.1.5/Makefile.in	2010-12-04 15:19:54.852122000 +0100
@@ -338,6 +338,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/3dnow/Makefile.in vlc-1.1.5/modules/3dnow/Makefile.in
--- vlc-1.1.5.orig//modules/3dnow/Makefile.in	2010-12-04 15:18:20.312122001 +0100
+++ vlc-1.1.5/modules/3dnow/Makefile.in	2010-12-04 15:19:39.682121998 +0100
@@ -300,6 +300,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/access/bd/Makefile.in vlc-1.1.5/modules/access/bd/Makefile.in
--- vlc-1.1.5.orig//modules/access/bd/Makefile.in	2010-12-04 15:18:20.572122002 +0100
+++ vlc-1.1.5/modules/access/bd/Makefile.in	2010-12-04 15:19:40.282122000 +0100
@@ -307,6 +307,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/access/bda/Makefile.in vlc-1.1.5/modules/access/bda/Makefile.in
--- vlc-1.1.5.orig//modules/access/bda/Makefile.in	2010-12-04 15:18:20.582122003 +0100
+++ vlc-1.1.5/modules/access/bda/Makefile.in	2010-12-04 15:19:40.412121989 +0100
@@ -320,6 +320,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/access/dshow/Makefile.in vlc-1.1.5/modules/access/dshow/Makefile.in
--- vlc-1.1.5.orig//modules/access/dshow/Makefile.in	2010-12-04 15:18:20.582122003 +0100
+++ vlc-1.1.5/modules/access/dshow/Makefile.in	2010-12-04 15:19:40.542121994 +0100
@@ -321,6 +321,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/access/dvb/Makefile.in vlc-1.1.5/modules/access/dvb/Makefile.in
--- vlc-1.1.5.orig//modules/access/dvb/Makefile.in	2010-12-04 15:18:20.582122003 +0100
+++ vlc-1.1.5/modules/access/dvb/Makefile.in	2010-12-04 15:19:40.682122004 +0100
@@ -307,6 +307,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/access/Makefile.in vlc-1.1.5/modules/access/Makefile.in
--- vlc-1.1.5.orig//modules/access/Makefile.in	2010-12-04 15:18:20.552122000 +0100
+++ vlc-1.1.5/modules/access/Makefile.in	2010-12-04 15:19:40.152122002 +0100
@@ -719,6 +719,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/access/mms/Makefile.in vlc-1.1.5/modules/access/mms/Makefile.in
--- vlc-1.1.5.orig//modules/access/mms/Makefile.in	2010-12-04 15:18:20.572122002 +0100
+++ vlc-1.1.5/modules/access/mms/Makefile.in	2010-12-04 15:19:40.812122009 +0100
@@ -310,6 +310,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/access/rtp/Makefile.in vlc-1.1.5/modules/access/rtp/Makefile.in
--- vlc-1.1.5.orig//modules/access/rtp/Makefile.in	2010-12-04 15:18:20.572122002 +0100
+++ vlc-1.1.5/modules/access/rtp/Makefile.in	2010-12-04 15:19:40.942122003 +0100
@@ -304,6 +304,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/access/rtsp/Makefile.in vlc-1.1.5/modules/access/rtsp/Makefile.in
--- vlc-1.1.5.orig//modules/access/rtsp/Makefile.in	2010-12-04 15:18:20.592122008 +0100
+++ vlc-1.1.5/modules/access/rtsp/Makefile.in	2010-12-04 15:19:41.082122002 +0100
@@ -311,6 +311,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/access/screen/Makefile.in vlc-1.1.5/modules/access/screen/Makefile.in
--- vlc-1.1.5.orig//modules/access/screen/Makefile.in	2010-12-04 15:18:20.562122001 +0100
+++ vlc-1.1.5/modules/access/screen/Makefile.in	2010-12-04 15:19:41.222122013 +0100
@@ -328,6 +328,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/access/vcd/Makefile.in vlc-1.1.5/modules/access/vcd/Makefile.in
--- vlc-1.1.5.orig//modules/access/vcd/Makefile.in	2010-12-04 15:18:20.572122002 +0100
+++ vlc-1.1.5/modules/access/vcd/Makefile.in	2010-12-04 15:19:41.352122002 +0100
@@ -306,6 +306,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/access/vcdx/Makefile.in vlc-1.1.5/modules/access/vcdx/Makefile.in
--- vlc-1.1.5.orig//modules/access/vcdx/Makefile.in	2010-12-04 15:18:20.552122000 +0100
+++ vlc-1.1.5/modules/access/vcdx/Makefile.in	2010-12-04 15:19:41.492122002 +0100
@@ -307,6 +307,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/access/zip/Makefile.in vlc-1.1.5/modules/access/zip/Makefile.in
--- vlc-1.1.5.orig//modules/access/zip/Makefile.in	2010-12-04 15:18:20.582122003 +0100
+++ vlc-1.1.5/modules/access/zip/Makefile.in	2010-12-04 15:19:41.612122007 +0100
@@ -307,6 +307,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/access_output/Makefile.in vlc-1.1.5/modules/access_output/Makefile.in
--- vlc-1.1.5.orig//modules/access_output/Makefile.in	2010-12-04 15:18:20.892122002 +0100
+++ vlc-1.1.5/modules/access_output/Makefile.in	2010-12-04 15:19:41.782122001 +0100
@@ -369,6 +369,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/altivec/Makefile.in vlc-1.1.5/modules/altivec/Makefile.in
--- vlc-1.1.5.orig//modules/altivec/Makefile.in	2010-12-04 15:18:20.312122001 +0100
+++ vlc-1.1.5/modules/altivec/Makefile.in	2010-12-04 15:19:41.902122000 +0100
@@ -312,6 +312,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/arm_neon/Makefile.in vlc-1.1.5/modules/arm_neon/Makefile.in
--- vlc-1.1.5.orig//modules/arm_neon/Makefile.in	2010-12-04 15:18:20.342122007 +0100
+++ vlc-1.1.5/modules/arm_neon/Makefile.in	2010-12-04 15:19:42.042121999 +0100
@@ -321,6 +321,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/audio_filter/channel_mixer/Makefile.in vlc-1.1.5/modules/audio_filter/channel_mixer/Makefile.in
--- vlc-1.1.5.orig//modules/audio_filter/channel_mixer/Makefile.in	2010-12-04 15:18:20.022122002 +0100
+++ vlc-1.1.5/modules/audio_filter/channel_mixer/Makefile.in	2010-12-04 15:19:42.362122003 +0100
@@ -356,6 +356,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/audio_filter/converter/Makefile.in vlc-1.1.5/modules/audio_filter/converter/Makefile.in
--- vlc-1.1.5.orig//modules/audio_filter/converter/Makefile.in	2010-12-04 15:18:20.022122002 +0100
+++ vlc-1.1.5/modules/audio_filter/converter/Makefile.in	2010-12-04 15:19:42.522121998 +0100
@@ -383,6 +383,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/audio_filter/Makefile.in vlc-1.1.5/modules/audio_filter/Makefile.in
--- vlc-1.1.5.orig//modules/audio_filter/Makefile.in	2010-12-04 15:18:20.022122002 +0100
+++ vlc-1.1.5/modules/audio_filter/Makefile.in	2010-12-04 15:19:42.202122001 +0100
@@ -405,6 +405,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/audio_filter/resampler/Makefile.in vlc-1.1.5/modules/audio_filter/resampler/Makefile.in
--- vlc-1.1.5.orig//modules/audio_filter/resampler/Makefile.in	2010-12-04 15:18:20.022122002 +0100
+++ vlc-1.1.5/modules/audio_filter/resampler/Makefile.in	2010-12-04 15:19:42.652122003 +0100
@@ -318,6 +318,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/audio_filter/spatializer/Makefile.in vlc-1.1.5/modules/audio_filter/spatializer/Makefile.in
--- vlc-1.1.5.orig//modules/audio_filter/spatializer/Makefile.in	2010-12-04 15:18:20.022122002 +0100
+++ vlc-1.1.5/modules/audio_filter/spatializer/Makefile.in	2010-12-04 15:19:42.802122003 +0100
@@ -325,6 +325,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/audio_mixer/Makefile.in vlc-1.1.5/modules/audio_mixer/Makefile.in
--- vlc-1.1.5.orig//modules/audio_mixer/Makefile.in	2010-12-04 15:18:20.902122003 +0100
+++ vlc-1.1.5/modules/audio_mixer/Makefile.in	2010-12-04 15:19:42.932122002 +0100
@@ -331,6 +331,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/audio_output/Makefile.in vlc-1.1.5/modules/audio_output/Makefile.in
--- vlc-1.1.5.orig//modules/audio_output/Makefile.in	2010-12-04 15:18:21.092122013 +0100
+++ vlc-1.1.5/modules/audio_output/Makefile.in	2010-12-04 15:19:43.142122003 +0100
@@ -436,6 +436,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/codec/avcodec/Makefile.in vlc-1.1.5/modules/codec/avcodec/Makefile.in
--- vlc-1.1.5.orig//modules/codec/avcodec/Makefile.in	2010-12-04 15:18:20.332122003 +0100
+++ vlc-1.1.5/modules/codec/avcodec/Makefile.in	2010-12-04 15:19:43.732122001 +0100
@@ -328,6 +328,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/codec/crystalhd.c vlc-1.1.5/modules/codec/crystalhd.c
--- vlc-1.1.5.orig//modules/codec/crystalhd.c	1970-01-01 01:00:00.000000000 +0100
+++ vlc-1.1.5/modules/codec/crystalhd.c	2010-12-04 15:18:29.272122004 +0100
@@ -0,0 +1,530 @@
+/*****************************************************************************
+ * Copyright © 2010 VideoLAN
+ *
+ * Authors: Jean-Baptiste Kempf <jb@videolan.org>
+ *          Narendra Sankar <nsankar@broadcom.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU Lesser General Public License as published by
+ * the Free Software Foundation; either version 2.1 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston MA 02110-1301, USA.
+ *****************************************************************************/
+
+/*****************************************************************************
+ * Preamble
+ *****************************************************************************/
+
+#ifdef HAVE_CONFIG_H
+# include "config.h"
+#endif
+
+/* VLC includes */
+#include <vlc_common.h>
+#include <vlc_plugin.h>
+#include <vlc_codec.h>
+
+#define __LINUX_USER__
+
+/* CrystalHD */
+#include <libcrystalhd/bc_dts_defs.h>
+#include <libcrystalhd/bc_dts_types.h>
+#include <libcrystalhd/libcrystalhd_if.h>
+
+#include <assert.h>
+
+/* BC pts are multiple of 100ns */
+#define TO_BC_PTS( a ) ( a * 10 + 1 )
+#define FROM_BC_PTS( a ) ((a - 1) /10)
+
+#define DEBUG_CRYSTALHD 1
+
+/*****************************************************************************
+ * Module descriptor
+ *****************************************************************************/
+static int        OpenDecoder  ( vlc_object_t * );
+static void       CloseDecoder ( vlc_object_t * );
+
+vlc_module_begin ()
+    set_category( CAT_INPUT )
+    set_subcategory( SUBCAT_INPUT_VCODEC )
+    set_description( N_("Crystal HD hardware video decoder") )
+    set_capability( "decoder", 80 )
+    set_callbacks( OpenDecoder, CloseDecoder )
+    add_shortcut( "crystalhd" )
+vlc_module_end ()
+
+/*****************************************************************************
+ * Local prototypes
+ *****************************************************************************/
+static picture_t *DecodeBlock   ( decoder_t *p_dec, block_t **pp_block );
+static void crystal_CopyPicture ( picture_t *, BC_DTS_PROC_OUT* );
+static int crystal_insert_sps_pps(decoder_t *, uint8_t *, uint32_t);
+
+/*****************************************************************************
+ * decoder_sys_t : CrysalHD decoder structure
+ *****************************************************************************/
+struct decoder_sys_t
+{
+    HANDLE bcm_handle;       /* Device Handle */
+
+    uint8_t *p_sps_pps_buf;  /* SPS/PPS buffer */
+    uint32_t i_sps_pps_size; /* SPS/PPS size */
+
+    uint32_t i_nal_size;     /* NAL header size */
+};
+
+/*****************************************************************************
+ * OpenDecoder: probe the decoder and return score
+ *****************************************************************************/
+static int OpenDecoder( vlc_object_t *p_this )
+{
+    decoder_t *p_dec = (decoder_t*)p_this;
+    decoder_sys_t *p_sys;
+
+    /* limits codecs */
+    if( p_dec->fmt_in.i_codec != VLC_CODEC_H264 &&
+        p_dec->fmt_in.i_codec != VLC_CODEC_VC1  &&
+        p_dec->fmt_in.i_codec != VLC_CODEC_WMV3 &&
+        p_dec->fmt_in.i_codec != VLC_CODEC_WMVA &&
+        p_dec->fmt_in.i_codec != VLC_CODEC_MPGV )
+    {
+        return VLC_EGENERIC;
+    }
+
+    /* Allocate the memory needed to store the decoder's structure */
+    p_sys = malloc( sizeof(*p_sys) );
+    if( !p_sys )
+        return VLC_ENOMEM;
+
+    /* Fill decoder_sys_t */
+    p_dec->p_sys          = p_sys;
+    p_sys->i_nal_size     = 4; // assume 4 byte start codes
+    p_sys->i_sps_pps_size = 0;
+    p_sys->p_sps_pps_buf  = NULL;
+
+#ifdef DEBUG_CRYSTALHD
+    msg_Dbg( p_dec, "Trying to open CrystalHD HW");
+#endif
+
+    /* Get the handle for the device */
+    if( DtsDeviceOpen( &p_sys->bcm_handle,
+                      (DTS_PLAYBACK_MODE | DTS_LOAD_FILE_PLAY_FW | DTS_SKIP_TX_CHK_CPB ) )
+                      // | DTS_DFLT_RESOLUTION(vdecRESOLUTION_720p29_97) ) )
+                     != BC_STS_SUCCESS )
+    {
+        msg_Err( p_dec, "Couldn't find and open the BCM CrystalHD device" );
+        free( p_sys );
+        return VLC_EGENERIC;
+    }
+
+#ifdef DEBUG_CRYSTALHD
+    BC_INFO_CRYSTAL info;
+    if( DtsCrystalHDVersion( p_sys->bcm_handle, &info ) == BC_STS_SUCCESS )
+    {
+        msg_Dbg( p_dec, "Using CrystalHD Driver version: %i.%i.%i, "
+            "Library version: %i.%i.%i, "
+            "Firmware version: %i.%i.%i",
+            info.drvVersion.drvRelease, info.drvVersion.drvMajor, info.drvVersion.drvMinor,
+            info.dilVersion.dilRelease, info.dilVersion.dilMajor, info.dilVersion.dilMinor,
+            info.fwVersion.fwRelease, info.fwVersion.fwMajor, info.fwVersion.fwMinor );
+    }
+#endif
+
+    /* Codec specifics */
+    uint32_t i_bcm_codec_subtype = 0;
+    switch ( p_dec->fmt_in.i_codec )
+    {
+    case VLC_CODEC_H264:
+        if( p_dec->fmt_in.i_original_fourcc == VLC_FOURCC( 'a', 'v', 'c', '1' ) )
+        {
+            i_bcm_codec_subtype = BC_MSUBTYPE_AVC1;
+            if( p_dec->fmt_in.i_extra > 0 )
+            {
+                if( crystal_insert_sps_pps( p_dec, (uint8_t*)p_dec->fmt_in.p_extra,
+                                            p_dec->fmt_in.i_extra ) != VLC_SUCCESS )
+                    goto error;
+            }
+            else
+            {
+                msg_Err( p_dec, "Missing extra infos for avc1" );
+                goto error;
+            }
+        }
+        else
+            i_bcm_codec_subtype = BC_MSUBTYPE_H264;
+        break;
+    case VLC_CODEC_VC1:
+        i_bcm_codec_subtype = BC_MSUBTYPE_VC1;
+        break;
+    case VLC_CODEC_WMV3:
+        i_bcm_codec_subtype = BC_MSUBTYPE_WMV3;
+        break;
+    case VLC_CODEC_WMVA:
+        i_bcm_codec_subtype = BC_MSUBTYPE_WMVA;
+        break;
+    case VLC_CODEC_MPGV:
+        i_bcm_codec_subtype = BC_MSUBTYPE_MPEG2VIDEO;
+        break;
+/* Not ready for production yet
+    case VLC_CODEC_MP4V:
+        i_bcm_codec_subtype = BC_MSUBTYPE_DIVX;
+        break; */
+    default:
+        assert(0);
+    }
+
+#ifdef DEBUG_CRYSTALHD
+    msg_Dbg(p_dec, "Codec type is %i", i_bcm_codec_subtype);
+#endif
+
+    /* Always YUY2 color */
+    if( DtsSetColorSpace( p_sys->bcm_handle, OUTPUT_MODE422_YUY2 ) != BC_STS_SUCCESS )
+    {
+        msg_Err( p_dec, "Couldn't set the color space. Please report this!" );
+        goto error;
+    }
+
+    /* Prepare Input for the device */
+    BC_INPUT_FORMAT p_in;
+    memset( &p_in, 0, sizeof(BC_INPUT_FORMAT) );
+    p_in.OptFlags    = 0x51; /* 0b 0 1 01 0001 */
+    p_in.mSubtype    = i_bcm_codec_subtype;
+    p_in.startCodeSz = p_sys->i_nal_size;
+    p_in.pMetaData   = p_sys->p_sps_pps_buf;
+    p_in.metaDataSz  = p_sys->i_sps_pps_size;
+    p_in.width       = p_dec->fmt_in.video.i_width;
+    p_in.height      = p_dec->fmt_in.video.i_height;
+    p_in.Progressive = true;
+
+    if( DtsSetInputFormat( p_sys->bcm_handle, &p_in ) != BC_STS_SUCCESS )
+    {
+        msg_Err( p_dec, "Couldn't set the color space. Please report this!" );
+        goto error;
+    }
+
+    /* Open a decoder */
+    if( DtsOpenDecoder( p_sys->bcm_handle, BC_STREAM_TYPE_ES ) != BC_STS_SUCCESS )
+    {
+        msg_Err( p_dec, "Couldn't open the CrystalHD decoder" );
+        goto error;
+    }
+
+    /* Start it */
+    if( DtsStartDecoder( p_sys->bcm_handle ) != BC_STS_SUCCESS )
+    {
+        msg_Err( p_dec, "Couldn't start the decoder" );
+        goto error;
+    }
+
+    if( DtsStartCapture( p_sys->bcm_handle ) != BC_STS_SUCCESS )
+    {
+        msg_Err( p_dec, "Couldn't start the capture" );
+        goto error_complete;
+    }
+
+    /* Set output properties */
+    p_dec->fmt_out.i_cat          = VIDEO_ES;
+    p_dec->fmt_out.i_codec        = VLC_CODEC_YUYV;
+    p_dec->fmt_out.video.i_width  = p_dec->fmt_in.video.i_width;
+    p_dec->fmt_out.video.i_height = p_dec->fmt_in.video.i_height;
+    p_dec->b_need_packetized      = true;
+
+    /* Set callbacks */
+    p_dec->pf_decode_video = DecodeBlock;
+
+    msg_Info( p_dec, "Opened CrystalHD hardware with success" );
+    return VLC_SUCCESS;
+
+error_complete:
+    DtsCloseDecoder( p_sys->bcm_handle );
+error:
+    DtsDeviceClose( p_sys->bcm_handle );
+    free( p_sys );
+    return VLC_EGENERIC;
+}
+
+/*****************************************************************************
+ * CloseDecoder: decoder destruction
+ *****************************************************************************/
+static void CloseDecoder( vlc_object_t *p_this )
+{
+    decoder_t *p_dec = (decoder_t *)p_this;
+    decoder_sys_t *p_sys = p_dec->p_sys;
+
+    if( DtsFlushInput( p_sys->bcm_handle, 2 ) != BC_STS_SUCCESS )
+        goto error;
+    if( DtsStopDecoder( p_sys->bcm_handle ) != BC_STS_SUCCESS )
+        goto error;
+    if( DtsCloseDecoder( p_sys->bcm_handle ) != BC_STS_SUCCESS )
+        goto error;
+    if( DtsDeviceClose( p_sys->bcm_handle ) != BC_STS_SUCCESS )
+        goto error;
+
+error:
+    free( p_sys->p_sps_pps_buf );
+#ifdef DEBUG_CRYSTALHD
+    msg_Dbg( p_dec, "done cleaning up CrystalHD" );
+#endif
+    free( p_sys );
+}
+
+/****************************************************************************
+ * DecodeBlock: the whole thing
+ ****************************************************************************/
+static picture_t *DecodeBlock( decoder_t *p_dec, block_t **pp_block )
+{
+    decoder_sys_t *p_sys = p_dec->p_sys;
+    block_t *p_block;
+
+    BC_DTS_PROC_OUT proc_out;
+    BC_DTS_STATUS driver_stat;
+
+    picture_t *p_pic;
+
+    /* First check the status of the decode to produce pictures */
+    if( DtsGetDriverStatus( p_sys->bcm_handle, &driver_stat ) != BC_STS_SUCCESS )
+        return NULL;
+
+    p_block = *pp_block;
+    if( p_block )
+    {
+        if( ( p_block->i_flags&(BLOCK_FLAG_DISCONTINUITY|BLOCK_FLAG_CORRUPTED) ) == 0 )
+        {
+            /* Valid input block, so we can send to HW to decode */
+
+            BC_STATUS status = DtsProcInput( p_sys->bcm_handle,
+                                             p_block->p_buffer,
+                                             p_block->i_buffer,
+                                             p_block->i_pts >= VLC_TS_INVALID ? TO_BC_PTS(p_block->i_pts) : 0, false );
+
+            block_Release( p_block );
+            *pp_block = NULL;
+
+            if( status != BC_STS_SUCCESS )
+                return NULL;
+        }
+    }
+#ifdef DEBUG_CRYSTALHD
+    else
+    {
+        if( driver_stat.ReadyListCount != 0 )
+            msg_Err( p_dec, " Input NULL but have pictures %u", driver_stat.ReadyListCount );
+    }
+#endif
+
+    if( driver_stat.ReadyListCount == 0 )
+        return NULL;
+
+    /* Prepare the Output structure */
+    /* We always expect and use YUY2 */
+    memset( &proc_out, 0, sizeof(BC_DTS_PROC_OUT) );
+    proc_out.PicInfo.width  = p_dec->fmt_out.video.i_width;
+    proc_out.PicInfo.height = p_dec->fmt_out.video.i_height;
+    proc_out.YbuffSz        = p_dec->fmt_out.video.i_width * p_dec->fmt_out.video.i_height  / 2;
+    proc_out.Ybuff          = malloc( proc_out.YbuffSz  * 4);               // Allocate in bytes
+    proc_out.PoutFlags      = BC_POUT_FLAGS_SIZE;                           //FIXME why?
+
+#ifdef DEBUG_CRYSTALHD
+    msg_Dbg( p_dec, "%i, %i",  p_dec->fmt_out.video.i_width, p_dec->fmt_out.video.i_height );
+#endif
+    if( !proc_out.Ybuff )
+        return NULL;
+
+    BC_STATUS sts = DtsProcOutput( p_sys->bcm_handle, 128, &proc_out );
+#ifdef DEBUG_CRYSTALHD
+    if( sts != BC_STS_SUCCESS )
+        msg_Err( p_dec, "DtsProcOutput returned %i", sts );
+#endif
+
+    uint8_t b_eos;
+    switch( sts )
+    {
+        case BC_STS_SUCCESS:
+            if( !(proc_out.PoutFlags & BC_POUT_FLAGS_PIB_VALID) )
+            {
+                msg_Dbg( p_dec, "Invalid PIB" );
+                break;
+            }
+
+            p_pic = decoder_NewPicture( p_dec );
+            if( !p_pic )
+            {
+                free( proc_out.Ybuff );
+                return NULL;
+            }
+
+            crystal_CopyPicture( p_pic, &proc_out );
+            p_pic->date = proc_out.PicInfo.timeStamp > 0 ? FROM_BC_PTS(proc_out.PicInfo.timeStamp) : VLC_TS_INVALID;
+            //p_pic->date += 100 * 1000;
+#ifdef DEBUG_CRYSTALHD
+            msg_Dbg( p_dec, "TS Output is %"PRIu64, p_pic->date);
+#endif
+            free( proc_out.Ybuff );
+            return p_pic;
+
+        case BC_STS_DEC_NOT_OPEN:
+        case BC_STS_DEC_NOT_STARTED:
+            msg_Err( p_dec, "Decoder not opened or started" );
+            break;
+
+        case BC_STS_INV_ARG:
+            msg_Warn( p_dec, "Invalid arguments. Please report" );
+            break;
+
+        case BC_STS_FMT_CHANGE:    /* Format change */
+            /* if( !(proc_out.PoutFlags & BC_POUT_FLAGS_PIB_VALID) )
+                break; */
+            p_dec->fmt_out.video.i_width  = proc_out.PicInfo.width;
+            p_dec->fmt_out.video.i_height = proc_out.PicInfo.height;
+#define setAR( a, b, c ) case a: p_dec->fmt_out.video.i_sar_num = b; p_dec->fmt_out.video.i_sar_den = c; break;
+            switch( proc_out.PicInfo.aspect_ratio )
+            {
+                setAR( vdecAspectRatioSquare, 1, 1 )
+                setAR( vdecAspectRatio12_11, 12, 11 )
+                setAR( vdecAspectRatio10_11, 10, 11 )
+                setAR( vdecAspectRatio16_11, 16, 11 )
+                setAR( vdecAspectRatio40_33, 40, 33 )
+                setAR( vdecAspectRatio24_11, 24, 11 )
+                setAR( vdecAspectRatio20_11, 20, 11 )
+                setAR( vdecAspectRatio32_11, 32, 11 )
+                setAR( vdecAspectRatio80_33, 80, 33 )
+                setAR( vdecAspectRatio18_11, 18, 11 )
+                setAR( vdecAspectRatio15_11, 15, 11 )
+                setAR( vdecAspectRatio64_33, 64, 33 )
+                setAR( vdecAspectRatio160_99, 160, 99 )
+                setAR( vdecAspectRatio4_3, 4, 3 )
+                setAR( vdecAspectRatio16_9, 16, 9 )
+                setAR( vdecAspectRatio221_1, 221, 1 )
+                default: break;
+            }
+#undef setAR
+            msg_Dbg( p_dec, "Format Change Detected [%i, %i], AR: %i/%i",
+                    proc_out.PicInfo.width, proc_out.PicInfo.height,
+                    p_dec->fmt_out.video.i_sar_num, p_dec->fmt_out.video.i_sar_den );
+            break;
+
+        /* Nothing is documented here... */
+        case BC_STS_NO_DATA:
+            if( DtsIsEndOfStream( p_sys->bcm_handle, &b_eos ) == BC_STS_SUCCESS )
+                if( b_eos )
+                    msg_Dbg( p_dec, "End of Stream" );
+            break;
+        case BC_STS_TIMEOUT:       /* Timeout */
+            msg_Err( p_dec, "ProcOutput timeout" );
+            break;
+        case BC_STS_IO_XFR_ERROR:
+        case BC_STS_IO_USER_ABORT:
+        case BC_STS_IO_ERROR:
+            msg_Err( p_dec, "ProcOutput return mode not implemented. Please report" );
+            break;
+        default:
+            msg_Err( p_dec, "Unknown return status. Please report %i", sts );
+            break;
+    }
+    free( proc_out.Ybuff );
+    return NULL;
+}
+
+/* Copy the data
+ * FIXME: this should not exist */
+static void crystal_CopyPicture ( picture_t *p_pic, BC_DTS_PROC_OUT* p_out )
+{
+    int i_dst_stride;
+    uint8_t *p_dst, *p_dst_end;
+    uint8_t *p_src = p_out->Ybuff;
+
+    p_dst         = p_pic->p[0].p_pixels;
+    i_dst_stride  = p_pic->p[0].i_pitch;
+    p_dst_end     = p_dst  + (i_dst_stride * p_out->PicInfo.height);
+
+    for( ; p_dst < p_dst_end; p_dst += i_dst_stride, p_src += (p_out->PicInfo.width * 2))
+        vlc_memcpy( p_dst, p_src, p_out->PicInfo.width * 2); // Copy in bytes
+}
+
+/* Parse the SPS/PPS Metadata to feed the decoder for avc1 */
+static int crystal_insert_sps_pps(decoder_t *p_dec, uint8_t *p_buf, uint32_t i_buf_size)
+{
+    decoder_sys_t *p_sys = p_dec->p_sys;
+    int i_profile;
+    uint32_t i_data_size = i_buf_size, i_nal_size;
+    unsigned int i_loop_end;
+
+    p_sys->i_sps_pps_size = 0;
+
+    p_sys->p_sps_pps_buf = malloc( p_dec->fmt_in.i_extra * 2 );
+    if( !p_sys->p_sps_pps_buf )
+        return VLC_ENOMEM;
+
+    /* */
+    if( i_data_size < 7 )
+    {
+        msg_Err( p_dec, "Input Metadata too small" );
+        goto error;
+    }
+
+    /* Read infos in first 6 bytes */
+    i_profile         = (p_buf[1] << 16) | (p_buf[2] << 8) | p_buf[3];
+    p_sys->i_nal_size = (p_buf[4] & 0x03) + 1;
+    i_loop_end        = p_buf[5] & 0x1f;
+    p_buf += 6;
+    i_data_size -= 6;
+
+    for ( unsigned int j = 0; j < 2; j++ )
+    {
+        /* First time is SPS, Second is PPS */
+        if( j != 0 )
+        {
+            if (i_data_size < 1) {
+                msg_Err( p_dec, "PPS too small after processing SPS %u", i_data_size );
+                goto error;
+            }
+            i_loop_end = p_buf[0];
+            p_buf++; i_data_size--;
+        }
+        for ( unsigned int i = 0; i < i_loop_end; i++)
+        {
+            if (i_data_size < 2 ) {
+                msg_Err( p_dec, "SPS is too small %u", i_data_size );
+                goto error;
+            }
+
+            i_nal_size = (p_buf[0] << 8) | p_buf[1];
+            p_buf += 2;
+            i_data_size -= 2;
+
+            if (i_data_size < i_nal_size ) {
+                msg_Err( p_dec, "SPS size does not match NAL specified size %u", i_data_size );
+                goto error;
+            }
+
+            p_sys->p_sps_pps_buf[p_sys->i_sps_pps_size*j+0] = 0;
+            p_sys->p_sps_pps_buf[p_sys->i_sps_pps_size*j+1] = 0;
+            p_sys->p_sps_pps_buf[p_sys->i_sps_pps_size*j+2] = 0;
+            p_sys->p_sps_pps_buf[p_sys->i_sps_pps_size*j+3] = 1;
+
+            p_sys->i_sps_pps_size += 4;
+
+            memcpy(p_sys->p_sps_pps_buf + p_sys->i_sps_pps_size, p_buf, i_nal_size);
+            p_sys->i_sps_pps_size += i_nal_size;
+
+            p_buf += i_nal_size;
+            i_data_size -= i_nal_size;
+        }
+    }
+
+    return VLC_SUCCESS;
+
+error:
+    free( p_sys->p_sps_pps_buf );
+    p_sys->p_sps_pps_buf = NULL;
+    return VLC_ENOMEM;
+}
diff -Naur vlc-1.1.5.orig//modules/codec/dmo/Makefile.in vlc-1.1.5/modules/codec/dmo/Makefile.in
--- vlc-1.1.5.orig//modules/codec/dmo/Makefile.in	2010-12-04 15:18:20.312122001 +0100
+++ vlc-1.1.5/modules/codec/dmo/Makefile.in	2010-12-04 15:19:43.862122000 +0100
@@ -304,6 +304,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/codec/Makefile.am vlc-1.1.5/modules/codec/Makefile.am
--- vlc-1.1.5.orig//modules/codec/Makefile.am	2010-12-04 15:18:20.322122002 +0100
+++ vlc-1.1.5/modules/codec/Makefile.am	2010-12-04 15:19:08.472122001 +0100
@@ -3,9 +3,9 @@
 
 basedir = codec
 dir = codec
-mods = a52 adpcm aes3 araw cc cdg cvdsub dirac dts dvbsub faad fake flac fluidsynth invmem kate libass libmpeg2 lpcm mash mpeg_audio png quicktime rawvideo realvideo schroedinger sdl_image speex svcdsub telx theora tremor twolame vorbis x264 zvbi
-libvlc_LTLIBRARIES =  $(LTLIBdirac) $(LTLIBfaad) $(LTLIBflac) $(LTLIBfluidsynth) $(LTLIBkate) $(LTLIBlibass) $(LTLIBlibmpeg2) $(LTLIBmash) $(LTLIBpng) $(LTLIBquicktime) $(LTLIBrealvideo) $(LTLIBschroedinger) $(LTLIBsdl_image) $(LTLIBspeex) $(LTLIBtelx) $(LTLIBtheora) $(LTLIBtremor) $(LTLIBtwolame) $(LTLIBvorbis) $(LTLIBx264) $(LTLIBzvbi)
-EXTRA_LTLIBRARIES =  libdirac_plugin.la libfaad_plugin.la libflac_plugin.la libfluidsynth_plugin.la libkate_plugin.la liblibass_plugin.la liblibmpeg2_plugin.la libmash_plugin.la libpng_plugin.la libquicktime_plugin.la librealvideo_plugin.la libschroedinger_plugin.la libsdl_image_plugin.la libspeex_plugin.la libtelx_plugin.la libtheora_plugin.la libtremor_plugin.la libtwolame_plugin.la libvorbis_plugin.la libx264_plugin.la libzvbi_plugin.la
+mods = a52 adpcm aes3 araw cc cdg crystalhd cvdsub dirac dts dvbsub faad fake flac fluidsynth invmem kate libass libmpeg2 lpcm mash mpeg_audio png quicktime rawvideo realvideo schroedinger sdl_image speex svcdsub telx theora tremor twolame vorbis x264 zvbi
+libvlc_LTLIBRARIES =  $(LTLIBcrystalhd) $(LTLIBdirac) $(LTLIBfaad) $(LTLIBflac) $(LTLIBfluidsynth) $(LTLIBkate) $(LTLIBlibass) $(LTLIBlibmpeg2) $(LTLIBmash) $(LTLIBpng) $(LTLIBquicktime) $(LTLIBrealvideo) $(LTLIBschroedinger) $(LTLIBsdl_image) $(LTLIBspeex) $(LTLIBtelx) $(LTLIBtheora) $(LTLIBtremor) $(LTLIBtwolame) $(LTLIBvorbis) $(LTLIBx264) $(LTLIBzvbi)
+EXTRA_LTLIBRARIES =  libcrystalhd_plugin.la libdirac_plugin.la libfaad_plugin.la libflac_plugin.la libfluidsynth_plugin.la libkate_plugin.la liblibass_plugin.la liblibmpeg2_plugin.la libmash_plugin.la libpng_plugin.la libquicktime_plugin.la librealvideo_plugin.la libschroedinger_plugin.la libsdl_image_plugin.la libspeex_plugin.la libtelx_plugin.la libtheora_plugin.la libtremor_plugin.la libtwolame_plugin.la libvorbis_plugin.la libx264_plugin.la libzvbi_plugin.la
 
 include $(top_srcdir)/modules/common.am
 
@@ -75,6 +75,17 @@
 libcdg_plugin_la_LIBADD = $(AM_LIBADD)
 libcdg_plugin_la_DEPENDENCIES = $(top_srcdir)/src/libvlccore.sym
 
+# The crystalhd plugin
+libcrystalhd_plugin_la_SOURCES = $(SOURCES_crystalhd)
+nodist_libcrystalhd_plugin_la_SOURCES = $(nodist_SOURCES_crystalhd)
+# Force per-target objects:
+libcrystalhd_plugin_la_CFLAGS = $(AM_CFLAGS)
+libcrystalhd_plugin_la_CXXFLAGS = $(AM_CXXFLAGS)
+libcrystalhd_plugin_la_OBJCFLAGS = $(AM_OBJCFLAGS)
+# Set LIBADD and DEPENDENCIES manually:
+libcrystalhd_plugin_la_LIBADD = $(AM_LIBADD)
+libcrystalhd_plugin_la_DEPENDENCIES = $(top_srcdir)/src/libvlccore.sym
+
 # The cvdsub plugin
 libcvdsub_plugin_la_SOURCES = $(SOURCES_cvdsub)
 nodist_libcvdsub_plugin_la_SOURCES = $(nodist_SOURCES_cvdsub)
diff -Naur vlc-1.1.5.orig//modules/codec/Makefile.in vlc-1.1.5/modules/codec/Makefile.in
--- vlc-1.1.5.orig//modules/codec/Makefile.in	2010-12-04 15:18:20.312122001 +0100
+++ vlc-1.1.5/modules/codec/Makefile.in	2010-12-04 15:19:43.562122008 +0100
@@ -146,8 +146,17 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libcdg_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) \
 	-o $@
-am__objects_7 = libcvdsub_plugin_la-cvdsub.lo
-am_libcvdsub_plugin_la_OBJECTS = $(am__objects_7)
+am__objects_7 = libcrystalhd_plugin_la-crystalhd.lo
+am_libcrystalhd_plugin_la_OBJECTS = $(am__objects_7)
+nodist_libcrystalhd_plugin_la_OBJECTS =
+libcrystalhd_plugin_la_OBJECTS = $(am_libcrystalhd_plugin_la_OBJECTS) \
+	$(nodist_libcrystalhd_plugin_la_OBJECTS)
+libcrystalhd_plugin_la_LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC \
+	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
+	$(libcrystalhd_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
+	$(LDFLAGS) -o $@
+am__objects_8 = libcvdsub_plugin_la-cvdsub.lo
+am_libcvdsub_plugin_la_OBJECTS = $(am__objects_8)
 nodist_libcvdsub_plugin_la_OBJECTS =
 libcvdsub_plugin_la_OBJECTS = $(am_libcvdsub_plugin_la_OBJECTS) \
 	$(nodist_libcvdsub_plugin_la_OBJECTS)
@@ -155,8 +164,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libcvdsub_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_8 = libdirac_plugin_la-dirac.lo
-am_libdirac_plugin_la_OBJECTS = $(am__objects_8)
+am__objects_9 = libdirac_plugin_la-dirac.lo
+am_libdirac_plugin_la_OBJECTS = $(am__objects_9)
 nodist_libdirac_plugin_la_OBJECTS =
 libdirac_plugin_la_OBJECTS = $(am_libdirac_plugin_la_OBJECTS) \
 	$(nodist_libdirac_plugin_la_OBJECTS)
@@ -164,8 +173,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libdirac_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_9 = libdts_plugin_la-dts.lo
-am_libdts_plugin_la_OBJECTS = $(am__objects_9)
+am__objects_10 = libdts_plugin_la-dts.lo
+am_libdts_plugin_la_OBJECTS = $(am__objects_10)
 nodist_libdts_plugin_la_OBJECTS =
 libdts_plugin_la_OBJECTS = $(am_libdts_plugin_la_OBJECTS) \
 	$(nodist_libdts_plugin_la_OBJECTS)
@@ -173,8 +182,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libdts_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) \
 	-o $@
-am__objects_10 = libdvbsub_plugin_la-dvbsub.lo
-am_libdvbsub_plugin_la_OBJECTS = $(am__objects_10)
+am__objects_11 = libdvbsub_plugin_la-dvbsub.lo
+am_libdvbsub_plugin_la_OBJECTS = $(am__objects_11)
 nodist_libdvbsub_plugin_la_OBJECTS =
 libdvbsub_plugin_la_OBJECTS = $(am_libdvbsub_plugin_la_OBJECTS) \
 	$(nodist_libdvbsub_plugin_la_OBJECTS)
@@ -182,8 +191,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libdvbsub_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_11 = libfaad_plugin_la-faad.lo
-am_libfaad_plugin_la_OBJECTS = $(am__objects_11)
+am__objects_12 = libfaad_plugin_la-faad.lo
+am_libfaad_plugin_la_OBJECTS = $(am__objects_12)
 nodist_libfaad_plugin_la_OBJECTS =
 libfaad_plugin_la_OBJECTS = $(am_libfaad_plugin_la_OBJECTS) \
 	$(nodist_libfaad_plugin_la_OBJECTS)
@@ -191,8 +200,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libfaad_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) \
 	-o $@
-am__objects_12 = libfake_plugin_la-fake.lo
-am_libfake_plugin_la_OBJECTS = $(am__objects_12)
+am__objects_13 = libfake_plugin_la-fake.lo
+am_libfake_plugin_la_OBJECTS = $(am__objects_13)
 nodist_libfake_plugin_la_OBJECTS =
 libfake_plugin_la_OBJECTS = $(am_libfake_plugin_la_OBJECTS) \
 	$(nodist_libfake_plugin_la_OBJECTS)
@@ -200,8 +209,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libfake_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) \
 	-o $@
-am__objects_13 = libflac_plugin_la-flac.lo
-am_libflac_plugin_la_OBJECTS = $(am__objects_13)
+am__objects_14 = libflac_plugin_la-flac.lo
+am_libflac_plugin_la_OBJECTS = $(am__objects_14)
 nodist_libflac_plugin_la_OBJECTS =
 libflac_plugin_la_OBJECTS = $(am_libflac_plugin_la_OBJECTS) \
 	$(nodist_libflac_plugin_la_OBJECTS)
@@ -209,8 +218,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libflac_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) \
 	-o $@
-am__objects_14 = libfluidsynth_plugin_la-fluidsynth.lo
-am_libfluidsynth_plugin_la_OBJECTS = $(am__objects_14)
+am__objects_15 = libfluidsynth_plugin_la-fluidsynth.lo
+am_libfluidsynth_plugin_la_OBJECTS = $(am__objects_15)
 nodist_libfluidsynth_plugin_la_OBJECTS =
 libfluidsynth_plugin_la_OBJECTS =  \
 	$(am_libfluidsynth_plugin_la_OBJECTS) \
@@ -219,8 +228,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libfluidsynth_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_15 = libinvmem_plugin_la-invmem.lo
-am_libinvmem_plugin_la_OBJECTS = $(am__objects_15)
+am__objects_16 = libinvmem_plugin_la-invmem.lo
+am_libinvmem_plugin_la_OBJECTS = $(am__objects_16)
 nodist_libinvmem_plugin_la_OBJECTS =
 libinvmem_plugin_la_OBJECTS = $(am_libinvmem_plugin_la_OBJECTS) \
 	$(nodist_libinvmem_plugin_la_OBJECTS)
@@ -228,8 +237,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libinvmem_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_16 = libkate_plugin_la-kate.lo
-am_libkate_plugin_la_OBJECTS = $(am__objects_16)
+am__objects_17 = libkate_plugin_la-kate.lo
+am_libkate_plugin_la_OBJECTS = $(am__objects_17)
 nodist_libkate_plugin_la_OBJECTS =
 libkate_plugin_la_OBJECTS = $(am_libkate_plugin_la_OBJECTS) \
 	$(nodist_libkate_plugin_la_OBJECTS)
@@ -237,8 +246,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libkate_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) \
 	-o $@
-am__objects_17 = liblibass_plugin_la-libass.lo
-am_liblibass_plugin_la_OBJECTS = $(am__objects_17)
+am__objects_18 = liblibass_plugin_la-libass.lo
+am_liblibass_plugin_la_OBJECTS = $(am__objects_18)
 nodist_liblibass_plugin_la_OBJECTS =
 liblibass_plugin_la_OBJECTS = $(am_liblibass_plugin_la_OBJECTS) \
 	$(nodist_liblibass_plugin_la_OBJECTS)
@@ -246,8 +255,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(liblibass_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_18 = liblibmpeg2_plugin_la-libmpeg2.lo
-am_liblibmpeg2_plugin_la_OBJECTS = $(am__objects_18)
+am__objects_19 = liblibmpeg2_plugin_la-libmpeg2.lo
+am_liblibmpeg2_plugin_la_OBJECTS = $(am__objects_19)
 nodist_liblibmpeg2_plugin_la_OBJECTS =
 liblibmpeg2_plugin_la_OBJECTS = $(am_liblibmpeg2_plugin_la_OBJECTS) \
 	$(nodist_liblibmpeg2_plugin_la_OBJECTS)
@@ -255,8 +264,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(liblibmpeg2_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_19 = liblpcm_plugin_la-lpcm.lo
-am_liblpcm_plugin_la_OBJECTS = $(am__objects_19)
+am__objects_20 = liblpcm_plugin_la-lpcm.lo
+am_liblpcm_plugin_la_OBJECTS = $(am__objects_20)
 nodist_liblpcm_plugin_la_OBJECTS =
 liblpcm_plugin_la_OBJECTS = $(am_liblpcm_plugin_la_OBJECTS) \
 	$(nodist_liblpcm_plugin_la_OBJECTS)
@@ -264,8 +273,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(liblpcm_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) \
 	-o $@
-am__objects_20 = libmash_plugin_la-mash.lo
-am_libmash_plugin_la_OBJECTS = $(am__objects_20)
+am__objects_21 = libmash_plugin_la-mash.lo
+am_libmash_plugin_la_OBJECTS = $(am__objects_21)
 nodist_libmash_plugin_la_OBJECTS =
 libmash_plugin_la_OBJECTS = $(am_libmash_plugin_la_OBJECTS) \
 	$(nodist_libmash_plugin_la_OBJECTS)
@@ -273,8 +282,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CXXLD) \
 	$(libmash_plugin_la_CXXFLAGS) $(CXXFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_21 = libmpeg_audio_plugin_la-mpeg_audio.lo
-am_libmpeg_audio_plugin_la_OBJECTS = $(am__objects_21)
+am__objects_22 = libmpeg_audio_plugin_la-mpeg_audio.lo
+am_libmpeg_audio_plugin_la_OBJECTS = $(am__objects_22)
 nodist_libmpeg_audio_plugin_la_OBJECTS =
 libmpeg_audio_plugin_la_OBJECTS =  \
 	$(am_libmpeg_audio_plugin_la_OBJECTS) \
@@ -283,8 +292,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libmpeg_audio_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_22 = libpng_plugin_la-png.lo
-am_libpng_plugin_la_OBJECTS = $(am__objects_22)
+am__objects_23 = libpng_plugin_la-png.lo
+am_libpng_plugin_la_OBJECTS = $(am__objects_23)
 nodist_libpng_plugin_la_OBJECTS =
 libpng_plugin_la_OBJECTS = $(am_libpng_plugin_la_OBJECTS) \
 	$(nodist_libpng_plugin_la_OBJECTS)
@@ -292,8 +301,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libpng_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) \
 	-o $@
-am__objects_23 = libquicktime_plugin_la-quicktime.lo
-am_libquicktime_plugin_la_OBJECTS = $(am__objects_23)
+am__objects_24 = libquicktime_plugin_la-quicktime.lo
+am_libquicktime_plugin_la_OBJECTS = $(am__objects_24)
 nodist_libquicktime_plugin_la_OBJECTS =
 libquicktime_plugin_la_OBJECTS = $(am_libquicktime_plugin_la_OBJECTS) \
 	$(nodist_libquicktime_plugin_la_OBJECTS)
@@ -301,8 +310,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libquicktime_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_24 = librawvideo_plugin_la-rawvideo.lo
-am_librawvideo_plugin_la_OBJECTS = $(am__objects_24)
+am__objects_25 = librawvideo_plugin_la-rawvideo.lo
+am_librawvideo_plugin_la_OBJECTS = $(am__objects_25)
 nodist_librawvideo_plugin_la_OBJECTS =
 librawvideo_plugin_la_OBJECTS = $(am_librawvideo_plugin_la_OBJECTS) \
 	$(nodist_librawvideo_plugin_la_OBJECTS)
@@ -310,8 +319,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(librawvideo_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_25 = librealvideo_plugin_la-realvideo.lo
-am_librealvideo_plugin_la_OBJECTS = $(am__objects_25)
+am__objects_26 = librealvideo_plugin_la-realvideo.lo
+am_librealvideo_plugin_la_OBJECTS = $(am__objects_26)
 nodist_librealvideo_plugin_la_OBJECTS =
 librealvideo_plugin_la_OBJECTS = $(am_librealvideo_plugin_la_OBJECTS) \
 	$(nodist_librealvideo_plugin_la_OBJECTS)
@@ -319,8 +328,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(librealvideo_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_26 = libschroedinger_plugin_la-schroedinger.lo
-am_libschroedinger_plugin_la_OBJECTS = $(am__objects_26)
+am__objects_27 = libschroedinger_plugin_la-schroedinger.lo
+am_libschroedinger_plugin_la_OBJECTS = $(am__objects_27)
 nodist_libschroedinger_plugin_la_OBJECTS =
 libschroedinger_plugin_la_OBJECTS =  \
 	$(am_libschroedinger_plugin_la_OBJECTS) \
@@ -329,8 +338,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libschroedinger_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_27 = libsdl_image_plugin_la-sdl_image.lo
-am_libsdl_image_plugin_la_OBJECTS = $(am__objects_27)
+am__objects_28 = libsdl_image_plugin_la-sdl_image.lo
+am_libsdl_image_plugin_la_OBJECTS = $(am__objects_28)
 nodist_libsdl_image_plugin_la_OBJECTS =
 libsdl_image_plugin_la_OBJECTS = $(am_libsdl_image_plugin_la_OBJECTS) \
 	$(nodist_libsdl_image_plugin_la_OBJECTS)
@@ -338,8 +347,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libsdl_image_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_28 = libspeex_plugin_la-speex.lo
-am_libspeex_plugin_la_OBJECTS = $(am__objects_28)
+am__objects_29 = libspeex_plugin_la-speex.lo
+am_libspeex_plugin_la_OBJECTS = $(am__objects_29)
 nodist_libspeex_plugin_la_OBJECTS =
 libspeex_plugin_la_OBJECTS = $(am_libspeex_plugin_la_OBJECTS) \
 	$(nodist_libspeex_plugin_la_OBJECTS)
@@ -347,8 +356,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libspeex_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_29 = libsvcdsub_plugin_la-svcdsub.lo
-am_libsvcdsub_plugin_la_OBJECTS = $(am__objects_29)
+am__objects_30 = libsvcdsub_plugin_la-svcdsub.lo
+am_libsvcdsub_plugin_la_OBJECTS = $(am__objects_30)
 nodist_libsvcdsub_plugin_la_OBJECTS =
 libsvcdsub_plugin_la_OBJECTS = $(am_libsvcdsub_plugin_la_OBJECTS) \
 	$(nodist_libsvcdsub_plugin_la_OBJECTS)
@@ -356,8 +365,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libsvcdsub_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_30 = libtelx_plugin_la-telx.lo
-am_libtelx_plugin_la_OBJECTS = $(am__objects_30)
+am__objects_31 = libtelx_plugin_la-telx.lo
+am_libtelx_plugin_la_OBJECTS = $(am__objects_31)
 nodist_libtelx_plugin_la_OBJECTS =
 libtelx_plugin_la_OBJECTS = $(am_libtelx_plugin_la_OBJECTS) \
 	$(nodist_libtelx_plugin_la_OBJECTS)
@@ -365,8 +374,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libtelx_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) \
 	-o $@
-am__objects_31 = libtheora_plugin_la-theora.lo
-am_libtheora_plugin_la_OBJECTS = $(am__objects_31)
+am__objects_32 = libtheora_plugin_la-theora.lo
+am_libtheora_plugin_la_OBJECTS = $(am__objects_32)
 nodist_libtheora_plugin_la_OBJECTS =
 libtheora_plugin_la_OBJECTS = $(am_libtheora_plugin_la_OBJECTS) \
 	$(nodist_libtheora_plugin_la_OBJECTS)
@@ -374,8 +383,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libtheora_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_32 = libtremor_plugin_la-vorbis.lo
-am_libtremor_plugin_la_OBJECTS = $(am__objects_32)
+am__objects_33 = libtremor_plugin_la-vorbis.lo
+am_libtremor_plugin_la_OBJECTS = $(am__objects_33)
 nodist_libtremor_plugin_la_OBJECTS =
 libtremor_plugin_la_OBJECTS = $(am_libtremor_plugin_la_OBJECTS) \
 	$(nodist_libtremor_plugin_la_OBJECTS)
@@ -383,8 +392,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libtremor_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_33 = libtwolame_plugin_la-twolame.lo
-am_libtwolame_plugin_la_OBJECTS = $(am__objects_33)
+am__objects_34 = libtwolame_plugin_la-twolame.lo
+am_libtwolame_plugin_la_OBJECTS = $(am__objects_34)
 nodist_libtwolame_plugin_la_OBJECTS =
 libtwolame_plugin_la_OBJECTS = $(am_libtwolame_plugin_la_OBJECTS) \
 	$(nodist_libtwolame_plugin_la_OBJECTS)
@@ -392,8 +401,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libtwolame_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_34 = libvorbis_plugin_la-vorbis.lo
-am_libvorbis_plugin_la_OBJECTS = $(am__objects_34)
+am__objects_35 = libvorbis_plugin_la-vorbis.lo
+am_libvorbis_plugin_la_OBJECTS = $(am__objects_35)
 nodist_libvorbis_plugin_la_OBJECTS =
 libvorbis_plugin_la_OBJECTS = $(am_libvorbis_plugin_la_OBJECTS) \
 	$(nodist_libvorbis_plugin_la_OBJECTS)
@@ -401,8 +410,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libvorbis_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-am__objects_35 = libx264_plugin_la-x264.lo
-am_libx264_plugin_la_OBJECTS = $(am__objects_35)
+am__objects_36 = libx264_plugin_la-x264.lo
+am_libx264_plugin_la_OBJECTS = $(am__objects_36)
 nodist_libx264_plugin_la_OBJECTS =
 libx264_plugin_la_OBJECTS = $(am_libx264_plugin_la_OBJECTS) \
 	$(nodist_libx264_plugin_la_OBJECTS)
@@ -410,8 +419,8 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(libx264_plugin_la_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) \
 	-o $@
-am__objects_36 = libzvbi_plugin_la-zvbi.lo
-am_libzvbi_plugin_la_OBJECTS = $(am__objects_36)
+am__objects_37 = libzvbi_plugin_la-zvbi.lo
+am_libzvbi_plugin_la_OBJECTS = $(am__objects_37)
 nodist_libzvbi_plugin_la_OBJECTS =
 libzvbi_plugin_la_OBJECTS = $(am_libzvbi_plugin_la_OBJECTS) \
 	$(nodist_libzvbi_plugin_la_OBJECTS)
@@ -471,6 +480,8 @@
 	$(nodist_libaraw_plugin_la_SOURCES) $(libcc_plugin_la_SOURCES) \
 	$(nodist_libcc_plugin_la_SOURCES) $(libcdg_plugin_la_SOURCES) \
 	$(nodist_libcdg_plugin_la_SOURCES) \
+	$(libcrystalhd_plugin_la_SOURCES) \
+	$(nodist_libcrystalhd_plugin_la_SOURCES) \
 	$(libcvdsub_plugin_la_SOURCES) \
 	$(nodist_libcvdsub_plugin_la_SOURCES) \
 	$(libdirac_plugin_la_SOURCES) \
@@ -532,10 +543,11 @@
 DIST_SOURCES = $(liba52_plugin_la_SOURCES) \
 	$(libadpcm_plugin_la_SOURCES) $(libaes3_plugin_la_SOURCES) \
 	$(libaraw_plugin_la_SOURCES) $(libcc_plugin_la_SOURCES) \
-	$(libcdg_plugin_la_SOURCES) $(libcvdsub_plugin_la_SOURCES) \
-	$(libdirac_plugin_la_SOURCES) $(libdts_plugin_la_SOURCES) \
-	$(libdvbsub_plugin_la_SOURCES) $(libfaad_plugin_la_SOURCES) \
-	$(libfake_plugin_la_SOURCES) $(libflac_plugin_la_SOURCES) \
+	$(libcdg_plugin_la_SOURCES) $(libcrystalhd_plugin_la_SOURCES) \
+	$(libcvdsub_plugin_la_SOURCES) $(libdirac_plugin_la_SOURCES) \
+	$(libdts_plugin_la_SOURCES) $(libdvbsub_plugin_la_SOURCES) \
+	$(libfaad_plugin_la_SOURCES) $(libfake_plugin_la_SOURCES) \
+	$(libflac_plugin_la_SOURCES) \
 	$(libfluidsynth_plugin_la_SOURCES) \
 	$(libinvmem_plugin_la_SOURCES) $(libkate_plugin_la_SOURCES) \
 	$(liblibass_plugin_la_SOURCES) \
@@ -764,6 +776,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
@@ -1099,9 +1112,9 @@
 vlclibdir = @vlclibdir@
 basedir = codec
 dir = codec
-mods = a52 adpcm aes3 araw cc cdg cvdsub dirac dts dvbsub faad fake flac fluidsynth invmem kate libass libmpeg2 lpcm mash mpeg_audio png quicktime rawvideo realvideo schroedinger sdl_image speex svcdsub telx theora tremor twolame vorbis x264 zvbi
-libvlc_LTLIBRARIES = $(LTLIBdirac) $(LTLIBfaad) $(LTLIBflac) \
-	$(LTLIBfluidsynth) $(LTLIBkate) $(LTLIBlibass) \
+mods = a52 adpcm aes3 araw cc cdg crystalhd cvdsub dirac dts dvbsub faad fake flac fluidsynth invmem kate libass libmpeg2 lpcm mash mpeg_audio png quicktime rawvideo realvideo schroedinger sdl_image speex svcdsub telx theora tremor twolame vorbis x264 zvbi
+libvlc_LTLIBRARIES = $(LTLIBcrystalhd) $(LTLIBdirac) $(LTLIBfaad) \
+	$(LTLIBflac) $(LTLIBfluidsynth) $(LTLIBkate) $(LTLIBlibass) \
 	$(LTLIBlibmpeg2) $(LTLIBmash) $(LTLIBpng) $(LTLIBquicktime) \
 	$(LTLIBrealvideo) $(LTLIBschroedinger) $(LTLIBsdl_image) \
 	$(LTLIBspeex) $(LTLIBtelx) $(LTLIBtheora) $(LTLIBtremor) \
@@ -1112,7 +1125,7 @@
 	libdvbsub_plugin.la liblpcm_plugin.la libmpeg_audio_plugin.la \
 	librawvideo_plugin.la libsvcdsub_plugin.la libinvmem_plugin.la \
 	$(NULL)
-EXTRA_LTLIBRARIES = libdirac_plugin.la libfaad_plugin.la libflac_plugin.la libfluidsynth_plugin.la libkate_plugin.la liblibass_plugin.la liblibmpeg2_plugin.la libmash_plugin.la libpng_plugin.la libquicktime_plugin.la librealvideo_plugin.la libschroedinger_plugin.la libsdl_image_plugin.la libspeex_plugin.la libtelx_plugin.la libtheora_plugin.la libtremor_plugin.la libtwolame_plugin.la libvorbis_plugin.la libx264_plugin.la libzvbi_plugin.la
+EXTRA_LTLIBRARIES = libcrystalhd_plugin.la libdirac_plugin.la libfaad_plugin.la libflac_plugin.la libfluidsynth_plugin.la libkate_plugin.la liblibass_plugin.la liblibmpeg2_plugin.la libmash_plugin.la libpng_plugin.la libquicktime_plugin.la librealvideo_plugin.la libschroedinger_plugin.la libsdl_image_plugin.la libspeex_plugin.la libtelx_plugin.la libtheora_plugin.la libtremor_plugin.la libtwolame_plugin.la libvorbis_plugin.la libx264_plugin.la libzvbi_plugin.la
 NULL = 
 SUFFIXES = 
 libvlcdir = $(vlclibdir)/plugins/$(basedir)
@@ -1171,6 +1184,7 @@
 SOURCES_schroedinger = schroedinger.c
 SOURCES_libass = libass.c
 SOURCES_aes3 = aes3.c
+SOURCES_crystalhd = crystalhd.c
 
 # The a52 plugin
 liba52_plugin_la_SOURCES = $(SOURCES_a52)
@@ -1238,6 +1252,17 @@
 libcdg_plugin_la_LIBADD = $(AM_LIBADD)
 libcdg_plugin_la_DEPENDENCIES = $(top_srcdir)/src/libvlccore.sym
 
+# The crystalhd plugin
+libcrystalhd_plugin_la_SOURCES = $(SOURCES_crystalhd)
+nodist_libcrystalhd_plugin_la_SOURCES = $(nodist_SOURCES_crystalhd)
+# Force per-target objects:
+libcrystalhd_plugin_la_CFLAGS = $(AM_CFLAGS)
+libcrystalhd_plugin_la_CXXFLAGS = $(AM_CXXFLAGS)
+libcrystalhd_plugin_la_OBJCFLAGS = $(AM_OBJCFLAGS)
+# Set LIBADD and DEPENDENCIES manually:
+libcrystalhd_plugin_la_LIBADD = $(AM_LIBADD)
+libcrystalhd_plugin_la_DEPENDENCIES = $(top_srcdir)/src/libvlccore.sym
+
 # The cvdsub plugin
 libcvdsub_plugin_la_SOURCES = $(SOURCES_cvdsub)
 nodist_libcvdsub_plugin_la_SOURCES = $(nodist_SOURCES_cvdsub)
@@ -1645,6 +1670,8 @@
 	$(AM_V_CCLD)$(libcc_plugin_la_LINK) -rpath $(libvlcdir) $(libcc_plugin_la_OBJECTS) $(libcc_plugin_la_LIBADD) $(LIBS)
 libcdg_plugin.la: $(libcdg_plugin_la_OBJECTS) $(libcdg_plugin_la_DEPENDENCIES) 
 	$(AM_V_CCLD)$(libcdg_plugin_la_LINK) -rpath $(libvlcdir) $(libcdg_plugin_la_OBJECTS) $(libcdg_plugin_la_LIBADD) $(LIBS)
+libcrystalhd_plugin.la: $(libcrystalhd_plugin_la_OBJECTS) $(libcrystalhd_plugin_la_DEPENDENCIES) 
+	$(AM_V_CCLD)$(libcrystalhd_plugin_la_LINK)  $(libcrystalhd_plugin_la_OBJECTS) $(libcrystalhd_plugin_la_LIBADD) $(LIBS)
 libcvdsub_plugin.la: $(libcvdsub_plugin_la_OBJECTS) $(libcvdsub_plugin_la_DEPENDENCIES) 
 	$(AM_V_CCLD)$(libcvdsub_plugin_la_LINK) -rpath $(libvlcdir) $(libcvdsub_plugin_la_OBJECTS) $(libcvdsub_plugin_la_LIBADD) $(LIBS)
 libdirac_plugin.la: $(libdirac_plugin_la_OBJECTS) $(libdirac_plugin_la_DEPENDENCIES) 
@@ -1718,6 +1745,7 @@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libaraw_plugin_la-araw.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libcc_plugin_la-cc.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libcdg_plugin_la-cdg.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libcrystalhd_plugin_la-crystalhd.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libcvdsub_plugin_la-cvdsub.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libdirac_plugin_la-dirac.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libdts_plugin_la-dts.Plo@am__quote@
@@ -1821,6 +1849,14 @@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCC_FALSE@	$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libcdg_plugin_la_CFLAGS) $(CFLAGS) -c -o libcdg_plugin_la-cdg.lo `test -f 'cdg.c' || echo '$(srcdir)/'`cdg.c
 
+libcrystalhd_plugin_la-crystalhd.lo: crystalhd.c
+@am__fastdepCC_TRUE@	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libcrystalhd_plugin_la_CFLAGS) $(CFLAGS) -MT libcrystalhd_plugin_la-crystalhd.lo -MD -MP -MF $(DEPDIR)/libcrystalhd_plugin_la-crystalhd.Tpo -c -o libcrystalhd_plugin_la-crystalhd.lo `test -f 'crystalhd.c' || echo '$(srcdir)/'`crystalhd.c
+@am__fastdepCC_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/libcrystalhd_plugin_la-crystalhd.Tpo $(DEPDIR)/libcrystalhd_plugin_la-crystalhd.Plo
+@am__fastdepCC_FALSE@	$(AM_V_CC) @AM_BACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='crystalhd.c' object='libcrystalhd_plugin_la-crystalhd.lo' libtool=yes @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libcrystalhd_plugin_la_CFLAGS) $(CFLAGS) -c -o libcrystalhd_plugin_la-crystalhd.lo `test -f 'crystalhd.c' || echo '$(srcdir)/'`crystalhd.c
+
 libcvdsub_plugin_la-cvdsub.lo: cvdsub.c
 @am__fastdepCC_TRUE@	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libcvdsub_plugin_la_CFLAGS) $(CFLAGS) -MT libcvdsub_plugin_la-cvdsub.lo -MD -MP -MF $(DEPDIR)/libcvdsub_plugin_la-cvdsub.Tpo -c -o libcvdsub_plugin_la-cvdsub.lo `test -f 'cvdsub.c' || echo '$(srcdir)/'`cvdsub.c
 @am__fastdepCC_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/libcvdsub_plugin_la-cvdsub.Tpo $(DEPDIR)/libcvdsub_plugin_la-cvdsub.Plo
diff -Naur vlc-1.1.5.orig//modules/codec/Modules.am vlc-1.1.5/modules/codec/Modules.am
--- vlc-1.1.5.orig//modules/codec/Modules.am	2010-12-04 15:18:20.312122001 +0100
+++ vlc-1.1.5/modules/codec/Modules.am	2010-12-04 15:18:52.542121993 +0100
@@ -35,6 +35,7 @@
 SOURCES_schroedinger = schroedinger.c
 SOURCES_libass = libass.c
 SOURCES_aes3 = aes3.c
+SOURCES_crystalhd = crystalhd.c
 
 libvlc_LTLIBRARIES += \
 	liba52_plugin.la \
diff -Naur vlc-1.1.5.orig//modules/codec/omxil/Makefile.in vlc-1.1.5/modules/codec/omxil/Makefile.in
--- vlc-1.1.5.orig//modules/codec/omxil/Makefile.in	2010-12-04 15:18:20.322122002 +0100
+++ vlc-1.1.5/modules/codec/omxil/Makefile.in	2010-12-04 15:19:43.992121999 +0100
@@ -305,6 +305,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/codec/shine/Makefile.in vlc-1.1.5/modules/codec/shine/Makefile.in
--- vlc-1.1.5.orig//modules/codec/shine/Makefile.in	2010-12-04 15:18:20.342122007 +0100
+++ vlc-1.1.5/modules/codec/shine/Makefile.in	2010-12-04 15:19:44.112121997 +0100
@@ -304,6 +304,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/codec/spudec/Makefile.in vlc-1.1.5/modules/codec/spudec/Makefile.in
--- vlc-1.1.5.orig//modules/codec/spudec/Makefile.in	2010-12-04 15:18:20.342122007 +0100
+++ vlc-1.1.5/modules/codec/spudec/Makefile.in	2010-12-04 15:19:44.232122001 +0100
@@ -306,6 +306,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/codec/subtitles/Makefile.in vlc-1.1.5/modules/codec/subtitles/Makefile.in
--- vlc-1.1.5.orig//modules/codec/subtitles/Makefile.in	2010-12-04 15:18:20.332122003 +0100
+++ vlc-1.1.5/modules/codec/subtitles/Makefile.in	2010-12-04 15:19:44.382122002 +0100
@@ -328,6 +328,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/codec/wmafixed/Makefile.in vlc-1.1.5/modules/codec/wmafixed/Makefile.in
--- vlc-1.1.5.orig//modules/codec/wmafixed/Makefile.in	2010-12-04 15:18:20.332122003 +0100
+++ vlc-1.1.5/modules/codec/wmafixed/Makefile.in	2010-12-04 15:19:44.522122002 +0100
@@ -308,6 +308,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/control/globalhotkeys/Makefile.in vlc-1.1.5/modules/control/globalhotkeys/Makefile.in
--- vlc-1.1.5.orig//modules/control/globalhotkeys/Makefile.in	2010-12-04 15:18:20.552122000 +0100
+++ vlc-1.1.5/modules/control/globalhotkeys/Makefile.in	2010-12-04 15:19:44.852122012 +0100
@@ -309,6 +309,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/control/http/Makefile.in vlc-1.1.5/modules/control/http/Makefile.in
--- vlc-1.1.5.orig//modules/control/http/Makefile.in	2010-12-04 15:18:20.552122000 +0100
+++ vlc-1.1.5/modules/control/http/Makefile.in	2010-12-04 15:19:44.992122006 +0100
@@ -308,6 +308,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/control/Makefile.in vlc-1.1.5/modules/control/Makefile.in
--- vlc-1.1.5.orig//modules/control/Makefile.in	2010-12-04 15:18:20.552122000 +0100
+++ vlc-1.1.5/modules/control/Makefile.in	2010-12-04 15:19:44.722122013 +0100
@@ -472,6 +472,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/demux/asf/Makefile.in vlc-1.1.5/modules/demux/asf/Makefile.in
--- vlc-1.1.5.orig//modules/demux/asf/Makefile.in	2010-12-04 15:18:20.542121999 +0100
+++ vlc-1.1.5/modules/demux/asf/Makefile.in	2010-12-04 15:19:45.522121999 +0100
@@ -306,6 +306,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/demux/avformat/Makefile.in vlc-1.1.5/modules/demux/avformat/Makefile.in
--- vlc-1.1.5.orig//modules/demux/avformat/Makefile.in	2010-12-04 15:18:20.532121998 +0100
+++ vlc-1.1.5/modules/demux/avformat/Makefile.in	2010-12-04 15:19:45.662122000 +0100
@@ -315,6 +315,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/demux/avi/Makefile.in vlc-1.1.5/modules/demux/avi/Makefile.in
--- vlc-1.1.5.orig//modules/demux/avi/Makefile.in	2010-12-04 15:18:20.532121998 +0100
+++ vlc-1.1.5/modules/demux/avi/Makefile.in	2010-12-04 15:19:45.782121999 +0100
@@ -306,6 +306,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/demux/Makefile.in vlc-1.1.5/modules/demux/Makefile.in
--- vlc-1.1.5.orig//modules/demux/Makefile.in	2010-12-04 15:18:20.532121998 +0100
+++ vlc-1.1.5/modules/demux/Makefile.in	2010-12-04 15:19:45.392122001 +0100
@@ -701,6 +701,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/demux/mkv/Makefile.in vlc-1.1.5/modules/demux/mkv/Makefile.in
--- vlc-1.1.5.orig//modules/demux/mkv/Makefile.in	2010-12-04 15:18:20.342122007 +0100
+++ vlc-1.1.5/modules/demux/mkv/Makefile.in	2010-12-04 15:19:45.962122003 +0100
@@ -328,6 +328,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/demux/mp4/Makefile.in vlc-1.1.5/modules/demux/mp4/Makefile.in
--- vlc-1.1.5.orig//modules/demux/mp4/Makefile.in	2010-12-04 15:18:20.542121999 +0100
+++ vlc-1.1.5/modules/demux/mp4/Makefile.in	2010-12-04 15:19:46.092122003 +0100
@@ -306,6 +306,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/demux/mpeg/Makefile.in vlc-1.1.5/modules/demux/mpeg/Makefile.in
--- vlc-1.1.5.orig//modules/demux/mpeg/Makefile.in	2010-12-04 15:18:20.542121999 +0100
+++ vlc-1.1.5/modules/demux/mpeg/Makefile.in	2010-12-04 15:19:46.232122002 +0100
@@ -326,6 +326,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/demux/playlist/Makefile.in vlc-1.1.5/modules/demux/playlist/Makefile.in
--- vlc-1.1.5.orig//modules/demux/playlist/Makefile.in	2010-12-04 15:18:20.532121998 +0100
+++ vlc-1.1.5/modules/demux/playlist/Makefile.in	2010-12-04 15:19:46.412122000 +0100
@@ -314,6 +314,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/gui/hildon/Makefile.in vlc-1.1.5/modules/gui/hildon/Makefile.in
--- vlc-1.1.5.orig//modules/gui/hildon/Makefile.in	2010-12-04 15:18:20.872122000 +0100
+++ vlc-1.1.5/modules/gui/hildon/Makefile.in	2010-12-04 15:19:46.682122001 +0100
@@ -308,6 +308,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/gui/macosx/Makefile.in vlc-1.1.5/modules/gui/macosx/Makefile.in
--- vlc-1.1.5.orig//modules/gui/macosx/Makefile.in	2010-12-04 15:18:20.602121999 +0100
+++ vlc-1.1.5/modules/gui/macosx/Makefile.in	2010-12-04 15:19:46.902122002 +0100
@@ -345,6 +345,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/gui/macosx_dialog_provider/Makefile.in vlc-1.1.5/modules/gui/macosx_dialog_provider/Makefile.in
--- vlc-1.1.5.orig//modules/gui/macosx_dialog_provider/Makefile.in	2010-12-04 15:18:20.872122000 +0100
+++ vlc-1.1.5/modules/gui/macosx_dialog_provider/Makefile.in	2010-12-04 15:19:47.032122003 +0100
@@ -317,6 +317,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/gui/Makefile.in vlc-1.1.5/modules/gui/Makefile.in
--- vlc-1.1.5.orig//modules/gui/Makefile.in	2010-12-04 15:18:20.602121999 +0100
+++ vlc-1.1.5/modules/gui/Makefile.in	2010-12-04 15:19:46.542122000 +0100
@@ -357,6 +357,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/gui/minimal_macosx/Makefile.in vlc-1.1.5/modules/gui/minimal_macosx/Makefile.in
--- vlc-1.1.5.orig//modules/gui/minimal_macosx/Makefile.in	2010-12-04 15:18:20.602121999 +0100
+++ vlc-1.1.5/modules/gui/minimal_macosx/Makefile.in	2010-12-04 15:19:47.192121997 +0100
@@ -334,6 +334,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/gui/qt4/Makefile.in vlc-1.1.5/modules/gui/qt4/Makefile.in
--- vlc-1.1.5.orig//modules/gui/qt4/Makefile.in	2010-12-04 15:18:20.722121999 +0100
+++ vlc-1.1.5/modules/gui/qt4/Makefile.in	2010-12-04 15:19:47.722122008 +0100
@@ -441,6 +441,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/gui/skins2/Makefile.in vlc-1.1.5/modules/gui/skins2/Makefile.in
--- vlc-1.1.5.orig//modules/gui/skins2/Makefile.in	2010-12-04 15:18:20.712122007 +0100
+++ vlc-1.1.5/modules/gui/skins2/Makefile.in	2010-12-04 15:19:48.252122002 +0100
@@ -580,6 +580,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/Makefile.in vlc-1.1.5/modules/Makefile.in
--- vlc-1.1.5.orig//modules/Makefile.in	2010-12-04 15:18:20.312122001 +0100
+++ vlc-1.1.5/modules/Makefile.in	2010-12-04 15:19:39.792122002 +0100
@@ -283,6 +283,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/meta_engine/Makefile.in vlc-1.1.5/modules/meta_engine/Makefile.in
--- vlc-1.1.5.orig//modules/meta_engine/Makefile.in	2010-12-04 15:18:20.912122007 +0100
+++ vlc-1.1.5/modules/meta_engine/Makefile.in	2010-12-04 15:19:48.392122001 +0100
@@ -344,6 +344,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/misc/dummy/Makefile.in vlc-1.1.5/modules/misc/dummy/Makefile.in
--- vlc-1.1.5.orig//modules/misc/dummy/Makefile.in	2010-12-04 15:18:21.252122001 +0100
+++ vlc-1.1.5/modules/misc/dummy/Makefile.in	2010-12-04 15:19:48.772122001 +0100
@@ -309,6 +309,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/misc/lua/Makefile.in vlc-1.1.5/modules/misc/lua/Makefile.in
--- vlc-1.1.5.orig//modules/misc/lua/Makefile.in	2010-12-04 15:18:21.242122000 +0100
+++ vlc-1.1.5/modules/misc/lua/Makefile.in	2010-12-04 15:19:48.992122003 +0100
@@ -319,6 +319,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/misc/Makefile.in vlc-1.1.5/modules/misc/Makefile.in
--- vlc-1.1.5.orig//modules/misc/Makefile.in	2010-12-04 15:18:21.242122000 +0100
+++ vlc-1.1.5/modules/misc/Makefile.in	2010-12-04 15:19:48.622121999 +0100
@@ -498,6 +498,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/misc/notify/Makefile.in vlc-1.1.5/modules/misc/notify/Makefile.in
--- vlc-1.1.5.orig//modules/misc/notify/Makefile.in	2010-12-04 15:18:21.272122003 +0100
+++ vlc-1.1.5/modules/misc/notify/Makefile.in	2010-12-04 15:19:49.162122001 +0100
@@ -384,6 +384,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/misc/osd/Makefile.in vlc-1.1.5/modules/misc/osd/Makefile.in
--- vlc-1.1.5.orig//modules/misc/osd/Makefile.in	2010-12-04 15:18:21.262122002 +0100
+++ vlc-1.1.5/modules/misc/osd/Makefile.in	2010-12-04 15:19:49.302122001 +0100
@@ -309,6 +309,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/misc/playlist/Makefile.in vlc-1.1.5/modules/misc/playlist/Makefile.in
--- vlc-1.1.5.orig//modules/misc/playlist/Makefile.in	2010-12-04 15:18:21.242122000 +0100
+++ vlc-1.1.5/modules/misc/playlist/Makefile.in	2010-12-04 15:19:49.432122001 +0100
@@ -307,6 +307,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/misc/stats/Makefile.in vlc-1.1.5/modules/misc/stats/Makefile.in
--- vlc-1.1.5.orig//modules/misc/stats/Makefile.in	2010-12-04 15:18:21.252122001 +0100
+++ vlc-1.1.5/modules/misc/stats/Makefile.in	2010-12-04 15:19:49.572122002 +0100
@@ -307,6 +307,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/misc/xml/Makefile.in vlc-1.1.5/modules/misc/xml/Makefile.in
--- vlc-1.1.5.orig//modules/misc/xml/Makefile.in	2010-12-04 15:18:21.262122002 +0100
+++ vlc-1.1.5/modules/misc/xml/Makefile.in	2010-12-04 15:19:49.702122001 +0100
@@ -316,6 +316,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/mmx/Makefile.in vlc-1.1.5/modules/mmx/Makefile.in
--- vlc-1.1.5.orig//modules/mmx/Makefile.in	2010-12-04 15:18:20.552122000 +0100
+++ vlc-1.1.5/modules/mmx/Makefile.in	2010-12-04 15:19:49.852122003 +0100
@@ -331,6 +331,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/mmxext/Makefile.in vlc-1.1.5/modules/mmxext/Makefile.in
--- vlc-1.1.5.orig//modules/mmxext/Makefile.in	2010-12-04 15:18:20.602121999 +0100
+++ vlc-1.1.5/modules/mmxext/Makefile.in	2010-12-04 15:19:49.972122003 +0100
@@ -302,6 +302,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/mux/Makefile.in vlc-1.1.5/modules/mux/Makefile.in
--- vlc-1.1.5.orig//modules/mux/Makefile.in	2010-12-04 15:18:20.882122001 +0100
+++ vlc-1.1.5/modules/mux/Makefile.in	2010-12-04 15:19:50.142121999 +0100
@@ -415,6 +415,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/mux/mpeg/Makefile.in vlc-1.1.5/modules/mux/mpeg/Makefile.in
--- vlc-1.1.5.orig//modules/mux/mpeg/Makefile.in	2010-12-04 15:18:20.882122001 +0100
+++ vlc-1.1.5/modules/mux/mpeg/Makefile.in	2010-12-04 15:19:50.292122000 +0100
@@ -319,6 +319,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/packetizer/Makefile.in vlc-1.1.5/modules/packetizer/Makefile.in
--- vlc-1.1.5.orig//modules/packetizer/Makefile.in	2010-12-04 15:18:20.552122000 +0100
+++ vlc-1.1.5/modules/packetizer/Makefile.in	2010-12-04 15:19:50.482121998 +0100
@@ -415,6 +415,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/services_discovery/Makefile.in vlc-1.1.5/modules/services_discovery/Makefile.in
--- vlc-1.1.5.orig//modules/services_discovery/Makefile.in	2010-12-04 15:18:20.892122002 +0100
+++ vlc-1.1.5/modules/services_discovery/Makefile.in	2010-12-04 15:19:50.682122003 +0100
@@ -409,6 +409,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/sse2/Makefile.in vlc-1.1.5/modules/sse2/Makefile.in
--- vlc-1.1.5.orig//modules/sse2/Makefile.in	2010-12-04 15:18:20.892122002 +0100
+++ vlc-1.1.5/modules/sse2/Makefile.in	2010-12-04 15:19:50.822121997 +0100
@@ -323,6 +323,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/stream_filter/Makefile.in vlc-1.1.5/modules/stream_filter/Makefile.in
--- vlc-1.1.5.orig//modules/stream_filter/Makefile.in	2010-12-04 15:18:20.552122000 +0100
+++ vlc-1.1.5/modules/stream_filter/Makefile.in	2010-12-04 15:19:50.962121999 +0100
@@ -333,6 +333,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/stream_out/Makefile.in vlc-1.1.5/modules/stream_out/Makefile.in
--- vlc-1.1.5.orig//modules/stream_out/Makefile.in	2010-12-04 15:18:20.892122002 +0100
+++ vlc-1.1.5/modules/stream_out/Makefile.in	2010-12-04 15:19:51.212122008 +0100
@@ -529,6 +529,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/stream_out/transcode/Makefile.in vlc-1.1.5/modules/stream_out/transcode/Makefile.in
--- vlc-1.1.5.orig//modules/stream_out/transcode/Makefile.in	2010-12-04 15:18:20.892122002 +0100
+++ vlc-1.1.5/modules/stream_out/transcode/Makefile.in	2010-12-04 15:19:51.352122000 +0100
@@ -309,6 +309,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/video_chroma/Makefile.in vlc-1.1.5/modules/video_chroma/Makefile.in
--- vlc-1.1.5.orig//modules/video_chroma/Makefile.in	2010-12-04 15:18:20.912122007 +0100
+++ vlc-1.1.5/modules/video_chroma/Makefile.in	2010-12-04 15:19:51.532122003 +0100
@@ -379,6 +379,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/video_filter/dynamicoverlay/Makefile.in vlc-1.1.5/modules/video_filter/dynamicoverlay/Makefile.in
--- vlc-1.1.5.orig//modules/video_filter/dynamicoverlay/Makefile.in	2010-12-04 15:18:20.912122007 +0100
+++ vlc-1.1.5/modules/video_filter/dynamicoverlay/Makefile.in	2010-12-04 15:19:52.292121999 +0100
@@ -312,6 +312,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/video_filter/Makefile.in vlc-1.1.5/modules/video_filter/Makefile.in
--- vlc-1.1.5.orig//modules/video_filter/Makefile.in	2010-12-04 15:18:20.912122007 +0100
+++ vlc-1.1.5/modules/video_filter/Makefile.in	2010-12-04 15:19:52.142121998 +0100
@@ -989,6 +989,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/video_output/Makefile.in vlc-1.1.5/modules/video_output/Makefile.in
--- vlc-1.1.5.orig//modules/video_output/Makefile.in	2010-12-04 15:18:20.592122008 +0100
+++ vlc-1.1.5/modules/video_output/Makefile.in	2010-12-04 15:19:52.612122007 +0100
@@ -587,6 +587,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/video_output/msw/Makefile.in vlc-1.1.5/modules/video_output/msw/Makefile.in
--- vlc-1.1.5.orig//modules/video_output/msw/Makefile.in	2010-12-04 15:18:20.592122008 +0100
+++ vlc-1.1.5/modules/video_output/msw/Makefile.in	2010-12-04 15:19:52.812122002 +0100
@@ -362,6 +362,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/visualization/Makefile.in vlc-1.1.5/modules/visualization/Makefile.in
--- vlc-1.1.5.orig//modules/visualization/Makefile.in	2010-12-04 15:18:20.312122001 +0100
+++ vlc-1.1.5/modules/visualization/Makefile.in	2010-12-04 15:19:52.952122002 +0100
@@ -370,6 +370,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//modules/visualization/visual/Makefile.in vlc-1.1.5/modules/visualization/visual/Makefile.in
--- vlc-1.1.5.orig//modules/visualization/visual/Makefile.in	2010-12-04 15:18:20.312122001 +0100
+++ vlc-1.1.5/modules/visualization/visual/Makefile.in	2010-12-04 15:19:53.092122001 +0100
@@ -305,6 +305,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//projects/activex/Makefile.in vlc-1.1.5/projects/activex/Makefile.in
--- vlc-1.1.5.orig//projects/activex/Makefile.in	2010-12-04 15:18:19.552122002 +0100
+++ vlc-1.1.5/projects/activex/Makefile.in	2010-12-04 15:19:53.292122001 +0100
@@ -334,6 +334,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//projects/mozilla/Makefile.in vlc-1.1.5/projects/mozilla/Makefile.in
--- vlc-1.1.5.orig//projects/mozilla/Makefile.in	2010-12-04 15:18:19.562122003 +0100
+++ vlc-1.1.5/projects/mozilla/Makefile.in	2010-12-04 15:19:53.502121999 +0100
@@ -354,6 +354,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//share/Makefile.in vlc-1.1.5/share/Makefile.in
--- vlc-1.1.5.orig//share/Makefile.in	2010-12-04 15:18:18.732121998 +0100
+++ vlc-1.1.5/share/Makefile.in	2010-12-04 15:19:53.632122000 +0100
@@ -283,6 +283,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//src/Makefile.in vlc-1.1.5/src/Makefile.in
--- vlc-1.1.5.orig//src/Makefile.in	2010-12-04 15:18:18.692122002 +0100
+++ vlc-1.1.5/src/Makefile.in	2010-12-04 15:19:54.372122000 +0100
@@ -553,6 +553,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//src/test/Makefile.in vlc-1.1.5/src/test/Makefile.in
--- vlc-1.1.5.orig//src/test/Makefile.in	2010-12-04 15:18:18.692122002 +0100
+++ vlc-1.1.5/src/test/Makefile.in	2010-12-04 15:19:54.512122003 +0100
@@ -303,6 +303,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
diff -Naur vlc-1.1.5.orig//test/Makefile.in vlc-1.1.5/test/Makefile.in
--- vlc-1.1.5.orig//test/Makefile.in	2010-12-04 15:18:18.732121998 +0100
+++ vlc-1.1.5/test/Makefile.in	2010-12-04 15:19:54.682121998 +0100
@@ -345,6 +345,7 @@
 LTLIBbonjour = @LTLIBbonjour@
 LTLIBcaca = @LTLIBcaca@
 LTLIBcdda = @LTLIBcdda@
+LTLIBcrystalhd = @LTLIBcrystalhd@
 LTLIBdbus = @LTLIBdbus@
 LTLIBdc1394 = @LTLIBdc1394@
 LTLIBdirac = @LTLIBdirac@
