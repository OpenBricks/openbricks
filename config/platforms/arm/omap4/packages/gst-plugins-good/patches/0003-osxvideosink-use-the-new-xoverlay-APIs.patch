From 09a0a67236706c322e517184834b2f7e6290b844 Mon Sep 17 00:00:00 2001
From: Philippe Normand <pnormand@igalia.com>
Date: Tue, 21 Sep 2010 12:48:34 +0200
Subject: [PATCH 03/32] osxvideosink: use the new xoverlay APIs

Also bumped -base requirements.
---
 configure.ac                |    2 +-
 sys/osxvideo/osxvideosink.m |    5 +++--
 2 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/configure.ac b/configure.ac
index 8a713d3..9da105f 100644
--- a/configure.ac
+++ b/configure.ac
@@ -53,7 +53,7 @@ AM_PROG_LIBTOOL
 
 dnl *** required versions of GStreamer stuff ***
 GST_REQ=0.10.30
-GSTPB_REQ=0.10.30
+GSTPB_REQ=0.10.30.1
 
 dnl *** autotools stuff ****
 
diff --git a/sys/osxvideo/osxvideosink.m b/sys/osxvideo/osxvideosink.m
index 0a546fc..fb7b88e 100644
--- a/sys/osxvideo/osxvideosink.m
+++ b/sys/osxvideo/osxvideosink.m
@@ -418,9 +418,10 @@ gst_osx_video_sink_interface_init (GstImplementsInterfaceClass * klass)
 }
 
 static void
-gst_osx_video_sink_set_xwindow_id (GstXOverlay * overlay, gulong window_id)
+gst_osx_video_sink_set_window_handle (GstXOverlay * overlay, guintptr handle_id)
 {
   GstOSXVideoSink *osxvideosink = GST_OSX_VIDEO_SINK (overlay);
+  gulong window_id = (gulong) handle_id;
 
   if (osxvideosink->superview) {
     GST_INFO_OBJECT (osxvideosink, "old xwindow id %p", osxvideosink->superview);
@@ -443,7 +444,7 @@ gst_osx_video_sink_set_xwindow_id (GstXOverlay * overlay, gulong window_id)
 static void
 gst_osx_video_sink_xoverlay_init (GstXOverlayClass * iface)
 {
-  iface->set_xwindow_id = gst_osx_video_sink_set_xwindow_id;
+  iface->set_window_handle = gst_osx_video_sink_set_window_handle;
   iface->expose = NULL;
   iface->handle_events = NULL;
 }
-- 
1.7.1

