--- libdrm-2.4.32.orig/ChangeLog
+++ libdrm-2.4.32/ChangeLog
@@ -0,0 +1,37180 @@
+commit 51c3e7d7335ecdf572968db7d3eed661e8a61810
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Mar 16 16:11:10 2012 -0700
+
+    configure: Bump version for 2.4.32.
+
+commit 5de5b7484a3a41554e16c02a544a45db5516b031
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Mar 13 16:49:53 2012 -0700
+
+    intel: Quiet two more valgrind complaints with recent changes.
+    
+    These are more cases where valgrind doesn't understand what gets read
+    or written by our ioctls.
+
+commit 9d18ad254afc2afc41a919b86cd51ea40cfd8f0b
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Mar 2 10:27:55 2012 -0800
+
+    intel: Add per-dword decode of gen7 3DPRIMITIVE.
+
+commit 9b87fd9a3df8c59461bc90b4620526d10f9b5771
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Mar 2 10:18:51 2012 -0800
+
+    intel: Move the gen4-6 3DPRIMITIVE handling out of the switch statement.
+
+commit 99c73378a1b440bcf594742445dfe14ab1e89128
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Feb 10 04:12:15 2012 -0800
+
+    intel: Add support for (possibly) unsynchronized maps.
+    
+    This improves the performance of Mesa's GL_MAP_UNSYNCHRONIZED_BIT path
+    in GL_ARB_map_buffer_range.  Improves Unigine Tropics performance at
+    1024x768 by 2.30482% +/- 0.0492146% (n=61)
+    
+    v2: Fix comment grammar.
+    
+    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 3a8884851b72af012a8cb2beea320f094a58e5eb
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Feb 27 17:26:05 2012 -0800
+
+    intel: Fix error check for I915_PARAM_HAS_LLC.
+    
+    drmIoctl returns -1 on error with errno set to the error value.  Other
+    users of it in this file just check for != 0, and only use errno when
+    they need to send an error value on to the caller of the API.
+
+commit c9ce2edfc8d33e760667529250e86e93ff656c3d
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Mar 9 16:08:23 2012 -0800
+
+    intel: Bump the copyright dates on the bufmgr files.
+    
+    We've been hacking these constantly.
+
+commit 4db16a9480af2c4f36eb8023193cd54545efbe54
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Oct 11 15:59:03 2011 -0700
+
+    intel: Add .aub file output support.
+    
+    This will allow the driver to capture all of its execution state to a
+    file for later debugging.  intel_gpu_dump is limited in that it only
+    captures batchbuffers, and Mesa's captures, while more complete, still
+    capture only a portion of the state involved in execution.
+    
+    This is a squash commit of a long series of hacking as we tried to get
+    the resulting traces to work in the internal simulator.  It contains
+    contributions by Yuanhan Liu and Kenneth Graunke.
+    
+    v2: Drop the MI_FLUSH_ENABLE setup.
+    
+    Reviewed-by: Kenneth Graunke <kenneth@whitecape.org>
+    Signed-off-by: Eric Anholt <eric@anholt.net>
+    Signed-off-by: Yuanhan Liu <yuanhan.liu@linux.intel.com>
+    Signed-off-by: Kenneth Graunke <kenneth@whitecape.org>
+
+commit 6e642db7f4a5628ed63ca3c479f06bd6f2ca3893
+Author: Kenneth Graunke <kenneth@whitecape.org>
+Date:   Tue Oct 11 14:38:34 2011 -0700
+
+    intel: Add support for overriding the PCI ID via an environment variable
+    
+    For example:
+    
+        export INTEL_DEVID_OVERRIDE=0x162
+    
+    If this variable is set, don't actually submit the batchbuffer to the
+    GPU, it probably contains commands for the wrong generation of hardware.
+    
+    v2: Introduce a getter for the overridden devid, and avoid getenv per exec.
+    
+    Reviewed-by: Yuanhan Liu <yuanhan.liu@linux.intel.com>
+    Signed-off-by: Kenneth Graunke <kenneth@whitecape.org>
+    Signed-off-by: Eric Anholt <eric@anholt.net>
+
+commit fd39e61d0edfd30052d5f0b59b9215574e37942f
+Author: David Herrman <dh.herrmann@googlemail.com>
+Date:   Fri Mar 9 13:40:14 2012 -0500
+
+    xf86drmMode.h: Add header protection
+    
+    xf86drmMode.h is missing a header protection. xf86drm.h has one so just
+    copy it and adjust the name.
+    
+    Reviewed-by: Adam Jackson <ajax@redhat.com>
+    Signed-off-by: David Herrmann <dh.herrmann@googlemail.com>
+
+commit f82c77870354ba736774b6c45ccf8a326732243a
+Author: Alan Coopersmith <alan.coopersmith@oracle.com>
+Date:   Thu Feb 2 17:51:24 2012 -0800
+
+    Make drm/drm_fourcc.h portable to non-linux platforms
+    
+    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
+
+commit be30d350b64c1a83473a9ffbedf8e2c680a65fcd
+Author: Matt Turner <mattst88@gmail.com>
+Date:   Thu Mar 1 12:19:59 2012 -0500
+
+    Don't require pciaccess if Intel is disabled
+    
+    Reviewed-by: Eric Anholt <eric@anholt.net>
+    Signed-off-by: Matt Turner <mattst88@gmail.com>
+
+commit 783db34f6d8aded019b005a957fed1b91fd67c7c
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jan 30 15:21:29 2012 -0800
+
+    intel: Import a new batchbuffer for the gen7 test.
+    
+    This one doesn't have the 3DSTATE_HIER_DEPTH_BUFFER bug that the
+    previous one did.
+    
+    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+
+commit b395af0d2d617c29054f1b97973982bbffa33190
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jan 30 15:13:32 2012 -0800
+
+    intel: Add decode for gen7 HIER_DEPTH_BUFFER.
+    
+    Note that the regression test complains here: The batch that was
+    captured included a bug in its packet output, which was later fixed in
+    Mesa.
+    
+    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+
+commit e6beaf8ee49dbf165ef2e005931fdf0ce323fcf6
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jan 30 15:04:10 2012 -0800
+
+    intel: Add decode for gen7 3DSTATE_WM.
+    
+    This requires pulling the gen6 3DSTATE_WM out to a function so it
+    doesn't override gen7's handler.
+    
+    v2: Fix pasteo in interpreting ZW interpolation (thanks danvet!).
+    
+    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+
+commit 259e7b61381551b65ad3b574817dbde2210ff188
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Jan 27 13:27:56 2012 -0800
+
+    intel: Fix a typo in decode error message.
+    
+    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+
+commit 23eeb7e1e45417a5a84f826286dd982dba440cd3
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Thu Feb 9 10:29:22 2012 +0000
+
+    intel: Detect cache domain inconsistency with valgrind
+    
+    Every access to either the GTT or CPU pointer is supposed to be
+    proceeded by a set_domain ioctl so that GEM is able to manage the cache
+    domains correctly and for the following access to be coherent. Of
+    course, some people explicitly want incoherent, non-blocking access
+    which is going to trigger warnings by this patch but are probably better
+    served by explicit suppression.
+    
+    v2: Also mark the pointers as inaccessible following the explicit unmap
+    and implicit unmap upon return to the cache.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+
+commit 9b3ad51ae5fd9654df8ef75de845a519015150bb
+Author: Jerome Glisse <jglisse@redhat.com>
+Date:   Mon Feb 13 20:45:53 2012 -0500
+
+    radeon: fix pitch alignment for scanout buffer
+    
+    Signed-off-by: Jerome Glisse <jglisse@redhat.com>
+
+commit ced219ebbd3b266ac8326223bad62f994907ae6b
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Feb 13 00:19:17 2012 +0000
+
+    configure: Fix pkg-config test in absence of valgrind
+    
+    The empty string used for the not case is replaced by the default
+    if-else clause and so causes the configure to fail in the absence of
+    valgrind. Which is not quite what was intended.
+    
+    Instead use the common idiom of setting a variable depending on whether
+    the true or false branch is taken and emit the conditional code as a
+    second step.
+    
+    Reported-by: Tobias Jakobi <liquid.acid@gmx.net>
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 90b23cc24c19fbe131d84237c55311cafeb4ca21
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Thu Feb 9 10:23:10 2012 +0000
+
+    intel: Mark up with valgrind intrinsics to reduce false positives
+    
+    In particular, declare the hidden CPU mmaps to valgrind so that it knows
+    about those memory regions.
+    
+    v2: Add an additional VG_CLEAR for the getparam
+    
+    References: https://bugs.freedesktop.org/show_bug.cgi?id=35071
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+    Acked-by: Ben Widawsky <ben@bwidawsk.net>
+    [anholt: Ideally valgrind should just learn about the ioctls, and
+             removing the clear for the non-valgrindified code feels risky.]
+    Reviewed-by: Eric Anholt <eric@anholt.net>
+
+commit 2cfac57d364d0166ed9472b086c16aea376f495a
+Author: Michel Dänzer <michel.daenzer@amd.com>
+Date:   Wed Feb 8 10:49:08 2012 +0100
+
+    radeon_cs_setup_bo: Fix accounting if caller specified write and read domains.
+    
+    Only account for the write domain in that case.
+    
+    Fixes https://bugs.freedesktop.org/show_bug.cgi?id=43893 .
+    
+    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>
+    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>
+
+commit 230ec7d7bbf1e8a7e263d471b21afb08c28eba0c
+Author: Jerome Glisse <jglisse@redhat.com>
+Date:   Mon Feb 6 15:22:58 2012 -0500
+
+    configure: Bump version for 2.4.31
+
+commit 356b87d8b34daf9aeadd33465141bc212ad6e3ff
+Author: Jerome Glisse <jglisse@redhat.com>
+Date:   Mon Feb 6 15:22:14 2012 -0500
+
+    radeon: add r600_pci_ids.h to header file
+    
+    Signed-off-by: Jerome Glisse <jglisse@redhat.com>
+
+commit 10c0837780b2d4a33568c16bb92527e196d6c05e
+Author: Jerome Glisse <jglisse@redhat.com>
+Date:   Fri Feb 3 12:22:11 2012 -0500
+
+    radeon: fix surface API for good before anyone start relying on it
+    
+    The mipmap level computation was wrong, we need to know the block
+    width, height, depth of compressed texture to properly compute this.
+    Change API to provide block width, height, depth instead of nblk_x,
+    nblk_y, nblk_z.
+    
+    Signed-off-by: Jerome Glisse <jglisse@redhat.com>
+
+commit 6a720cb8660975acea1100e61a88a92a7cb3856e
+Author: Jerome Glisse <jglisse@redhat.com>
+Date:   Thu Feb 2 14:17:10 2012 -0500
+
+    radeon: surface fix macro -> micro tile fallback
+    
+    We need to force 1D tiling only on old kernel the fallback was
+    broken along the way.
+    
+    Signed-off-by: Jerome Glisse <jglisse@redhat.com>
+
+commit 76b4a69aab7cbfb4a087194b6d6ee182c1d5dd7e
+Author: Ville Syrjälä <ville.syrjala at linux.intel.com>
+Date:   Thu Feb 2 14:53:43 2012 -0500
+
+    Using sizeof() on a function parameter with an array type does not
+    work. sizeof() treats such parameters as pointers.
+    
+    Signed-off-by: Ville Syrjälä <ville.syrjala at linux.intel.com>
+
+commit a14c3dd0f9c468d5dba86df5ffa786aea77068a9
+Author: Ville Syrjälä <ville.syrjala at linux.intel.com>
+Date:   Thu Feb 2 14:53:41 2012 -0500
+
+    This function was missing.
+    
+    Signed-off-by: Ville Syrjälä <ville.syrjala at linux.intel.com>
+
+commit df497e9281036ca9397bc5a08a82fdf44dbc12b2
+Author: Ville Syrjälä <ville.syrjala at linux.intel.com>
+Date:   Thu Feb 2 14:53:39 2012 -0500
+
+    drmModeFreeResources() always leaked some memory.
+    drmModeGetPlaneResources() and drmModeGetPlane() leaked in one error
+    path.
+    
+    Signed-off-by: Ville Syrjälä <ville.syrjala at linux.intel.com>
+
+commit c51f7f0e460dcadb9f1a56ecf1615810877c33c8
+Author: Jerome Glisse <jglisse@redhat.com>
+Date:   Fri Dec 9 21:07:15 2011 -0500
+
+    radeon: add surface allocator helper v10
+    
+    The surface allocator is able to build complete miptree when allocating
+    surface for r600/r700/evergreen/northern islands GPU family. It also
+    compute bo size and alignment for render buffer, depth buffer and
+    scanout buffer.
+    
+    v2 fix r6xx/r7xx 2D tiling width align computation
+    v3 add tile split support and fix 1d texture alignment
+    v4 rework to more properly support compressed format, split surface pixel
+       size and surface element size in separate fields
+    v5 support texture array (still issue on r6xx)
+    v6 split surface value computation and mipmap tree building, rework eg
+       and newer computation
+    v7 add a check for tile split and 2d tiled
+    v8 initialize mode value before testing it in all case, reenable
+       2D macro tile mode on r6xx for cubemap and array. Fix cubemap
+       to force array size to the number of face.
+    v9 fix handling of stencil buffer on evergreen
+    v10 on evergreen depth buffer need to have enough room for a stencil
+        buffer just after depth one
+    
+    Signed-off-by: Jerome Glisse <jglisse@redhat.com>
+
+commit 151cdcfe685ee280a4344dfc40e6087d74a5590f
+Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
+Date:   Tue Jan 17 15:20:19 2012 -0200
+
+    intel: query for LLC support
+    
+    This adds support for querying the kernel about the LLC support in the
+    hardware.
+    
+    In case the ioctl fails, we assume that it is present on GEN6 and GEN7.
+    
+    v2: fix the return code checking
+    
+    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>
+
+commit 82c6938d232327233caac743a07639ac91bceb7e
+Author: Paul Berry <stereotype441@gmail.com>
+Date:   Tue Jan 31 14:44:14 2012 -0800
+
+    intel: Fix build of Intel DRM on x86 systems
+    
+    Commit efd6e81e inadvertently broke the build by looking for "i?86" or
+    "x86_64" in $host_os.  The correct variable to check is $host_cpu.
+    
+    This was preventing libdrm_intel.so from being built.
+    
+    Reviewed-by: Chad Versace <chad.versace@linux.intel.com>
+
+commit efd6e81e2ba112105457887ae18a58dfa4bbc8ef
+Author: Jeremy Huddleston <jeremyhu@apple.com>
+Date:   Mon Jan 30 15:20:04 2012 -0800
+
+    Don't build Intel DRM if $CHOST is not i?86-* or x86_64-*
+    
+    This fixes a failure in 'make check' found by the tinderbox when trying to
+    build this code on Linux/ppc.  This code is only designed to run on
+    Intel platforms, so don't even bother building it if we're not in that set.
+    
+    Found-by: Tinderbox
+    Signed-off-by: Jeremy Huddleston <jeremyhu@apple.com>
+
+commit 592ac67626f6d69bd8b518a33e80e9c4d223eba2
+Author: Chad Versace <chad.versace@linux.intel.com>
+Date:   Fri Jan 27 10:02:16 2012 -0800
+
+    intel: Fix bufmgr_gem->gen for gen > 4
+    
+    If the pci_device's actual gen was > 4, then we stupidly set
+    bufmgr_gem->gen = 6. Luckily this caused no bugs, and this fix shouldn't
+    change any behavior, because all checks against the gen currently have one
+    of the forms below:
+        gen == 2
+        gen == 3
+        gen >= 4
+    
+    Reviewed-by: Eric Anholt <eric@anholt.net>
+    Reviewed-by: Eugeni Dodonov <eugeni.dodonov@intel.com>
+    Signed-off-by: Chad Versace <chad.versace@linux.intel.com>
+
+commit b643b0713aefdc0611e47654e88263b53b0de6f5
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jan 4 14:36:13 2012 -0800
+
+    intel: Add minimal decode for remaining gen7 packets in use.
+    
+    This just gets packet name and length in place, with the remainder
+    unfinished.  I've long since finished the work that got me started
+    fixing up the decode.
+
+commit 54b12a085f9e84368fd4ca664138be6ea4120ae2
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jan 4 13:41:55 2012 -0800
+
+    intel: Add decode for gen7 constant buffer packets.
+
+commit 938df6be489cb66c2f90043a8ced9834765e4e8e
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jan 4 12:23:42 2012 -0800
+
+    intel: Add decode for gen7 state pointers.
+    
+    Since CC_STATE_POINTERS for gen6 and 7 are quite different but use the
+    same opcode, move gen6 out to a helper function too, so we can use a
+    helper function for gen7.
+
+commit 6a0b25e66b5515b3831db272211c337bcbdfb39a
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jan 4 12:12:41 2012 -0800
+
+    intel: Add support for parsing gen7 URB packets.
+
+commit ba8ce2da04daabacd598d7f049493b622ac96f58
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jan 4 13:18:42 2012 -0800
+
+    intel: Make most of the logic for 965 3d packet length checks table-driven.
+    
+    This puts the error message in a consistent location relative to the
+    packet, and while I'm here I made the error message a bit more
+    informative.
+    
+    Now, most static length packets need to just declare their length in
+    the table and not worry.
+
+commit b129e10af28016017a9c0e19af8e75a958063b5b
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jan 4 13:00:29 2012 -0800
+
+    intel: Move the logic for getting 965 3d packet length to the packet table.
+    
+    While I'm touching every line of the table, sort it by opcode.
+
+commit 3dcb2d47ee9f3fe15f075e7eb1b80c0c625b4d69
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jan 4 12:06:44 2012 -0800
+
+    intel: Add support for parsing 965 3d packets using helper functions.
+    
+    I want to add packets, without contributing to the switch statement of
+    doom.
+
+commit 5a1c10fe6a50c6b21e616bb77bfb00a9903cc517
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jan 4 12:01:49 2012 -0800
+
+    intel: Parse the correct length for gen7 3DSTATE_MULTISAMPLE.
+
+commit 9695eee8a2b6c749d79980e6057ac231aea6cb6d
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jan 4 12:00:59 2012 -0800
+
+    intel: Put the "gen" shorthand chipset identifier in the context.
+    
+    It's a lot nicer than using IS_WHATEVER(devid) all over the place, and
+    we have this in our other projects too.
+
+commit 028715ee7074691895051296105e8b4cbbfaabb8
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jan 4 12:31:40 2012 -0800
+
+    intel: Avoid the need for most overflow checks by using a scratch page.
+    
+    The overflow checks were all thoroughly untested, and a bunch of the
+    ones I'm deleting were pretty broken.  Now, in the case of overflow,
+    you just decode data of 0xd0d0d0d0, and instr_out prints the warning
+    message instead.  Note that this still has the same issue of being
+    under-tested, but at least it's one place instead of per-packet.
+    
+    A couple of BUFFER_FAIL uses are left where the length to be decoded
+    could be (significantly) larger than a page, and the decode didn't
+    just call instr_out (which doesn't dereference data itself unless it's
+    safe).
+
+commit c1d2946da8f13ea8cbda1e33aeccee4d06015fea
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 15:29:03 2011 -0800
+
+    intel: Make instr_out take the decode context.
+    
+    This reduces some of the extra derefs of the pointers.
+
+commit b0371612f45229879c46d6a29adbe6939fbc97d4
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 15:19:24 2011 -0800
+
+    intel: Use the context to simplify BR01 decode.
+    
+    Similar to BR00, count was always 1 and was always an index, not a count.
+
+commit 62b410344c010d84ed75cc42e1aeaa6d23e8c396
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 15:17:24 2011 -0800
+
+    intel: Use the context to simplify BR00 decode.
+    
+    The count (actually index) was always 0, because BR00 is dword 0.
+
+commit de49fd41e26185da20a9de227e82ff71571f1a0a
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 15:15:21 2011 -0800
+
+    intel: Plumb the context through the decode callchain.
+    
+    We still deref the context at the start of every call, but that will
+    change next.
+
+commit a756fa384fdaaa0ae61075cb648554853a91bf22
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 15:05:29 2011 -0800
+
+    intel: Drop the code for counting parsing failures.
+    
+    Nothing was consuming it.  If something wants this in the future,
+    would be done using the decode context anyway.
+
+commit 8fb66a7ded7efdb192a1dd09898e91487de493a3
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 14:59:38 2011 -0800
+
+    intel: Track the current packet location in the decode context.
+    
+    This is the start of plumbing the context through the decode
+    callchain instead of the current 4 arguments.
+
+commit b5cb7f88de249c6871b0e1d1e4005a7b1f54f088
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jan 4 11:52:32 2012 -0800
+
+    intel: Add a regression test for 2D decode, which I'm about to refactor.
+
+commit 66518ab5653cfdc840cd69e7b653ec05df060584
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Mon Jan 9 10:22:33 2012 -0800
+
+    intel: add sprite ioctl defines and struct for i915 sprite code
+
+commit adf1428915bfd0ee24758a3cbd56ce9b64f6eefb
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Jan 6 08:50:31 2012 -0800
+
+    configure: Bump version for 2.4.30
+
+commit 9fb83a49cb7e3db2f168aac5172fafb6fa0d69c8
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Dec 29 17:40:45 2011 -0800
+
+    intel: Update for new i915_drm.h defines.
+
+commit 683855f65523c978562ead56f9d68f50ffdca1a2
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Jan 3 14:32:18 2012 -0800
+
+    intel: Add regression tests for batch decode.
+    
+    The .batch was generated using the dump-a-batch branch of
+    
+    git://people.freedesktop.org/~anholt/mesa
+    
+    using glxgears on gen7 hardware, using INTEL_DEVID_OVERRIDE for
+    non-gen7 (this means that offsets in the buffers for non-gen7 are 0!).
+    The .ref was generated by:
+    
+    ./test_decode tests/gen7-3d.batch -dump.
+    
+    The .sh exists because you can't supply arguments to tests using the
+    simple automake tests driver.  Something reasonable could be done
+    using automake's parallel-tests driver (in fact, a previous version of
+    the patch did that), but I was concerned that:
+    
+    1) The parallel-tests driver is documented to be unstable -- they may
+       change interfaces on us later.
+    2) The parallel-tests driver hides the output of tests in .log files
+       scattered all over the tree, which was ugly and more painful to
+       work with.
+    
+    v2: Actually add the batch files, add a .gitignore for the *-new.txt
+        files added after failures, and fix failure mode for undetected
+        chipset name.
+    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch> (v1)
+
+commit ccbc40340b7b472939a90ae8afc0a82b358ce189
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Jan 3 12:33:37 2012 -0800
+
+    intel: Add a regression test program for intel_decode.c.
+    
+    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+
+commit ea33a231d530540ddcb9e0bac08ef15f625f744a
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Jan 3 13:05:57 2012 -0800
+
+    intel: Add an interface for setting the output file for decode.
+    
+    Consumers often want to choose stdout vs stderr, and for testing I
+    want to output to an open_memstream file.
+    
+    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+
+commit a9dd34a7ee9d03d357e15f045ab85a12f6f6e4b8
+Author: Johannes Obermayr <johannesobermayr@gmx.de>
+Date:   Sat Dec 31 01:45:32 2011 +0100
+
+    intel/intel_decode.c: Remove #include "intel_decode.h".
+    
+    Signed-off-by: Chad Versace <chad.versace@linux.intel.com>
+
+commit 4149faf3370c92e85533093bf764e773ebc41d88
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 14:32:27 2011 -0800
+
+    intel: Disable unused decode_logic_op().
+    
+    It was producing an unused code warning.  I'm tempted to just remove
+    it, since it's unused, but I *might* use it soon.
+    
+    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+    Acked-by: Eugeni Dodonov <eugeni@dodonov.net>
+
+commit 88cffcc899b6951c422aafbe7ae3069e3e795922
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 14:28:03 2011 -0800
+
+    intel: Turn on normal warnings for intel_decode.c build.
+    
+    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+    Acked-by: Eugeni Dodonov <eugeni@dodonov.net>
+
+commit 7b483188067c00014c5d263784d5140032a16cb6
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 14:27:17 2011 -0800
+
+    intel: Remove c99ish variable declarations.
+    
+    I'd rather be able to use c99 variable declarations (there's a lot of
+    awful code layout due to being c90ish), but I'll leave that for later.
+    
+    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+    Acked-by: Eugeni Dodonov <eugeni@dodonov.net>
+
+commit 0c46f020c8a75a906f974dedb6628ed7eadb0b97
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 14:23:15 2011 -0800
+
+    intel: Fix printf format warnings for intel_decode.
+    
+    There was plenty of dropped useful data, and some horribly
+    mis-formatted data.
+    
+    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+    Acked-by: Eugeni Dodonov <eugeni@dodonov.net>
+
+commit 39a06acfbdd834bcd365de08c7c14cfa39b18eab
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 12:01:19 2011 -0800
+
+    intel: Add printflike warnings for instr_out.
+    
+    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+    Acked-by: Eugeni Dodonov <eugeni@dodonov.net>
+
+commit 1db55a80a9f3f74df716c14d3cbfc1507f084221
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 12:00:28 2011 -0800
+
+    intel: Fix a ton of signed vs unsigned and const char *warnings
+    
+    We've got a different (better) set of warning flags in place in this
+    tree.
+    
+    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+    Acked-by: Eugeni Dodonov <eugeni@dodonov.net>
+
+commit 07768babb81bf8b9b993c41e7dca1e011fd6bd69
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 13:46:23 2011 -0800
+
+    intel: Fix Wsigned-compare warnings (soon to be enabled).
+    
+    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+    Acked-by: Eugeni Dodonov <eugeni@dodonov.net>
+
+commit 71066abe1e32d906f65141c34ecfd9ffbf89ebde
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 13:06:16 2011 -0800
+
+    intel: Get intel_decode.c minimally building.
+    
+    My plan is to use this drm_intel_dump_batchbuffer() interface for the
+    current GPU tools, and the current Mesa batch dumping usage, while
+    eventually building more interesting interfaces for other uses.
+    
+    Warnings are currently suppressed by using a helper lib with CFLAGS
+    set manually, because the code is totally not ready for libdrm's warnings
+    setup.
+    
+    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+    Acked-by: Eugeni Dodonov <eugeni@dodonov.net>
+
+commit bbdda928d3c0fa2e5b38adc4c3f7763f957b5207
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 11:44:36 2011 -0800
+
+    intel: Minor style tweaks after Lindent.
+    
+    Some comments weren't wrapped, and for some reason uint32_t *data got
+    an extra space (while other instances of "type *identifier" didn't),
+    and the indentation of the opcode-list structs got trashed.
+    
+    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+    Acked-by: Eugeni Dodonov <eugeni@dodonov.net>
+
+commit 193fa138d74f8d857b01b5ca8624f4ca79d9a91e
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 11:36:07 2011 -0800
+
+    intel: Reformat intel_decode.c from intel-gpu-tools using Lindent.
+    
+    We generally go for kernel style in this tree, and this 4-space indent
+    stuff was bothering me.  The new results have some ugly bits, but
+    they're in places where we desperately want to be using helper
+    functions anyway.
+    
+    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+    Acked-by: Eugeni Dodonov <eugeni@dodonov.net>
+
+commit 1d318e2a79c3ae02fa886bcba79ac68b5222e1a3
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 13:03:37 2011 -0800
+
+    intel: intel: Add IS_GEN[567] macros.
+    
+    These will be used by intel_decode.c, and were taken from intel-gpu-tools.
+    
+    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+    Acked-by: Eugeni Dodonov <eugeni@dodonov.net>
+
+commit 078bc5b6ee24ea786c465f5e29dcb8b0d2f81b2e
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 13:10:36 2011 -0800
+
+    intel: Make intel_chipset handle devid directly.
+    
+    This will make these macros reusable from intel_decode.c, which
+    doesn't have a bufmgr_gem context, without faking the struct.  We
+    should generally only be using these macros from bufmgr_gem context
+    setup anyway.
+    
+    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+    Acked-by: Eugeni Dodonov <eugeni@dodonov.net>
+
+commit 8c4a2c884846caca517b49e2026661e57924d9e1
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Dec 20 11:25:20 2011 -0800
+
+    intel: Import intel_decode.c from intel-gpu-tools.
+    
+    This is from commit dd9a5b4f7fb07c78db4e7481bedca1b981030e3f.
+    We've been sharing this file between that repo and Mesa, and it's time
+    to build a real interface using it.  I'm also hoping to apply some of
+    its packet-walking logic for AUB dumping and batch validation
+    purposes.
+    
+    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+    Acked-by: Eugeni Dodonov <eugeni@dodonov.net>
+
+commit ef20301a11afae50bfe127002913dbd0b81ddccc
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Sun Dec 18 13:58:57 2011 +0000
+
+    tests/gem_flink: Check for MASTER before proceeding
+    
+    gem_flink|gem_open are DRM_AUTH ioctl, and being lazy we do not
+    establish ourselves as authenticated before testing the ioctls. So
+    instead of aborting, skip the test unless we have root privileges (and
+    so DRM_MASTER and the DRM_AUTH restriction no longer applies).
+    
+    A future test could assert that the flink fails without proper
+    authentication.
+    
+    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=43924
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 0ab2251b70d49a294d24f3ef54982e95226c104a
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Wed Dec 14 08:20:10 2011 +0000
+
+    intel: Reset vma list upon purge
+    
+    During free we unconditionally delete the bo from the vma cache. This
+    relies on the its list member being kept in a sane state. This fails
+    after the object is purged, as the purge operation performs a pure
+    deletion and doesn't reset the list member, leaving a pair of dangling
+    pointers.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit ac168bf2a068761b591187e6a0a52083d456280b
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Fri Apr 29 08:53:53 2011 -0700
+
+    libdrm: update drm headers from kernel, including new overlay ioctls & structs
+    
+    Add structs and functions necessary for the new plane and fb handling code,
+    including a new header, drm_fourcc.h, that includes the surface formats
+    supported by various DRM drivers.
+    
+    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
+
+commit 7fd1678110b78d9324723a54dfd5049496b9e3cf
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Dec 5 23:09:20 2011 +0000
+
+    configure: Bump version for 2.4.29
+    
+    Yet another release required for new API
+
+commit 015286f03e871ccf49af9f2ceef7f5e04c8d61ca
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Sun Dec 11 17:35:06 2011 +0000
+
+    intel: Remove the fresh assertions used to debug the vma cacheing
+    
+    Hopefully all the bugs in the callers have been found, so time to
+    handle the failures "gracefully" again.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit c5f0ed1d296f11367febd0e1b7dce8789308bf35
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Dec 13 10:30:54 2011 +0000
+
+    intel: Update map-count for an early error return during mapping
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit dd9a5b4f7fb07c78db4e7481bedca1b981030e3f
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Dec 6 13:12:37 2011 +0000
+
+    intel: Evict cached VMA in order to make room for new mappings
+    
+    As the max number of VMA mappings is a hard per-process limit, we need
+    to include the number of currently active mappings when evicting in
+    order to make room for a new mmap.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit e4b60f29609e9993dc7268993da509530862aa78
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Dec 5 21:29:05 2011 +0000
+
+    intel: Add an interface to limit vma caching
+    
+    There is a per-process limit on the number of vma that the process can
+    keep open, so we cannot keep an unlimited cache of unused vma's (besides
+    keeping track of all those vma in the kernel adds considerable overhead).
+    However, in order to work around inefficiencies in the kernel it is
+    beneficial to reuse the vma, so keep a MRU cache of vma.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 902ee661f1864aaf8325621085f6a1b5a6a3673a
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Dec 5 21:24:48 2011 +0000
+
+    test/radeon: add missing files for dist
+
+commit 5c5332bbc38ff25c06081ac53a15ad583ad4cbc4
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Dec 5 10:39:49 2011 +0000
+
+    intel: Clean up mmaps on freeing the buffer
+    
+    As a precautionary measure munmap on buffer free so that we never leak
+    the vma. Also include a warning during debugging.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit e73161a02b604742e3da3bca8f13cff81276de43
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Dec 5 10:30:52 2011 +0000
+
+    configure: Bump version to 2.4.28
+    
+    So that we can pull a couple of Intel bug fixes into xf86-video-intel.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit c549a777c1b6227a724942c64aa5cd181eb93c6c
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Dec 5 10:14:34 2011 +0000
+
+    intel: Unmap buffers during drm_intel_gem_bo_unmap
+    
+    We cannot afford to cache the vma per open bo as this may exhaust the
+    per-process limits.
+    
+    References: https://bugs.freedesktop.org/show_bug.cgi?id=43075
+    References: https://bugs.freedesktop.org/show_bug.cgi?id=40066
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 36cff1cbb89477c839588a7e40fec2a8db7df396
+Author: Daniel Vetter <daniel.vetter@ffwll.ch>
+Date:   Sun Dec 4 12:51:45 2011 +0100
+
+    intel: limit aperture space to mappable area on gen3
+    
+    Otherwise we blow up on heavy tiled blitter loads (with giant
+    pixmaps).
+    
+    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+    Acked-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 37ccce5e390a9d757474920f488cafa1cf89854a
+Author: Maarten Lankhorst <m.b.lankhorst@gmail.com>
+Date:   Thu Nov 24 14:08:53 2011 +0100
+
+    nouveau: Mark nouveau subchannel unbound nouveau_grobj_free
+    
+    Valgrind throws warns about a user-after-free if you try to bind a
+    new subchannel after the old one in that slot was freed,
+    so remove it from the channel list.
+    
+    Signed-off-by: Maarten Lankhorst <m.b.lankhorst@gmail.com>
+
+commit ca4971292cf99e0063416cd1c3467af94637bf2b
+Author: Jerome Glisse <jglisse@redhat.com>
+Date:   Thu Nov 10 16:47:10 2011 -0500
+
+    tests/radeon: radeon specific test
+    
+    Initial test only include ttm test for stressing ttm memory
+    allocations.
+    
+    Signed-off-by: Jerome Glisse <jglisse@redhat.com>
+
+commit 961bf9b5c2866ccb4fedf2b45b29fb688519d0db
+Author: Jeremy Huddleston <jeremyhu@apple.com>
+Date:   Tue Nov 1 14:42:13 2011 -0700
+
+    Fix compilation with -Werror=int-to-pointer-cast -Werror=pointer-to-int-cast
+    
+    Signed-off-by: Jeremy Huddleston <jeremyhu@apple.com>
+
+commit cc9b751e82c5a3525907bba30ba3c95246751824
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Oct 28 13:14:44 2011 -0700
+
+    configure: version bump for 2.4.27 release.
+    
+    Push the new Intel API for use by mesa.
+    
+    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+
+commit d0ae6837d117881d9f1f9cc12d3f1012b6a46103
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Oct 28 13:13:08 2011 -0700
+
+    intel: Share the implementation of BO unmap between CPU and GTT mappings.
+    
+    Before this, consumers of the libdrm API that might map a buffer
+    either way had to track which way was chosen at map time to call the
+    appropriate unmap.  This relaxes that requirement by making
+    drm_intel_bo_unmap() always appropriate.
+    
+    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 4cb01eeccfa6a5169edea07c339117cac1f7b261
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Oct 28 13:12:16 2011 -0700
+
+    intel: Don't call the SW_FINISH ioctl unless a CPU-mapped write was done.
+    
+    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 77dc16f33d19195c7f7c569d877a6180ed1b9d54
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Oct 28 13:02:53 2011 -0700
+
+    intel: Remove stale comment.
+    
+    This used to be next to some map refcounting code, but that is long dead.
+    
+    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+
+commit 515cea6ac67eb458c59fececc3c67411ee6fd3c3
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Oct 21 18:48:20 2011 -0700
+
+    intel: Add an interface for removing relocs after they're added.
+    
+    This lets us replace the current inner drawing loop of mesa:
+    
+    for each prim {
+    	compute bo list
+    	if (check_aperture_space(bo list)) {
+    		batch_flush()
+    		compute bo list
+    		if (check_aperture_space(bo list)) {
+    			whine_about_batch_size()
+    			fall back;
+    		}
+    	}
+    	upload state to BOs
+    }
+    
+    with this inner loop:
+    
+    for each prim {
+     retry:
+    	upload state to BOs
+    	if (check_aperture_space(batch)) {
+    		if (!retried) {
+    			reset_to_last_prim()
+    			batch_flush()
+    		} else {
+    			if (batch_flush())
+    				whine_about_batch_size()
+    			goto retry;
+    		}
+    	}
+    }
+    
+    This avoids having to implement code to walk over certain sets of GL
+    state twice (the "compute bo list" step).  While it's not a
+    performance improvement, it's a significant win in code complexity:
+    about -200 lines, and one place to make mistakes related to aperture
+    space instead of N places to forget some BO we should have included.
+    
+    Note how if we do a reset in the new loop , we immediately flush.  We
+    don't need to check aperture space -- the kernel will tell us if we
+    actually ran out of aperture or not.  And if we did run out of
+    aperture, it's because either the single prim was too big, or because
+    check_aperture was wrong at the point of setting up the last
+    primitive.
+    
+    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+
+commit 2c2bdb36c5b6bd7f8eac07cf163975b361114fb1
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Oct 21 16:53:16 2011 -0700
+
+    intel: Use stdbool.h for dealing with boolean values.
+    
+    A few of the bitfield-based booleans are left in place.  Changing them
+    to "bool" results in the same code size, so I'm erring on the side of
+    not changing things.
+    
+    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+
+commit cc088f1721eaa5f8f1ba1932723882f92e34c39a
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Oct 19 17:39:54 2011 +0100
+
+    nouveau: free in error path if drmAvailable fails.
+    
+    This was reported in coverity.
+    
+    Signed-off-by: Dave Airlie <airlied@redhat.com>
+
+commit d23146f3f0ad14c8ad482a4832cae859c8d646f2
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Wed Oct 19 13:32:43 2011 +0200
+
+    modetest: Call dirty fb on modeset
+    
+    Signed-off-by: Jakob Bornecrantz <jakob@vmware.com>
+
+commit 680b9c4fa3dfb329bd74ec08c17cfc876ea2fc5b
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Wed Oct 19 13:32:26 2011 +0200
+
+    modetest: Print extra info if we fail to create a framebuffer
+    
+    Signed-off-by: Jakob Bornecrantz <jakob@vmware.com>
+
+commit 3c8adda6e1e6b0471b3d70a63d795622bbeb1580
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Wed Sep 28 23:34:09 2011 +0200
+
+    modetest: Check error message from pageflip ioctl
+    
+    Signed-off-by: Jakob Bornecrantz <jakob@vmware.com>
+
+commit c2925e51979fcb829962e7bf66c13cbc96c39db1
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Wed Sep 28 17:27:07 2011 +0200
+
+    vbltest: Check error codes returned from libdrm
+    
+    Signed-off-by: Jakob Bornecrantz <jakob@vmware.com>
+
+commit dc11db2e282c522219bb6e419eb648f3e836bdc0
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Fri Sep 16 20:50:39 2011 +0200
+
+    tests: Add vmwgfx driver to probed drivers in tests
+    
+    Signed-off-by: Jakob Bornecrantz <jakob@vmware.com>
+
+commit b317c96361f88a0a4ccb2faeff09b0476d142c68
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Tue Oct 11 11:09:44 2011 -0700
+
+    modetest: use 24 bit depth on the framebuffer
+    
+    It's more compatible; at least the Intel driver now rejects 32 bit
+    depths since it generally can't support real 32 bit framebuffers
+    (supports 30, 36, and 64 bit, but not 32).
+
+commit c82ef03e4c92017bf5644f294ea04e30500f8d4c
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Sep 26 16:03:20 2011 +0100
+
+    drmtest: make check should fail so hard on unable to open device
+
+commit 3a551c127439b2d5cad5c7ca817feab1ca4c78c5
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Sep 26 15:54:13 2011 +0100
+
+    drm/test: handle usub being empty
+    
+    fixes a segfault on make check seen in tinderbox
+
+commit cfee5218b17a2741e5519ed44091171e01f0dbb2
+Author: Tapani Pälli <tapani.palli@intel.com>
+Date:   Fri Sep 23 14:17:42 2011 +0300
+
+    xf86drm.h : wrap C code for C++ compilation/linking
+    
+    To enable usage of xf86drm.h from C++ programs/frameworks.
+    
+    Signed-off-by: Tapani Pälli <tapani.palli@intel.com>
+    [ickle: also wrap xf86drmMode.h]
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 194aa1bee632c6dce19238664eb8373e3483de55
+Author: Daniel Vetter <daniel.vetter@ffwll.ch>
+Date:   Thu Sep 22 22:20:53 2011 +0200
+
+    drm/i915: y tiling on i915G/i915GM is different
+    
+    Luckily the kernel has become extremely paranoid about such matters.
+    
+    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+
+commit 630dd26fb41c64c1e61be6e929e025c1528e9046
+Author: Daniel Vetter <daniel.vetter@ffwll.ch>
+Date:   Thu Sep 22 22:20:09 2011 +0200
+
+    drm/intel: don't clobber bufmgr->pci_device
+    
+    Otherwise it's pretty hard to differentiate the different chipset
+    variants.
+    
+    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+
+commit 1459cb9252e3a07292d3e64ce961f738cd01eae4
+Author: Matt Turner <mattst88@gmail.com>
+Date:   Thu Mar 3 21:02:06 2011 -0500
+
+    modeprint.c: use PRIu64 for printing uint64_t
+    
+    Signed-off-by: Matt Turner <mattst88@gmail.com>
+
+commit 7d8381614174c6c70c5676cb230f0d9b034b27aa
+Author: Marcin Slusarz <marcin.slusarz@gmail.com>
+Date:   Sun Jun 12 16:40:40 2011 +0200
+
+    nouveau: assert argument cannot have side effects
+    
+    ... because argument is evaluated only if NDEBUG is not defined
+
+commit 763b618d55a973807823bb1a1c6e60b9e2db6d8b
+Author: Marcin Slusarz <marcin.slusarz@gmail.com>
+Date:   Sun Jun 5 18:53:16 2011 +0200
+
+    drm mode: fix drmIoctl wrapper
+    
+    Both drmIoctl and ioctl define second argument as unigned long.
+    
+    Debugging/tracing tools (like strace or valgrind) on 64-bit machines see
+    different request value for ioctls with 32nd bit set, because casting
+    signed int to unsigned long extends 32nd bit to upper word, so 0x80000000
+    becomes 0xFFFFFFFF80000000)
+    
+    Nobody noticed because higher 32 bits are chopped off on their way to kernel.
+
+commit 2acaf160df584a5ef7b5c5b84819389948cd97ad
+Author: Ben Widawsky <ben@bwidawsk.net>
+Date:   Fri Jun 24 10:52:57 2011 -0700
+
+    intel: shared header for shader debugging
+    
+    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>
+    Cc: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit ce317a6d09bb93cff73703b06e5a5bc3cc0b1c6a
+Author: Yuanhan Liu <yuanhan.liu@linux.intel.com>
+Date:   Wed Jul 20 16:08:51 2011 +0800
+
+    intel: fix the wrong method check for bo_get_subdata
+    
+    It's going to call bo_get_subdata method, but not bo_subdata
+    
+    Signed-off-by: Yuanhan Liu <yuanhan.liu@linux.intel.com>
+
+commit 8d055890d90c3d92647e3d8b98d32630ef87c2c8
+Author: Chih-Wei Huang <cwhuang@linux.org.tw>
+Date:   Tue Jul 12 16:35:28 2011 +0800
+
+    Specify the return type explicitly.
+
+commit 6dd804c5a92104042b8be0a67d107946394a0b7a
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Sat Jun 4 13:01:50 2011 +0100
+
+    configure: version bump for 2.4.26 release
+    
+    Push the new Intel API for use by mesa.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 9d77603d8b95aee4f2408e437c55af15ee05b608
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Sat Jun 4 12:47:19 2011 +0100
+
+    intel: Add interface to query aperture sizes.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 61be94018ae9c403517d53f69357719224fa6ff3
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Sat May 14 11:15:06 2011 +0100
+
+    libkms: All current BO_TYPE are 32bpp
+    
+    ... so request a 32bpp dumb buffer rather than a 16bpp.
+    
+    Fixes modetest and friends.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit ba11501bb9f5bd98110dfe1385b4501c0a9a643a
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Apr 11 08:25:42 2011 +0100
+
+    configure: version bump for 2.4.25 release
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit be8802a9414e85ba07ae257fccadd245fcf7c7b6
+Author: Ilija Hadzic <ihadzic@research.bell-labs.com>
+Date:   Thu Mar 24 13:24:28 2011 -0400
+
+    libdrm: (revised) vblank wait on crtc > 1
+    
+    Hi Alex,
+    
+    Enclosed is a revised version of the patch sent on Mar 18, against
+    the master branch of the drm userspace (i.e. libdrm). Details
+    summarised in this thread:
+    http://lists.freedesktop.org/archives/dri-devel/2011-March/009499.html
+    
+    This patch reconciles libdrm with the the kernel change that Dave
+    pushed this morning. It *supersedes* the previously sent patch (i.e.
+    apply it to the master branch as it exists at the time of this writing,
+    not as an incremental patch to the one sent previously).
+    
+    Regards,
+    
+    Ilija
+    
+    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
+    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>
+
+commit f395b0a25c9f99688e7b2799ac02f1f930f24e09
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Apr 4 08:57:42 2011 +0100
+
+    intel: Also handle mrb_exec fallback with ring == I915_EXEC_RENDER
+    
+    Reported-by: Oliver McFadden <oliver.mcfadden@nokia.com>
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 5cb554a0d6e986f2d7300a91d95983fa09b17f65
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Mar 30 06:11:21 2011 +1000
+
+    drm_mode: fix types on recently added ioctls
+
+commit 06ebbf7c2c071c8a4f32d3cfac914874fe981054
+Author: Daniel Vetter <daniel.vetter@ffwll.ch>
+Date:   Sat Mar 26 15:04:04 2011 +0100
+
+    Cleanup gen2 tiling confusion
+    
+    A tile on gen2 has a size of 2kb, stride of 128 bytes and 16 rows.
+    
+    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+
+commit fd3ed34a2070fca3804baf54ece40d0bc2666226
+Author: Javier Jardón <javier.jardon@codethink.co.uk>
+Date:   Wed Feb 9 13:28:20 2011 +0000
+
+    build: Update autotools configuration
+    
+    Replace some deprecated autoconf macros and use the new libtool
+    syntax
+
+commit 3b04c73650b5e9bbcb602fdb8cea0b16ad82d0c0
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Mar 4 15:48:31 2011 +1000
+
+    libdrm: oops fix get cap return value.
+
+commit bb994653667986757b4c906b8f144737667f7374
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Feb 9 13:41:49 2011 +1000
+
+    libkms: add dumb support
+    
+    this uses the drm cap interface to check if the dumb ioctl
+    is supported.
+
+commit 5c6c6913d1260024e5d156db7973c9e46fe1ff03
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Mon Feb 21 11:27:19 2011 +1000
+
+    Implement drmGetCap() to query device/driver capabilities
+    
+    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit 4473a7e8234da6d16f4ccfa660fbd72ff1b7dd95
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Feb 9 13:41:28 2011 +1000
+
+    drm: add dumb interface
+
+commit edd41db37deb21aab5154b94354fe9470fc59cf3
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Thu Mar 3 21:35:28 2011 -0500
+
+    Build modetest for all chipsets, always build modeprint
+
+commit 3293eb95cabc83f5d2282c2890919c07e6af5205
+Author: Matt Turner <mattst88@gmail.com>
+Date:   Thu Mar 3 21:20:52 2011 -0500
+
+    don't try to build modetest without libkms
+    
+    Signed-off-by: Matt Turner <mattst88@gmail.com>
+
+commit a926a043b8079a8e283aa231e3c2347f5ad5864f
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Mar 1 18:24:14 2011 +0000
+
+    configure: Bump version to 2.4.24
+    
+    New kernel headers.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 0209428b3918c4336018da9293cdcbf7f8fedfb6
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Mar 1 16:01:53 2011 +0000
+
+    intel: Add I915_PARAM_HAS_RELAXED_DELTA
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit e6018c25ca63fa6066d8fa6e57373030d07b0392
+Author: Daniel Vetter <daniel.vetter@ffwll.ch>
+Date:   Tue Feb 22 19:11:07 2011 +0100
+
+    intel: Fixup for the fix for relaxed tiling on gen2
+    
+    This is Fail.
+    
+    First patch to libdrm, and I've borked it up.
+    
+    Noticed-by: Chris Wilson <chris@chris-wilson.co.uk>
+    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+
+commit 9a71ed93f48f4b319148913a6b56751f6341f078
+Author: Daniel Vetter <daniel.vetter@ffwll.ch>
+Date:   Tue Feb 22 18:53:56 2011 +0100
+
+    intel: fix relaxed tiling on gen2
+    
+    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+
+commit a697fb6acad7992c3d23bb6a663663694782eb7b
+Author: Benjamin Franzke <benjaminfranzke@googlemail.com>
+Date:   Thu Feb 17 20:36:42 2011 +0100
+
+    modetest: Do no flip twice to a current front buffer
+    
+    The incorrect order was:
+    fb, other_fb, other_fb, fb_id, other_fb, ..
+
+commit 51c6ae4c3a0e5527d3c6e1632b21546baaba0b29
+Author: Benjamin Franzke <benjaminfranzke@googlemail.com>
+Date:   Thu Feb 17 14:09:12 2011 +0100
+
+    tests/modeprint: Output masks as hex numbers
+
+commit 17762467850618323f59e91702e3fc0749fbceac
+Author: Benjamin Franzke <benjaminfranzke@googlemail.com>
+Date:   Thu Feb 17 14:07:58 2011 +0100
+
+    tests/modeprint: Remove needless dependency on drm_intel
+
+commit 8fef29093fae2a08f8c1cb4946687bf4bb62a1ca
+Author: Benjamin Franzke <benjaminfranzke@googlemail.com>
+Date:   Thu Feb 17 10:47:47 2011 +0100
+
+    modetest: Create buffers using libkms
+
+commit c75fe3ae738732afda3a7d4222bb3828ed9ef7a8
+Author: Benjamin Franzke <benjaminfranzke@googlemail.com>
+Date:   Thu Feb 17 10:46:35 2011 +0100
+
+    configure.ac: ac_define HAVE_RADEON
+
+commit ed7d177f66885dfbc4e8410154559c4767fefa9f
+Author: nobled <nobled@dreamwidth.org>
+Date:   Thu Sep 9 10:07:21 2010 +0100
+
+    libkms/radeon: Add backend
+    
+    Todo: What tiling should be set on scanout buffers?
+    
+    Haven't tested besides compiling it.
+
+commit 36d4939343d8789d9066f7245fa2d4fe69119dd8
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Feb 14 09:39:06 2011 +0000
+
+    intel: Remember named bo
+    
+    ... and if asked to open a bo by the same global name, return a fresh
+    reference to the previously allocated buffer.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 53581b6210c024044e0065527d1506e6f5657ef5
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Feb 14 09:27:05 2011 +0000
+
+    intel: Set the public handle after opening by name
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 550fe2ca3b29ad2191eab4fdfbed9ed21e25492d
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Wed Jan 12 15:06:25 2011 +0000
+
+    intel: compile fix for previous commit after rebasing
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 6717b7579f84d05e45e7846d2b6e767760461709
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Wed Jan 12 10:57:46 2011 +0000
+
+    intel: Fallback to old exec if no mrb_exec is available
+    
+    Reported-by: Torsten Hilbrich <torsten.hilbrich@secunet.com>
+    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=33016
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit bad5242a59aa8e31cf10749e2ac69b3c66ef7da0
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Mon Dec 20 16:02:42 2010 +1000
+
+    nouveau: fix up reloc_emit() to accept NULL target buffer
+    
+    The nvc0 gallium drivers passes NULL here to indicate to the memory manager
+    that a buffer is being used, but without creating an actual reloc.
+    
+    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit 45cfb9cf089cd56878b1cb5d15391d2470dbeb7c
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Mon Dec 20 10:53:44 2010 +1000
+
+    nouveau: split pushbuf macros specific to nv04-nv50 out, and add nvc0
+    
+    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit ba731e7b58911e8caa4e37f0075a677d7ac2afc6
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Thu Dec 9 09:18:35 2010 +1000
+
+    nouveau: nvc0 drm has no concept of "notifier block"
+    
+    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit 0184bb1c6d946bcaf198f7680b3405adca676790
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Sun Dec 19 13:01:15 2010 +0000
+
+    intel: Export CONSTANT_BUFFER addressing mode
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 760c01a6af12c013bca0ad1f17c793ca813be4cc
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Fri Dec 10 12:10:46 2010 +0000
+
+    configure: Bump version to 2.4.23
+    
+    To export new kernel API for Intel's 2010Q4 release.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 000a0972c21ca1a17609e638907607470ee21751
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Fri Dec 10 12:10:13 2010 +0000
+
+    tests: Update for ENOENT returns from unknown handles
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 537703fd4805e9cd352965fce642670986822d22
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Dec 7 20:34:22 2010 +0000
+
+    intel: Reorder need_fence vs fenced_command to avoid fences on gen4
+    
+    gen4+ hardware doesn't use fences for GPU access and the older kernel
+    doesn't expect userspace to make such a mistake. So don't.
+    
+    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=32190
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 39e5e982242cd2b611a9dfc1e9b63f857d52da61
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Dec 7 14:26:09 2010 +1000
+
+    drm: don't do the create the node ourselves if we have udev.
+    
+    this can remove nodes it shouldn't, let udev run the show.
+    
+    this is needed for reliably GPU switch.
+    
+    Signed-off-by: Dave Airlie <airlied@redhat.com>
+
+commit af3d282afbd3360245c2ef2d3552b2530f67481d
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Fri Dec 3 10:48:12 2010 +0000
+
+    intel: If the command is fenced inform the kernel
+    
+    ... but only account for a fenced used if the object is tiled.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 8420743301a36dc1316fadf53bf8e1478068400a
+Author: Marek Olšák <maraeo@gmail.com>
+Date:   Thu Dec 2 04:12:16 2010 +0100
+
+    radeon: silence valgrind warnings by zeroing memory
+
+commit 1443bea488f6ad47cb4469c01b35aea0377822c0
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Thu Nov 25 16:59:20 2010 +0000
+
+    intel: Add a forward declaration of struct drm_clip_rect
+    
+    ... so that intel_bufmgr.h can be compiled standalone.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 51b895041c65f7ec9ecda48e79279dde29258b07
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Nov 22 09:50:06 2010 +0000
+
+    intel: Compute in-aperture size for relaxed fenced objects
+    
+    For relaxed fencing the object may only consume the small set of active
+    pages, but still requires a fence region once bound into the aperture.
+    This is the size we need to use when computing the maximum possible
+    aperture space that could be used by a single batchbuffer and so avoid
+    hitting ENOSPC.
+    
+    Reported-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit d17681d538ce86a3f8d6d1c7407df3ceb2bcc499
+Author: Francisco Jerez <currojerez@riseup.net>
+Date:   Sat Nov 20 14:32:45 2010 +0100
+
+    nouveau: Add implicit pushbuf flush before gpuobj destruction.
+    
+    It makes sure that GPU object destruction is executed in order with
+    respect to the previous FIFO commands.
+    
+    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
+    Acked-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit 877b2ce15b80975b4dac42657bdfb0a3da833e1c
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Nov 9 13:51:45 2010 -0800
+
+    intel: Fix drm_intel_gem_bo_wait_rendering to wait for read-only usage too.
+    
+    Both the consumers of this API (sync objects and client throttling)
+    were expecting this behavior.  The kernel used to actually behave the
+    desired (but incorrect) way for us anyway, but that got fixed a while
+    back.
+
+commit 49447a9b957047db2549b8a929e763bbd87808ba
+Author: Albert Damen <albrt@gmx.net>
+Date:   Sun Nov 7 15:54:32 2010 +0100
+
+    intel: initialize bufmgr.bo_mrb_exec unconditionally
+    
+    If bufmgr.bo_mrb_exec is not set, drm_intel_bo_mrb_exec returns ENODEV
+    even though drm_intel_gem_bo_mrb_exec2 will work fine for the RENDER ring.
+    Fixes xf86-video-intel after commit 'add BLT ring support' (5bed685f76)
+    with kernels without BSD or BLT ring support (2.6.34 and before).
+    
+    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=31443
+    Signed-off-by: Albert Damen <albrt@gmx.net>
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit a52e61b5c888444435929a2770f14109c3a94f2f
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Nov 2 11:21:56 2010 -0700
+
+    intel: Drop silly asserts on mappings present at unmap time.
+    
+    The intent of these was to catch mismatched map/unmap.  What it
+    actually did was check whether there was ever a mapping of that type
+    (including in a previous life of the buffer through the userland BO
+    cache), not whether they were mismatched.  We don't even actually want
+    to catch mismatched map/unmap, unless we also do refcounting, since at
+    one point Mesa would do map/map/use/unmap/unmap.  Just remove this
+    code instead.
+
+commit 4abb65f95c79c9a2ec2cc1147a753704b5cdd22e
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Nov 2 11:19:21 2010 -0700
+
+    intel: Remove gratuitous assert on bo_reference.
+    
+    This couldn't be triggered except by overflow, since there's an assert
+    in unreference to catch the usual failure of over-unreferencing.
+
+commit f45305c1aaf5d8053b047ff6c4ac177e26ae6d17
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Nov 1 06:54:58 2010 -0700
+
+    intel: Shove the fake bufmgr subdata implementation into the fake bufmgr.
+
+commit 6560b4766c37603f5167859513bdc300f89a4761
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Sep 20 14:14:14 2010 -0700
+
+    intel: Remove stale comment.
+
+commit d0a4f2e292e5b347f7e5ee2cdbe4f077986eb9da
+Author: Francisco Jerez <currojerez@riseup.net>
+Date:   Sun Oct 31 02:22:29 2010 +0200
+
+    nouveau: Avoid unnecessary call to CPU_FINI.
+    
+    nouveau_bo_unmap called the CPU_FINI IOCTL even if it was a NOSYNC
+    mapping. It caused no harmful effects (actually CPU_FINI is a no-op on
+    recent enough kernels) besides the precious CPU cycles being wasted.
+    
+    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
+
+commit 362457715faacd3101929e5f0d8ae250d0ad09df
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Fri Oct 29 10:49:54 2010 +0100
+
+    intel: enable relaxed fence allocation for i915
+    
+    The kernel has always allowed userspace to underallocate objects
+    supplied for fencing. However, the kernel only allocated the object size
+    for the fence in the GTT and so caused tiling corruption. More recently
+    the kernel does allocate the full fence region in the GTT for an
+    under-sized object and so advertises that clients may finally make use
+    of this feature. The biggest benefit is for texture-heavy GL games on
+    i945 such as World of Padman which go from needing over 1GiB of RAM to
+    play to fitting in the GTT!
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 0a1ff35c70730160973715b82112cd97c62ac13e
+Author: Adam Jackson <ajax@redhat.com>
+Date:   Wed Oct 27 18:44:53 2010 -0400
+
+    s/drmStrdup/strdup/
+    
+    _DRM_MALLOC hasn't been a relevant concern since we split libdrm out
+    from xserver.
+    
+    Signed-off-by: Adam Jackson <ajax@redhat.com>
+
+commit 057fab3382c02af54126ce395c43d4e6dce9439a
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Oct 26 11:35:11 2010 +0100
+
+    intel: Prepare for BLT ring split.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit c5286f4a871e054b63dee8a60a6f06574c4ca1b8
+Author: Francisco Jerez <currojerez@riseup.net>
+Date:   Thu Oct 21 23:02:43 2010 +0200
+
+    nouveau: Define the HAS_PAGEFLIP getparam.
+    
+    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
+
+commit 09b1062628f2cbddb3ebae20e7b3b8a0a93acebf
+Author: Francisco Jerez <currojerez@riseup.net>
+Date:   Tue Sep 28 22:45:27 2010 +0200
+
+    nouveau: Let the user choose the push buffer size.
+    
+    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
+    Acked-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit 1b9187c43a0c17600611edb9e299141748e87974
+Author: Francisco Jerez <currojerez@riseup.net>
+Date:   Tue Sep 28 22:47:11 2010 +0200
+
+    nouveau: Define buffer object usage flags.
+    
+    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
+    Acked-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit 96214860bb0a5e11e7d346351a1be248e3716144
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Fri Oct 1 16:50:09 2010 +0100
+
+    intel: Downgrade error warnings to debug
+    
+    As the higher layers check the error return from libdrm-intel and
+    are supposed to handle the error (and print their own warning in
+    extremis) the voluminous output on stderr is just noise and a hazard in
+    its own right.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 624e58e3e43c0b2c6803cb9263863444abeb3acb
+Author: Carl Worth <cworth@cworth.org>
+Date:   Tue Sep 28 20:40:37 2010 -0700
+
+    Increment version to 2.4.22
+    
+    For the upcoming 2.4.22 release.
+
+commit 6299722c478234a759b1ce748436197ca1a17ebf
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Sat Sep 25 21:32:59 2010 +0100
+
+    intel: Replace open-coded drmIoctl with calls to drmIoctl()
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 81fa7a9f56b1efb04658db921e5228c102548921
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Tue Sep 21 13:02:07 2010 +1000
+
+    nouveau: fix drm version check some more
+    
+    ... and make a mental note to not push commits before having coffee
+    
+    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit d1cec6d2a9d63411c70c6c37509129ea4afe07d8
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Mon Sep 20 08:07:28 2010 +1000
+
+    nouveau: fix thinko in drm version check
+    
+    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit 7ec9a1effa4f551897f91f3b017723a8adf011d9
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Thu Sep 9 18:52:28 2010 +0100
+
+    modetest: Fix drawing routines to use stride.
+
+commit 0da84f89c2cb25416bd3bdecae24f287b08cdb76
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Thu Sep 9 10:27:22 2010 -0700
+
+    modetest: align fb pitch to 64 bytes
+    
+    Docs say this is necessary, and the kernel now enforces this.
+
+commit b8abe6139e5c6779ee87d983346f0f65bf67462e
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Tue Sep 7 13:10:15 2010 -0700
+
+    modetest: add edp and TV connector names to the connector name array
+
+commit 23287f05cf2443ddf9e028e29beb5bd30979c6cf
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Aug 26 15:39:28 2010 -0700
+
+    Avoid use of c++ reserved keyword "virtual" when using a C++ compiler.
+    
+    Avoids requiring nasty hacks around libdrm headers in the new C++
+    parts of Mesa drivers.
+
+commit 8a76244a0fd09d0e3298fe68af812d7eaa4dbcb5
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Aug 24 21:29:31 2010 +0100
+
+    Free the property blob along the error path.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit b61e81a191d3a5c269c5f7c40199aebc9ebc034c
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Wed Aug 18 12:06:48 2010 +1000
+
+    nouveau: accept both 0.0.16 and 1.x.x
+    
+    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit b04515c5d6c95f573457a94267b855cceb639105
+Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
+Date:   Fri Aug 6 13:55:11 2010 +1000
+
+    libdrm: Fix PCI domain domain support
+    
+    This works in conjunction with newer kernels. If we succeed in requesting
+    interface 1.4, the we know the kernel provides proper domain numbers. If
+    not, ignore the domain number as it's bogus (except on Alpha).
+    
+    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
+    Signed-off-by: Adam Jackson <ajax@redhat.com>
+
+commit 431f7f00db844534dbcf9a63da0d2832a3d91bff
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Aug 4 08:41:23 2010 +1000
+
+    Copy headers from kernel drm-core-next
+
+commit b803918f3f77c62edf22e78cb2095be399753423
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Thu Jul 1 22:38:54 2010 +0100
+
+    drm mode: Return -errno on drmIoctl() failure
+    
+    The high layers expect to receive a status code on error (on the
+    pessimistic assumption that the errno value will have been overwritten
+    by the time the failure is propagated all the way up), so convert
+    xf86drmMode.c to return -errno on an ioctl error and be consistent with
+    the rest of the libdrm API.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit c570b4b97b8ff71da9294aaf8242ed665f0c09c3
+Author: Fernando Carrijo <fcarrijo@yahoo.com.br>
+Date:   Thu Jul 1 09:28:29 2010 -0700
+
+    Purge macro NEED_REPLIES
+    
+    Signed-off-by: Fernando Carrijo <fcarrijo@yahoo.com.br>
+    Signed-off-by: Brian Paul <brianp@vmware.com>
+
+commit c3ddfea1a64b7aaaebfb429243c71feb0801da9d
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Jun 29 20:12:44 2010 +0100
+
+    intel: Suppress the error return from setting domains after mapping.
+    
+    If the mapping succeeds we have a valid pointer. If setting the domain
+    failures we may incur cache corruption. However the usual failure mode
+    is because of a hung GPU, in which case it is preferable to ignore the
+    minor error from setting the domain and continue on oblivious. If
+    these errors persist, we should rate limit the warning [or even just
+    remove it].
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 726210f87d558d558022f35bc8c839e798a19f0c
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Thu Jun 24 11:38:00 2010 +0100
+
+    intel: Limit tiled pitches to 8192 on pre-i965.
+    
+    Fixes:
+    
+      Bug 28515 - Failed to allocate framebuffer when exceed 2048 width
+      https://bugs.freedesktop.org/show_bug.cgi?id=28515
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 6ea2bda5f5ec8f27359760ce580fdad3df0464df
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Jun 22 13:03:52 2010 +0100
+
+    intel: Only adjust the local stride used for SET_TILING in tiled alloc
+    
+    Mesa uses the returned pitch from alloc_tiled, so make sure that we set
+    it correctly before modifying the stride used for the SET_TILING call.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit aba3502190a5bd2203e71ae2b1b7dd5aeb223905
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Jun 22 13:00:22 2010 +0100
+
+    intel: Restore SET_TILING for non-flinked bo.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit c7bbaca6a376f40d914d1ed33e119f2330701c9a
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Jun 22 11:15:56 2010 +0100
+
+    intel: '===' != '=='
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit cd34cbeb9f5c65b25d241700f27c16b36e1ecce6
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Jun 22 11:07:26 2010 +0100
+
+    intel: Sanitise strides for linear buffers and SET_TILING
+    
+    Ensure that the user doesn't attempt to specify a stride to use with a
+    linear buffer by forcing such to be zero.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 13e8270504cffa96bd067dc5c792a79555e8b2d4
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Jun 21 15:38:06 2010 +0100
+
+    intel: Print out debugging message following ENOSPC
+    
+    execbuffer() returns ENOSPC if it cannot fit the batch buffer into the
+    aperture which is the error we want to diagnose here.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit f16b4164d686893949daa3217a011d21c5bd7f95
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Jun 21 15:21:48 2010 +0100
+
+    intel: Scan the cache for old bo once every second.
+    
+    Rearrange the cache cleanup so that we always scan following a final
+    unreference, and guard against multiple scans in a single second.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 5eec286838118501dd79178c152000ad4cbd70e1
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Jun 21 14:20:56 2010 +0100
+
+    intel: Force stride to be 0 for I915_TILING_NONE.
+    
+    When allocating a tiled buffer, if we remove the desired tiling mode due
+    to it being beyond hardware limits, also remove the stride. This ensures
+    that we only ever use stride 0 with I915_TILING_NONE.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 1db22ff741f92b84450ec13093e070a6ad5fc857
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Jun 21 14:27:23 2010 +0100
+
+    intel: Defer tiling change to allocation.
+    
+    As we now expose a method to allocate tiled buffers, it makes more sense
+    to defer the SET_TILING until required. Besides the slim chance that it
+    will be a no-op, by delaying the change we are less likely to stall on
+    waiting for a bound buffer to release a fence register.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 056aa9be04e923a45ca00924caa587d6dbf8821d
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Jun 21 14:31:29 2010 +0100
+
+    intel: Track tiling stride
+    
+    We need to inform the kernel if the tiling stride changes and not only
+    for changes of the tiling mode.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 65ec8d7699267cc59777d531f545a82a14341480
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jun 10 08:59:05 2010 -0700
+
+    Bump version to 2.4.21 for release.
+
+commit b8c4e5836cf1eff3e8c666f24567bd4c2fa31140
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jun 10 09:03:41 2010 -0700
+
+    Fix radeon distcheck.
+
+commit 4f7704aea76b3d93d997d2ff815541d0ac373535
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jun 10 08:58:08 2010 -0700
+
+    intel: Fix several other paths for buffers pointing at themselves.
+
+commit 0ec768e67aec8b1ded9bcf575ad1c0beb28cc0ca
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Jun 4 17:09:11 2010 -0700
+
+    intel: Add more intermediate sizes of cache buckets between powers of 2.
+    
+    We had two cases recently where the rounding to powers of two hurt
+    badly: 4:2:0 YUV HD video frames would round up from 2.2MB to 4MB, and
+    Urban Terror was hitting aperture size limitations.  For UT, this is
+    because mipmap trees for power of two texture sizes will land right in
+    the middle between two cache buckets.
+    
+    By giving a few more sizes between powers of two, Urban Terror on my
+    945 ends up consuming 207MB of GEM objects instead of 272MB, and HD
+    video decode on Ironlake goes from 99MB to 75MB.
+    
+    cairo-perf-diff of the benchmarks for gl and xlib shows a 1.09x and
+    1.06x speedup and a 1.07x, 1.08x, and 1.11x slowdown.  From this, I
+    think this patch was really a no-op in terms of performance for these
+    CPU-bound workloads.
+
+commit e65caeba9ed0e6c53830d944248aaae2228351ab
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Wed Jun 9 10:08:41 2010 +0100
+
+    intel: Convert to untiled pitches if surface is too large for tiling.
+    
+    If the pitch is too large for the hardware to tile, recompute the
+    required surface size based on the untiled pitch and alignments. For the
+    older hardware, which has smaller limits and greater restrictions, this
+    may be a considerable saving in allocation size.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit f179137f8f5bf272b79266575121c7a04038290c
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jun 7 14:22:36 2010 -0700
+
+    Allow a buffer to point at itself and still get relocs.
+    
+    I'm using this in experiments with the i965 Mesa driver.
+
+commit 66375fd6e8d3e95df5d124883a1426460c1b8ed8
+Author: Zou Nan hai <nanhai.zou@intel.com>
+Date:   Wed Jun 2 10:07:37 2010 +0800
+
+    intel: Add support for kernel multi-ringbuffer API.
+    
+    This introduces a new API to exec on BSD ring buffer, for H.264 VLD
+    decoding.
+    
+    Signed-off-by: Xiang Hai hao <haihao.xiang@intel.com>
+    Signed-off-by: Zou Nan hai <nanhai.zou@intel.com>
+
+commit 73a42a645201a85ce2fe4fc77754df67e5097fc9
+Author: Jesse Barnes <jbarnes@jbarnes-asus.(none)>
+Date:   Wed Jun 2 18:27:24 2010 -0700
+
+    add vbltest to .gitignore
+
+commit ae57dcf6e063860200b7949d5e2365e80ac4aea7
+Author: Daniel Stone <daniel@fooishbar.org>
+Date:   Tue Jun 1 19:23:42 2010 +0100
+
+    libkms: Fix include paths
+    
+    Otherwise xf86drm.h isn't found, or the wrong one.
+
+commit 607e228c263d5d171bd0615d5d93202dda371e5f
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue May 25 20:13:37 2010 -0700
+
+    Enable silent automake rules.
+
+commit 58e54f62c91aff4f4be96c6d8771ca9110969f49
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue May 25 20:11:23 2010 -0700
+
+    intel_bufmgr_fake: fix compile warning.
+
+commit fcf3e616eeeb289f96af1436d809f0a1a42bebb7
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon May 24 18:35:41 2010 +0100
+
+    intel: Don't change tiling mode unless the kernel reports success.
+    
+    Fixes:
+    
+      Bug 26686 - Some textures are distorted with libdrm 2.4.18 in GTAVC&GTA3
+      http://bugs.freedesktop.org/show_bug.cgi?id=26686
+    
+    This bug continues to haunt me. The kernel SET_TILING ioctl is
+    inconsistent in its return values when reporting an error. If one of its
+    sanity checks fail, then the input values are left unchanged. If the
+    kernel later fails to change the tiling mode, then the input values are
+    modified to match the current tiling on the object. In short, userspace
+    cannot trust the return values upon error and so we must assume that
+    upon error our current tiling mode matches reality and not update.
+
+commit a3305b076c005e0d3bd55da0214e91413cf65b48
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Thu May 13 08:24:28 2010 +0100
+
+    Revert "intel: We don't need to take the bufmgr lock whilst mapping."
+    
+    This reverts commit 7ca558494dd3f68f29bb6ca981de9b8f49620b60.
+    
+    This was pushed ahead of an essential review of bo level locking in
+    mesa, without which we cannot know whether removing this lock is safe.
+
+commit 52a3e9df629952e58bd019b8cd4cda1dd254a543
+Author: Jonathan Callen <abcd@gentoo.org>
+Date:   Wed May 12 13:55:34 2010 -0400
+
+    Only build tests in make check
+    
+    Currently, all the tests for libdrm are built during 'make all', even
+    if you do not wish to run tests.  Attached is a patch, based on
+    version 2.4.15, to make the tests build in 'make check'.
+
+commit 62731b84114e5dd3310b465921955db14278c256
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Wed May 12 13:34:25 2010 -0400
+
+    Pull in new kernel headers
+    
+    Changes struct drm_mode_crtc_page_flip to use __u32 instead of uint32_t,
+    fixes
+    
+    https://bugs.freedesktop.org/show_bug.cgi?id=26994
+
+commit 07e7589d86624e9c1ca4c38d00cf6886e1445ae2
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue May 11 08:54:06 2010 +0100
+
+    intel: query whether a buffer is reusable.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 7ca558494dd3f68f29bb6ca981de9b8f49620b60
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Thu Apr 1 17:15:39 2010 +0100
+
+    intel: We don't need to take the bufmgr lock whilst mapping.
+
+commit 6293152eb065016a2e5e4fcd047c2db5c2fb0f36
+Author: Michel Dänzer <daenzer@vmware.com>
+Date:   Wed Apr 28 08:25:30 2010 +0200
+
+    vbltest: Doesn't need intel stuff.
+    
+    Fixes build without libdrm_intel.
+
+commit c42d1a10e37cc2ff378511a058b89a6f8eddf1c0
+Author: Jesse Barnes <jbarnes@jbarnes-acer.(none)>
+Date:   Tue Apr 27 15:43:20 2010 -0400
+
+    tests: add new vblank test
+    
+    Simple test for event frequency.
+
+commit af98ccf4dd5dcb1b904ec32b9bd1521e6bf7dda5
+Author: Marek Olšák <maraeo@gmail.com>
+Date:   Mon Apr 26 20:06:53 2010 +0200
+
+    radeon: use the const qualifier in radeon_cs_write_table
+    
+    Signed-off-by: Marek Olšák <maraeo@gmail.com>
+
+commit c9065c5963db1b8196d278c47b8da2c33a3c49d1
+Author: Alan Coopersmith <alan.coopersmith@oracle.com>
+Date:   Fri Apr 16 17:34:11 2010 -0700
+
+    Correct the Solaris definitions of atomic_add & atomic_dec
+    
+    The #defines added in 966c9907c040b4fe4b288b4a9d82598797aee743 were
+    mapping these to functions that don't exist.
+    
+    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
+
+commit 3c7ae8abe1eee1b1231f7c81e9898485940901c7
+Author: Alan Coopersmith <alan.coopersmith@oracle.com>
+Date:   Fri Apr 16 10:12:37 2010 -0700
+
+    Make libkms build default OS-dependent
+    
+    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
+
+commit 3506173ba7e726a9d0a17ec42734a925a885b01e
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Sun Apr 11 18:40:38 2010 +0100
+
+    intel: Use the correct size when allocating reloc_target_info array
+    
+    Thomas tracked down this error with kdm and commit b509640:
+    
+    ==4320== Invalid write of size 8
+    ==4320==    at 0x9A97998: do_bo_emit_reloc (in /usr/lib/libdrm_intel.so.1.0.0)
+    ==4320==    by 0x9A97B9C: drm_intel_gem_bo_emit_reloc (in /usr/lib/libdrm_intel.so.1.0.0)
+    ==4320==    by 0xAED3234: intel_batchbuffer_emit_reloc (in /usr/lib/xorg/modules/dri/i965_dri.so)
+    ==4320==    by 0xAF13827: brw_emit_vertices (in /usr/lib/xorg/modules/dri/i965_dri.so)
+    ==4320==    by 0xAF1F14D: brw_upload_state (in /usr/lib/xorg/modules/dri/i965_dri.so)
+    ==4320==    by 0xAF12122: brw_draw_prims (in /usr/lib/xorg/modules/dri/i965_dri.so)
+    ==4320==    by 0xB256824: vbo_exec_vtx_flush (in /usr/lib/xorg/modules/dri/libdricore.so)
+    ==4320==    by 0xB2523BB: vbo_exec_FlushVertices_internal (in /usr/lib/xorg/modules/dri/libdricore.so)
+    ==4320==    by 0xB252411: vbo_exec_FlushVertices (in /usr/lib/xorg/modules/dri/libdricore.so)
+    ==4320==    by 0xB195A3D: _mesa_PopAttrib (in /usr/lib/xorg/modules/dri/libdricore.so)
+    ==4320==    by 0x8DF0F02: __glXDisp_Render (in /usr/lib/xorg/modules/extensions/libglx.xorg)
+    ==4320==    by 0x8DF517F: __glXDispatch (in /usr/lib/xorg/modules/extensions/libglx.xorg)
+    ==4320==  Address 0x126a8b80 is 0 bytes after a block of size 16,368 alloc'd
+    ==4320==    at 0x4C23E03: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
+    ==4320==    by 0x9A97A64: do_bo_emit_reloc (in /usr/lib/libdrm_intel.so.1.0.0)
+    ==4320==    by 0x9A97B9C: drm_intel_gem_bo_emit_reloc (in /usr/lib/libdrm_intel.so.1.0.0)
+    ==4320==    by 0xAED3234: intel_batchbuffer_emit_reloc (in /usr/lib/xorg/modules/dri/i965_dri.so)
+    ==4320==    by 0xAF191DB: upload_binding_table_pointers (in /usr/lib/xorg/modules/dri/i965_dri.so)
+    ==4320==    by 0xAF1F14D: brw_upload_state (in /usr/lib/xorg/modules/dri/i965_dri.so)
+    ==4320==    by 0xAF12122: brw_draw_prims (in /usr/lib/xorg/modules/dri/i965_dri.so)
+    ==4320==    by 0xB255EF6: vbo_exec_DrawArrays (in /usr/lib/xorg/modules/dri/libdricore.so)
+    ==4320==    by 0x8DF67A3: __glXDisp_DrawArrays (in /usr/lib/xorg/modules/extensions/libglx.xorg)
+    ==4320==    by 0x8DF0F02: __glXDisp_Render (in /usr/lib/xorg/modules/extensions/libglx.xorg)
+    ==4320==    by 0x8DF517F: __glXDispatch (in /usr/lib/xorg/modules/extensions/libglx.xorg)
+    ==4320==    by 0x446293: ??? (in /usr/bin/Xorg)
+    
+    which is simply due to only allocating space for the pointers and not
+    the structs themselves. D'oh.
+    
+    Reported-by: Thomas Bächler <thomas@archlinux.org>
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 894c86e8400f13f1ee0dfe23ca4b5f98c32d9223
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Fri Apr 9 16:33:38 2010 -0400
+
+    Revert "Fix pkgconfig includes for /usr/include/drm"
+    
+    This reverts commit 245d6957794648d7fd83279c680fed6e4c262147.
+    
+    libdrm now install headers in ${includedir}/libdrm and /usr/include/drm
+    is reserved for the kernel headers.  We should only ever add one of these
+    to the CFLAGS.
+
+commit 204c76c4d62c06eceacd9d603f2bc3e2f8e84270
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Fri Apr 9 20:38:34 2010 +1000
+
+    nouveau: stop shipping nouveau_class.h
+    
+    The motivation behind this is that by shipping it here, it's essentially
+    an API which causes issues while bisecting across changes to the header
+    files.
+
+commit 78de69713d742645c1c4347a06afca5b38f97184
+Author: Jerome Glisse <jglisse@redhat.com>
+Date:   Thu Apr 8 17:50:34 2010 +0200
+
+    drm/radeon: add new cs command stream dumping facilities
+    
+    Dump command stream + associated bo into a binary file
+    which follow a similar design as json file. It allows
+    to intercept a command stream and replay it in a standalone
+    program (see radeondb tools).
+
+commit c7650003c52ee29b7fa5ebf20dd134079f0b8488
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Fri Apr 2 13:46:41 2010 -0700
+
+    libdrm: bump version number to 2.4.20 for release
+    
+    A few good fixes landed, get them out there.
+
+commit cc20ed8100834b7a5129ed403dee6c0e15d82cd1
+Author: Jerome Glisse <jglisse@redhat.com>
+Date:   Mon Mar 29 16:39:08 2010 +0200
+
+    drm/radeon: tab/whitespace cleanup
+
+commit e6b3f906cef26e1efb8625f5dd4e460b4c79a771
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Fri Mar 26 13:13:57 2010 -0700
+
+    modetest: add optional select codepath
+    
+    For misc. testing.
+
+commit 245d6957794648d7fd83279c680fed6e4c262147
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Thu Mar 25 13:34:51 2010 +1000
+
+    Fix pkgconfig includes for /usr/include/drm
+
+commit c1c8bbf80b1f734e23996bf805dc78f32ebaf56f
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Fri Mar 19 10:20:09 2010 +1000
+
+    nouveau: fix annoying compiler warning
+
+commit df32c307e8f81b46ee8aa4dd7222fc18f175bbb3
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Fri Mar 19 10:17:19 2010 +1000
+
+    nouveau: fix segfault in nouveau_bo_new_tile() failure path
+
+commit a247fca8ba5759979607a514dbda4e4a63676889
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Mon Feb 22 16:22:51 2010 +1000
+
+    nouveau: remove unused field from nouveau_bo
+
+commit 567128211511fcf3d20ccb22e65bc48508514e7a
+Author: Francisco Jerez <currojerez@riseup.net>
+Date:   Wed Mar 17 21:40:33 2010 +0100
+
+    nouveau: Regenerate nouveau_class.h.
+    
+    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
+
+commit df9737094ee821289fbf8a0297d34b77587878a4
+Author: Pauli Nieminen <suokkos@gmail.com>
+Date:   Wed Mar 17 22:41:08 2010 +0200
+
+    Check HAVE_RADEON only after checking for atomic operations.
+    
+    Fixes problem that libdrm_radeon was disabled in Makefile even when configure
+    claimed that radeon was enabled.
+    
+    Signed-off-by: Pauli Nieminen <suokkos@gmail.com>
+
+commit ef36c9a3b2828f5a11feda9e4d2708bf3a4a7a52
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Mar 17 12:46:21 2010 -0700
+
+    intel: Install the header file in the libdrm/ directory.
+    
+    Suggested-by: Rémi Cardona <remi@gentoo.org>
+    Signed-off-by: Eric Anholt <eric@anholt.net>
+
+commit 976e779f9cd0571dd2c218580485b39d37bd18a0
+Author: Julien Cristau <jcristau@debian.org>
+Date:   Fri Feb 26 19:07:24 2010 +0100
+
+    Install headers to $(includedir)/libdrm
+    
+    Avoids conflicts with kernel headers.
+    
+    Signed-off-by: Julien Cristau <jcristau@debian.org>
+    Reviewed-by: Rémi Cardona <remi@gentoo.org>
+    Signed-off-by: Eric Anholt <eric@anholt.net>
+
+commit e73af7f560c95ba9c665bead7fc8eb1471db9975
+Author: Julien Cristau <jcristau@debian.org>
+Date:   Fri Feb 26 19:07:23 2010 +0100
+
+    libdrm_nouveau requires libdrm
+    
+    nouveau_drmif.h includes xf86drm.h.
+    
+    Signed-off-by: Julien Cristau <jcristau@debian.org>
+    Signed-off-by: Eric Anholt <eric@anholt.net>
+
+commit d271336925eee55057b6665e193b578da534a903
+Author: Julien Cristau <jcristau@debian.org>
+Date:   Fri Feb 26 19:07:22 2010 +0100
+
+    libdrm_intel.pc: don't include ${includedir}/drm
+    
+    intel_bufmgr.h is installed in ${includedir} directly, and the other
+    headers are taken care of by libdrm.pc's Cflags.
+    
+    Signed-off-by: Julien Cristau <jcristau@debian.org>
+    Signed-off-by: Eric Anholt <eric@anholt.net>
+
+commit 7c697b1670fe34b54a7b82d8ff0732845caa05a3
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Mar 17 10:05:55 2010 -0700
+
+    intel: Align untiled buffer pitch to 64B.
+    
+    This is the largest untiled pitch requirement from gen2 through gen4.
+    It's only the case for gen3 rendering to color regions with depth, but
+    it's rare for this to be a significant factor in memory usage -- for
+    example, gen4 requires 1 or 2 times the element size, or up to 64
+    bytes depending on the size of the elements.  This is easier than
+    encoding all the various little quirks for untiled pitch alignment,
+    since we rarely do untiled now.
+
+commit 30ce1fd1522ef266f172321438626813b78ed14c
+Author: Pauli Nieminen <suokkos@gmail.com>
+Date:   Wed Mar 17 14:34:53 2010 +0200
+
+    libdrm: Fix error message if libdrm_intel|radeon is disabled and there is no atomic ops.
+
+commit 966c9907c040b4fe4b288b4a9d82598797aee743
+Author: Pauli Nieminen <suokkos@gmail.com>
+Date:   Sat Aug 29 12:08:57 2009 +0300
+
+    libdrm_radeon: Optimize cs_gem_reloc to do less looping.
+    
+    bo->referenced_in_cs is checked if bo is already in cs. Adding and removing
+    reference in bo is done with atomic operations to allow parallel access to a
+    bo from multiple contexts.
+    
+    cs->id generation code quarentees there is not duplicated ids which limits
+    number of cs->ids to 32. If there is more cs objects rest will get id 0.
+    
+    V2:
+     - Fix configure to check for atomics operations if libdrm_radeon is only selected.
+     - Make atomic operations private to libdrm.
+    
+    This optimization decreases cs_write_reloc share of torcs profiling from 4.3%
+    to 2.6%.
+    
+    Tested-by: Michel Dänzer <michel@daenzer.net>
+    Signed-off-by: Pauli Nieminen <suokkos@gmail.com>
+
+commit 21105bc186d188f0bfc2f41c52b4b0ceb6742cf5
+Author: Pauli Nieminen <suokkos@gmail.com>
+Date:   Wed Mar 10 13:35:59 2010 +0200
+
+    libdrm: Move intel_atomic.h to libdrm core for sharing.
+    
+    intel_atomic.h includes very usefull atomic operations for
+    lock free parrallel access of variables. Moving these to
+    core libdrm for code sharing with radeon.
+    
+    Signed-off-by: Pauli Nieminen <suokkos@gmail.com>
+
+commit df7157fe2e28796ae1f6d938b850e08c8e1d382d
+Author: Francisco Jerez <currojerez@riseup.net>
+Date:   Sat Mar 13 18:55:09 2010 +0100
+
+    nouveau: Fix up the stride of NV20TCL_LIGHT_BACK_*.
+    
+    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
+
+commit 04fd3872ee8bd8d5e2c27740508c67c2d51dbc11
+Author: Francisco Jerez <currojerez@riseup.net>
+Date:   Sun Mar 7 18:56:42 2010 +0100
+
+    nouveau: Small lighting related addition to nouveau_class.h.
+    
+    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
+
+commit a4041e096ce0faea3dd39b4d78014d45a8cacec0
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Sun Mar 7 14:15:40 2010 +0000
+
+    intel: Repeat execbuffer if interrupted by signal
+    
+    Repeat while EINTR, not EAGAIN! One more source of corruption
+    erradicated, hurray!
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 581cafbc2493ad97ada41f03c8dd70f9ec4bf19d
+Author: Francisco Jerez <currojerez@riseup.net>
+Date:   Sat Mar 6 21:07:31 2010 +0100
+
+    nouveau: Update nouveau_class.h.
+    
+    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
+
+commit 1d4d1e6b138aac8bd734c4c20617a43fb3337c63
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Mar 4 16:09:40 2010 -0800
+
+    intel: Only align Y-tiling pitch to the Y tile width.
+    
+    Fixes piglit depth-tex-modes on gen4.
+
+commit 3e21e3ba0090c4dbe976269409b336dc82fe3d36
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Thu Mar 4 21:17:48 2010 +0000
+
+    intel: Propagate some more error returns
+    
+    Ensure that errors from the kernel are propagated back to the caller,
+    and not masked with return 0;
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit b5495527f4c7087d430c0d1c2b83357c40b9c16c
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Mar 3 11:10:54 2010 -0800
+
+    Increment version to 2.4.19 for release.
+    
+    The primary motivation of this release is to expose the new execbuf2
+    Intel API.
+
+commit 47102863eddee2fa6e28a922c072d0243ece6afd
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Mar 3 10:07:27 2010 -0800
+
+    intel: Update the needs_fence flag of buffers on the validate list.
+    
+    Fixes fbo-copyteximage on i915 with texture tiling and execbuf2 fenced
+    relocs.
+
+commit 766fa7909f3a1af27e60f3529a6a3318cc406f67
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Mar 2 16:04:14 2010 -0800
+
+    intel: Don't enable execbuf2 fenced relocs unless we have execbuf2.
+
+commit 292a5d73a244cec8f4d1042c6fec6618333c1e0e
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Mar 2 15:25:42 2010 -0800
+
+    intel: Don't tile-align pitch for untiled buffers.
+    
+    This allows Mesa to use drm_intel_bo_alloc_tiled() for its tiled
+    buffers, since it makes its decision about pitch before telling
+    libdrm.  They happen to be the same choices for the tiled case.
+
+commit acbaff24e071dce0d23c057c9890f3aec732b8ec
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Mar 2 15:24:50 2010 -0800
+
+    intel: Fix typo in conversion from IS_GEN to bufmgr_gem->gen.
+    
+    Luckily I caught the bug with the first consumer of the interface.
+
+commit a0abb1b14ef60abfd1d5aacd83f06d6f94dc13a4
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Mar 2 15:05:30 2010 -0800
+
+    intel: add a comment about tiled buffer alloc height alignment from Mesa.
+
+commit cdc788d6456645072a1610aa9217e4ebae5cfc6b
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Wed Feb 24 23:10:34 2010 +0100
+
+    nouveau: make sure initial kalloc for user bo ends up in the right place
+    
+    - Currently reloc'ing a user bo to gart will first cause an allocation in vram,
+    which is then written to by cpu, then the bo gets moved to gart.
+    
+    Acked-by: Francisco Jerez <currojerez@riseup.net>
+    Signed-off-by: Maarten Maathuis <madman2003@gmail.com>
+
+commit a1f9ea765ddc5cad45e36c4931663b21992727ee
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Mar 2 08:49:36 2010 -0800
+
+    intel: Use an integer for chipset generation instead of many conditionals.
+    
+    Saves a bunch of comparisons in hot paths.
+
+commit b50964027bef249a0cc3d511de05c2464e0a1e22
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Tue Sep 15 11:02:58 2009 -0700
+
+    libdrm/intel: execbuf2 support
+    
+    This patch to libdrm adds support for the new execbuf2 ioctl.  If
+    detected, it will be used instead of the old ioctl.  By using the new
+    drm_intel_bufmgr_gem_enable_fenced_relocs(), you can indicate that any
+    time a fence register is actually required for a relocation target you
+    will call drm_intel_bo_emit_reloc_fence instead of
+    drm_intel_bo_emit_reloc, which will reduce fence register pressure.
+    
+    Signed-off-by: Eric Anholt <eric@anholt.net>
+
+commit 9a37455b35d746d694760cfe8850a8bf856d73c9
+Author: Marcin Kościelnicki <koriakin@0x04.net>
+Date:   Sat Feb 27 15:04:40 2010 +0000
+
+    tests/modetest: Don't get_props on a connector after freeing it.
+
+commit 694ef59532253727176ed0ce9077ae3ec41dd457
+Author: Marcin Kościelnicki <koriakin@0x04.net>
+Date:   Sat Feb 27 15:04:42 2010 +0000
+
+    tests: vrefresh is actually not * 1000.
+
+commit ecb668e1efd30512d27f5bfc331e8e754b6e15ca
+Author: Marcin Kościelnicki <koriakin@0x04.net>
+Date:   Sat Feb 27 15:04:41 2010 +0000
+
+    tests: Add nouveau to list of supported modules.
+
+commit d5a2e776826f7a849f1cf654fde8611f687eb12c
+Author: Marcin Kościelnicki <koriakin@0x04.net>
+Date:   Sat Feb 27 16:02:25 2010 +0000
+
+    libkms/nouveau: Add support
+
+commit 23f62721b707672816ad3461e11c7453ff75810f
+Author: Marcin Kościelnicki <koriakin@0x04.net>
+Date:   Sat Feb 27 15:04:38 2010 +0000
+
+    libkms/intel: Throw out unused intel_bo fields.
+    
+    Acked-by: Jakob Bornecrantz <jakob@vmware.com>
+
+commit afd74ec555a61d7006db90f0c038ff026e76d303
+Author: Marcin Kościelnicki <koriakin@0x04.net>
+Date:   Sat Feb 27 15:04:37 2010 +0000
+
+    Add config.h macro HAVE_NOUVEAU
+
+commit f6dc964e1d4d43e4053b84b31e76d974af128276
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Oct 22 16:37:56 2009 -0700
+
+    intel: Add initial support for Sandybridge, and clean up the #defines.
+
+commit c27ce8674deb11697e33f464dd38d24b6a117200
+Author: Francisco Jerez <currojerez@riseup.net>
+Date:   Thu Feb 25 18:28:18 2010 +0100
+
+    nouveau: Update nouveau_class.h.
+    
+    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
+
+commit 3130f94c6ee32668cb9f0b96b6c8e308a7bb3b11
+Author: Patrice Mandin <patmandin@gmail.com>
+Date:   Sat Feb 20 11:57:29 2010 +0100
+
+    nv30: update for 8 texture units
+
+commit bdcd12980b5560b32a006534a7451ed6e3502c33
+Author: Patrice Mandin <patmandin@gmail.com>
+Date:   Sat Feb 20 11:50:37 2010 +0100
+
+    nv30: update for front/back stencil inversion
+    
+    Signed-off-by: Patrice Mandin <patmandin@gmail.com>
+
+commit a5c8f55397377994ceeb76ed0ff148ff89eb3a1b
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Thu Feb 18 16:29:36 2010 +0100
+
+    libkms: Use a standard version number
+
+commit 97003c53f9d9ce8b13f6bde28eeb255c35f0c3bc
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Thu Feb 18 13:27:29 2010 +0100
+
+    libkms: Enable by default
+
+commit 25c0c638c417ec0d7130b06b39af89c264b89983
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Thu Feb 18 13:14:07 2010 +0100
+
+    libkms: Add missing include file to libkms source
+
+commit c9cfe749f7c0a83f3ca00ab2a9aeb4afeee400db
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Thu Feb 18 13:27:59 2010 +0100
+
+    vmwgfx: Update kernel header
+
+commit 4b6f70f20cbaccb18f122e87ac0d471356b01a59
+Author: Marek Olšák <maraeo@gmail.com>
+Date:   Sun Feb 14 17:57:19 2010 +0100
+
+    radeon: add square-tiling flag
+
+commit 2d9990c7e8020d28fec4f581493696087def904f
+Author: Carl Worth <cworth@cworth.org>
+Date:   Tue Feb 16 12:12:41 2010 -0800
+
+    Increment version to 2.4.18 for release.
+    
+    The primary motivation of the release is the bug fix in commit
+    4f0f871730b76730ca58209181d16725b0c40184
+
+commit 88e8a8bbaf026aa10225880001ab7ca1c392168a
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Tue Feb 16 15:42:00 2010 +1000
+
+    nouveau: bump MAX_PUSH to 512
+
+commit b496c63143e9a4ca02011582329bce2df99d9b7c
+Author: Luca Barbieri <luca@luca-barbieri.com>
+Date:   Fri Jan 29 09:53:24 2010 +0100
+
+    nouveau: interface changes for 0.0.16 DRM
+    
+    This commit encompasses the changes necessary to run on top of the 0.0.16
+    nouveau interface, additional APIs to support the new features of the
+    interface, as well as code from Luca Barbieri to improve the pushbuf
+    interface, which just happens to break nouveau's libdrm ABI so was delayed
+    until now.
+    
+    API changes as a result of 0.0.16 DRM interface:
+    
+    1. No more bo_pin()/bo_unpin(), these were only there for UMS and we no
+       longer support it.
+    
+    2. Any random nouveau_bo can be submitted to the GPU as a push buffer.
+    
+    3. Relocations can be applied on any nouveau_bo
+    
+    This patch changes the pushbuffer ABI to:
+    
+    1. No longer use/expose nouveau_pushbuffer. Everything is directly
+       in nouveau_channel. This saves the extra "pushbuf" pointer dereference.
+    
+    2. Use cur/end pointers instead of tracking the remaining size.
+       Pushing data now only needs to alter cur and not both cur and remaining.
+    
+    The goal is to make the *_RING macros faster and make the interface simpler
+    and cleaner in the process.
+    
+    The *_RING APIs are unchanged, but those are inlined and the ABI is changed.
+    
+    Also, anything accessing pushbuf->remaining instead of using AVAIL_RING
+    will need to be fixed.
+
+commit 4a17be4a86cde1065908576e44f3710f6d9d68af
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Wed Feb 10 19:39:46 2010 -0500
+
+    drm: a some new connector types from the kernel
+    
+    Add eDP (embedded displayport) and generic TV
+    
+    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>
+
+commit 4f0f871730b76730ca58209181d16725b0c40184
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Wed Feb 10 09:45:13 2010 +0000
+
+    intel: Handle resetting of input params after EINTR during SET_TILING
+    
+    The SET_TILING is pernicious in that it overwrites the input arguments
+    following an error in order to report the current tiling state of the
+    buffer. This caught us by surprise as we then fed those arguments back
+    into to the ioctl unmodified following an EINTR and so the kernel then
+    reported success for the no-op. We interpreted this success as meaning
+    that the tiling on the buffer had changed so updated our state and
+    started using the buffer incorrectly in the new tiled/untiled manner.
+    This lead to all sorts of random corruption and GPU hangs, even though
+    the batch buffers would look sane (when the GPU had not wandered off
+    into forbidden territory).
+    
+    References:
+    
+      Bug 25475 - [i915] Xorg crash / Execbuf while wedged
+      http://bugs.freedesktop.org/show_bug.cgi?id=25475
+    
+      Bug 25554 - i830_uxa_prepare_access: gtt bo map failed: Input/output error
+      http://bugs.freedesktop.org/show_bug.cgi?id=25554
+    
+    (And probably every other weird bug in the last few months.)
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit fdcde592c2c48e143251672cf2e82debb07606bd
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Feb 9 08:32:54 2010 +0000
+
+    intel: Account for potential pinned buffers hogging fences
+    
+    As the kernel reports the total number of fences, we must guess how many
+    fences are likely to be pinned. In the typical system these will be only
+    used by the scanout buffers, of which there may be one per pipe, and any
+    number of manually pinned fenced buffers. So take a conservative guess
+    and reserve two fences for use by the system.
+    
+    Note this reduces the number of fences to 3 for i915 and prior.
+    
+    Reference:
+      http://bugs.freedesktop.org/show_bug.cgi?id=25911
+      The latest intel driver 2.10.0 causes kernel oops and system hangs
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit e4a519635f75bde38aeb5b09f2ff4efbf73453e9
+Author: Matthew W. S. Bell <matthew@bells23.org.uk>
+Date:   Sat Jan 30 02:14:44 2010 +0000
+
+    Tidy up compile warnings by cleaning up types.
+
+commit 1802e1a4e747b5906d3af10c4a53fd457eddcbb4
+Author: Pauli Nieminen <suokkos@gmail.com>
+Date:   Mon Feb 1 20:19:33 2010 +0200
+
+    libdrm/radeon: Fix section size mismatch to reset the section.
+    
+    If there is section size mismatch reusing the section object
+    makes section start fail.
+    Reseting the object before doing error checking prevents the
+    possible flood of errors.
+
+commit 520c658706aa896d64f374cc74065394111f6122
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Feb 2 10:58:50 2010 +1000
+
+    radeon: enable by default now that kms is out of staging
+
+commit 973d8d6bd04230da801a8bc19af41dbc60e1918d
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Feb 2 10:57:12 2010 +1000
+
+    intel: check return value for calloc
+
+commit 53e261c01db9beae3648ec675513b7ed662735f5
+Author: Francisco Jerez <currojerez@riseup.net>
+Date:   Sun Jan 31 17:47:50 2010 +0100
+
+    nouveau: Regenerate nouveau_class.h.
+    
+    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
+
+commit 55ba98fadfb8909d23d6f810285504abd173f0ad
+Author: Marcin Slusarz <marcin.slusarz@gmail.com>
+Date:   Tue Jan 12 15:31:28 2010 +0100
+
+    nouveau: add nouveau_resource_destroy
+    
+    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
+
+commit 44a0e0a099eeeb6501359f08449dcaa5e9899398
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Sat Jan 23 01:41:49 2010 +0000
+
+    libkms: Rework interface to not duplicate fields from kms and make formats explicit
+    
+    List of changes:
+    Fixes the cursor size to 64x64, you still need ti supply width and height
+    Explicitly make the cursor format A8R8G8B8
+    Explicitly make the scanout format X8R8G8B8
+
+commit f2730574f2d204eee62d6f37aa56567bd2d94a26
+Author: Marcin Kościelnicki <koriakin@0x04.net>
+Date:   Tue Jan 26 18:39:21 2010 +0000
+
+    nouveau: Update nouveau_drm.h
+
+commit dfa72978609d923ab6dfb76083c56b25e8a049df
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Sat Jan 23 01:38:18 2010 +0000
+
+    libkms: Fix return value in vmwgfx_bo_create
+
+commit 7b328122981a23f874105f333a5ec14ce887b0a8
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Thu Jan 21 15:17:26 2010 +1000
+
+    nouveau: fail channel creation if pushbuf init fails
+
+commit 9de34e2dbf5a4b3df6773460071944248cf4d571
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Wed Jan 20 10:42:46 2010 +0000
+
+    intel: Add pkg-config dependency on libdrm.so using 'Requires'
+
+commit dc1ed9952e639f3d5fb41401598d28c4a97f5a1c
+Author: Alan Coopersmith <alan.coopersmith@sun.com>
+Date:   Sat Jan 16 19:34:13 2010 -0800
+
+    Support gcc's __FUNCTION__ for people using other compilers
+    
+    Signed-off-by: Alan Coopersmith <alan.coopersmith@sun.com>
+
+commit b1ce1e6bfbb65cca3230762cf99d4c0775561781
+Author: Alan Coopersmith <alan.coopersmith@sun.com>
+Date:   Sat Jan 16 19:28:50 2010 -0800
+
+    Add support for Solaris libc atomic operations
+    
+    Signed-off-by: Alan Coopersmith <alan.coopersmith@sun.com>
+
+commit fe7b93fb493b76ade13ad74438acbc4d34d2f3bd
+Author: Alan Coopersmith <alan.coopersmith@sun.com>
+Date:   Wed Dec 16 15:03:58 2009 -0800
+
+    Include alloca.h in tests/drmstat.c when configure detects it
+    
+    Signed-off-by: Alan Coopersmith <alan.coopersmith@sun.com>
+
+commit 3d3d87f3a70089f645facb2bff5a0b93ec0a0efd
+Author: Marcin Slusarz <marcin.slusarz@gmail.com>
+Date:   Tue Jan 12 15:38:29 2010 +0100
+
+    nouveau: disable flush_notify on channel_free
+    
+    We don't want do call flush_notify when we will FIRE the RING
+    a couple of lines later, because grobj bound to this channel
+    might be already freed.
+
+commit a03dcc21040775e660afcfc3dc37a324d2dd2ed3
+Author: Marcin Slusarz <marcin.slusarz@gmail.com>
+Date:   Tue Jan 12 15:32:39 2010 +0100
+
+    nouveau: fix memory leak in nouveau_channel_free
+
+commit 2959266188dd564975503d74e24b55013f58f861
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Fri Jan 15 20:13:20 2010 +0000
+
+    libkms: Fix multiple map unmap in vmwgfx and add comment in intel
+
+commit 320811b282d7f57b364f8414e2e7b714f89b0503
+Author: Jerome Glisse <jglisse@redhat.com>
+Date:   Thu Jan 14 20:01:55 2010 +0100
+
+    radeon: get device id from the kernel, use it in cs_print
+    
+    This allow external tools to know for which asics a cs
+    is destinated to.
+
+commit 2612371a626337452e598a3339355bf980f5be38
+Author: Jerome Glisse <jglisse@redhat.com>
+Date:   Thu Jan 14 12:28:20 2010 +0100
+
+    radeon: simpler cs print function
+    
+    We don't intend libdrm-radeon to become clever enough to
+    decode cs for all GPU we support. Better to let an external
+    tool do the job. This will print raw cs in an easy to parse
+    way.
+
+commit 74937cda177363ff4ede9e2b4ea2bec04cda892e
+Author: Jerome Glisse <jglisse@redhat.com>
+Date:   Thu Jan 14 11:28:25 2010 +0100
+
+    radeon: indentation + trailing space cleanup
+
+commit 6bf1ed2979ca56d3e8dd8938fc08e3810887ae8a
+Author: Jerome Glisse <jglisse@redhat.com>
+Date:   Thu Jan 14 11:24:16 2010 +0100
+
+    radeon: indentation & trailing space cleanup
+
+commit b06cb754a1eee0746c40f62c51d4f0544c39c843
+Author: Jerome Glisse <jglisse@redhat.com>
+Date:   Thu Jan 14 11:08:43 2010 +0100
+
+    radeon: indentation + trailing space cleanup
+
+commit 06a2d6567e5aadc2e109942f71afae76a8398969
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Tue Jan 12 22:35:28 2010 +0100
+
+    tests: Update kmstest a bit
+
+commit d920fa9d0b54873d53f03a006d0fe3df11136b74
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Tue Jan 12 17:53:49 2010 +0000
+
+    libkms: Use sysfs instead of udev to find driver
+    
+    Udev code is still there just commented out.
+
+commit d207a38701d664ac818829249d4d2566349bb359
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Fri Jan 8 15:34:44 2010 +0000
+
+    tests: Add a very small libkms test
+
+commit 8838bb1d63bdb8ffa808cd41b7e0ffd2e62ff7bc
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Fri Jan 8 15:19:44 2010 +0000
+
+    libkms/intel: Don't fail to create bo if we fail to tile
+
+commit 5963c023b84daaacb91ae0aa4cf841acff63fd1f
+Author: Francisco Jerez <currojerez@riseup.net>
+Date:   Fri Jan 8 04:34:39 2010 +0100
+
+    nouveau: Update nouveau_class.h.
+    
+    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
+
+commit bfa44bb8610f51d84b8d23f8c5ce903689d239c6
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Fri Jan 8 03:00:56 2010 +0000
+
+    libkms: Add intel backend
+
+commit 9042d72109d8ae448b8e0f23b93067cc37deff23
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Fri Jan 8 02:51:04 2010 +0000
+
+    libkms: Pick driver backend via pci id that we get from udev
+
+commit 04f90a44709a48fb932ea954011cb551659bf246
+Author: Peter Clifton <pcjc2@cam.ac.uk>
+Date:   Wed Jan 6 20:44:11 2010 +0000
+
+    modes: Retry GETCONNECTOR if a hotplug event occurs between the two ioctls
+    
+    If the available modes changes between the two GETCONNECTOR ioctls, that
+    caused the kernel to skip filling one array and led to a crash (as the size
+    of the allocated and initialised block of memory differed from the reported
+    size, and might be NULL if no modes were present at first).
+    
+    This bug manifest its self on my machine due to spurious false positive
+    detections of a connected TV-out.
+    
+    Fixes: http://bugs.freedesktop.org/show_bug.cgi?id=25912
+           Crash whilst probing modes
+    
+    Based upon the similar fixes for the GETRESOURCES ioctls by Chris Wilson,
+    in the following commits:
+    
+        commit e6c136ca7a4c54457b48be1aec2be024b3e4a28d
+        commit 85fb3e55fdb7af9b5f59c1ec0f15d1950e601b05
+        commit d1308f4fe7f94aae51ca9f70947aea8e09597f37
+    
+    Signed-off-by: Peter Clifton <pcjc2@cam.ac.uk>
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit e6c136ca7a4c54457b48be1aec2be024b3e4a28d
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Wed Jan 6 16:53:33 2010 +0000
+
+    modes: Fix previous commit for potential legal NULLs
+    
+    If the count is 0, then the malloc is permitted to return NULL, so don't
+    throw an error in that case.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 85fb3e55fdb7af9b5f59c1ec0f15d1950e601b05
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Wed Jan 6 15:39:49 2010 +0000
+
+    modes: Free local resources after allocation failure in GETRESOURCES
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit d1308f4fe7f94aae51ca9f70947aea8e09597f37
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Wed Jan 6 15:19:25 2010 +0000
+
+    modes: Retry GETRESOURCES if a hotplug event occurs between the two ioctls
+    
+    Peter Clifton hit an issue whereby he had a spurious TV hotplug event
+    that occurred between the two GETRESOURCES ioctls that caused the kernel
+    to skip filling one array and led to a crash (as the size of the
+    allocated and initialised block of memory differed from the reported
+    size).
+    
+    Fixes: http://bugs.freedesktop.org/show_bug.cgi?id=25912
+           Crash whilst probing modes
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+    Reported-by: Peter Clifton <pcjc2@cam.ac.uk>
+
+commit 5dbc1b333b85695735dc5b484372758b9979b693
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Tue Jan 5 20:55:02 2010 +0100
+
+    libkms: Make vmwgfx optional
+
+commit dfbaffea07ba785d5a2d5493282f416488e217cc
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Tue Jan 5 21:04:57 2010 +0100
+
+    libkms: Remove duped vmwgfx_drm.h header
+
+commit 2f7f7ceccab4176217c399502b3ff95df1517627
+Merge: d6059c3 6d3b8bb
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Tue Jan 5 20:59:24 2010 +0100
+
+    Merge branch 'master' into libkms-master
+    
+    Conflicts:
+    	configure.ac
+
+commit d6059c3dd1300662e941ccd5e55649534fbb9a63
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Tue Jan 5 20:58:37 2010 +0100
+
+    libkms: Disable by default
+
+commit 6d3b8bbddd44b42d89adb1aafb7645e7f802673a
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Tue Jan 5 19:53:10 2010 +0100
+
+    vmwgfx: Add experimental vmwgfx kernel header
+
+commit c5c503b519777fb9ebbaa22681a1ed81717c1d71
+Author: Marcin Slusarz <marcin.slusarz@gmail.com>
+Date:   Wed Dec 30 21:32:40 2009 +0100
+
+    nouveau: add BEGIN_RING_NI
+
+commit cd2e4ba9aac65d10cf790990a8b86feed1cdd774
+Author: Younes Manton <younes.m@gmail.com>
+Date:   Mon Dec 28 18:00:09 2009 -0500
+
+    nouveau: Unreference pushbuf objects on channel destruction.
+    
+    - unreference pushbuf objects on channel destruction
+    
+    Based on Krzysztof Smiechowicz's patch.
+
+commit cb1caaaa05ba96b98bf9af1190f6830d8b0608bc
+Author: Francisco Jerez <currojerez@riseup.net>
+Date:   Mon Dec 28 18:01:42 2009 +0100
+
+    nouveau: Update some object definitions from renouveau.xml.
+    
+    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
+
+commit 5fd00ddc9f35ac99c93a40d34a5d5019b91e8750
+Author: Marcin Kościelnicki <koriakin@0x04.net>
+Date:   Tue Nov 24 17:23:54 2009 +0000
+
+    nouveau: Update nouveau_class.h with new renouveau.xml definitions.
+    
+    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
+
+commit fdb33d56de3edf27f24c6db0e6beaed823f7bc38
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Dec 21 15:03:31 2009 +1000
+
+    libdrm 2.4.17
+
+commit 6de39fc73050a386a39c53e522098a0a784e7ff8
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Dec 21 14:59:48 2009 +1000
+
+    radeon: fix BO null check, should be in higher level fn
+
+commit 125994ab30d4f0f126c62fa741ec62a52d69d7a8
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Dec 17 14:11:55 2009 +1000
+
+    radeon: straighten out the API insanity.
+    
+    as Michel pointed out we are exposing too much info for these object
+    for this to be maintainable going forward.
+    
+    This patch set minimises the exposed parts of the radeon_bo and
+    radeon_cs objects to the piece necessary for ddx/mesa to operate
+    at a decent speed.
+    
+    The major problem is mesa contains a legacy BO/CS managers which we still
+    need to expose functionality to, and we really cannot change the API
+    until we can drop the non-KMS codepaths.
+    
+    Signed-off-by: Dave Airlie <airlied@redhat.com>
+
+commit f1660c249198b5cc14ebbb75107da7bcb6972033
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Thu Dec 17 13:07:18 2009 +1000
+
+    nouveau: remove delayed kernel bo creation
+    
+    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit fbc8b2d95f5da096ee771a3e2ef6f89306679e89
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Wed Dec 9 10:37:40 2009 -0500
+
+    Be less chatty in drmSetMaster/drmDropMaster
+
+commit 59d97e7d6807d9cd076d4e8374aca1d9e8027a6b
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Wed Dec 9 10:36:53 2009 -0500
+
+    modetest: Error out if pageflipping is requested but not available
+
+commit 77ddc785660c4ff73706758124744f80e1734812
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Mon Dec 14 22:53:10 2009 +0100
+
+    vmwgfx: Fetch the latest header
+
+commit edc77dd291594e017ca0ee96a785412107ebff74
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Wed Dec 9 14:50:15 2009 +1000
+
+    nouveau: Use drmIoctl so we restart ioctl on EINTR or EAGAIN
+    
+    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit 7c82527b4fd4ec1642be20d8bba2d10f045c87ef
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Wed Dec 9 13:15:07 2009 +1000
+
+    nouveau: move reloc code down, nothing to see here
+    
+    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit 08371bc29013370558728dcbeeed6a23ad2f5a70
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Dec 8 22:35:24 2009 +0000
+
+    intel: Clear virtual after failing to mmap_gtt.
+    
+    Don't store the error return in bo_gem->gtt_virtual or else we will
+    attempt to use that as a valid pointer in future mappings.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 201f5795a26ae7b5580a35b24f4e89e5cd3455b1
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Fri Dec 4 16:06:42 2009 +0100
+
+    libkms: Change destroy api a bit
+
+commit 8c0571a73399c372644c8d92a136a474f3e05d48
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Tue Nov 24 17:54:10 2009 +0100
+
+    libkms: Add libkms
+
+commit 28eae30689610faa0fe043ab869587e7699e82bf
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Fri Dec 4 16:07:51 2009 +0100
+
+    Ignore config.h.in
+
+commit b84314a86ea4ad30e0f57a71b4ef0fa138fb24c6
+Author: Jerome Glisse <jglisse@redhat.com>
+Date:   Mon Dec 7 18:30:52 2009 +0100
+
+    radeon: Use drmIoctl so we restart ioctl on EINTR or EAGAIN
+    
+    This is needed as change in kernel will lead to ioctl returning
+    EINTR if they are interrupted.
+    
+    Signed-off-by: Jerome Glisse <jglisse@redhat.com>
+
+commit 9707733a130098a7d9959e72ebd782d8119a23d3
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Dec 1 23:01:34 2009 +0000
+
+    intel: Expect caller to guarantee thread-safety of bo during reloc
+    
+    This removes the foremost prolific user of mutexes in libdrm_intel.so.
+    The other uses of the bufmgr_gem->mutex to serial access to individual
+    bos are currently required by Mesa, and are far less frequent.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+    [anholt: This chunk looks good...]
+    Acked-by: Eric Anholt <eric@anholt.net>
+
+commit 6f1eba0548cd6a96e91a4e8be7b91ba6a936eb98
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Fri Dec 4 09:09:19 2009 -0800
+
+    modetest: fix build error due to page_flip_handler name change
+    
+    Forgot to update this when pushing the pageflip bits.
+
+commit 3bd834a2178ee1273fd84628e87210a500f8fc84
+Merge: be957cc ac5595a
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Wed Dec 2 19:40:58 2009 +0100
+
+    Merge branch 'modesetting-dirty-libdrm'
+    
+    Conflicts:
+    	include/drm/drm.h
+
+commit be957cc219d0811e2d1ed2a56549a03cb64a0f4b
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Thu Dec 3 17:49:31 2009 -0500
+
+    Add RELEASING to document the release process
+
+commit 14f5958f7fd9ebe8a772ea931feb044d2d5d967b
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Thu Dec 3 14:20:51 2009 -0800
+
+    Bump event context structure version for page flipping
+
+commit 53addc5d6ef7406d9fab5ea481cf68fa011870f1
+Merge: db50f51 ee746a8
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Thu Dec 3 14:17:26 2009 -0800
+
+    Merge branch 'pageflip' of git://people.freedesktop.org/~jbarnes/drm
+    
+    Conflicts:
+    	include/drm/drm.h - RMFB had its signature changed to avoid uint32_t
+
+commit db50f5127421ac8f4e3ce4eb7c27d27475781488
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Thu Dec 3 11:31:27 2009 -0500
+
+    Bump to 2.4.16 for release
+
+commit bef7f88de9a1f40ec82cfd4d80c73802c640e5ed
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Thu Dec 3 11:27:16 2009 -0500
+
+    Enable experimental APIs for distcheck
+
+commit ac5595abc1c28b2c10a1463143e83d17415736f1
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Wed Dec 2 19:39:16 2009 +0100
+
+    Change the number on the dirty ioctl to match upstream
+
+commit 57473c7f523f476ffa54c34e0c6312ffa66dcc5c
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Wed Dec 2 13:36:22 2009 +0000
+
+    intel: Free memory before inserting bo into cache.
+    
+    This has the unfortunate behaviour of releasing our malloc cache, but
+    the alternative is for X to consume a couple of gigabytes of ram and
+    die during testing. Fortunately the extra mallocs have little impact on
+    performance whereas avoiding swap and death, lots.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 792fed1e2460f96459141b5a628dd5ab4fbb87db
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Wed Dec 2 13:12:39 2009 +0000
+
+    intel: Check and propagate errors from building reloc-tree
+    
+    Instead of forcing the caller to check after every emit_reloc(), we can
+    flag the object as being in error, propagating that error upwards through
+    the relocation tree, and failing the eventual batch buffer execution.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit b73612e4fd69565aa2c5c2e9677f3e0af1945f7d
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Wed Dec 2 12:58:00 2009 +0000
+
+    intel: Repeat execbuffer after EINTR
+    
+    EAGAIN cannot be raised by the current code, but the system call maybe
+    interrupted and so return EINTR.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit acb4aa671507aa181b3ff50ccf26a1c0d705a309
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Wed Dec 2 12:40:26 2009 +0000
+
+    intel: Review use of errno.
+    
+    Hitting this error lead to a segfault:
+    
+      intel_bufmgr_gem.c:919: Error mapping buffer 48607 (pixmap):
+                              Cannot allocate memory.
+    
+    because the errno was reused as the function return value after being
+    reset by the fprintf(), so caller thought the mapping had succeeded. The
+    convention established by libdrm is that the return value is the
+    negative errno and that uses of libdrm cannot trust the value of errno
+    afterwards, but must use the return code.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 9fec2a8cb28d814da4fdd97b25e9cc5c10768c87
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Wed Dec 2 10:42:51 2009 +0000
+
+    intel: Make bo_reference() inline for internal use.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 9c8ad05e8bb1c954b804e40f2f975fed23c24550
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Wed Dec 2 10:41:39 2009 +0000
+
+    intel: Remove the extra reference while validating the reloc tree
+    
+    Buffers on the relocation tree are guarded by the reference to the batch
+    object and so do not need an extra reference whilst constructing the
+    list of execution buffer objects.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 8ffd2e142e38d19326a40ff66dc99d052ce22100
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Dec 1 13:08:04 2009 +0000
+
+    intel: Wrap a few more syscalls with EINTR protection
+    
+    Having been bitten by a missing EINTR check during mmap_gtt(), I thought
+    it prudent to add some more protection around the ioctls.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit b666f4151ab934d3083fa8b5f14ce19bbf999b15
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Nov 30 23:07:19 2009 +0000
+
+    intel: Clear bo->used_as_reloc_target flag on destroy
+    
+    This allows us to keep the assert added in the previous commit that we do
+    not modify the tree_reloc_size after inserting the buffer into a relocation
+    tree, which was being hit here:
+    
+      #0  0xb78c2424 in __kernel_vsyscall ()
+      #1  0xb74f6401 in raise () from /lib/libc.so.6
+      #2  0xb74f7b42 in abort () from /lib/libc.so.6
+      #3  0xb74ef5a8 in __assert_fail () from /lib/libc.so.6
+      #4  0xb737e78b in drm_intel_bo_gem_set_in_aperture_size (bufmgr_gem=<value optimized out>, bo_gem=0x6) at intel_bufmgr_gem.c:373
+      #5  0xb737f519 in drm_intel_gem_bo_set_tiling (bo=0xa1030a0, tiling_mode=0xbff6c85c, stride=0) at intel_bufmgr_gem.c:1386
+      #6  0xb737f67f in drm_intel_gem_bo_unreference_final (bo=0xa1030a0, time=<value optimized out>) at intel_bufmgr_gem.c:768
+      #7  0xb737f5e3 in drm_intel_gem_bo_unreference_locked_timed (bo=0xa1e50d0, time=<value optimized out>) at intel_bufmgr_gem.c:805
+      #8  drm_intel_gem_bo_unreference_final (bo=0xa1e50d0, time=<value optimized out>) at intel_bufmgr_gem.c:756
+      #9  0xb737fcbb in drm_intel_gem_bo_unreference (bo=0xa1e50d0) at intel_bufmgr_gem.c:821
+      #10 0xb737b4e6 in drm_intel_bo_unreference (bo=0x0) at intel_bufmgr.c:80
+      #11 0xb7325625 in intel_batch_flush (scrn=0x9d91f78, flush=1) at i830_batchbuffer.c:200
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit e22fb797728c07fd05b195bd345fdf91bab47855
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Nov 30 22:14:30 2009 +0000
+
+    intel: Apply pessimistic alignment to in-aperture buffer size
+    
+    For the older chipsets, i.e. pre-i965, which have severe alignment
+    restrictions for tiled buffers we need to pessimistically assume that we
+    will waste the size of buffer to meet those alignment constraints.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 60aa803dc76bbdfac72da4de4cdc3018717b0884
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Nov 30 20:02:05 2009 +0000
+
+    intel: Only store a buffer in the cache if it is retained.
+    
+    If the kernel immediately frees the backing store for a buffer when
+    marking it purgeable, then there is not point adding to the cache. Free
+    it immediately, instead.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 019a408a69896497ca728b703c349306efd1a225
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Mon Nov 30 00:40:51 2009 +0000
+
+    Change the dirty ioctl a bit and comment it
+
+commit 3e48613b482a8ca01ea5719e9cc342a9d4b28db0
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Tue Nov 24 18:00:12 2009 +0100
+
+    Bring dirty code from old branch
+
+commit 6f66de982ad6ee6967ec61a7399e600bdd9e5887
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Wed Nov 25 15:09:24 2009 -0600
+
+    Correctly set DRM_MAX_MINOR for all platforms.
+    
+    DRM_MAJOR is platform specific, but not used outside of xf86drm.c
+    that I can find.
+
+commit 9558f6377ffee680d6bec0808bc113b3139b0d5f
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Tue Nov 24 15:03:32 2009 -0500
+
+    Add missing DRM_MAX_MINOR define
+    
+    lost in 500f5b524000ed5930301f4303744cb4c0a19b75
+    
+    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>
+
+commit 82bf52fbcdf1e71840c2024bb2bc05a8daeaafad
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Tue Nov 24 10:31:41 2009 -0600
+
+    More fixups to allow mesa to build
+
+commit 170674a606f6d7869b5fa4457c07e10dd27f2771
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Tue Nov 24 09:27:29 2009 -0600
+
+    Finish fixing the build on FreeBSD
+
+commit 22d46669043d38fcd16efca773f5ed5693c0fb58
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Mon Nov 23 20:51:34 2009 -0500
+
+    Add drmGetDeviceNameFromFd function
+    
+    Determines the /dev filename of the drm fd argument.
+
+commit 500f5b524000ed5930301f4303744cb4c0a19b75
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Mon Nov 23 18:25:08 2009 -0500
+
+    Fix build on *BSD
+    
+    This adds a minimal #ifdef clause to drm.h that we'll push upstream.
+    Once that goes in we can share drm.h between linux, libdrm, and
+    the bsd's.
+
+commit 863e39b56eea0ef95f9bde648fe4868d0b8e3f11
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Mon Nov 23 12:38:40 2009 -0500
+
+    Don't hardcore 'yes', use  in configure.ac output
+    
+    Oops, I assumed intel was always enable, but it just defaults to on.
+
+commit 696fdb11f447b1e77803c4a15ad7062bfb79f0f0
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Mon Nov 23 11:41:15 2009 -0500
+
+    Output summary of enabled features at the end of configure.ac
+
+commit dd6cbe7acb1708a1aa8e101c6ddb80205bd1f63b
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Mon Nov 23 11:25:46 2009 -0500
+
+    Drop duplicated radeon_*.h files in include/drm
+    
+    These files are userspace headers and live in radeon/
+
+commit 6b3cbe7655ee7746c4418e1fb8af136774420dbd
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Fri Nov 20 20:17:26 2009 -0500
+
+    Put mach64_drm.h back in to avoid breaking mesa build
+    
+    We may want to drop mach64 from mesa instead, but that's a different
+    discussion.
+
+commit 4f070d593cfc60b18c6ccb85af785b00ffb51db4
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Fri Nov 20 19:42:59 2009 -0500
+
+    Install kernel headers in ${includedir}/drm
+
+commit 3a87b1f497cc201a6c37fcd779019560ab7746ae
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Sat Nov 21 01:00:36 2009 +0200
+
+    nouveau: fix DRM headers
+    
+    The nouveau_drmif.h is not the Nouveau DRM kernel ABI file, but purely
+    user space stuff. Remove it, it does not belong in include/drm/.
+    
+    Copy the right header from Nouveau kernel v2.6.31-rc9-757-gaca551c.
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit ee746a83cecd99d4c380fbc5d391399a6d9fde9e
+Author: Jesse Barnes <jbarnes@jbarnes-desktop.localdomain>
+Date:   Tue Nov 17 21:39:17 2009 +0000
+
+    Bump libdrm version to 2.4.16 for page flipping
+
+commit 1e1b3c0a93281ce8df42bbdddfe3e51dccc4d5ea
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Tue Nov 17 15:32:23 2009 -0500
+
+    modetest: add pageflip test case to modetest
+
+commit b80bcffba6175c53ebe1f1bd02730de0338cc039
+Author: Kristian Høgsberg <krh@sasori.(none)>
+Date:   Thu Nov 12 14:06:45 2009 -0500
+
+    libdrm: add libdrm support for page flip ioctl
+
+commit 10ce0ec18806ae32a5d615c693626a085b0dd7b8
+Merge: 1b064cc b4312b6
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Fri Nov 20 17:09:03 2009 -0500
+
+    Merge remote branch 'origin/master' into libdrm
+
+commit 1b064cc428f03f753699d4d9fbe60453891a8529
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Fri Nov 20 17:08:28 2009 -0500
+
+    Update README
+
+commit b4312b639d56a6cad78953af0fd4f863182007e3
+Author: Maciej Cencora <m.cencora@gmail.com>
+Date:   Wed Nov 18 16:07:13 2009 -0500
+
+    libdrm_radeon: add radeon_bo_is_referenced_by_cs function
+    
+    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>
+
+commit 2577764a5069ca9276e90154915797bcf873adab
+Author: Jesse Barnes <jbarnes@jbarnes-desktop.localdomain>
+Date:   Tue Nov 17 20:07:48 2009 +0000
+
+    drm/i915: add GETPARAM request for page flipping
+
+commit e8523e087fc5dfe15b0e1af9b30d1ddac5d0314c
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Tue Nov 17 11:15:56 2009 -0500
+
+    Drop stale TODO and unused ChangeLog
+
+commit 4f57abfe66091281c9f59c14e6ea27b524b55d5b
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Tue Nov 17 11:14:54 2009 -0500
+
+    Move libdrm/ up one level
+
+commit 9dd3613073aa2491cef440725fdfa0cf1e8f1a42
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Tue Nov 17 09:46:56 2009 -0500
+
+    Drop shared-core, bsd-core, linux-core and scripts subdirs
+
+commit a66cf9ce68bdf9bd887f91a38ced4b59c129b3c7
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Tue Nov 17 09:46:39 2009 -0500
+
+    Use headers copied from kernel instead of shared-core
+
+commit ba79b1a8c2ea354c89371b5e34e0077f6ecaaa63
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Tue Nov 17 09:39:23 2009 -0500
+
+    Fix typo in i915 pipe_from_crtc_id ioctl struct name
+
+commit 2b42af9a2fd8e35e920d61a212ce6b9c85354289
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Tue Nov 17 09:23:59 2009 -0500
+
+    Copy headers from kernel v2.6.32-rc6-130-g5b8f0be
+
+commit a99680384ad3daaceee05b3b40dc492cf0e52a0f
+Author: Kristian Høgsberg <krh@bitplanet.net>
+Date:   Tue Nov 17 09:23:52 2009 -0500
+
+    Add makefile rule to copy headers from kernel tree
+
+commit c20706ffe56cc658a4814f89e391c14f6065ec57
+Author: Francisco Jerez <currojerez@riseup.net>
+Date:   Sun Nov 15 04:10:02 2009 +0100
+
+    nouveau: Update some nouveau_class.h definitions from renouveau.xml.
+    
+    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit 83a35b68f45cebc70152e55ed3f99db485c9a7cd
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Wed Nov 11 13:04:38 2009 +0000
+
+    intel: Export madvise
+    
+    Wrap the madvise ioctl for use in APPLE_object_purgeable.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+    Acked-by: Jesse Barnes <jbarnes@virtuousgeek.org>
+
+commit 89cc98c0d5c1b43a883f13210c472339dde1a4cf
+Author: Julien Cristau <jcristau@debian.org>
+Date:   Sat Oct 31 02:25:44 2009 +0100
+
+    Only install libdrm_intel.pc if we build libdrm_intel
+
+commit b7ed162d2912d53d03d94f9ceaebf7d96d570c04
+Author: Ben Skeggs <skeggsb@beleth.(none)>
+Date:   Wed Nov 4 17:31:18 2009 +1000
+
+    nouveau: turn another assertion into an error
+    
+    Signed-off-by: Ben Skeggs <skeggsb@beleth.(none)>
+
+commit f4c50630269df4201b89a538cbf8e11646f17d82
+Author: Ben Skeggs <skeggsb@beleth.(none)>
+Date:   Wed Nov 4 15:23:53 2009 +1000
+
+    nouveau: modify api slightly to allow caller to handle reloc failures
+    
+    Signed-off-by: Ben Skeggs <skeggsb@beleth.(none)>
+
+commit a8bdf0e00c0653fd343fd7fd64b5f2e8437bb130
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Tue Oct 27 14:32:40 2009 +1000
+
+    nouveau: add reloc refcnt to pending bo list
+    
+    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit 63910f8aa624be5f2eaa78e08a318d388a22f829
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Tue Nov 3 13:14:32 2009 +1000
+
+    nouveau: drop rendering on the floor rather than asserting if flush fails
+    
+    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit 68c2ac9640a59881d18e2d55f666c2cd4c21e00b
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Mon Nov 2 18:49:40 2009 +1000
+
+    nouveau: update view of available aperture space after each flush
+    
+    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit 6eafd1cf386d93bb9e34660227ca6f26aadfeb32
+Author: Mathias Fröhlich <Mathias.Froehlich@gmx.net>
+Date:   Tue Nov 3 11:41:26 2009 -0500
+
+    radeon: fix allocation
+    
+    The old code increments the command stream size by another kbyte, but does
+    not make sure that the requested packet size fits into the stream. The patch
+    ensures that the whole next packet fits there and rounds the allocated size to
+    a power of two.
+    
+    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>
+
+commit b0b96636dbf93445dd532b09b21fa4fc5ce6bdc7
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Fri Sep 11 13:27:35 2009 -0400
+
+    Add support for vblank events
+    
+    The kernel will now write data to the DRM fd for various event types if
+    requested.  Currently, the only supported event is a vblank event: it contains
+    the vblank count for the event as well as a timestamp from when the event
+    ocurred.  Since the DRM fd is now pollable, it's easy to integrate into
+    existing event loops.
+
+commit 0d7ad7e43ca212b1e9f16cd18f36493cab455e61
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Oct 20 14:19:38 2009 -0700
+
+    intel: Only call clock_gettime once per unreference_final.
+    
+    Notably when freeing a batchbuffer, we often end up freeing many of the
+    buffers it points at as well.  Avoiding repeated calls brings us a 9% CPU
+    win for cairo-gl.
+    
+    [ # ]  backend                         test   min(s) median(s) stddev. count
+    before:
+    [  0]       gl            firefox-talos-gfx   58.941   58.966   0.75%    3/3
+    after:
+    [  0]       gl            firefox-talos-gfx   54.186   54.195   0.49%    3/3
+
+commit 66d2714f5435944a26685be4210e0e0d7138f3db
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Oct 20 13:20:55 2009 -0700
+
+    intel: Improve bo_references performance by skipping the tree walk.
+    
+    If the target we're asking about hasn't ever been used as a relocation
+    target, then it obviously hasn't been used as a target by the batch's reloc
+    tree.  This is the common case for good GL programming where you only map
+    fresh buffers, and gives us a 5% win in cairo-gl.
+    
+    [ # ]  backend                         test   min(s) median(s) stddev. count
+    before:
+    [  0]       gl            firefox-talos-gfx   64.680   64.756   0.06%    3/3
+    after:
+    [  0]       gl            firefox-talos-gfx   60.816   60.970   0.29%    3/3
+
+commit 67628aa39dd74807989492af5451a3a5c0232e39
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Tue Oct 20 12:57:46 2009 +1000
+
+    nouveau: retry if pushbuf ioctl interrupted by signal
+    
+    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit fdd960a95cca00b19d912a437a2ca3e69fee017e
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Mon Oct 19 09:04:37 2009 +1000
+
+    nouveau: function to return status of bo being referenced in pushbuf
+    
+    Will be used to implement gallium's is_{texture,buffer}_referenced()
+    callbacks properly.
+    
+    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit 3a387a983ec40cd443e22c1f8d9a6b5b5a8fa0d1
+Author: Patrice Mandin <patmandin@gmail.com>
+Date:   Tue Oct 13 22:50:46 2009 +0200
+
+    nouveau: nv30: add render target logbase2 width,height
+
+commit a221e4fd929f77e1851fb0089338f1cd5001ddde
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Oct 13 11:35:05 2009 -0700
+
+    intel: Add the defines for the kernel overlay support landing in 2.6.33.
+
+commit 901bacd29cb5b242f68302b8384de6e193413a49
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Oct 13 15:13:00 2009 +0100
+
+    intel: Fallback to atomic-ops.h [libatomic-ops-dev]
+    
+    Use the external implementation for atomic operations across a wide
+    range of architectures.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 24c905f84120a7b0bcd7c5e86c58e908b9e850f9
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Tue Oct 13 14:25:54 2009 +0100
+
+    configure: Typo in error message.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit fc8f6be5a9bd84e10149770b76ff9353d25ce2a7
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Mon Oct 12 23:58:47 2009 +0100
+
+    configure: Conditionally build libdrm_intel
+    
+    Only build libdrm_intel automatically if we have support for atomic
+    operations. To force configure to build drm pass --enable-intel, which
+    will cause the configure to error if no support is found. Or pass
+    --disable-intel to explicitly prevent libdrm_intel from being built.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit a107e5b12960f64722bff424502a4fc0ad33dc8f
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Oct 8 16:59:17 2009 -0700
+
+    Bump to 2.4.15 for release.
+
+commit 9764061ab1b02e4b7bde1494b121604c5c4d4df8
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Oct 8 15:39:27 2009 -0700
+
+    intel: Remove the asserts about the ignored alignment parameter.
+    
+    I slipped it in with the alloc_tiled changes, since we were explicitly
+    throwing the parameter away.  It caught some bogus released code, which
+    we've now fixed, so remove the asserts to keep old drivers working.
+
+commit 3a7dfcdfafdd6ac83a4d3e7b4c1c52fd901b93ae
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Tue Oct 6 14:34:06 2009 -0700
+
+    intel: Add a bo_alloc function for tiled BOs.
+    
+    This simplifies driver code in handling object allocation, and also gives us
+    an opportunity to possibly cache tiled buffers if it turns out to be a win.
+    
+    [anholt: This is chopped out of the execbuf2 patch, as it seems to be useful
+    separately and cleans up the execbuf2 changes to be more obvious]
+
+commit 02c775fc750b48ae25b6a4af51afbfe090ebada4
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Oct 6 15:25:21 2009 -0700
+
+    intel: Fix up some stale doxygen comments.
+
+commit d70d60529f77ec73322be7b887fd6a3faf133bce
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Oct 6 12:40:42 2009 -0700
+
+    intel: Reformat to the kernel coding style.  Welcome to the 8-space future.
+    
+    This is done with:
+    Lindent *.[ch]
+    perl -pi -e 's|drm_intel_bo \* |drm_intel_bo *|g' *.[ch]
+    perl -pi -e 's|drm_intel_bufmgr \* |drm_intel_bufmgr *|g' *.[ch]
+    perl -pi -e 's|drm_intel_bo_gem \* |drm_intel_bo_gem *|g' *.[ch]
+    perl -pi -e 's|drm_intel_bufmgr_gem \* |drm_intel_bufmgr_gem *|g' *.[ch]
+    perl -pi -e 's|_fake \* |_fake *|g' *.[ch]
+    hand-editing to whack indented comments into line and other touchups.
+
+commit 3c9bd068e0aa8069f71e8193b82b231d6513ce35
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Oct 5 16:35:32 2009 -0700
+
+    intel: Don't allocate more relocation entries than the BO could support.
+    
+    This saves 32k of relocation entry storage for many 965 state buffers.  No
+    noticeable impact on performance for cairo-gl firefox.
+
+commit ac34f599eabcfc414d4d3300063988d4749813f4
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Sat Oct 3 23:17:57 2009 +0100
+
+    tests: Disable intel-specific tests with --disable-intel
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit ab3300c5816ee26e2d74ac99e2d84c3dfd7cdf82
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Sat Oct 3 22:56:04 2009 +0100
+
+    intel: Add a configure option to *disable* building libdrm-intel
+    
+    In conjunction with the atomic operation patch, it may be more
+    convenient for some people to disable building libdrm-intel and its
+    dependencies upon the atomic intrinsics then it is for them to use a
+    supported compiler.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 61bddf8504461fad3e45fbf0d32956a76e0dd343
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Sun Sep 20 03:11:59 2009 +0100
+
+    intel: report errno
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+
+commit 11f0e450dd7d711eb69aa9c27ed4aa72d913d697
+Author: Michel Dänzer <daenzer@vmware.com>
+Date:   Sat Oct 3 17:37:07 2009 +0200
+
+    libdrm_radeon: Update RADEON_TILING_* flags to what's in current kernels.
+
+commit a5fb264257651d50afe84be7e20f91df41242aa8
+Author: Nicolai Hähnle <nhaehnle@gmail.com>
+Date:   Sat Oct 3 13:43:42 2009 +0200
+
+    libdrm_radeon: Zero-initialize structures to silence valgrind warnings
+    
+    Signed-off-by: Nicolai Hähnle <nhaehnle@gmail.com>
+
+commit 04495eeec2f053be17a10cc82e646a1e23ed3830
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Fri Oct 2 04:39:22 2009 +0100
+
+    intel: Use atomic refcounters
+    
+    As the target architecture for Intel GPUs is the x86, we can presume to
+    have reasonable compiler support for Intel atomic intrinsics, i.e. gcc,
+    and so use those in preference to pulling in a complicated mess of
+    fragile assembly.
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+    [anholt: hand-resolved against my previous commit.  This brings cairo-gl
+    firefox-talos-gfx time from 65 seconds back down to 62 seconds.]
+    Signed-off-by: Eric Anholt <eric@anholt.net>
+
+commit 0fb215ae3199b5be0c9a9474e5941f8d8998c11a
+Author: Chris Wilson <chris@chris-wilson.co.uk>
+Date:   Fri Oct 2 04:31:34 2009 +0100
+
+    intel: Mark cached bo as purgeable
+    
+    Set the DONTNEED flag on cached buffers so that the kernel is free to
+    discard those when under memory pressure.
+    
+    [anholt: This takes firefox-talos-gfx time from ~62 seconds to ~65 seconds
+    on my GM965, but it seems like a hit worth taking for the improved
+    functionality from saving memory]
+    
+    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
+    Signed-off-by: Eric Anholt <eric@anholt.net>
+
+commit 12d9b7cc8550c1999e5c39a38b1b14e654f49065
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Oct 2 11:11:31 2009 -0700
+
+    intel: Don't free the reloc list when putting a freed BO in the cache.
+    
+    This takes firefox-talos-gfx from 74 seconds to 70 seconds on my GM965.
+
+commit 769b10578083aa7bbee0052246d8ea6000435ae8
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Oct 1 19:09:26 2009 -0700
+
+    intel: Add a new function to check if a BO's reloc tree references some BO.
+    
+    There are a bunch of places in GL where if we can't do this we have to
+    flush the batchbuffer, and the cost of lookups here is outweighed by flush
+    savings.
+
+commit ac71f0849928f4b2fbb69c01304ac6f9df8916a1
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Sep 21 15:29:58 2009 -0700
+
+    Bump to 2.4.14 for release.
+
+commit 51b89733c53458b6827f0db99eb46a20fa1c7020
+Author: Eric Anholt <eric@anholt.net>
+Date:   Sun Sep 6 23:17:14 2009 -0700
+
+    intel: Remove the max_entries stuff that complicated bo reuse.
+    
+    I thought I was going to do all sorts of crazy experiments with it.  I never
+    did, and it turned out the free-after-a-few-seconds plan is working out fine.
+
+commit 456a358b9ade5c90ff86b2322a79648c69cddcdc
+Author: Eric Anholt <eric@anholt.net>
+Date:   Sun Sep 6 23:02:21 2009 -0700
+
+    intel: Remove the old swrast flag for reducing cache flushing.
+    
+    It hasn't been doing anything effective since
+    52e5d24fae4af6f2f4a5304a516c8c5ab347a11b, and we pretty much don't bo_map
+    pinned buffers any more anyway.
+
+commit 0a24654129847cf5cd61b5e8fb54c8f9c7441c55
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu Sep 17 17:28:08 2009 -0700
+
+    drmModeFreeConnector: free encoders and properties
+    
+    These were leaking.
+    
+    Signed-off-by: Keith Packard <keithp@keithp.com>
+
+commit cdd325b59a17a614b90fc2f8b388175e6d79e3cf
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Sep 15 07:29:02 2009 +1000
+
+    radeon: fix 32/64 bit issue with sign extension
+    
+    Not sure what intptr_t was up to here.
+    
+    Reported and tested by: Kevin DeKorte
+    Signed-off-by: Dave Airlie <airlied@redhat.com>
+
+commit 67e4172394a88d4922fb8d9c7c3d96ce7e02c5a6
+Author: Zhenyu Wang <zhenyuw@linux.intel.com>
+Date:   Mon Sep 7 16:17:04 2009 +0800
+
+    libdrm_intel: include B43 chipset check
+    
+    Signed-off-by: Zhenyu Wang <zhenyuw@linux.intel.com>
+
+commit 121b9648f846d900e67818869974ee82046e9b25
+Author: Zhenyu Wang <zhenyuw@linux.intel.com>
+Date:   Fri Sep 4 09:24:23 2009 +0800
+
+    libdrm_intel: add new pci ids
+    
+    New ids for G41, Clarkdale and Arrandale.
+    Make sure we don't need to count fence also on new chips.
+    
+    Signed-off-by: Zhenyu Wang <zhenyuw@linux.intel.com>
+
+commit 73b59c894380995a2889b98e79acadd2da0bb237
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Aug 28 15:20:22 2009 -0700
+
+    Bump to version 2.4.13 for release.
+
+commit 8214a65ad1f4ccd4966e0def0d43f0c4289e4bc6
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Aug 27 18:32:07 2009 -0700
+
+    Add drm_intel_bo_busy to query whether mapping a BO would block.
+
+commit 19d6fadfa29993b261ebac2869b2289f6d3091c3
+Author: Michel Dänzer <daenzer@vmware.com>
+Date:   Fri Aug 28 11:42:07 2009 +0200
+
+    Revert "libdrm_radeon: Always wait for BO idle in bo_map."
+    
+    This reverts commit 0a732983f059c353b267b6bf877e1f0eea4e033f.
+    
+    Paul Nieminen and Dave Airlie pointed out on IRC that this shouldn't be
+    necessary. I was seeing visual corruption in X before I made this change, but
+    I can't reproduce that anymore so it was probably an unrelated issue.
+
+commit 0a732983f059c353b267b6bf877e1f0eea4e033f
+Author: Michel Dänzer <daenzer@vmware.com>
+Date:   Thu Aug 27 08:36:58 2009 +0200
+
+    libdrm_radeon: Always wait for BO idle in bo_map.
+    
+    This allows users to eliminate explicit bo_wait calls before bo_map calls.
+
+commit ce6c68dc8a893ed8673f49d381a8500c2ee3c29f
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Fri Aug 21 14:06:51 2009 +0200
+
+    Kill last remnant of replacefb ioctl
+    
+    	Kenrels doesn't expose this ioctl
+
+commit 02a4d22e95de863fe3e01a9f5658ef81417c28cd
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Mon Aug 24 18:15:03 2009 -0400
+
+    radeon: pull in z pipe changes from kernel
+
+commit caad8d85559709301c00760b9e8707d57f8c6c67
+Author: Pauli Nieminen <suokkos@gmail.com>
+Date:   Sat Aug 22 13:16:18 2009 +1000
+
+    radeon: add support for busy/domain check interface.
+    
+    airlied: modified the interface to drop busy return value, just return
+    it normally, also fixed int->uint32_t for domain
+    
+    Signed-off-by: Pauli Nieminen <suokkos@gmail.com>
+
+commit cbb3ae3dab9dc82d95524726135b8d6ef86bcf27
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Wed Aug 19 15:55:05 2009 +1000
+
+    nouveau: fix a thinko in copyless pushbuf ioctl
+    
+    No idea why G80 doesn't hit this, but, this fixes at least one NV40 card.
+
+commit 8c43b79b21929e9e54e13e892f7787e222e73f39
+Author: Pauli Nieminen <suokkos@gmail.com>
+Date:   Tue Aug 18 18:51:38 2009 +0300
+
+    libdrm_radeon: Optimize copy of table to cs buffer with specialized call.
+    
+    Using this call in OUT_BATCH_TABLE reduces radeonEmitState cpu usage from
+    9% to 5% and emit_vpu goes from 7% to 1.5%. I did use calgrind to profile
+    gears for cpu hotspots with r500 card.
+    
+    Signed-off-by: Pauli Nieminen <suokkos@gmail.com>
+
+commit a474fd978c0dedbed21b5dff24126acb1c7effef
+Author: Pauli Nieminen <suokkos@gmail.com>
+Date:   Tue Aug 18 18:51:37 2009 +0300
+
+    libdrm_radeon: Fix loops so that compiler can optimize them.
+    
+    GCC did war about optimization not possible because possible forever loop.
+    
+    Signed-off-by: Pauli Nieminen <suokkos@gmail.com>
+
+commit 64cef1e46554fbf82388acfcfc8051ce956a3dc2
+Author: Pauli Nieminen <suokkos@gmail.com>
+Date:   Fri Aug 7 20:03:26 2009 +0300
+
+    libdrm/radeon: Update head of linked list not to point freed memory.
+    
+    Signed-off-by: Pauli Nieminen <suokkos@gmail.com>
+
+commit 28f4bfa04b8ad4dfcc55027f4b2385f4dd6c23c5
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Wed Aug 12 14:21:00 2009 +1000
+
+    nouveau: support for copy-less pushbuf ioctl
+
+commit 250ab3a38eb6ef18d747717cabd0195ad04a82e0
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Tue Aug 18 14:25:50 2009 +1000
+
+    nouveau: for the moment, assert if we exceed some reloc limits
+    
+    Nasty, but nicer than silently not writing into the pushbuf
+
+commit 1978f6d8d1215a9501882eb074901bcd0dfc0775
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Aug 17 21:21:02 2009 +1000
+
+    radeon: fix bo wait at map time.
+
+commit f7996165fffe0a835752e8b9bb6b4d81bba5c91d
+Author: Christoph Brill <egore911@egore911.de>
+Date:   Sun Aug 16 08:26:25 2009 +0200
+
+    Filter radeon pkgconfig file as do intel and nouveau
+
+commit 1d465178fbab77a9c0e830ea8c47bf61735def71
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Sat Aug 15 21:32:35 2009 +1000
+
+    radeon: fix GTT writing space check
+    
+    Noticed by vehemens on irc.
+    
+    Signed-off-by: Dave Airlie <airlied@redhat.com>
+
+commit d74c67fb13d8c3e8c2e5968d827285d147a5dfc0
+Author: Anssi Hannula <anssi@mandriva.org>
+Date:   Fri Jul 24 21:58:43 2009 +0300
+
+    link libdrm_intel with -lrt for new use of clock_gettime().
+    
+    Signed-off-by: Eric Anholt <eric@anholt.net>
+
+commit 4507863058a10d00c982975daf396f83caee0fe2
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Sat Aug 1 17:19:43 2009 +1000
+
+    libdrm_radeon: add tiling support
+
+commit 322cf6cf736b22b62656ac0431936b3cdb784038
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Sat Aug 1 16:47:24 2009 +1000
+
+    radeon: don't map/unmap explicitly.
+    
+    This caches the mapping and just use mapping as a sync point
+
+commit 5a73f066ba149816cc0fc2de4b97ec4714cf8ebc
+Author: Ben Skeggs <skeggsb@beleth.keine.ath.cx>
+Date:   Tue Jul 28 08:12:21 2009 +1000
+
+    nouveau: don't overwrite user-specified bo size needlessly
+
+commit 0bf8fb3bce6b4d9b4820d38d37e1ac1e73e22d23
+Author: Ben Skeggs <skeggsb@beleth.keine.ath.cx>
+Date:   Tue Jul 28 07:46:20 2009 +1000
+
+    nouveau: user buffers need to be mappable
+
+commit 001331f4f1f094ef02497aa618ae5eeb2febedfb
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Mon Jul 27 07:23:09 2009 +1000
+
+    nouveau: drm api 0.0.15, update object header, remove fake bo support
+
+commit 30449829c0347dc7dbe29acb13e49e2f2cb72ae9
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Mon Jul 27 19:24:13 2009 +0200
+
+    libdrm/nouveau: unmap before ufree means nvbo->sysmem != NULL, which inbalances cpu_prep/cpu_finish
+    
+    - The bo was mapped with sysmem == NULL, so this means cpu prep is called.
+    - The bo was unmapped with sysmem != NULL, so this means cpu finish is not called.
+    - This can lead to a non-zero "cpu writers" count in ttm_bo.
+
+commit 9aed44beeac4f250a58c792d64a4dee1dde3d086
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Wed Jul 15 14:51:38 2009 -0400
+
+    Add RADEON_INIT_R600_CP too
+    
+    this rounds out the r6xx/r7xx stuff in radeon_drm.h
+
+commit 0411c37409102c71e8ba980f9afb2d4a8c64189d
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Wed Jul 15 14:40:41 2009 -0400
+
+    Add R600_SCRATCH_REG_OFFSET to radeon_drm.h
+    
+    This lets us libdrm from master for r6xx/r7xx 3d
+
+commit eea95ed8af24300e5a5d2489dfe0d73c24300651
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jul 15 10:04:44 2009 -0700
+
+    Bump to version 2.4.12 for release.
+
+commit 3f3c5be6f908272199ccf53f108b1124bfe0a00e
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jul 9 17:49:46 2009 -0700
+
+    intel: Free buffers in the BO cache that haven't been reused in a while.
+    
+    The goal of the BO cache is to keep buffers on hand for fast continuous use,
+    as in every frame of a game or every batchbuffer of the X Server.  Keeping
+    older buffers on hand not only doesn't serve this purpose, it may hurt
+    performance by resulting in disk cache getting kicked out, or even driving
+    the system to swap.
+    
+    Bug #20766.
+
+commit 80179df5f85a2fd39b2544f1b7aae61102800f0f
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Jul 10 02:38:13 2009 +1000
+
+    configure: move AC_USE_SYSTEM_EXTENSIONS up higher
+    
+    this was giving me a warning on automake 1.11
+
+commit f257201c11fd1aff9319aaf47556b184141ac7cb
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Thu Jul 9 11:41:47 2009 +1000
+
+    nouveau: fix pin for buffers created with bo_wrap
+
+commit 4179c5f0a69b452cf94a507c13021e4918a3e02d
+Author: Ian Romanick <ian.d.romanick@intel.com>
+Date:   Mon Jul 6 15:36:20 2009 -0700
+
+    s/AC_USE_SYSTEM_MACROS/AC_USE_SYSTEM_EXTENSIONS/
+    
+    Not sure what I was thinking.
+
+commit c5a5bbbe899400642795c1d95aef78deade9241f
+Author: Pauli Nieminen <suokkos@gmail.com>
+Date:   Mon Jul 6 23:37:20 2009 +0300
+
+    libdrm: Make chown check for return value
+    
+    If call was interrupted by signal we have to make call again.
+    
+    Reviewed-by: Ian Romanick <ian.d.romanick@intel.com>
+
+commit a953b3270cef52dd2de70cc6aa08687af9d57815
+Author: Ian Romanick <ian.d.romanick@intel.com>
+Date:   Mon Jul 6 13:23:46 2009 -0700
+
+    libdrm: Set _XOPEN_SOURCE and _GNU_SOURCE
+    
+    Several POSIX extensions are used in the libdrm code (e.g., mknod and ffs).
+    Set _XOPEN_SOURCE and _GNU_SOURCE to something reasonable to ensure that
+    prototypes for these functions are available.  This is done in configure.ac
+    using AC_USE_SYSTEM_MACROS.  This requires autoconf 2.60 or later.  Eventually
+    the code should check for the existance of these defines and do something
+    reasonable if they are not available.
+    
+    Inspired by a patch by Pauli Nieminen and suggestions from Julien Cristau.
+    Thanks.
+    
+    Signed-off-by: Ian Romanick <ian.d.romanick@intel.com>
+
+commit 78fa590a1d297f2e2fea98bd3f0cbf4cdb1e3a08
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jul 6 11:55:28 2009 -0700
+
+    intel: Fix up math errors when allocating very large BOs.
+    
+    The logbase2 would overflow and wrap the size around to 0, making the code
+    allocate a 4kb object instead.  By simplifying the code to just walk the
+    14-entry bucket array comparing sizes instead of indexing on
+    ffs(1 << logbase2(size)), we avoid silly math errors and have code of
+    approximately the same speed.
+    
+    Many thanks to Simon Farnsworth for debugging and providing a working patch.
+    Bug #27365.
+
+commit cea2d29ee49f23d560f0088a1a3dd01932a1eaf4
+Author: Edward O'Callaghan <eocallaghan@auroraux.org>
+Date:   Thu Jul 2 11:03:48 2009 -0700
+
+    intel: fix compiler warning about returning a void value.
+    
+    bug #21999
+
+commit 90ae0f2bb8d53500f5c9d06e2dc1a18d5a5d0cf5
+Author: Pauli Nieminen <suokkos@gmail.com>
+Date:   Sat Jul 4 02:18:51 2009 +0300
+
+    libdrm: Fix pci id numbers to unsigned so code won't mix signed/unsigned integers.
+
+commit 015efd1bfa72ab8b80cc45f11eb22d7f1a1085f7
+Author: Ian Romanick <ian.d.romanick@intel.com>
+Date:   Mon Jul 6 09:23:59 2009 -0700
+
+    strcasecmp is in strings.h.
+    
+    Based on patch by Pauli Nieminen.  Thanks.
+
+commit 3dda0050f16ddb4a64e66c80aebecea5383c72f1
+Author: Pauli Nieminen <suokkos@gmail.com>
+Date:   Sat Jul 4 02:18:49 2009 +0300
+
+    libdrm: Remove typedef for non-existing enum
+
+commit 39970c67b77014caac9a4c3a33765ac7a312b54e
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Jul 6 13:34:24 2009 +1000
+
+    radeon: move cs space checking code to libdrm_radeon.
+    
+    This ports a lot of the space checking code into a the common
+    library, so that the DDX and mesa can use it.
+
+commit 72a29340ea3225550db6b009f4e50c77c7b1f394
+Author: Jerome Glisse <jglisse@redhat.com>
+Date:   Fri Jul 3 15:03:03 2009 +0200
+
+    radeon: fix cs buffer realloc padding
+    
+    We always realloc at least 0x1000 dwords (page on most system)
+    when growing the cs buffer this is to avoid having to realloc
+    at each cs_begin.
+
+commit af90222c4570ca07c6983f60ebe46c35bc980495
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Jul 3 21:13:22 2009 +1000
+
+    radeon: fix realloc of packets.
+    
+    This should use ndw not cdw, using cdw leads to realloc alignment going wrong
+
+commit fbac5891b91c795de61f4d7cbc1a6799474364ad
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jul 2 15:42:01 2009 +1000
+
+    radeon: add buffer naming function
+
+commit de1ed01214874dcdd6116ff2587c8710d6ed4d2d
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Jun 30 12:19:28 2009 +1000
+
+    radeon: add support for write followed by read relocs.
+    
+    the DDX does this and used to handle it internally
+
+commit 790097c51330090b2b7b90429b9ab8ddf259fd8e
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Jun 23 09:51:05 2009 +1000
+
+    remove some old ttm bits
+
+commit 9a33f62be1c478334572ea9384af60c37d1644a0
+Author: Thomas Hellstrom <thellstrom-at-vmware-dot-com>
+Date:   Mon Jun 22 23:07:26 2009 +0200
+
+    drm: Strip old ttm.
+    
+    Signed-off-by: Thomas Hellstrom <thellstrom-at-vmware-dot-com>
+
+commit 81644198aeced288d26e17fadd8e5eb19798352f
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Mon Jun 22 12:27:49 2009 -0700
+
+    modetest: use gtt unmap for object
+    
+    Match gtt map/unmap for correctness.
+
+commit 2fa2db138ba989bfa1a8cd9ab66d83fb7369249e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jun 17 17:47:42 2009 +1000
+
+    libdrm/radeon: add initial libdrm_radeon
+    
+    requires --enable-radeon-experimental-api for now
+
+commit 3d4bfe8c893d016ef43d1ebf28e4607aa1f540a4
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Wed Jun 3 13:54:43 2009 +1000
+
+    nouveau: 0.0.14 + extend bo interface to support subrange mapping
+    
+    Normal map() should operate as before, and map_range()/map_flush() should
+    give correct results but lacking any performance difference from map().
+    
+    Nothing exiting being done here yet, but the interface is a good start.
+
+commit 2cb4c64d7310904b354365c2cbc263211e9eb4a1
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Thu Jun 4 08:59:53 2009 +1000
+
+    nouveau: fix bo mapping issue
+
+commit d7c42ff4c445ed2cb23f4eb3a45858c110184773
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Wed Jun 3 22:26:43 2009 +0300
+
+    Fix build on kernels < 2.6.26
+    
+    The commit 651e3dc6dd58a79c90db7513ee2fb28360a4560d, "drm: Fix
+    compilation on 2.6.30" broke all builds on kernels before 2.6.26.
+    Variadic functions cannot be inlined.
+    
+    The variadic inline function is replaced with a variadic macro.
+    
+    Also, the function dev_name() added by that same commit is never used,
+    so it is removed.
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit 00fae87f96e1fc5198311feec81866bf9c53d0e1
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Wed Jun 3 10:24:30 2009 +1000
+
+    nouveau: fill in bo->tiled field for referenced buffers
+    
+    Fixes the dri1 gallium driver if the front buffer happens to be non-linear.
+
+commit dbffeadcfca7cb4e3905ec0b8573d10e0418295e
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Tue Jun 2 17:06:34 2009 +1000
+
+    nv50: magic fix for "3d busted without the binary driver first" issue
+    
+    No idea what this reg does.. NVIDIA put 0x802 into it on some chips, the
+    criteria aren't too clear on when they do that however.  Hopefully 0x800
+    will work everywhere...
+
+commit 651e3dc6dd58a79c90db7513ee2fb28360a4560d
+Author: Michael Buesch <mb@bu3sch.de>
+Date:   Mon May 11 00:21:14 2009 +0200
+
+    drm: Fix compilation on 2.6.30
+    
+    This fixes DRM compilation of nouveau.ko on kernel 2.6.30.
+    
+    Signed-off-by: Michael Buesch <mb@bu3sch.de>
+
+commit c65a343ed29c24f812ca919f40dfeee948b6f14a
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Tue May 26 14:14:04 2009 +1000
+
+    nouveau: bump for 0.0.13
+
+commit 85b9f737db0d2a845e4d7e2bbf9ad12ff9e2227c
+Author: Danny Tholen <moondrake@gmail.com>
+Date:   Thu May 7 00:11:34 2009 +0100
+
+    nouveau: backlight support for ppc laptops
+    
+    Patch allows the backlight to be manipulated under gnome on apple powerpc
+    based NV30 machines.  It works fine on my powerbook, and should also work
+    for older NV17/NV18 machines.
+    
+    Note that older powerpc specific tools (pbbuttonsd) have some problems with
+    this implementation (because the device is not yet there at the start time
+    of the daemon, and the code makes incorrect assumptions about the max
+    brightness values). However, IMHO these things can and should be addressed
+    in the daemon.
+    
+    Some style/warning fixes applied by Stuart Bennett <stuart@freedesktop.org>
+
+commit f355ad89431c49355e626613e6fc29ef2e183dab
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue May 19 10:07:16 2009 -0700
+
+    intel: quiet a warning.
+
+commit 469655fab7a56eb32ff8cdefb33992813342353a
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon May 18 16:07:45 2009 -0700
+
+    intel: Only do BO caching up to 64MB objects.
+    
+    This avoids making objects significantly bigger than they would be
+    otherwise, which would result in some failing at binding to the GTT.
+    Found from firefox hanging on:
+    http://upload.wikimedia.org/wikipedia/commons/b/b7/Singapore_port_panorama.jpg
+    due to a software fallback trying to do a GTT-mapped copy between two 73MB
+    BOs that were instead each 128MB, and failing because both couldn't fit
+    simultaneously.
+    
+    The cost here is that we get no opportunity to cache these objects and
+    avoid the mapping.  But since the objects are a significant percentage
+    of the aperture size, each mapped access is likely having to fault and rebind
+    the object most of the time anyway.
+    
+    Bug #20152 (2/3)
+
+commit f57d7f4b0b14972f92a83f155ae8033478aa7729
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu May 14 16:58:14 2009 -0700
+
+    libdrm/intel: Make get_pipe_from_crtc_id per-bufmgr. Return -1 on failure.
+    
+    The convention is that all APIs are per-bufmgr, so make this one the same.
+    Then, have it return -1 on failure so that the application can know what's
+    going on and do something sensible.
+    
+    Signed-off-by: Keith Packard <keithp@keithp.com>
+
+commit afd245dd7fd85cf3ffd3e6d5fe9711252aa2ed7f
+Author: Carl Worth <cworth@cworth.org>
+Date:   Wed Apr 29 14:43:55 2009 -0700
+
+    Add new drm_intel_get_pipe_from_crtc_id function.
+    
+    This wraps the new DRM_IOCTL_I915_GET_PIPE_FROM_CRTC_ID ioctl,
+    allowing applications to discover the pipe number corresponding
+    to a given CRTC ID. This is necessary for doing pipe-specific
+    operations such as waiting for vblank on a given CRTC.
+
+commit 8b8e20e0f9900fae23baee55a91533a739c1a3ec
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue May 12 15:33:28 2009 -0700
+
+    Bump to version 2.4.10 to mark addition of drm_intel_bo_disable_reuse
+    
+    New API, new version.
+    
+    Signed-off-by: Keith Packard <keithp@keithp.com>
+    Reviewed-by: Eric Anholt <eric@anholt.net>
+
+commit 5b5ce301287fb8ef74b45fad3c10b2d4ac3a9cc6
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon May 11 13:42:12 2009 -0700
+
+    libdrm/intel: add drm_intel_bo_disable_reuse api
+    
+    Scanout buffers need to be freed through the kernel as it holds a reference
+    to them; exposing this API allows applications allocating scanout buffers to
+    flag them as not reusable.
+    
+    Signed-off-by: Keith Packard <keithp@keithp.com>
+    Reviewed-by: Eric Anholt <eric@anholt.net>
+
+commit 628dc48a16ec6796ec5a81428e695837c51463d0
+Author: Alan Coopersmith <alan.coopersmith@sun.com>
+Date:   Mon Jun 9 17:03:28 2008 -0700
+
+    Use C99 versions of __FUNCTION__ & __volatile__ when not building with gcc
+
+commit 1bae8844cafd70f6196116f6e84b0f36c069e976
+Author: Alan Coopersmith <alan.coopersmith@sun.com>
+Date:   Sat May 9 17:21:29 2009 -0700
+
+    Delete extra libdrm_lists.h line after libdrm_la_SOURCES in libdrm/Makefile.am
+    
+    Signed-off-by: Alan Coopersmith <alan.coopersmith@sun.com>
+
+commit 94d48d038502097ebfa2e33e4a75b9e0e675231d
+Author: Stuart Bennett <stuart@freedesktop.org>
+Date:   Wed May 6 23:56:51 2009 +0100
+
+    nouveau: backlight compat fix
+    
+    Avoid failure to build on old kernels with CONFIG_BACKLIGHT_CLASS_DEVICE set
+
+commit e2b5fde7f6ff412cadd9cad35ad051a028cf7fae
+Author: Danny Tholen <moondrake@gmail.com>
+Date:   Wed May 6 23:41:09 2009 +0100
+
+    nouveau: fix ppc for swab changes in Linux 2.6.29
+
+commit 68103b2758029b3c1fbfcf995baa758bfd2676de
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri May 1 18:47:04 2009 -0700
+
+    libdrm/intel: assert that clients are using bo refcounting correctly
+    
+    Add assertions to drm_intel_gem_bo_reference,
+    drm_intel_gem_bo_reference_locked and drm_intel_gem_bo_unreference_locked
+    that the object has not been freed (refcount > 0). Mistakes in refcounting
+    lead to attempts to insert a bo into a free list more than once which causes
+    application failure as empty free lists are dereferenced as buffer objects.
+    
+    Signed-off-by: Keith Packard <keithp@keithp.com>
+
+commit 11b60973bca1bc9bbda44be4c695e22d28d8ca4a
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Tue Apr 21 17:13:16 2009 -0700
+
+    intel: NULL fake bo block when freeing in evict_all
+    
+    Fixes assertion failures on later use of the object.
+
+commit 412d370b9ae4b2882691863a1c5e13a507574e92
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Apr 22 20:25:40 2009 +1000
+
+    libdrm/mode: align subpixel results
+
+commit a1e3ab9e55047c08a4006ec389c1a99b72bc672c
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Fri Apr 17 09:29:19 2009 +1000
+
+    nouveau: write posting got lost somewhere, bring it back
+
+commit 78e753d03314e3aa92af8ec601e9dbb869a938d5
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Wed Apr 15 12:44:21 2009 +1000
+
+    nouveau: store bo handle in public struct in bo_ref_handle
+
+commit 07646002c6835537c6ae44ef9b3f8480762279b8
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Fri Apr 10 15:34:24 2009 -0700
+
+    Bump version to 2.4.9
+    
+    Who needs 2.4.8 anyway?
+
+commit 4d5e82e7d3cf9f94c1c74bd5067e3ea1fb9d0981
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Fri Apr 10 15:24:41 2009 -0700
+
+    Bump version to 2.4.8
+
+commit 3637dcc66d707aa9ababf0b12cd4a299559522f5
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Fri Apr 10 15:24:10 2009 -0700
+
+    Revert "libdrm: speed up connector & mode fetching"
+    
+    This reverts commit cd5c66c659168cbe2e3229ebf8be79f764ed0ee1.  It broke too
+    many kernel assumptions about the double ioctl (connector status, mode
+    fetching, etc.)
+
+commit fef29358bb407f35b90e8c6ee913e4979786cfd5
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Thu Apr 9 15:19:10 2009 -0400
+
+    Bump version to 2.4.7
+
+commit ec9b7b320a724e49d61375b4ad53e2c88fa30f66
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Thu Apr 9 15:17:51 2009 -0400
+
+    test: Avoid recursive dependency in makefile
+
+commit a85e07b9031c819f3cdf54b66c90ac0c450e3e75
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Thu Apr 9 15:02:40 2009 -0400
+
+    test: Makefile.am grammar nazi
+
+commit 1faab66cfd1a854925da6ff7109aa614292dea90
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Apr 7 09:26:32 2009 +1000
+
+    drm: fix test makefile
+    
+    no idea if this is correct but it works so meh
+
+commit 751db3fe27d5e51925c28ceecadb828784d46028
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Mon Apr 6 17:22:10 2009 -0400
+
+    Skip tests that require root
+    
+    This lets us do make distcheck as non-root.
+
+commit 8a5c4d567fafffbda57cbe5e4ed8c419193cada5
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Mon Apr 6 17:18:17 2009 -0400
+
+    XFAIL auth and lock test cases
+    
+    They're writing to the read end of a pipe and failing.
+
+commit e9d6116e5bd30639d6333ef95462fe300f47ccd5
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Mon Apr 6 17:13:01 2009 -0400
+
+    Use libudev in test case to only run gem tests for intel devices.
+
+commit 51d6346f9f3c425f49e57d185530c6bcaeb94f5e
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Tue Mar 31 13:33:18 2009 -0500
+
+    Move drm_vblank_cleanup() after lastclose.
+    
+    This may prevent a possible panic on shutdown.
+
+commit cd5c66c659168cbe2e3229ebf8be79f764ed0ee1
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Mon Mar 30 14:35:30 2009 -0700
+
+    libdrm: speed up connector & mode fetching
+    
+    This patch speeds up drmModeGetConnector by pre-allocating mode &
+    property info space before calling into the kernel.  In many cases this
+    pre-allocation will be sufficient to hold the returned values (it's easy
+    enough to tweak if the common case becomes larger), which means we don't
+    have to make the second call, which saves a lot of time.
+    
+    Acked-by: Jakob Bornecrantz <wallbraker@gmail.com>
+    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
+
+commit 93e65271601e6a1c7c90453f2f13157ae24b35c2
+Author: Stuart Bennett <stuart@freedesktop.org>
+Date:   Mon Mar 30 20:38:49 2009 +0100
+
+    nouveau: nForce 1/2 IGP memory sanity check from DDX
+
+commit 2ada85502242a3d5328b8f392d7843ef58a78780
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Mon Mar 30 11:25:09 2009 -0700
+
+    libdrm: bump version to 2.4.6
+    
+    This version includes GTT unmap support for the Intel bufmgr.
+
+commit e2d7dfb61ad7a97367f050150160c205614d152e
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Thu Mar 26 16:43:00 2009 -0700
+
+    libdrm/intel: support GTT maps correctly
+    
+    libdrm has some support for GTT mapping already, but there are bugs
+    with it (no surprise since it hasn't been used much).
+    
+    In fixing 20803, I found that sharing bo_gem->virtual was a bad idea,
+    since a previously mapped object might not end up getting GTT mapped,
+    leading to corruption.  So this patch splits the fields according to
+    use, taking care to unmap both at free time (but preserving the map
+    caching).
+    
+    There's still a risk we might run out of mappings (there's a sysctl
+    tunable for max number of mappings per process, defaulted to 64k or so
+    it looks like) but at least GTT maps will work with these changes (and
+    some others for fixing PAT breakage in the kernel).
+    
+    Reviewed-by: Eric Anholt <eric@anholt.net>
+    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
+
+commit c9cfeaa5542e08381a8144d0a5bd96036a19082f
+Author: Stuart Bennett <stuart@freedesktop.org>
+Date:   Tue Mar 24 23:39:41 2009 +0000
+
+    nouveau: plug drm fifo ioremap leak (#14941)
+
+commit 03ca202fa56ad7711ad0f7527a1e537154093e8a
+Author: Stuart Bennett <stuart@freedesktop.org>
+Date:   Tue Mar 24 23:26:30 2009 +0000
+
+    nouveau: add linux compat defines for PCI config access, use them for nvidia IGPs
+
+commit b71f3f114e6f0e94e15958c0aa12e804392f9df2
+Author: Stuart Bennett <stuart@freedesktop.org>
+Date:   Tue Mar 24 16:42:36 2009 +0000
+
+    nouveau: use PFB_CSTATUS naming from ddx (reg introduced with nv10)
+    
+    NV04 had a PFB_FIFO_DATA at the same address, which we don't use, so
+    remove it to reduce confusion
+
+commit d6ad0dba01a8246b9e7c96388f747c8ed9631ce4
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Wed Mar 25 08:10:12 2009 +1000
+
+    libdrm/nouveau: fix typo in nouveau_device_close()
+
+commit 98b0df3953f229fd5fb7484d2f566aeb0443c12f
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Fri Mar 20 10:35:55 2009 +1000
+
+    libdrm/nouveau: ask the kernel for vram/gart aperture sizes
+
+commit bad16a6b22e06b0adf7663543e26caae9916444c
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Fri Mar 20 10:32:47 2009 +1000
+
+    libdrm/nouveau: remove unneccesary null ptr checks
+
+commit c37fca4ef678667bcba9c45c6e0a59c8d174c7c5
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Fri Mar 20 10:24:40 2009 +1000
+
+    libdrm/nouveau: incr refcount on ref fence before decr on old fence
+
+commit 00d8e960ca665b7f0528438331f4d0ae77fbb4cc
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Thu Mar 19 23:59:42 2009 +0100
+
+    libdrm/nouveau: unref fences when deleting bo
+    
+    - This was causing a significant memory leak.
+
+commit 6169e3a6012d55522fc8028a5674891a5a99d935
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Wed Mar 18 10:25:22 2009 +1000
+
+    libdrm/nouveau: implement bo_handle_get for !mm_enabled
+    
+    bo_handle_ref on !mm_enabled treats handle as an offset, make
+    bo_handle_get do the same rather than failing.
+
+commit 2e2e8575b1ed4703653a72ac2b60b75316c388d7
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Sun Mar 15 13:52:58 2009 -0500
+
+    libdrm_nouveau: The handle that is passed to mmap needs to be drm_handle_t
+    
+    drm_handle_t is defined to be a u32 on linux and a u64 on everything
+    else.  This addresses an issue on FreeBSD amd64 where the map offsets
+    may be greater than 32bits.  When the handle is cast to 32bit, mmap
+    cannot match the requested map and causes X to crash.
+    
+    This should be a NOOP on linux since drm_handle_t is always 32bit.
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit e8d34762558224bb76862425de965c47858f2afd
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Mar 16 01:07:15 2009 -0500
+
+    FreeBSD: Set up the nouveau build infrastructure
+    
+    disabled by default until the rest of the patches are in.
+
+commit dec955d728505f060afccd047ff2b572cb4ba3c1
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Mar 16 00:41:23 2009 -0500
+
+    FreeBSD: Add support for matching solely on vedor id.
+    
+    This also adds that ability to set device name from VPD, but that
+    doesn't seem to be working...
+
+commit 44fec1a8e487a14e0221e32759cc16ce9fcd7b00
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Mar 16 00:35:18 2009 -0500
+
+    FreeBSD: Improve the debug output of drm_mmap().
+
+commit f8f49aa6ec10e281b08279143f2bd999df118147
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Mar 16 00:30:28 2009 -0500
+
+    FreeBSD: Add list_for_each_prev() to our bank of compat functions.
+
+commit 6777c6bb8bb399e48500d742e80822808451010b
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Mar 16 00:17:54 2009 -0500
+
+    FreeBSD: Don't set the PZERO flag to mtx_sleep.
+    
+    We also don't support anything old enough to need tsleep.
+
+commit 06e182d0259d1d2e775814fa070c6cce0ee233a8
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Mar 16 00:08:06 2009 -0500
+
+    FreeBSD: use flsl() instead of ffsl().
+    
+    I noticed that we were computing drm_order differently than linux.
+
+commit 2ce00c6b674a51bdfaa3276b88d2015c59d4584e
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Mar 16 00:07:31 2009 -0500
+
+    FreeBSD: Minor code cleanup.
+
+commit b0acc886069c0054da98059319a84eaf60114d32
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Mar 16 00:03:40 2009 -0500
+
+    FreeBSD: Increase MAX_PCI_RESOURCE
+    
+    We can have more than 3 BARs to access.
+
+commit f78040266bbddf6cf020fb957e3f92000c2bc69b
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Mar 16 00:01:47 2009 -0500
+
+    FreeBSD: Cast map handles to vm_offset_t
+    
+    This prevents some warnings with nouveau.
+
+commit 82eac8060b98b425f29051bfd7830ba3622be7d8
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Mar 9 13:37:57 2009 -0500
+
+    FreeBSD: Fix the printing of maps on amd64/i386 to be consistent
+
+commit a3ba51bd041a448f3bb14678cebb0976e0fda47a
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Mar 9 13:34:26 2009 -0500
+
+    FreeBSD: Fix up the flags for bus_dmamem here as well.
+
+commit af1afb3c381797e6bf0fb56abd4505094cb6c11e
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Sun Mar 8 22:55:01 2009 -0500
+
+    FreeBSD: Fix up the flags to bus_dmamem_*
+    
+    Allow it to sleep waiting for resources during the allocation stage.
+    Only use BUS_DMA_NOWAIT when loading the map.
+
+commit 2221e16703bf5bf813a98926b968bd5b28eb5d70
+Author: vehemens <vehemens@verizon.net>
+Date:   Sun Mar 8 18:17:15 2009 -0700
+
+    FreeBSD use kdev for kernel device name
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit 391c92ae1799f0d1fddb2321c5713afc58575514
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Fri Mar 6 09:04:44 2009 +1000
+
+    drm/nouveau: make portion of vram as reserved for PRAMIN on all chipsets
+    
+    NV04 was completely busted.  Push buffers were getting allocated at the
+    end of VRAM, overwriting PRAMIN.  So, it turns out PRAMIN is in VRAM on
+    all chips.  Question answered!
+
+commit 14503dafa79cfdea69d618f2c28dafb66765a8a0
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Thu Mar 5 00:47:26 2009 -0600
+
+    FreeBSD: Rework DRM_[DEBUG,ERROR,INFO] macros a bit.
+
+commit 0a227a3361054f06da4bba34d02c8dadcd448e9a
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Thu Mar 5 00:46:32 2009 -0600
+
+    FreeBSD: Garbage collect entries from pcireg.h since we now include it.
+
+commit 222dc6582e7afad0cd397452a0c4bcea23efeb04
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Thu Mar 5 00:44:56 2009 -0600
+
+    FreeBSD: We only want drm to ever attach to the primary pci device.
+    
+    Intel 855 chips present the same pci id for both heads.  This prevents
+    us from attaching to the dummy second head.  All other chips that I
+    am aware of either only present a single pci id, or different ids
+    for each head so that we only match on the correct head.
+
+commit 4a27f1c6384c3987dc25e0d2b65e4cf56af7769a
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Thu Mar 5 00:42:52 2009 -0600
+
+    FreeBSD: rework drm_scatter.c which allocates scatter / gather pages for use by
+    ati pci gart to use bus_dma to handle the allocations.  This fixes
+    a garbled screen issue on at least some radeons (X1400 tested).
+
+commit e4b065ad9a0834fb646baf5a6051902d15716e5e
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Tue Mar 3 22:42:51 2009 +0200
+
+    drm: drop Linux < 2.6.21 support
+    
+    This also means, that DRM_FULL_MM_COMPAT is always defined,
+    so it is dropped, too.
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit a6b28a86a6141259583c3699d1a2d9b26e366ba8
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Tue Mar 3 22:20:59 2009 +0200
+
+    drm, via: drop Linux < 2.6.20 support
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit f44c740dc7a05d651df7604baad8f667836d1b09
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Mon Mar 2 23:14:45 2009 +0200
+
+    drm: drop Linux < 2.6.19 support
+    
+    This also means dropping the DRM_ODD_MM_COMPAT case.
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit 081b2d6da22e08e1448285d647a35b17905512cf
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Mon Mar 2 22:39:32 2009 +0200
+
+    drm: drop Linux < 2.6.18 support
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit 62f4344c98b72535df88a5a3d577c1df314e4f9b
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Mon Mar 2 22:35:23 2009 +0200
+
+    drm: drop Linux < 2.6.16 support
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit 056ce26344197042cbef800436f16d3f8ba288c8
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Mon Mar 2 22:26:46 2009 +0200
+
+    drm: drop Linux < 2.6.15 support
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit b47de8d5a3dbfc669c7ba9c6cb66a7491c30b537
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Mon Mar 2 22:09:26 2009 +0200
+
+    drm: drop Linux < 2.6.12 support
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit 4c439ac4a7fa627691dfcd6a4be67cd95d8d33ee
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Mon Mar 2 00:17:44 2009 +0200
+
+    drm: drop Linux < 2.6.10 support
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit 4bdddf57155a774318ed3739ede9511f074d394e
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Mon Mar 2 00:13:00 2009 +0200
+
+    drm: drop Linux <= 2.6.8 support
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit d3f25ccca882f91071a0d68bb4b75ff871f0cc04
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Sun Mar 1 23:53:02 2009 +0200
+
+    drm: drm_bo_mmap_locked() is static.
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit a6dd0afa87558a670f970e61b023f45a396539eb
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Sat Feb 28 17:45:02 2009 +0200
+
+    drm, ati: fix printf format warnings
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit 9e8591dbdbd99ec1cc4922d61ec4cc54ef42f0ac
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Sat Feb 28 16:09:56 2009 +0200
+
+    drm: build fix for Linux drm_vblank_cleanup()
+    
+    The commit 957b10695b619d6ed2f1098b00502395d9a3c149, "Move vblank_init
+    to driver load time." forgot to add the function declaration in
+    linux-core/drmP.h.
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit ad64ff30d0e85486bba8fb6f0e2fcb1caa06fd5c
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Fri Feb 27 17:52:08 2009 -0600
+
+    FreeBSD: Introduce a kernel tuneable to disable msi at boot time.
+
+commit 957b10695b619d6ed2f1098b00502395d9a3c149
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Wed Feb 25 17:59:26 2009 -0600
+
+    Move vblank_init to driver load time.
+
+commit 7ce8d4c1fec618ac2578ea0ddb8915b1b41ab9cb
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Feb 27 13:46:31 2009 -0800
+
+    intel: Update reloc_tree_size of the first buffer when we count the tree size.
+    
+    This helps avoid the n^2 performance cost of counting tree size when we
+    get a lot of relocations into our batch buffer.  rgb10text on keithp's laptop
+    went from 136k glyphs/sec to 234k glyphs/sec.
+
+commit ab582f64fd54565f66eba866972f0fe2c313f000
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Thu Feb 26 23:51:57 2009 -0600
+
+    FreeBSD: Fix up some ioctl permissions issues missed many times over.
+    
+    This was somehow hit with r600 demo.
+    
+    Submitted by: 	Jung-uk Kim <jkim@FreeBSD.org>
+
+commit 948af0bd9b9eade489599d7ec160d42706331779
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Wed Feb 25 14:19:01 2009 -0600
+
+    i915: Backport jbarnes gm45 vblank counter patch.
+
+commit efa485b2cf2f1f46760a3d9297ba1a73a2dbcd05
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Feb 24 21:36:56 2009 -0800
+
+    intel: Don't copy dirty data out when freeing a BO in the fake bufmgr.
+
+commit e96fc62e5339e3c8c8944dfe9f5163f769bccbd8
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Tue Feb 24 15:49:45 2009 -0600
+
+    FreeBSD: Drop the Giant lock.
+
+commit b9b8e8f3cc61a37cce2ae48957514ce6a4f30566
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Tue Feb 24 15:47:35 2009 -0600
+
+    FreeBSD: Turn on msi
+    
+    There is a blacklist for devices that advertise the capability, but
+    don't work properly.
+
+commit 153a0803db19cf8c0b4f532e0d0243747875e154
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Tue Feb 24 14:21:10 2009 -0600
+
+    FreeBSD: Add some vblank related debugging and replace DRM_WAIT_ON with a local instance.
+
+commit a44b4ca8203e366df5a2ed5fe3d78faea4cf7d81
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Tue Feb 24 14:00:21 2009 -0600
+
+    i915:  A few whitespace cleanups.
+
+commit 04d94197e69ed7d3cad194e8579631849135b08c
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Tue Feb 24 12:59:08 2009 -0600
+
+    linux: Add msi_enabled to the drm_device so the build should be happy.
+
+commit 68707804284438140413987849fee989b9fe4ba8
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Tue Feb 24 12:28:42 2009 -0600
+
+    radeon: Prepare radeon for msi support.
+
+commit d45bc6667c6f10cbb3832178e4a6a8cdd036b739
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Tue Feb 24 02:00:42 2009 -0600
+
+    i915: This was part of a sync to the intel driver at some point
+    
+    	-Remove the old TTM interface
+    	-Move register definitions to i915_reg.h
+    	-Rework the irq handler
+
+commit c3c21303e381310a0962ecc24af1797dccd9a99f
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Feb 24 11:33:34 2009 -0500
+
+    nouveau: Dist nouvea_dma.h as well.
+    
+    Oops.  Disting is hard.
+
+commit a71d3edd6c09a0141fae0893cbee21b71578d99d
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Feb 24 11:19:41 2009 -0500
+
+    nouveau: Also dist nouveau_private.h.
+
+commit 1c381092a310af9b1b39b3a983ad5760b71a9025
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Tue Feb 24 00:22:56 2009 -0600
+
+    FreeBSD: Rip out the locked task support now that i915 no longer uses it.
+
+commit 9f94e39f0d5bed48d5ea56767cd92a2509908df0
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Feb 23 22:39:07 2009 -0600
+
+    i915: Rip out the use of vblank_swap
+
+commit 9d402905c07a38e1eb327db96ae561de7930f616
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Feb 23 20:22:44 2009 -0600
+
+    FreeBSD: There is no compelling reason to hold the lock here.
+    
+    When I was lock profiling, this was high up on the list and I
+    see no reason to do it.
+
+commit d6c97868361da48d13a5fe7fe106d67a64969ab1
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Feb 23 20:16:15 2009 -0600
+
+    FreeBSD: Don't set PZERO in mtx_sleep.
+
+commit a9486ee3a8aaae888b4a05ae0d475cfa2a2641cb
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Feb 23 20:01:26 2009 -0600
+
+    FreeBSD: Set MAP_NOSYNC on mmaps.
+    
+    There is no reason to gratuitously sync these maps to swap.
+
+commit a773ce1db8801fcbbdb55b54172c9cd48b92e2d7
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Feb 23 13:30:20 2009 -0800
+
+    Add libdrm_intel.pc by popular demand.
+
+commit 6feac49398d0f037103a4ae3d5a512badeed61fb
+Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
+Date:   Mon Feb 23 15:54:18 2009 -0500
+
+    Fix DRM_CAS() on Alpha. (#16549)
+
+commit 9fc85b4084b69fefab3dbdf1f6cf97ccb47c963a
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Mon Feb 23 15:08:03 2009 -0500
+
+    modetest: Print names of properties.
+
+commit 4a0d19ef4f210cea9e60c5acc355df03723ef808
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Sun Feb 22 12:40:47 2009 +0200
+
+    Fix fix distcheck for optional nouveau stuff.
+    
+    Tylo.
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit 4d5341340fb6df22fffa7d4a214c54c085a1b1cf
+Author: Eric Anholt <eric@anholt.net>
+Date:   Sat Feb 21 10:01:40 2009 -0800
+
+    Fix distcheck for optional nouveau stuff.
+
+commit 2f1cdf79a7b7679f2602f27f18a0737f6e40e490
+Author: Eric Anholt <eric@anholt.net>
+Date:   Sat Feb 21 09:57:19 2009 -0800
+
+    Bump version to 2.4.5 for new API additions.
+
+commit 72abe983adfe7e8dcdcec11f1bc11d0b3daae063
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Feb 18 13:06:35 2009 -0800
+
+    intel: Add a new bufmgr alloc function to get BOs ready for rendering to.
+    
+    This avoids using the oldest BO in the BO cache and waiting for it to be
+    idle before we turn around and render to it with the GPU.  Thanks to
+    Chris Wilson for pointing out how silly we were being.
+
+commit a1345338feb7af25c0a9fe02ec16c2b9cce83a9e
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Fri Feb 20 09:25:35 2009 +1000
+
+    libdrm/nouveau: free drmVersion after we're done with it
+
+commit 18f2fcf5aa299fe3b7b56af37e7eefe78c921f61
+Author: Ben Skeggs <bskeggs@redhat.com>
+Date:   Thu Feb 19 19:40:19 2009 +1000
+
+    libdrm/nouveau: fix dma debugging
+
+commit 6a31b445fa494b992d5ddb115dd022058b787fc2
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Wed Feb 18 22:46:40 2009 +0200
+
+    nouveau: support backlight only when kernel does
+    
+    Loading nouveau.ko would fail with unknown symbols, if the backlight
+    class device support is not provided in the kernel. Let's make the
+    backlight support dependant on the kernel configuration.
+    
+    This is a bit ugly, the proper way would be to check for the config in
+    Makefile.kernel whether to build nouveau_backlight.o at all, and if not,
+    nouveau_drv.h should provide the stubs.
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit 25c60cfeca16f2bce38dbf32a57f1edc04c23a19
+Author: Matthew Garrett <mjg59@srcf.ucam.org>
+Date:   Wed Feb 18 13:21:26 2009 +0000
+
+    nv40, nv50: fix backlight build for <2.6.29 kernels
+    
+    Signed-off-by: Matthew Garrett <mjg59@srcf.ucam.org>
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit 96ce587e8b915afeac38e5f547ba95803c1780f2
+Author: Matthew Garrett <mjg59@srcf.ucam.org>
+Date:   Wed Feb 18 02:08:25 2009 +0000
+
+    nouveau: Add in-kernel backlight control support
+    
+    Several nvidia-based systems don't support backlight control via the
+    standard ACPI control mechanisms. Instead, it's necessary for the driver
+    to modify the backlight control registers directly. This patch adds
+    support for determining whether the registers appear to be in use, and
+    if so registers a kernel backlight device to control them. The backlight
+    can then be controlled via existing userspace tools.
+    
+    Signed-off-by: Matthew Garrett <mjg@redhat.com>
+    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
+
+commit 0054e14793e585ec0d8e95e3d7b82cbf1a684af8
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Sat Feb 14 22:22:39 2009 +0200
+
+    drm_compat: remove kmap_atomic_prot_pfn()
+    
+    This function is unused, and yet creates build problems: the symbol
+    init_mm is not exported by the latest -rc kernels and I don't believe it
+    ever will be. Even CONFIG_UNUSED_SYMBOLS does not provide it anymore.
+    
+    If this function is needed in the future, it needs to be reinvented in
+    any case. So remove it.
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit e32aa6226fe98d8342647acf34decd3699eff5e4
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Mon Feb 16 20:43:02 2009 +0200
+
+    Remove i915 driver sources from linux-core
+    
+    Intel developers have stated, that their DRM development continues
+    elsewhere in some Linux kernel trees. This makes the code in drm.git
+    just dead weight. This removal allows further cleanup of compatibility
+    code.
+    
+    shared-core and bsd-core are left untouched this time.
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+    Acked-by: Eric Anholt <eric@anholt.net>
+
+commit 709b82e1a5971fa58d627912402aa14a6d231cdd
+Author: Eric Anholt <eric@anholt.net>
+Date:   Sun Feb 15 18:35:03 2009 -0800
+
+    intel: Clear ioctl parameter outvalues and pads that confuse valgrind.
+    
+    The minor CPU cost here is probably outweighed by bothering us with noise in
+    the tool.
+
+commit 084e143d0c82f5bf6e4ccc8c84a01307c820ca93
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sun Feb 15 22:06:18 2009 +1000
+
+    nv40: fail completely if we don't have a ctxprog for the chipset
+
+commit a4ac60a10239bb6d19f6d89f2c044e9b7b29837c
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sun Feb 15 21:52:19 2009 +1000
+
+    nv50: context info for chipset 0xa0
+
+commit 7e5c512104c3ae9b4ddd121f6bbf9464f8d73181
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Feb 11 14:18:03 2009 +1000
+
+    libdrm: make libdrm_nouveau conditional, disabled by default
+    
+    libdrm isn't supposed to ship APIs not present in a released kernel.
+
+commit eb78c53aa1a980e60c0dd1f2d0d2f04cb9cb2622
+Author: Jakob Bornecrantz <jakob@vmware.com>
+Date:   Wed Feb 11 16:43:20 2009 +0100
+
+    mode: Make xfdrmMode.[c|h] not depend on drm_mode.h
+
+commit 2d2f105f79921025bce1b9015378612328d2f06e
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Wed Feb 4 21:44:50 2009 +0200
+
+    nouveau: fix type warnings: void* arith, un/signed
+    
+    nouveau_notifier.c had two places where void* was used in arithmetic,
+    fixed by using char*.
+    
+    nouveau_dma_wait(), nouveau_notifier_wait_status() and
+    nouveau_resource_alloc() had signed/unsigned comparison warnings, fixed
+    by changing the function parameter into an unsigned type.
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit bc92c0edf33f3f38275f6aa4e0639b3ddeef68ca
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Feb 11 10:48:36 2009 +1000
+
+    drm/nv50: fix nv9x chipsets
+    
+    NVIDIA do this fun little sequence after updating the PRAMIN page tables.
+    
+    On 9xxx chips, none of the PRAMIN BAR bindings (except the initial one)
+    worked, hence the majority of the setup needed to create a channel
+    ended up in the wrong place, causing all sorts of fun.
+    
+    This is done by NVIDIA on nv8x chips also, so we'll do it for them too,
+    even though they appear to work without it.
+
+commit 7bbd605a21200e5e4beb94f261aefe30c4e7853d
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Feb 11 10:12:43 2009 +1000
+
+    drm/nv50: add context info for nv98
+    
+    It won't work yet, just like the other 9xxx chips.  Real soon now :)
+
+commit efcef2c2bcd7a8ea16381cc8d6ae06fff1bc3483
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Tue Feb 10 09:05:09 2009 +1000
+
+    drm/nv50: use a slightly different initial context for nv96
+    
+    I'm not 100% sure that the nv94 one we were using won't work.  The context
+    layouts are identical (well.. same ctxprog, so of course!), only a couple
+    of registers differ.  But, be safe until we actually get some 9xxx chips
+    working.
+
+commit f43039c52c7f27b61316beba5863968996a05bc0
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Tue Feb 10 09:02:17 2009 +1000
+
+    drm/nv50: correct ramfc pointer in channel header
+    
+    Suprisingly the card still worked without this...
+
+commit 889b811e319ab80a4714854a0c0b242b5e36e0ca
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Tue Feb 10 08:57:21 2009 +1000
+
+    drm/nv50: let the card handle the initial context switch
+    
+    Our PFIFO/PGRAPH context save/load functions don't really work well
+    (at all?) on nv5x yet.  Depending on what random state the card is
+    in before the drm loads, fbcon probably won't work correctly.
+    
+    Luckily we've setup the GPU in such a way that it'll actually do a
+    hw context switch for the first context.  Not sure of how successful
+    this'd be currently on the older chips (actually, pretty sure it won't
+    work), so NV50 only for now.
+
+commit 9c8d634e687a5a5b5d314b3fd5b34cc17a217139
+Author: Stuart Bennett <stuart@freedesktop.org>
+Date:   Sat Feb 7 21:20:17 2009 +0000
+
+    nouveau: don't try to traverse non-existent lists
+    
+    Fixes nouveau_ioctl_mem_free Oops
+
+commit 97fdadee6a79f9406a55c235ee46104814321152
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Thu Feb 5 23:03:29 2009 +1000
+
+    nouveau: fix some issues where buffer objects never get freed
+
+commit 8b8803695b24d4cb4d041437a4709be06e59471b
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Wed Feb 4 12:17:13 2009 -0500
+
+    modetest: Add syntax to also specify a crtc when setting a mode.
+
+commit 225e7e274f49d5e01fa1ad3fbbb9f1499865fe67
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Jan 30 11:25:35 2009 +1000
+
+    nouveau: install libdrm_nouveau with libdrm
+
+commit cb85630c02ddb46f168064befb2296d46b69f57a
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Jan 30 11:18:54 2009 +1000
+
+    nouveau: bring in new mm api definitions, without the actual mm code
+    
+    Use of the new bits is guarded with a mm_enabled=0 hardcode.
+
+commit 7a389aab86bde183de8806878b8cf055f662ee73
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Feb 3 15:03:41 2009 -0500
+
+    modetest: Use cairo (if available) to paint a better pattern.
+
+commit 2c113a1b159f57ab94b54316ece49c677cfe04ce
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Feb 3 14:02:50 2009 -0500
+
+    modetest: Don't sleep when just dumping state, wait for key for modeset.
+
+commit 669fde3472ae71c55cc7526e3b3bd6fe00d6a5a5
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Feb 3 14:00:00 2009 -0500
+
+    modetest: Handle setting modes on multiple crtcs with one fb.
+
+commit d9c55a6becb530dcf11bc980cb6b31843be0b8c2
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Feb 3 13:26:22 2009 -0500
+
+    modetest: Use a more interesting test pattern.
+
+commit 39755db856794a4d0481d66b46b1b86e46a39b39
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Mon Feb 2 23:47:11 2009 +0100
+
+    Remove the "nv" driver.
+
+commit bf46e0941fc6d342ad38057f23c8a74ac03b72f0
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Mon Feb 2 15:47:09 2009 -0500
+
+    No need to pin buffer anymore in modetest.c
+
+commit 854bd8f2cae8389d1152993a1d751687632df323
+Author: Stuart Bennett <sb476@cam.ac.uk>
+Date:   Thu Jan 29 23:39:50 2009 +0000
+
+    nouveau: don't save channel context if it has recently become invalid
+    
+    Bug exposed by DDX change d9da090c
+
+commit 408fc85a21689ee9859b64cb90902242bbc7e314
+Author: Stuart Bennett <sb476@cam.ac.uk>
+Date:   Sat Oct 25 20:59:38 2008 +0100
+
+    nouveau: no suspend support for nv50+
+
+commit e37bd24d3c99319b372517c2ddb77bfb4829f1df
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Jan 27 18:00:45 2009 -0800
+
+    Clean up README for the current state of kernel module affairs.
+    
+    Bug #19608.
+
+commit cbdd6272c04f487c8a63b595829d2d551e2b58f8
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Jan 27 17:16:11 2009 -0800
+
+    intel: don't count fences on 965 and later, as they don't use them.
+
+commit 9209c9a653e40d66435fbee7dde7450d5e470e03
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Jan 27 16:54:11 2009 -0800
+
+    intel: Fix under-counting of fences registers required in check_aperture.
+
+commit 2fa5f28eeef4ce13a48c1998856a115c7e4161ac
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Fri Jan 23 14:13:45 2009 -0800
+
+    intel: libdrm support for fence management in execbuf
+    
+    This patch tries to use the available fence count to figure out whether a
+    given batch can succeed or not (just like the aperture check).
+    
+    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
+    Signed-off-by: Eric Anholt <eric@anholt.net>
+
+commit 26ca0bca9bd5e23b1d31bc6dfb6d58b62143447b
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Tue Jan 27 22:39:50 2009 +0200
+
+    drm compat: fix euid for >=2.6.28
+    
+    drm_fops.c reads the current process' EUID directly from task_struct.
+    Apparently starting in 2.6.28-rc4 this fails to build.
+    
+    In Linus' tree, commit b6dff3ec5e116e3af6f537d4caedcad6b9e5082a
+    "CRED: Separate task security context from task_struct"
+    moves the euid field from task_struct to another struct.
+    
+    Earlier commit 9e2b2dc4133f65272a6d3c5dcb2ce63f8a87cae9
+    "CRED: Introduce credential access wrappers" implements the wrapper
+    macros to access e.g. euid. This is in 2.6.27-rc4, and this contains the
+    definition of current_euid() that will be used in the DRM compatibility header
+    for kernels before 2.6.27. That commit also creates <linux/cred.h>, which
+    contains the upstream definition of current_euid().
+    
+    drm_fops.c is fixed to use current_euid(), and drm_compat.h will offer
+    the compatibility definition for kernels <2.6.27.
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit e6a062c21a73ac4ab420648e78c6fe1798de6cbd
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Tue Jan 27 08:36:33 2009 +1000
+
+    nv50: support chipset NV96
+    
+    ctxprog seen in okias' trace identical to one we use on NV94, assuming
+    the initial context values for NV94 will work here too.
+
+commit 753d4c39ff87f6b73dac72db4444b7627f39d2a9
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Thu Nov 13 13:04:21 2008 +1100
+
+    nv04-nv40: correct RAMHT size
+
+commit 27fae006853647ad0087067adc4eaa8d4ed4594a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 19 06:46:23 2009 +1000
+
+    drm: remove drmstat/dristat from linux-core build
+    
+    pointed out by pq
+
+commit 18d3cc076b53f2032eed1f9a4b21947f4cb9e4e7
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jan 14 16:11:32 2009 -0800
+
+    bump version to 2.4.4
+
+commit 02445eab6432709abe2b06020c014be527d58ead
+Author: Eric Anholt <eric@anholt.net>
+Date:   Sun Jan 4 17:37:18 2009 -0800
+
+    intel: Retry pin ioctl on -EINTR.
+
+commit 65b90fb37744fdd335c59fdc70079fa058301858
+Author: Owain G. Ainsworth <oga@openbsd.org>
+Date:   Sat Jan 10 18:48:46 2009 +0000
+
+    Don't use DRM_BO_FLAG_NO_MOVE in bufmgr fake. It's a ttm flag.
+    
+    It's also unused, so worthless.
+
+commit 13ff0e58c36458a058e5c0676af04000c64a94f6
+Author: Owain G. Ainsworth <oga@openbsd.org>
+Date:   Sun Jan 11 19:02:07 2009 +0000
+
+    Remove drmModeReplaceFb after it was removed from the kernel.
+    
+    It is impossible to replace the original semantics of this call purely
+    in userland, since the fb_id would change.
+    
+    after discussion with Dr_Jakob
+    
+    Signed-Off-By: Owain Ainsworth <oga@openbsd.org>
+    Acked-By: Jakob Bornecrantz <jakob@vmware.com>
+
+commit ac8b3308b9432edef5cabe30559004314d42d98c
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Jan 12 10:16:07 2009 +1000
+
+    nv50: ack nsource to prevent continuous protection fault irqs
+
+commit badc63464cbd64606c6dff9ea561a787d072fd5f
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Wed Jan 7 11:47:52 2009 -0800
+
+    libdrm: add autoconf check for clock_gettime
+    
+    Should be more portable this way.
+
+commit ca37077fb78b69a00500827f1db12b70affa1514
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Wed Jan 7 10:48:26 2009 -0800
+
+    libdrm: only check for vblank timeout if we caught EINTR
+    
+    Michel caught a case where we might overwrite a success or other return
+    value with EBUSY, so check the return value before checking for the
+    timeout condition.
+
+commit f4f76a6894b40abd77f0ffbf52972127608b9bca
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Wed Jan 7 10:18:08 2009 -0800
+
+    libdrm: add timeout handling to drmWaitVBlank
+    
+    In some cases, vblank interrupts may be disabled or otherwise broken.
+    The kernel has a 3s timeout builtin to handle these cases, but the X
+    server's SIGALM for cursor handling may interrupt vblank wait ioctls,
+    causing libdrm to restart the ioctl, making the kernel's timeout
+    useless.
+    
+    This change tracks time across ioctl restarts and returns EBUSY to the
+    caller if the expected vblank sequence doesn't occur within 1s of the
+    first call.
+    
+    Fixes fdo bz #18041, which is caused by a drmWaitVBlank hanging due to
+    the corresponding pipe getting disabled (thus preventing further events
+    from coming in).
+
+commit a8c548034e38d7fb8afeca100230818b3cfcb9d9
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Mon Dec 29 09:21:58 2008 -0800
+
+    Remove executable from modeprint test dir
+    
+    Accidentally committed it with the mode setting changes.
+
+commit 58d557c73b9e4ad1964fd083abeec74875c141cb
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Tue Dec 23 13:56:23 2008 -0500
+
+    [FreeBSD] Fix build on FreeBSD after modesetting import.
+
+commit b48bd3a036efa3c3aa759759a5be4f80f1c3ac72
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Dec 23 11:22:44 2008 +1000
+
+    radeon: only write irq regs if irq is enabled
+
+commit dfd7fdafd8a2bad0d63ced4a969b6278c221c000
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Dec 17 13:55:53 2008 -0800
+
+    intel: Rename plane[AB]* back to pipe[AB]*.
+    
+    The values are really going to continue meaning pipe, not plane, and that's
+    what they're called in the kernel copy of the header.  Userland hasn't ever
+    made the switch to pipe!=plane, since userland checks are based on DRM
+    version, which is still stuck at 1.6.  However, Mesa did start using
+    plane[AB] names, so provide a compat define.
+
+commit 28771e06dfe45027be6618f87335c19e8e88e3f6
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Dec 17 13:47:59 2008 -0800
+
+    intel: Remove linux build of i915 DRM, as it's unmaintained and a user trap.
+    
+    The code's in the linux kernel.
+
+commit d221e00105477be824ff8878ba3c06b77efff84f
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Dec 17 13:45:01 2008 -0800
+
+    intel: Sync GEM ioctl comments for easier diffing against the kernel.
+
+commit 0243c9f801a35de3465a0321c02f18a4d07ce5b8
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Thu Dec 18 00:02:43 2008 -0500
+
+    modetest: Print more stuff. Prettier.
+
+commit 06ab2f6436e26f77292d53e3ce2fe547d4a79fe3
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Dec 17 10:41:21 2008 -0800
+
+    libdrm: Fix modetest/modeprint to use automake stuff.
+
+commit 18f091d136cd44ab397817f8a3e89c21e9561a31
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Dec 15 15:08:12 2008 -0800
+
+    intel: Cache tiling/swizzle state in user mode. Reset tiling on reuse.
+    
+    Remember tiling mode values provided by appplications, and
+    record tiling mode when creating a buffer from another application. This
+    eliminates any need to ask the kernel for tiling values and also makes
+    reused buffers get the right tiling.
+    
+    Signed-off-by: Keith Packard <keithp@keithp.com>
+
+commit 40334c64107a2938c41af6e34bda9f2094d1c6ec
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Dec 15 15:08:17 2008 -0800
+
+    intel: Debug output %u vs uint64_t warning fix
+    
+    Signed-off-by: Keith Packard <keithp@keithp.com>
+
+commit bd14b2cf7551826c6437bbf1d8409cebd45615a5
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sat Dec 13 11:06:11 2008 -0800
+
+    intel: return error status from drm_intel_gem_bo_map
+    
+    Applications may actually care if the mapping operation failed, so when
+    it happens, return an error indication. errno is probably trashed by
+    fprintf though.
+    
+    Signed-off-by: Keith Packard <keithp@keithp.com>
+
+commit b13f4e1a32ab98fa719a3233cad59ff4d49cfb38
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Nov 21 01:49:39 2008 -0800
+
+    intel: Dump out memory usage information when the kernel fails to pin
+    
+    The execbuffer ioctl returns ENOMEM when it fails to pin all of the buffers
+    in the GTT. This is usually caused by the DRM client attempting to use too
+    much memory in a single request. Dumping out the requested and available
+    memory values should help point out failures in the DRM code to catch over
+    commitments of this form.
+    
+    Signed-off-by: Keith Packard <keithp@keithp.com>
+
+commit 731cd5526e5c732d51307b26e784f454a724a699
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Wed Dec 17 10:09:49 2008 -0800
+
+    libdrm: add mode setting files
+    
+    Add mode setting files to libdrm, including xf86drmMode.* and the new
+    drm_mode.h header.  Also add a couple of tests to sanity check the
+    kernel interfaces and update code to support them.
+
+commit c86d431fe6174b1c2de531929213ea7dbd92326d
+Author: Eric Anholt <eric@anholt.net>
+Date:   Sun Dec 14 14:39:24 2008 -0800
+
+    intel: don't skip set_domain on mapping of shared buffers.
+
+commit cebbd2edb54db1780a57b3873d1d3e40cb20043f
+Author: Eric Anholt <eric@anholt.net>
+Date:   Sun Dec 14 14:35:48 2008 -0800
+
+    intel: don't let named buffers into the BO cache.
+    
+    We wouldn't want some remaining 3D rendering to scribble on our batchbuffer.
+
+commit 782316801beeaf237af8272c41af93c96c708ac4
+Author: Eric Anholt <eric@anholt.net>
+Date:   Sun Dec 14 14:32:09 2008 -0800
+
+    intel: Remove the mapped flag, which is adequately covered by bo_gem->virtual.
+
+commit 9583c099b4a08b49e03f7b461c344b6d277fd262
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Wed Dec 10 15:47:28 2008 -0800
+
+    Revert "Merge branch 'modesetting-gem'"
+    
+    This reverts commit 6656db10551bbb8770dd945b6d81d5138521f208.
+    
+    We really just want the libdrm and ioctl bits, not all the driver
+    stuff.
+
+commit c34539e8bb5568b1d6059abf139dd08e07e84eea
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Wed Dec 10 15:37:45 2008 -0800
+
+    Bump version to 2.4.3 to reflect addition of mode setting header
+
+commit b718b93d75664cff0af42d4f76525546a6b14544
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Wed Dec 10 15:37:29 2008 -0800
+
+    Update .gitignore with new modetest program
+
+commit 6656db10551bbb8770dd945b6d81d5138521f208
+Merge: c99566f 12e68f8
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Tue Dec 9 10:23:43 2008 -0800
+
+    Merge branch 'modesetting-gem'
+
+commit c99566fb810c9d8cae5e9cd39d1772b55e2f514c
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Dec 8 14:05:32 2008 +1000
+
+    libdrm: bump to 2.4 for lib version
+    
+    we already have a 2.3.x version out there
+
+commit 12e68f8059485fb4f02a15f74ab2fa3bdff38c81
+Merge: d5d5aca b0d93c7
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Wed Dec 3 11:54:07 2008 -0800
+
+    Merge branch 'master' into modesetting-gem
+
+commit d5d5aca7f959f0e357f99dd517a421c015d0712f
+Merge: 10c3e1a 7e4e0fb
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Wed Dec 3 11:53:36 2008 -0800
+
+    Merge branch 'master' into modesetting-gem
+
+commit b0d93c74d884b40bd94469a5ef75fdb2fef17680
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Dec 1 11:49:11 2008 -0800
+
+    Bump version to 2.4.2 to signal new libdrm_intel functions.
+
+commit 6fb1ad767d64acbd904865bb429547c3805839cf
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Nov 13 11:44:22 2008 -0800
+
+    intel: Add a function for setting (GTT,GTT) domain, for use by UXA.
+    
+    This function can also serve the role that the bo_wait_rendering did, when
+    write_enable is unset.
+
+commit 7e4e0fbbb82b0467d46386bcac1115812aaa1393
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sun Nov 23 18:49:09 2008 +1100
+
+    nv50: support NV94 chipset
+
+commit 52232ad702474c7f93963642987314a905ef52aa
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Nov 21 12:43:44 2008 +1100
+
+    nv50: update context-related tables for original 8800GTS
+    
+    I either messed up when I pulled these from a mmio-trace last time, or
+    the previous values didn't work on my card.  Hopefully it's the former!
+    
+    In any case, at least one of the original NV50 chipsets work now.
+
+commit 10c3e1a8b55355b1ae1697ebf3d77ac4702d61c9
+Merge: 5923831 2e2fd6c
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Thu Nov 20 11:01:24 2008 -0800
+
+    Merge branch 'master' into modesetting-gem
+
+commit 2e2fd6c63204cbea3b29a4872be77ac69677c841
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Thu Nov 20 11:00:29 2008 -0800
+
+    DRM: make drm_map_type match upstream kernel
+    
+    Since the TTM type isn't upstream yet, we need to make sure libdrm uses
+    what the kernel uses, which is _DRM_GEM = 6.
+
+commit 5923831bafca3cf2358ffc7f8b0079ab4de9da5c
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Thu Nov 20 10:57:33 2008 -0800
+
+    DRM: make drm_map_type match kernel
+    
+    GEM is upstream, but TTM isn't, so _DRM_GEM needs to be 6, not 7.
+
+commit c029ed2510f32318d4bd6a195e81712d1b4ea29b
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Wed Nov 19 23:17:27 2008 +0100
+
+    Unbreak drm build.
+
+commit c67a83dfe1b60f81343ff7c2604a96b18ecb3b0c
+Merge: 60c1e3a e98eda9
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Wed Nov 19 12:42:49 2008 -0800
+
+    Merge branch 'modesetting-gem' of ssh://git.freedesktop.org/git/mesa/drm into modesetting-gem
+
+commit 60c1e3a09e33bfaec893c1d4780553b9b344293a
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Wed Nov 19 10:56:48 2008 -0800
+
+    libdrm_intel: fix merge error
+    
+    don't take the lock twice
+
+commit 8f5d8ba97e82072b2403bff0bf836a09640108a6
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Wed Nov 19 10:54:11 2008 -0800
+
+    Update modetest
+
+commit e98eda91593b7c0a7494475be8cfd8cb4740f8ec
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Mon Nov 17 13:35:51 2008 +0100
+
+    Revert "gem: protect idr_pre with the spinlock"
+    
+    This reverts commit f46aba43329786c9b2776e82af31d90e1c67eae0.
+
+commit f46aba43329786c9b2776e82af31d90e1c67eae0
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sun Nov 16 18:13:16 2008 +0100
+
+    gem: protect idr_pre with the spinlock
+    
+    There seems to be an issue if we don't protect idr_pre with
+    the spinlock we use for idr operations.
+
+commit 7270731a8b7ebe11fe6df4f368c2ed613a530b52
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sun Nov 16 18:11:00 2008 +0100
+
+    radeon: protect cs ioctl atomic part with a mutex
+    
+    A small subset of CS need to be atomic (relocation+IB commit to
+    ring) right now, because of the way relocation are handled, we
+    need to protect the whole ioctl.
+
+commit c0ba14fd90e7495d5634c1ce0a9fb5be26230010
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sun Nov 16 18:04:43 2008 +0100
+
+    libdrm-radeon: add print callback to cs & small fixes
+
+commit 5ae79e7edd819b84d9e447a2ab9b995a862ac3a7
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sat Nov 15 10:38:44 2008 +0100
+
+    libdrm-radeon: unref return current BO ptr to reflect BO destruction
+
+commit 1f6602185455957bde0fac09dcab5215326d49a0
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Sat Nov 15 12:30:09 2008 +1000
+
+    drm/bo: fix stupid lock imbalance
+
+commit 080a45624b2b0ac9e0173f5b93760ae018394dd1
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Fri Nov 14 12:13:53 2008 +0100
+
+    libdrm-radeon: unreference buffer once cs stream is submited or on cs clean
+    
+    BO are referenced once by reloc to make sure that they not destroyed
+    before we get a chance to flush the cmd stream, so we need to unreference
+    them once in cs submit or cs erase if cs i never submitted so bo can
+    be destructed.
+
+commit bfbecc5c42d9669fceaab683d1464dd353be9492
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Fri Nov 14 12:08:27 2008 +0100
+
+    libdrm-radeon: new tracker tools
+    
+    To keep record of bo activities and print them when necessary,
+    should help in tracking unbalanced ref/unref calls.
+
+commit 965b4d662a5236ee5aeb94a70f62565b6ed5644c
+Merge: 9a4cb7e 7e27b3b
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Thu Nov 13 15:30:06 2008 -0800
+
+    Merge branch 'master' into modesetting-gem
+    
+    Conflicts:
+    
+    	libdrm/Makefile.am
+    	libdrm/intel/intel_bufmgr.h
+    	libdrm/intel/intel_bufmgr_fake.c
+    	libdrm/intel/intel_bufmgr_gem.c
+    	shared-core/drm.h
+    	shared-core/i915_dma.c
+    	shared-core/i915_irq.c
+    	shared-core/radeon_cp.c
+    	shared-core/radeon_drv.h
+
+commit 7e27b3ba88f0c40680380636a436c18e3220c7ce
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Thu Nov 13 13:58:32 2008 -0800
+
+    libdrm_intel: fix warnings on 64 bit
+    
+    Cast a couple of %llx args to unsigned long long.
+
+commit 276c07d8855f748c043dfe3ab8c4da954ba0fe1e
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Thu Nov 13 13:52:04 2008 -0800
+
+    libdrm: add support for i915 GTT mapping ioctl
+    
+    Add a drm_intel_gem_bo_map_gtt() function for mapping a buffer object
+    through the aperture rather than directly to its CPU cacheable memory.
+
+commit 9a4cb7eab4f74747cc777a3fef31dbb46e1191e5
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Wed Nov 12 19:17:18 2008 +0100
+
+    mode: Minor reodering and renaming
+
+commit 17789a409d3e83cad9f5cf06c2bb7123b78746b2
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Wed Nov 12 19:10:50 2008 +0100
+
+    mode: Reorder the ioctls and numbering
+    
+    	This is to fill in the gaps left by the removal of
+    	the hotplug ioctls. And they also look better :)
+
+commit ea849d7ca6aaedd3aba6ec7239f01426521d8604
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Wed Nov 12 18:49:46 2008 +0100
+
+    mode: Unify userspace API to uint_t
+
+commit 1ead45c8f02e7c51cfe977383726d20479385688
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Wed Nov 12 18:40:04 2008 +0100
+
+    mode: Remove hotplug support from ioctl interface
+
+commit 13948c635d83285909e25ffd5285165789a598b2
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Wed Nov 12 18:16:38 2008 +0100
+
+    mode: Unify types for ids and strings
+
+commit a7457915f5775137436f3b16a640eb8bd6424ca6
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Wed Nov 12 15:56:40 2008 +0100
+
+    radeon+libdrm-radeon: change relocation informations
+    
+    Relocation now consist of the following informations (in this order) :
+    handle          buffer object handle identifier
+    start_offset    start offset of first data of the buffer object used by the cs
+    end_offset      end offset of last data of the buffer object used by the cs
+    read_domain     read domain (either VRAM, or GTT as GPU is invalid for CS)
+    write_domain    write domain (either VRAM, or GTT as GPU is invalid for CS)
+    flags           flags used for further optimization (like discard previous
+                    buffer content or forget buffer content after cs which can
+                    help in avoiding moving content in or out)
+
+commit 6d59bad8e9cab6170e1af3d67597b6f5f145c33f
+Merge: 72997fb 15464f5
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Mon Nov 10 22:21:32 2008 +0100
+
+    Merge branch 'modesetting-gem' of ssh://git.freedesktop.org/git/mesa/drm into modesetting-gem
+
+commit 72997fb3726b99b99c44e96e59abd8c70abbd8be
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Mon Nov 10 22:18:22 2008 +0100
+
+    libdrm-radeon: be verbose on bo failure and cleanup cs a bit
+
+commit 15464f5181538d01e8fc016211daa1a824b89531
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 10 15:38:32 2008 +1000
+
+    radeon: add gart useable size to report to userspace
+
+commit 532c63cddd273bffab715e3d387268abe164f148
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 10 15:37:51 2008 +1000
+
+    radeon: upgrade atom headers
+
+commit 213a71f31b174dcae2ef5b3d8b124c1fb62d1866
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 10 15:37:36 2008 +1000
+
+    radeon: fix fence race condition hopefully
+    
+    For some reason reading the SCRATCH reg from RAM causes some race to occur.
+    Hopefully fix this.
+
+commit 195cc0d817f99e25a1e961deeabbb15a40b789ed
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 10 15:37:16 2008 +1000
+
+    drm/radeon: add dpms connector functions
+
+commit 327631c8b50a90c8f694ffd9ebd0e5c618e99dff
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 10 15:35:34 2008 +1000
+
+    radeon: avivo cursors are across the full surface.
+    
+    fixes cursor on second head
+
+commit b1cf46378a54230291ba9fdb4dbbd4bc4befe049
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 10 15:35:16 2008 +1000
+
+    modesetting: set the crtc x,y after the mode base change
+
+commit 241a9b64141b2dd09449e581017b5ca0c0cc2357
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 10 15:30:21 2008 +1000
+
+    drm/radeon: add uncached allocator to drm ttm code.
+
+commit 994f2405030f7f595c4ec6bee524f7c06f27cd7b
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 10 15:25:27 2008 +1000
+
+    radeon: fix ring tail overflow issue since alignment
+
+commit 758376e6eb2155605ad502d0dc5147c74f3c47a6
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 10 15:25:12 2008 +1000
+
+    radeon: disable HDP read cache for now
+
+commit 08ef5b5e677579892a454d44a96a12dc771b56ac
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 10 15:24:42 2008 +1000
+
+    radeon: force all ring writes to 16-dword alignment.
+
+commit 31b0c4cd20d0eb843268a6307b7c32dbc07e42a0
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 10 15:13:08 2008 +1000
+
+    radeon: fixup vram visible calculation to take a/c pinned objects for now
+
+commit 7abb8416a7fd8d69f1f2317cdac2baa8e640671e
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sun Nov 9 18:48:46 2008 +0100
+
+    radeon: add more packet3 relocations handling
+
+commit 751d024dd5c91831a8141810c0f40ecdb235e7ca
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sun Nov 9 18:45:43 2008 +0100
+
+    libdrm-radeon: update libdrm-radeon to match current CS relocation structures
+
+commit 930c0e7cf4f4776f7a69e7acc6fedeed7addb235
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Nov 7 12:58:52 2008 -0800
+
+    intel: Restart on interrupt of bo_wait_rendering instead of complaining.
+
+commit 273cc1a69887df2bccfab96120f992c506c9035e
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Thu Nov 6 00:40:06 2008 +0100
+
+    radeon: lib radeon add bo & cs gem backend
+
+commit 2d822542c74c9a38d18724f568642397b5a4d13d
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Wed Nov 5 16:00:04 2008 +0100
+
+    radeon: libdrm_radeon add handle to debug string
+
+commit ddfb12b32e64d00d302f7fbb36fb079deec3646f
+Merge: 7651b4c 68fcb77
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Wed Nov 5 15:59:37 2008 +0100
+
+    Merge branch 'modesetting-gem' of ssh://git.freedesktop.org/git/mesa/drm into modesetting-gem
+
+commit 68fcb7770efc20b9e27b1724e2fb5ac112a5330e
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:58:12 2008 +1000
+
+    radeon: make build again
+
+commit b7108445c9ebb37d06fcc7821e984124fda928f3
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:52:40 2008 +1000
+
+    radeon: fix ROP values for the paint ROP
+
+commit 0e1df6216e7ce3a69d4311e4685613e57129285f
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:52:25 2008 +1000
+
+    radeon: add mtrr support for VRAM aperture.
+
+commit 2b9a7d5381534122858dc6e407794e8cd5c04d3e
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:51:57 2008 +1000
+
+    radeon: disable AGP for certain chips if not specified until we figure it out
+
+commit d3aa052f6174ea37136574b68ed55d7cb82c5017
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:51:33 2008 +1000
+
+    radeon: disable debugging message
+
+commit 28c9eb7b7493ee2478df66476c742432525f1efa
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:50:46 2008 +1000
+
+    radeon: commit ring after emitting the buffer discards
+
+commit c153a86af7e4e782e55565f882ef2c8618650150
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:49:59 2008 +1000
+
+    radeon: add more HDMI bits
+
+commit 49551f87fcd21e10a4485b3e00af47f0b9f94a0f
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:49:41 2008 +1000
+
+    radeon: set dma bufs bo type to a kernel type
+
+commit cdddff835510eca179ac289f41a1771093939901
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:48:10 2008 +1000
+
+    radeon: enable DVI-D + HDMI connectors.
+    
+    This allows the rs690 to work on DVI
+
+commit e829d5b6bc9f5887c82653c007641c3c37f7ae67
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:47:49 2008 +1000
+
+    radeon: setup isync cntl properly
+
+commit 13d9acd3110a32d94434311821362900a9463cf4
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:47:14 2008 +1000
+
+    radeon: add more debugging
+
+commit 31b8a640db9b55638bf9967f0d78ec665fa8839f
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:46:54 2008 +1000
+
+    radeon: overhaul ring interactions
+    
+    emit in 16-dword blocks, emit irqs at same time as everything else
+
+commit ce2cd141c36f330da7e9fb9a281e51abab88e0d1
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:46:07 2008 +1000
+
+    radeon: fix race in sysfs
+
+commit 4ef8ace9a96bd6bb4040ef5c4c3ea5572d7129e1
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:45:43 2008 +1000
+
+    radeon: add proc debugging for interrupts/ring
+
+commit be3dac976e07fbfd727a2d0216ea9ba3247db348
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:44:32 2008 +1000
+
+    radeon: only enable dynclks if asked for
+
+commit 31f8d4218c0f6455751d8bbc788172912359b0df
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:44:03 2008 +1000
+
+    radeon: add wait rendering API
+
+commit fc25c81eab2d847c854e0a44cae29f8c2213bba6
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:43:29 2008 +1000
+
+    radeon: rs480 fixes for bus mastering
+
+commit 4ccec67a239517458bace47bf08f6770393abb37
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:42:01 2008 +1000
+
+    radeon: remove unused gem indirect ioctl
+
+commit f5e6dbef797cff18953e4f3271e1c74a0b24b715
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:41:30 2008 +1000
+
+    radeon: fix some warnings
+
+commit e57072b5ee521ec799d0aa0ef84a7d01d8479202
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:41:12 2008 +1000
+
+    radeon: fix free after refcount
+
+commit 6000fa686294019e93f815433a1a9b44db511a69
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:40:52 2008 +1000
+
+    radeon: CS2 make it all work with new relocs style
+
+commit 35f080559287ebf30f417337fa124d827709503b
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:40:24 2008 +1000
+
+    radeon: don't copy to user the cs ids
+
+commit 8b2925468d326ab6fa31a312e845a3bc71343106
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:39:53 2008 +1000
+
+    radeon: make new CS2 command submission interface port older interface to this
+
+commit 563e7e5930a8d628b33cb1f7a9aaea251f2fc50b
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:36:03 2008 +1000
+
+    radeon/drm: fixup ref counting in on fb objs
+
+commit fd9e05b3f4f464ddf08097817a3af824f54a97ca
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:33:32 2008 +1000
+
+    radeon: release agp on module unload
+
+commit 624da91277ee33936ea3cfaf20e7f6775293deb2
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:33:12 2008 +1000
+
+    radeon: add r423 bits to modesetting
+
+commit 1c817cc3fc09abe93539413130de3875e4c7eafe
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:32:39 2008 +1000
+
+    radeon: pull bus master enable into its own function
+
+commit 653b16f2dd32b5fdbd5f97277edc1c6df66755a9
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:31:17 2008 +1000
+
+    radeon: fix accessible VRAM sizing
+
+commit b4803991c8ad8596786f8cf1cffc6417c8ce446a
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:30:48 2008 +1000
+
+    radeon: update proper chip family
+
+commit 3fd0e1483ebe640b69da888e286ea85d11539b46
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:29:22 2008 +1000
+
+    radeon: fixup scratch register interactions properly
+
+commit a066a5f908af0e82b1a0c7099b73d4a63585c69d
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:28:56 2008 +1000
+
+    radeon: make writeback work again
+
+commit 0dbe3436ee6e3f2a4d6d252ef5e31b7bb7e36764
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:28:36 2008 +1000
+
+    radeon: fix some warnings
+
+commit 52ef9d87db8d3b7e0e9114f987263292e8e12d6a
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:27:00 2008 +1000
+
+    radeon: fix small typo in agp code
+
+commit a8f07db596532912e354bb7a2b3acdfc11a8d150
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:26:32 2008 +1000
+
+    radeon: workaround failure to parse some rs48x edid
+
+commit d275f99c9a7d915473034e6abd575f35bea5db9c
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:26:00 2008 +1000
+
+    radeon: don't enable dynclks on rs48x
+
+commit 48f222751643a349924ba3e6c26890310822f89c
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:25:32 2008 +1000
+
+    radeon: export radeon_modeset
+
+commit f74721fc2553d81acfe4d4a670833405dd52092b
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:24:13 2008 +1000
+
+    radeon: fix unused agp functionality
+
+commit b09cb93e2d188228e26135149786ee231cd9b11d
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 3 09:23:19 2008 +1000
+
+    radeon: add some more r100 support to test AGP
+
+commit 7651b4c424aa6c6ac6c47b2d07c8f65d0b9d0191
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sun Nov 2 16:00:06 2008 +0100
+
+    radeon: debug bo
+
+commit 87e90c73620b88005fcca5fd40aaaad0b08932e1
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Sun Nov 2 13:48:32 2008 +0200
+
+    nouveau: compat fix for set_page_locked().
+    
+    The set_page_locked() function has changed its name again.
+    2.6.28 offers __set_page_locked() instead, which uses non-atomic
+    __set_bit() to do the work. In this case, offer our own
+    set_page_locked() using the atomic set_bit(), because I do not know
+    if atomic access is really necessary. Atomic behaviour is the one
+    previously expected.
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit 00847dabe0fa5ccf796658f486e8f6f7a77e043b
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Oct 30 11:36:46 2008 -0700
+
+    libdrm 2.4.1.
+
+commit 4b9826408f65976a1a13387beda748b65e03ec52
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Oct 30 09:33:07 2008 -0700
+
+    intel: Rename dri_ and intel_ symbols to drm_intel_.
+    
+    I wanted to avoid doing this, as it's a bunch of churn, but there was a
+    conflict between the dri_ symbols in libdrm and the symbols that were in
+    Mesa in 7.2, which broke Mesa 7.2 AIGLX when the 2D driver had loaded new
+    libdrm symbols.  The new naming was recommended by cworth for giving the
+    code a unique prefix identifying where the code lives.
+    
+    Additionally, take the opportunity to fix up two API mistakes: emit_reloc's
+    arguments were in a nonsensical order, and set_tiling lacked the stride
+    argument that the kernel will want to use soon.  API compatibility with
+    released code is maintained using #defines.
+
+commit 40c64eb5243bbd511f30e68cb4abce55b364a74f
+Merge: 5d86195 1db35ba
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Wed Oct 29 23:41:48 2008 +0100
+
+    Merge branch 'modesetting-gem' of ssh://git.freedesktop.org/git/mesa/drm into modesetting-gem
+
+commit 5d861951b3714d13292d18f3731294c83e209b3a
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Wed Oct 29 23:40:20 2008 +0100
+
+    radeon: libdrm_radeon updates bo & cs interfaces
+
+commit 1db35ba58353b862ca04a190d46c6f074a21f223
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Wed Oct 29 12:17:39 2008 -0700
+
+    libdrm: fix ABI change in drm_mode_get_encoder
+    
+    The encoder_type field should be at the top to match the kernel.
+
+commit 0e867312323fa51af324228b98bff4f49a813481
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Oct 21 00:10:54 2008 -0700
+
+    intel: Add dri_bufmgr_check_aperture support for bufmgr_gem.
+    
+    This relies on a new kernel ioctl to get the available aperture size.
+    
+    In order to provide reasonable performance from dri_bufmgr_check_aperture, we
+    now require that once a buffer has been used as the target of a relocation,
+    it gets no further relocations added to it.  This cuts the cost of
+    check_aperture from 10% to 1% in the 3D driver with no code changes, but
+    slightly complicates our plans for the 2D driver.
+
+commit e47ab7a5081e178bad385ce2e75b01474ea7aa4c
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Tue Oct 28 12:00:08 2008 +1100
+
+    nv50: symlink nv50_grctx.h to linux-core...
+
+commit 48b73904b485d679df879522719e4451fdb96ab6
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Tue Oct 28 11:38:30 2008 +1100
+
+    nv50: move context-related tables a separate header file
+    
+    This turns the various nvXX_graph_init_ctxvals() methods into tables,
+    and speeds up compliation of nv50_graph.c quite a bit.  This has bothered
+    me for a while, but others are complaining now so it's time to fix it :)
+
+commit af118cd186407cd8e72ccd63f6deca56f1ffd905
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Mon Oct 27 23:26:15 2008 +0100
+
+    radeon: reloc are backend dependant
+
+commit 89ef1b5483bb234278fe40e193643fc9777f50d4
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Mon Oct 27 21:21:15 2008 +0200
+
+    drm: missing init_mm symbol, compatibility fix
+    
+    The drm_compat.c version of kmap_atomic_prot_pfn() uses the macro
+    pgd_offset_k(), which references the symbol init_mm.
+    Starting in 2.6.25, init_mm is no longer exported by default.
+    
+    The only user of kmap_atomic_prot_pfn() is i915, so this should
+    not hurt anyone, and it allows people to load drm.ko.
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit 145d2d610b90b6129bbbebd1e1f8c71f9147cbde
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Oct 27 14:39:05 2008 -0400
+
+    i915: Since FreeBSD doesn't have gem support yet, don't advertise it.
+    
+    This allows us to not crash X when using newer Intel ddx drivers.
+
+commit 3b17b50e9c49ae113c7ad1c4a0af51e873de1a7e
+Merge: 7617d1f 389b761
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Mon Oct 27 19:33:56 2008 +0100
+
+    Merge branch 'modesetting-gem' of ssh://git.freedesktop.org/git/mesa/drm into modesetting-gem
+
+commit 7617d1fef7b743349b470e4a62388174bbffb56b
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Mon Oct 27 19:27:15 2008 +0100
+
+    radeon: radeon util library
+
+commit e1372f67274baa44419e000f5d3d6b2e81be2b51
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Mon Oct 27 13:18:07 2008 -0400
+
+    radeon: fix error in busmaster enable logic
+    
+    - logic was wrong.  rs400/rs480 should clear the RADEON_BUS_MASTER_DIS bit
+    - should fix kernel bug 11798
+
+commit 848f00d77381d8b442c096476302796f8fe122fa
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Mon Oct 27 12:59:39 2008 -0400
+
+    radeon: fix some fallout from the busmaster disable cleanup
+    
+    rs400 is just like rs480.  I mixed up the internal
+    chipset names for rs600 and rs400.
+
+commit 389b7617b5b88b6270af5b3824fe73519900c87f
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Oct 27 17:06:23 2008 +1000
+
+    drm: make handles 32-bits again not sure why they changed
+
+commit 1d930fc75b99a89fc77d35d8f95f2877cfd5d7f0
+Author: Matthias Hopf <mhopf@suse.de>
+Date:   Sat Oct 25 12:11:44 2008 -0400
+
+    drm/i915: fix ioremap of a user address for non-root (CVE-2008-3831)
+    
+    Olaf Kirch noticed that the i915_set_status_page() function of the i915
+    kernel driver calls ioremap with an address offset that is supplied by
+    userspace via ioctl. The function zeroes the mapped memory via memset
+    and tells the hardware about the address. Turns out that access to that
+    ioctl is not restricted to root so users could probably exploit that to
+    do nasty things. We haven't tried to write actual exploit code though.
+    
+    It only affects the Intel G33 series and newer.
+
+commit 34a3ebffc369575412a4ff2c05c50264e83c6d3e
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Fri Oct 24 18:43:55 2008 +0200
+
+    mode: Try to settle on a standard for struct fields
+
+commit 0796bf8c6b983de7fbb188bd5d84d4ea54f81525
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Fri Oct 24 18:23:39 2008 +0200
+
+    mode: Indent defines
+
+commit b7d54b1dba8eba24da1b9cdd2116a26b98365b81
+Author: Xiang, Haihao <haihao.xiang@intel.com>
+Date:   Fri Oct 24 16:35:00 2008 +0800
+
+    intel: Also total child_size of the target_bos. Partial fix #17964.
+
+commit 8256c347cc80db0371b40b34ee8a163908d50079
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Thu Oct 23 15:46:32 2008 -0400
+
+    [FreeBSD] We should use dev2unit() rather than minor()
+
+commit 7dbeb18777a4dc1e7eb3c6bc4da3e72456afc8fc
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Thu Oct 23 15:42:49 2008 -0400
+
+    [FreeBSD] This check isn't correct and causes at least mga to lockup.
+
+commit a59ea02ff839fa0801763a90beb8b232b933c746
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu Oct 16 21:15:01 2008 -0700
+
+    intel: ioctl is not defined to return -errno
+    
+    Don't count on ioctl returning -errno; use errno directly.
+    
+    Signed-off-by: Keith Packard <keithp@keithp.com>
+    Signed-off-by: Eric Anholt <eric@anholt.net>
+
+commit 4c8aeb6fc7fa9f0aa9df4fd855696afe4bf6c0b4
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Oct 17 06:40:38 2008 +1000
+
+    link libdrm_intel properly
+    
+    libdrm_intel needs symbols from libdrm, so link against it.
+    (cherry picked from commit d9c2f65dd8e50736a33e97a55c257ef6843e1ce7)
+    
+    Conflicts:
+    
+    	libdrm/Makefile.am
+
+commit 9dda3a8f63331cb55f4669fd8edb600f2e07ec86
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Oct 13 07:16:33 2008 +1000
+
+    libdrm: don't depend or link to libdrm_intel
+
+commit 6df7b0719fe92b718e486c2b87e2f883cfa41efa
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jun 12 23:22:26 2008 -0700
+
+    intel: Protect bufmgr objects with a pthread mutex.
+    
+    We want to be able to use the bufmgr from multiple threads for GL, and thus
+    we need to protect the internal structures.
+    
+    The pthread-stubs package is used so that programs not linked against
+    pthreads get weak symbols to stubs and don't eat most of the cost.
+
+commit 769197c8f16eaf3c0a476a4459e535afd4a939cb
+Author: Xiang, Haihao <haihao.xiang@intel.com>
+Date:   Thu Oct 16 10:37:30 2008 +0800
+
+    intel: avoid deadlock in intel_bufmgr_fake.
+
+commit 26076bf24a4e720e389d0a3ea616a8350397fdfc
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Oct 16 10:59:31 2008 +1000
+
+    radeon: add initial agp support.
+    
+    This add agpmode command line option.
+
+commit 8d9a11c55cf3692bd537c68044b4378aba53f438
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Oct 16 10:57:31 2008 +1000
+
+    radeon: add CS support for r100/r200 in 2D driver
+
+commit 66740cbd5411a870dc6cc282c19a72809dd992be
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Oct 16 10:55:24 2008 +1000
+
+    radeon: fixup interrupt suspend/resume
+
+commit 318770a78dc563a9a2780614fa3bf6c813584889
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Oct 16 10:53:55 2008 +1000
+
+    radeon: fixup suspend/resume bus master enable
+
+commit 9c5819fc60808b00949f6aee55424f17a8b4f419
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Oct 16 10:53:26 2008 +1000
+
+    radeon: re-enable hw blits for copying from VRAM
+
+commit b18e6b0a0d9ef6902e4be1809ba710200f4c37be
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Oct 16 10:52:53 2008 +1000
+
+    radeon: fix buffer copying for VRAM->TT
+
+commit 3e3280eccc38cd080cbab7b471aad1b9cd12fd1b
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Oct 16 10:52:28 2008 +1000
+
+    radeon: move memcpy until after CP is stopped
+
+commit 09f99dc5febecac63d8c636abadea53e89d879aa
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Oct 16 10:51:56 2008 +1000
+
+    drm: remove stray debug code
+
+commit d958cd7bb95558aa6c49824e2ae2b302f1433d2e
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Oct 16 10:51:31 2008 +1000
+
+    radeon: use discardable flags on no backing store objects
+
+commit 11320fd6b106c1255f3fad0860cb4da71697b46a
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Oct 16 10:50:31 2008 +1000
+
+    drm: add discardable flag.
+    
+    This discards memory contents on suspend/resume with the
+    hope the upper layers know something we don't.
+
+commit fc33686ef044a4a59d48da2a648a0c2d0a1a7fd6
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Oct 16 10:49:58 2008 +1000
+
+    drm/radeon: initial suspend/resume fix.
+    
+    This enables the evict code and also sets radeon up
+    to allow evict from VRAM to LOCAL
+
+commit 458e2d5bc5f949d00cfcc9a3f9ce89f0c9f5628c
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Oct 14 13:33:38 2008 -0700
+
+    intel: Fix compile warning.
+
+commit 993383873c215ab11975d98b93f131a4e3ea7ce6
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Oct 14 13:18:11 2008 -0700
+
+    intel: Add interface for getting tiling mode of a bo.
+
+commit d9c2f65dd8e50736a33e97a55c257ef6843e1ce7
+Author: Julien Cristau <jcristau@debian.org>
+Date:   Tue Oct 14 01:25:57 2008 +0200
+
+    link libdrm_intel properly
+    
+    libdrm_intel needs symbols from libdrm, so link against it.
+
+commit 3e03d781f7c41a88d5d5f895be9c443bf3592ef0
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Oct 13 13:41:10 2008 -0700
+
+    intel: Avoid pthread mutex recursion in bufmgr_fake.
+    
+    Bug #18035. Fixes deadlock in glean texCube testcase.
+
+commit c6109df93bc062d3ec2ff2808babe826532d11b3
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Oct 13 07:16:33 2008 +1000
+
+    libdrm: don't depend or link to libdrm_intel
+
+commit f5327aca0cbb1b602e4f954b8f361f2e1daaf20d
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Fri Oct 10 18:23:11 2008 -0400
+
+    [FreeBSD] Plug memory leak in drm_rmdraw() and drm_drawable_free_all()
+
+commit cdd3e9fc562bd57e0272e4c4d1c0707776bd01a1
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Fri Oct 10 13:06:22 2008 -0400
+
+    [FreeBSD] Rework all of the memory allocations
+    
+    Allocate memory from different pools.  This allows the OS to track memory
+    allocations for us, much like the linux memory debugging.  This will ease
+    tracking down memory leaks since the OS can track the number of allocations
+    from each pool and help to point us in the right direction.  Also replace
+    drm_alloc and friends with static __inline__ versions while we are here.
+
+commit 1150a42d4398b14c5db2f34a5beba613528df147
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Thu Oct 9 22:13:26 2008 -0400
+
+    [FreeBSD] Fix linux list compat list_for_each_safe()
+    
+    linux_for_each_safe would not handle lists with a single entry.
+
+commit a8f73c214dc2accee12d84b85d37fb498ab3adad
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Thu Oct 9 22:11:55 2008 -0400
+
+    i915: Cleanup interrupt handling
+
+commit 94c88c151cecae48ce1f4f01acddfaaad4b437f3
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu Oct 9 14:30:56 2008 -0700
+
+    Manage fences in user-mode bufmgr_fake to clean buffers
+    
+    When using bufmgr_fake without DRM, the X server idles the ring whenever it
+    wants to wait for something to complete (brutal, but effective). In this
+    case, bufmgr_fake must treat the pending fence as having passed. However, it
+    wasn't recording the fences as it emitted them, nor cleaning buffers as they
+    passed.
+    
+    Signed-off-by: Keith Packard <keithp@keithp.com>
+
+commit 3169d9639bd002b43e4064cea32e0d262076c1e0
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jun 12 23:22:26 2008 -0700
+
+    intel: Protect bufmgr objects with a pthread mutex.
+    
+    We want to be able to use the bufmgr from multiple threads for GL, and thus
+    we need to protect the internal structures.
+    
+    The pthread-stubs package is used so that programs not linked against
+    pthreads get weak symbols to stubs and don't eat most of the cost.
+
+commit 604759d4a78efcef0abdb40bfc215526cdcf1122
+Author: Xiang, Haihao <haihao.xiang@intel.com>
+Date:   Thu Oct 9 11:57:13 2008 +0800
+
+    intel: fix for write_domain and static BOs.
+    
+    http://bugs.freedesktop.org/show_bug.cgi?id=17705
+
+commit e4fa03f7ddb86720fa19cfc839689e1df72bb928
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Tue Oct 7 14:10:39 2008 -0400
+
+    radeon: pull in recent fixes from ddx
+    
+    - fixup atom digital encoder setup
+    - pull in add get edid (currently disabled due to
+      lack of support for atom fb/scratch space)
+
+commit 728d8e226f1bc12f50f710cc96bbb2a25f72ada3
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Mon Oct 6 12:12:49 2008 -0400
+
+    radeon: add comment to clarify bus mastering on PCIE chips
+
+commit 6f9dfa098fed73895f4ad32f9274ffaa163d3efb
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Mon Oct 6 12:01:11 2008 -0400
+
+    radeon: fix duplicate define in my last commit
+    
+    That's what I get for committing at 3 AM.
+
+commit 8e5f5ed189fa28e08e45274c15f8ed41f627bc8b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Oct 7 04:47:54 2008 +1000
+
+    radeon: PCIE cards don't appear to have explicit bus master
+
+commit d0aff120521db3fa170ae55cc16a4935e813816d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Sep 17 03:00:02 2008 +1000
+
+    drm: add create gpu tree script
+
+commit 4b98f6d74ffb119174237d30356ed3e2724b27da
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Mon Oct 6 03:08:27 2008 -0400
+
+    radeon: fix bus master enabled bits on newer asics
+
+commit 4d1031a9f0e5cddb6ca403afdbd1f019c9c3df2e
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Oct 6 16:40:45 2008 +1000
+
+    radeon: fix alignment so Xv works again
+
+commit 4a4d7727c6c6eff4cf19d5debb91a6fcac555832
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Oct 6 16:40:20 2008 +1000
+
+    radeon: fix pin ioctl interface to mesa can find offset for pinned buffers
+
+commit a981a6860365065682f3ca295939e629b989a9d1
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Oct 6 16:39:25 2008 +1000
+
+    drm/radeon: fixup clean flag handling
+
+commit 5a36cce3499c48fe1bf137b26b2a5e8a383d0332
+Author: Mihail Zenkov <mihail.zenkov@gmail.com>
+Date:   Mon Oct 6 00:49:15 2008 -0400
+
+    radeon: fix missing bit from rs740 patch
+    
+    See bug 17908
+
+commit ce40261012d39e1096442ef48c45b305c8d69dbd
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Sat Oct 4 20:43:21 2008 -0400
+
+    radeon: Add support for HD2100 IGP (RS740)
+
+commit 60cf3a4db4ab8ee81aca104624e89caf5587419b
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Fri Oct 3 14:11:20 2008 -0400
+
+    [FreeBSD] Don't explicitly bzero driver softc.
+    
+    This is already handled for us.
+    
+    Suggested by John Baldwin
+
+commit 9c0ce38df3d9026785155d06fc62bdd7acaf8bf0
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Fri Oct 3 14:05:45 2008 -0400
+
+    [FreeBSD] Use M_WAITOK when allocating driver memory.
+    
+    We don't explicitly check for error here and M_WAITOK will just put the
+    process to sleep waiting on resources to become available.
+    
+    Suggested by John Baldwin
+
+commit 4c92abfa8d0b9f2ab14e6b915bdffd47fd2e2474
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Fri Oct 3 13:56:50 2008 -0400
+
+    [FreeBSD] Do a bit of optimization on drm_order()
+
+commit 81952c7dd18d8fc4617fe4cb761fdf830de5244f
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Sat Sep 20 18:34:57 2008 -0400
+
+    Use devfs_get_cdevpriv in mmap as well.
+    
+    d_mmap gets called twice and we are only able to associate the file_priv
+    during the first call.  The second call will return EBADF and we need to
+    assume that the call was succesful.  d_mmap will not tolerate having an
+    error returned for the second call.
+
+commit af2323b4b3b76070fb453531147a8956161b3718
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Tue Sep 30 16:35:26 2008 -0700
+
+    intel bufmgr: reinstate buffer handle tracking
+    
+    We need a way of getting at the underlying handle for use with mode
+    setting.  We can either export it in the dri_bo object or provide a new
+    callback to get it.
+
+commit 7b3aa626482963cc52086da629f682fce2c7322c
+Merge: 972f657 9c6732e
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Sep 30 14:17:27 2008 +1000
+
+    Merge remote branch 'origin/modesetting-gem' into modesetting-gem
+
+commit 972f6572652bc4a2f6c44c525e5e91f2becdb62a
+Merge: 89126bb 2db8e0c
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Sep 26 15:37:21 2008 +1000
+
+    Merge remote branch 'origin/master' into modesetting-gem
+    
+    Conflicts:
+    
+    	libdrm/Makefile.am
+    	libdrm/dri_bufmgr.h
+    	linux-core/drm_irq.c
+    	linux-core/drm_sysfs.c
+    	linux-core/drm_ttm.c
+    	shared-core/i915_dma.c
+    	shared-core/i915_irq.c
+    	shared-core/nouveau_drv.h
+    	shared-core/radeon_cp.c
+
+commit 073cb5ee1d12a7f1a18b7d732f346c16eb740f49
+Author: Xiang, Haihao <haihao.xiang@intel.com>
+Date:   Sat Sep 27 11:01:24 2008 +0800
+
+    intel: Copy data from card memory back to backing store when mapping.
+    
+    Fixes http://bugs.freedesktop.org/show_bug.cgi?id=17705
+
+commit 9c6732e790b123bebab0a6d05c592598f9cd2327
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Fri Sep 26 17:32:15 2008 -0400
+
+    radeon: use atom for ext tmds on r4xx
+
+commit 09b2dfcedc8cb35444567626131ccc25db79a8c6
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Fri Sep 26 17:20:04 2008 -0400
+
+    radeon: make atom on r4xx a module option
+    
+    default is legacy modesetting.  pass module option r4xx_atom
+    to try using atom on r4xx.
+
+commit 89126bb58ec82511758bed36a28e698b721fb435
+Merge: d883347 ea9711b
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Thu Sep 25 18:47:47 2008 -0400
+
+    Merge branch 'modesetting-gem' of git+ssh://agd5f@git.freedesktop.org/git/mesa/drm into modesetting-gem
+
+commit d883347f087eb1ce410392a379dfa6a44b2d14d1
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Thu Sep 25 18:45:07 2008 -0400
+
+    radeon: first pass at using atombios on r4xx hw
+
+commit ea9711b954ba9093546ba13052fb8bbda860b9e4
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Thu Sep 25 23:12:07 2008 +0200
+
+    Seperate modesetting userspace bits into drm_mode.h
+
+commit 35e379ce5a0d23f4c812739f89e02703900cd91b
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Sep 24 15:25:35 2008 +1000
+
+    radeon: add r600 modesetting registers writes
+
+commit dcf73de059d45ff894c417bb9234933bc650b6b2
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Sep 24 13:58:26 2008 +1000
+
+    radeon: add parsing for r6xx object tables
+
+commit 2db8e0c8ef8c7a66460fceda129533b364f6418c
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Sep 23 17:06:01 2008 -0700
+
+    intel: Allow up to 15 seconds chewing on one buffer before acknowledging -EBUSY.
+    
+    The gltestperf demo in some cases took over seven seconds to make it through
+    one batchbuffer on a GM965.
+    
+    Bug #17004.
+
+commit 0dccf017ab629d69fce91e18b013882ecb45f55d
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Sep 23 10:48:39 2008 -0700
+
+    intel: Replace wraparound test logic in bufmgr_fake.  Again.
+    
+    I'd swapped the operands, so if we weren't in lockstep with the hardware we
+    said the sequence was always passed.  Additionally, a race was available that
+    we might have failed at recovering from.  Instead, I've replaced the logic
+    with new stuff that should be more robust and not rely on all the parties in
+    userland following the same IRQ_EMIT() == 1 protocol.  Also, in a radical
+    departure from past efforts, include a long comment describing the failure
+    modes and how we're working around them.
+    
+    Thanks to haihao for catching the original issue.
+
+commit 1b3abe62b5751d0514d57aa850e584dca7dfc23e
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Sep 23 10:47:21 2008 -0700
+
+    intel: Do strerror on errno, not on the -1 return value from ioctl.
+
+commit 840c9a305481ed59820bbd87fbcf78dd242d5702
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Sep 23 16:52:06 2008 +1000
+
+    Update intel modesetting to use mm_private instead of mm_handle.
+
+commit 0130aa0de940a49c086a0fb080e524d55b55ec8b
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Sep 23 16:50:39 2008 +1000
+
+    radeon: fix minor cursor issues
+
+commit 3d1825729370a8009f4d7ceae91a16cfd6b7956c
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Sep 23 16:50:22 2008 +1000
+
+    radeon: Fix type in check for tmds type.
+
+commit 5fdfbee22acb8eaaa834457c30e6f68883ab1353
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Sep 23 16:47:34 2008 +1000
+
+    Store the buffer object backing the fb as a void pointer, not a handle.
+    
+    This lets us defer handle creation until userspace acutally asks for
+    one, at which point we also have a drm_file to associate it with.
+
+commit a2216491c619082ad9a01bc949648834dc5a0d2f
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Aug 28 21:20:19 2008 +1000
+
+    drm: fix brace placement
+
+commit 3949f3c9eaad9547fe046ca4d469fa7cc8f12304
+Author: Xiang, Haihao <haihao.xiang@intel.com>
+Date:   Mon Sep 22 10:16:19 2008 +0800
+
+    intel: Fix driver-supplied argument to exec function (fd.o bug #17653).
+
+commit 66237cd3c26faa20403ddb6903252ce49cc1fd72
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Fri Sep 19 11:19:00 2008 -0400
+
+    radeon: rmx_fixup() fixes for legacy chips
+
+commit d6b853cf81c3cd29ab81b9f93909b31330142750
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Sep 20 00:48:11 2008 +1000
+
+    radeon: fix voverplus calculation
+
+commit dc3a6834f615a538cf582ec7e583f203d43ba204
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Sep 19 08:03:34 2008 +1000
+
+    radeon: tmds bracket failure found by krh.
+
+commit 075ed1d6fd1d58c1f46d556df79f44153f10edd8
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Thu Sep 18 17:27:00 2008 -0400
+
+    radeon: pll and interlace updates from the ddx
+    
+    also some formatting cleanup in radeon_reg.h
+
+commit 6988176195450da9033a0f0f21eafc6ae0a7a6a4
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Thu Sep 18 16:42:22 2008 -0400
+
+    radeon: Add functions to set mem/eng clocks
+
+commit 34af71c42a66e5ef6a9a08250ca541030ca3cc4f
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Thu Sep 18 16:07:41 2008 -0400
+
+    radeon: add function to configure PCIE lanes
+
+commit e1e782af5ddafdd24a4cf741139bb0b8e682e543
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Thu Sep 18 15:11:48 2008 -0400
+
+    Radeon: restructure PLL data
+    
+    - store pixel clocks, core clock, and memory clocks separately
+    - grab all pll limits from bios tables
+
+commit 6d0de5a899ea883693737333b4b0511c28f32d92
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Thu Sep 18 14:30:05 2008 -0400
+
+    Export drm_put_minor
+
+commit 8ca06eb492f861dbf049a2e104e4e2a5ba814c13
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Wed Sep 17 23:10:15 2008 -0400
+
+    [FreeBSD] Convert to using cdevpriv for file_priv tracking
+
+commit 6a0248cbf2197d64f51d557f85bf2fdbaa505870
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Sep 18 10:28:42 2008 +1000
+
+    fixup radeon stuff - need to checkout irqs
+
+commit 3a497db7862dc091a8582d8ea3ebfd7fe0f16b58
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Sep 18 10:22:23 2008 +1000
+
+    radeon: fixup buffer and cs bits
+
+commit f426f458f7e766cd47bb30736004ccfc9209f27f
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Sep 18 10:20:29 2008 +1000
+
+    [PATCH] radeon: fixup GEM domain setting - allows more userspace paths
+    
+    also dirty buffer on validate
+
+commit 13e24fa7c03a4da6ba85b42d97290b4360c5ba8c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Sep 18 10:19:53 2008 +1000
+
+    [PATCH] radeon: disable blit moves
+
+commit 8f38c28a3924dbda5babcf035911e103f27f9a05
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Sep 18 10:19:08 2008 +1000
+
+    radeon: fail properly if we can't create the ring.
+    
+    Normally this will be due to an AGP driver needing updating
+
+commit 515aa0800cf2d91bdf4706463e0531c5081a2679
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Sep 18 10:17:27 2008 +1000
+
+    radeon: do proper memory controller init and setup
+
+commit b6c1a2f7eea256dad7d38020f784ed6a94accd9d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Sep 18 10:16:41 2008 +1000
+
+    radeon: fix return value
+
+commit 9b728fe4b0c154acd2291f9bec747ee67f8cce02
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Sep 18 10:16:09 2008 +1000
+
+    radeon: fixup reference counting properly
+
+commit 5081ce12217d31d8d197e66ac3bc71adc650d463
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Sep 18 10:15:43 2008 +1000
+
+    radeon: sort out atom vs combios tables for r400 cards
+
+commit ed961cb428a73a35d473c27f62809ef80bde8706
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Sep 18 10:14:32 2008 +1000
+
+    radeon: remove unneeded debugging
+
+commit 0e384803c5f2528735e43b8d30f90ea82f6b3f47
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Sep 18 10:13:30 2008 +1000
+
+    radeon: don't do full edid for detection purposes
+
+commit 8f23d4a44cdb17abff8f1ab3585e533ae0572224
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Sep 18 10:11:43 2008 +1000
+
+    make text reserve 256k
+
+commit 2a6dad31d84252d505f392f91dffd90689bb947c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Sep 18 10:05:59 2008 +1000
+
+    radeon: add initial suspend/resume support
+    
+    plus a bunch of fixes
+
+commit 1062d8dcff19ded743f046e27adb889f3596ab4d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Sep 18 09:59:08 2008 +1000
+
+    modesetting: Add helper to force restore modes on crtcs at resume time
+
+commit e23d5c03c4c9850d5e54f323fe944329b389b042
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Wed Sep 17 18:16:25 2008 -0400
+
+    radeon: fix legacy LVDS
+
+commit ee6bcabc506e4d506fb65447c405f8514ab1f4e1
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Sep 17 22:18:03 2008 +1000
+
+    nv50: add initial context for chipset 0xaa
+    
+    This just doesn't look right..
+
+commit d55e8090fa9d0f3bb67eeb8cc61c0ed6345d41b4
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Sep 17 22:03:38 2008 +1000
+
+    nv50: add initial context to match ctxprog for chipset 0x50
+
+commit 4d2f1257fab84bf66bd1154a1c829317584fd5f7
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Sep 17 15:13:27 2008 +1000
+
+    nv50: add ctxprog for chipset 0x50
+
+commit 301be1dc9be8a83f5092417573967f35766227bc
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Sep 17 15:02:54 2008 +1000
+
+    nv50: add ctxprog for chipset 0xaa
+
+commit f152482bdecaa16db36b20b445a480445d18048c
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Sep 17 14:49:04 2008 +1000
+
+    nv50: add support for chipset 0x92
+
+commit 973c634eaa54ee4085a72102c690bc643cb2d7a8
+Author: vehemens <vehemens@verizon.net>
+Date:   Mon Sep 8 22:06:09 2008 -0700
+
+    Remove incomplete and obsolete free/net/open code.
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit b54d15d8fd252df5f0914ab245431e66b9a4e8ab
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Sep 10 20:04:42 2008 -0700
+
+    Add missing \ to libdrm_la_SOURCES
+    
+    Reported by jcristau.
+
+commit 368b392e6dcd19cb75675c0c18d02f70257af1df
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Sep 10 13:54:34 2008 -0700
+
+    intel: don't forget to include config.h in bufmgr code.
+    
+    Thanks to airlied for catching this.
+
+commit f9d98beefc9e7b8d06a29f5b69a19f10fd3c435f
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Sep 8 08:51:40 2008 -0700
+
+    intel: move drm calls to exec buffers to libdrm_intel.
+    
+    This avoids duplicating the effort in 3 places.  Also, added emit/wait fence
+    callbacks back in bufmgr_fake since we need it for non-drm 2d.  Sigh.
+
+commit 869d8bebedddf2075c59d6bffea8ee640cb80353
+Author: Eric Anholt <eric@anholt.net>
+Date:   Sat Sep 6 03:07:41 2008 +0100
+
+    intel: Move IRQ emit/wait from callbacks into the bufmgr.
+    
+    In the process, work around the glaring bugs of the kernel irq wait function.
+
+commit 738e36acbce24df0ccadb499c5cf62ccb74f56df
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Sep 5 10:35:32 2008 +0100
+
+    Move intel libdrm stuff to libdrm_intel.so
+    
+    dri_bufmgr.h is replaced by intel_bufmgr.h, and several functions are renamed,
+    though the structures and many functions remain dri_bufmgr_* and dri_bo_*
+
+commit 09cf0f0213652609d09154ce2859c03cf97ab11e
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Sep 3 23:05:16 2008 +0100
+
+    drm: Add tests for GEM_FLINK ioctl.
+
+commit 828ae3f6b88b5a69a56b2961307e40ed95edea29
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Sep 8 16:40:52 2008 -0400
+
+    [FreeBSD] We need to call drm_detach before we free dev->driver.
+    
+    The driver is in control of the show, so when you try and unload a module
+    the driver detach routine is called first.  It is what drives the whole
+    unload process and so lots of panics occur if dev->driver is already
+    free.
+
+commit 2880c86eb246aceeb5c750e27259a7b6d8897328
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Sun Sep 7 12:44:02 2008 -0400
+
+    [FreeBSD] Implement drm_ioremap_wc() to set a range of mem to write-combining
+
+commit 740f09bffde20d9207497bd107d50941ca21278a
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Sat Sep 6 21:08:33 2008 -0400
+
+    [FreeBSD] IGP gart needs to be un-cached.
+    
+    Airlied inadvertently discovered that the IGP gart needs to be un-cached
+    for radeon rs485 and rs690 to work.  Initial tests by placing a wbinvd()
+    after allocating the gart were successful.  This is an attempt at a more
+    appropriate method of achieving success.
+
+commit be5fad45ee4e81997784f258fcdfaf0a303dd666
+Author: vehemens <vehemens@verizon.net>
+Date:   Sat Sep 6 18:02:31 2008 -0700
+
+    Free temp_pagelist on error. Free in reverse order. Noticed by open.
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit 9ad5a6d0d73ba58ec7c2f66d0c5355185f2f68c6
+Author: vehemens <vehemens@verizon.net>
+Date:   Sat Sep 6 15:33:47 2008 -0700
+
+    Pass lock data like linux and open.
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit b8a9cebddc7063bc0dae889dac43359c0cb9bfa5
+Author: vehemens <vehemens@verizon.net>
+Date:   Sat Sep 6 14:19:32 2008 -0700
+
+    Move order to end like linux.
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit 0808cf923d4a851b100d9b7022cb82f5e1f52e28
+Author: vehemens <vehemens@verizon.net>
+Date:   Sat Sep 6 14:16:51 2008 -0700
+
+    Style white space cleanup part 2.
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit 6f2479c67432f764bfc4e248689f1737c1935237
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Sat Sep 6 18:37:06 2008 -0400
+
+    [FreeBSD] Ensure that drm_pci_alloc is never called while locks are held.
+
+commit f60d9a04b892904e5dde7dd1d2876b6bd9eb80ef
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Sun Sep 7 08:09:24 2008 +1000
+
+    radeon: change interface from headers add pin_domain into padding
+
+commit 31709aa2be54877c45ca382bf370b41dbaf5c2ec
+Author: vehemens <vehemens@verizon.net>
+Date:   Tue Sep 2 13:56:35 2008 -0700
+
+    Reorder lock functions like linux.
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit 76dd74c64ef9b92025e76dd256e0641ff6fce0f4
+Author: vehemens <vehemens@verizon.net>
+Date:   Tue Sep 2 04:57:36 2008 -0700
+
+    Style white space cleanup.
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit ed6dd03818f2fa4dd0f2ba34dee58b09c7ff253e
+Author: vehemens <vehemens@verizon.net>
+Date:   Tue Sep 2 02:43:19 2008 -0700
+
+    Need M_NOWAIT for malloc.
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit 3f915f68e8f68fe0fc3d0e1eb8a18a16f8f397da
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Fri Sep 5 11:52:53 2008 -0400
+
+    i915: fix i915_ring_validate()
+
+commit 9f9f171f8e0ad817414e6218b44579171d03cec0
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Sep 5 10:56:18 2008 +1000
+
+    radeon: rs690 GART tables need to be in uncached memory.
+    
+    Allocate the rs480/690 tables from uncached memory.
+
+commit ce84511f4d647d5ce9fd52b838ee944e23050954
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Fri Sep 5 00:17:52 2008 +0200
+
+    nouveau: 8200 cards are 0xA0 family.
+
+commit fe59d04a7c30692952652f77529deb22a3e0c8bb
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Sep 4 11:57:00 2008 +1000
+
+    radeon: fixup a number of avivo checks for rs690
+
+commit 99f8cce3eae79c9cf5e9897ef1af8eac24b38c09
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Sep 2 10:07:14 2008 +1000
+
+    drm: fix sysfs error path.
+    
+    Pointed out by Roel Kluin on dri-devel.
+    
+    Signed-off-by: Dave Airlie <airlied@redhat.com>
+
+commit cd7d71f19cf2a16521c9da1815421c6a5f12a58e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Aug 31 07:27:26 2008 +1000
+
+    radeon: make writeback work after suspend/resume.
+    
+    While re-writing this for modesetting, I find we disable writeback on
+    resume.
+
+commit 2b278047153df729caf9e516a432b2e76398cd3a
+Author: vehemens <vehemens@verizon.net>
+Date:   Wed Aug 27 19:11:04 2008 -0700
+
+    [FreeBSD] Use driver features macros and flags
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit 2649103bf9c4eb471a10800f4a3161dca6249086
+Author: vehemens <vehemens@verizon.net>
+Date:   Fri Aug 29 13:18:54 2008 -0400
+
+    [FreeBSD] Convert drm_driver to a pointer like linux.
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit 71f0a3e389efb6c92a84299d05beb2a1bfa53469
+Author: vehemens <vehemens@verizon.net>
+Date:   Fri Aug 29 12:47:00 2008 -0400
+
+    [FreeBSD] Replace typedefs on bsd.
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit b92f5577670f99ded76e201a71aaa23cce8f7577
+Author: vehemens <vehemens@verizon.net>
+Date:   Fri Aug 29 12:40:30 2008 -0400
+
+    [FreeBSD] Catch up to vblank rework for via.
+    
+    (No, we don't build via right now.)
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit 043ad591b55ee8d4ac3ff65038705219d1893b12
+Author: vehemens <vehemens@verizon.net>
+Date:   Fri Aug 29 12:37:29 2008 -0400
+
+    [FreeBSD] Correct debug message
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit c7f7b6d7e2f46753381de51e4b0b00211a1a6b5f
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Fri Aug 29 12:29:50 2008 -0400
+
+    [FreeBSD] Fix a couple of locking problems.
+
+commit f8a14b1f9556919617208a8eb88ff88d6c77f08d
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Fri Aug 29 12:23:35 2008 -0400
+
+    [FreeBSD] Increase debugging output for vblank code.
+    
+    Doing my part to make DRM_DEBUG more chatty...
+
+commit b460aeec3ea817540e43c8215f2cdf432c957289
+Author: Tomas Carnecky <tom@dbservice.com>
+Date:   Fri Aug 29 00:43:19 2008 +0200
+
+    Fix drm_realloc when you're reallocing into something smaller.
+
+commit d88d1eac8925f6bbc8edf50b35639f09fac84019
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Aug 29 07:18:53 2008 +1000
+
+    radeon: fixup LVDS mode getting
+    
+    if we have no DDC we were oopsing. fix that.
+    then make a native panel mode
+
+commit 499170ad22aaf087fc01fdcf799035819becd571
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Aug 28 16:35:25 2008 +1000
+
+    radeon: get lvds atombios info
+    
+    set the correct values from atombios makes LVDS work a lot better
+
+commit 23cb67dfbabe8c76ffd86b6c01abacc027d0fb72
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Aug 28 16:18:09 2008 +1000
+
+    drm: port X crtc picking algorithm.
+    
+    This mimics the X.org from ajax with less options
+
+commit 9afe872ae9ef608269688e08f62beca2181f60dc
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Aug 28 11:30:55 2008 +1000
+
+    radeon: limit LVDS to first CRTC for now
+
+commit 6a27e019bc16ce901d6be6c85e63c0bad75dd16a
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Aug 28 11:30:20 2008 +1000
+
+    radeon: fixup checks for crtc in dpms paths
+
+commit 7552b2a6c3b29da308a76dade4959180d0d1c57b
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Aug 27 13:41:53 2008 +1000
+
+    drm: fix some whitespace
+
+commit f9d4c58d4327741abd99cdfdbbbfb82c803e4698
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Aug 27 12:35:11 2008 +1000
+
+    radeon: braino pointed out on mailing list
+    
+    thanks to Ville Syrjälä
+
+commit a4167e7b572859a998710ee599298e5131f51620
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Aug 27 11:12:19 2008 +1000
+
+    radeon: avoid oops on encoders with no crtc set
+
+commit bffbb497e2502b0aa6fd24804251d6a21d8fa034
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Wed Aug 27 02:27:10 2008 +0200
+
+    Change git-describe into git describe.
+
+commit 0239594fc318c2b55bbfbea27f23218f6d7a4b34
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Aug 26 14:28:08 2008 -0400
+
+    [intel_bufmgr_gem] Remember global name when creating buffer from name.
+
+commit 01b2e7368a1f6f14b6d7b6377c804d482bb050cb
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Aug 26 17:44:47 2008 +1000
+
+    radeon/ttm: add support for zeroing the contents of VRAM buffers
+    
+    This uses a solid fill fastpath, falling back to the slow memset path.
+
+commit 203243eea5c6c91e89534cd01a1e52cc44980bfe
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Aug 26 17:43:12 2008 +1000
+
+    drm: add move zero function to memset unclean buffers
+
+commit c72a4e20e8bb5cb0ec89eaf6effa0cea9c880a03
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Aug 26 17:42:36 2008 +1000
+
+    drm/ttm: export drm_bo_add_ttm
+
+commit 361ab10d2fb0c7ad73e54d92af2563194dbf7080
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Aug 26 17:39:00 2008 +1000
+
+    radeon: fixup domains and use them properly
+
+commit 4c8e8e0d0bad839cf5aacb22524885e49fe86715
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Aug 26 17:33:46 2008 +1000
+
+    drm: add memory clean flag.
+    
+    When the mapping is clean this flag will be set. This can be used
+    by a driver to save migrating and allocating pages for an object
+    that will first be used in VRAM.
+
+commit c8fd8d3a0d37dc09165ac77c7d38938ef9942011
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Sun Aug 24 15:53:17 2008 -0400
+
+    i915: Fix i915 build on FreeBSD
+    
+    ifdef out all the gem stuff for now.  Also, the msi stuff isn't portable
+    the way it is... I'll try and fix that up sometime soon.
+
+commit bfea578352aaaed08555e86c9951b3932f39d122
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Fri Aug 22 21:45:41 2008 -0400
+
+    [FreeBSD] Add drm_drawable_free_all()
+
+commit 0687c0a4ec78730f752cee04a5b0862f47dbf026
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Fri Aug 22 21:34:25 2008 -0400
+
+    [FreeBSD] Fix long standing memory leak in drm_remove_magic.
+    
+    We shuffled all the links around to disconnect the entry, but
+    never free it.  We would incorrectly free the last entry in the
+    hash chain if nothing matched.
+
+commit d0acbe4553d27df3fdc217c956c609c54ebb51e6
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Fri Aug 22 21:32:37 2008 -0400
+
+    i915: Convert vblank on disabled pipe DRM_ERROR to DRM_DEBUG.
+
+commit 739b01dde43c40398d9b0d177e9d330e06cdc2ae
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Wed Aug 20 17:20:31 2008 -0400
+
+    i915: Clear sarea_priv during lastclose.
+    
+    sarea_priv needs to be NULL before i915_initialized is called to
+    properly reset it.  The stale value produces a panic any time something
+    opens/closes drm without calling initialize.  i.e. version checking
+
+commit 1f3c4dd938a1710d762bac37dfb1b17c90af4732
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Wed Aug 20 17:15:46 2008 -0400
+
+    i915: Free dev->dev_private on unload.
+
+commit 3e9541230d7b7c32ecb36c1edc5124b6991222be
+Author: vehemens <vehemens@verizon.net>
+Date:   Wed Aug 13 17:19:35 2008 -0400
+
+    [FreeBSD] Move vblank bits into their own structure.
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit e6010778a8edf96dbfb4bc1f7cf0ce5706eee733
+Author: vehemens <vehemens@verizon.net>
+Date:   Wed Aug 13 17:17:05 2008 -0400
+
+    [FreeBSD] Fix lock leak.
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit 16c1a87580af89be02e7e6c1898f18b36829e007
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Wed Aug 13 17:05:59 2008 -0400
+
+    i915: Move spinlock init / destroy to load / unload time.
+    
+    This resolves the panic on FreeBSD during VT switch, without attempting
+    any of the more lofty goals for the time being.
+
+commit 9101a0205c897fea28e6a3d875111a83ad7f7732
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Aug 24 16:54:43 2008 +1000
+
+    libdrm: add udev support.
+    
+    This patch allows you to --enable-udev, and will avoid having libdrm
+    make device nodes. If you are using udev, you should really --enable-udev
+    your libdrm.
+
+commit 9afd2659430245c456cf887d47087de047c0aba8
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Aug 22 07:08:29 2008 +1000
+
+    drm: add gpu create script
+
+commit 76cec451d3380c0db28be58123904b489be672a7
+Merge: ba61880 2d4cf9c
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Tue Aug 19 13:08:47 2008 -0400
+
+    Merge branch 'modesetting-gem' of git+ssh://agd5f@git.freedesktop.org/git/mesa/drm into modesetting-gem
+
+commit ba61880ac8d5db0494816296aeef6092aadcb63f
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Tue Aug 19 13:06:04 2008 -0400
+
+    radeon: fix warning from radeon_legacy_state removal
+
+commit b2c19c788a570f28a22c236e60ee31f5c1e180af
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Tue Aug 19 13:03:23 2008 -0400
+
+    radeon: legacy lvds updates
+
+commit 0da66c27fa2aabdbaf4c003ba3712a61253d7ffe
+Author: root <root@gdp.(none)>
+Date:   Tue May 6 23:04:55 2008 +0100
+
+    nouveau: fifo and graphics engine suspend and resume for nv04-nv4x
+    
+    Corresponding DDX patch at http://people.freedesktop.org/~stuart/nv0x-nv4x_suspend/
+
+commit 2d4cf9cc0f31ca316b109cceffc463ea52db92f2
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Aug 19 08:18:46 2008 +1000
+
+    radeon: oops set correct scratch
+
+commit 41b83a99583486ad4f8760a6537d34783769bfc3
+Author: Coleman Kane <cokane@cokane.org>
+Date:   Mon Aug 18 17:08:21 2008 -0400
+
+    Change prototype of drmIoctl to unsigned long request.
+    
+    This resolves and issue on amd64 FreeBSD and it looks like the
+    linux ioctl syscall should be unsigned long as well.
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit 232c369a05bbd9db17a0453380229c993cbbc8bd
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Sun Aug 17 18:38:41 2008 -0400
+
+    radeon: first pass at legacy dac detect
+    
+    - done: primary dac, vga on tvdac
+    - todo: ext dac, tv on tvdac
+
+commit aed70622ab33500721a30b06ec3783c581615cbb
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Sun Aug 17 18:09:07 2008 -0400
+
+    radeon: first pass at bios scratch regs
+    
+    - todo: updated connected status
+
+commit 226c97e3b772f2f4bf09085374cd931b83dea2b0
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Sun Aug 17 15:38:05 2008 -0400
+
+    radeon: remove unused legacy state
+
+commit 6af286079b57248405e543d7d99e111931983eac
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Sun Aug 17 15:33:31 2008 -0400
+
+    radeon: get primary dac adj info from bios tables
+
+commit a5381cac55e54a535acf752970886b659948563c
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Aug 17 00:41:50 2008 +0200
+
+    nouveau: make it compile under 2.6.27
+
+commit ba840fca19077d352277519c5fa032e3b107ae27
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Thu Aug 14 19:35:55 2008 +0200
+
+    linux: on_each_cpu has 3 args on 2.6.27
+
+commit a2adc696569de830c7a95722dd111bff706a0bbc
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Sat Aug 16 12:09:24 2008 -0700
+
+    i915: finish removing TTM bits
+    
+    Makes it build again.
+
+commit d313108167a793652a5fe4c1015198e0a9deac4c
+Merge: 893315d 2030db7
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Sat Aug 16 11:45:53 2008 -0700
+
+    Merge branch 'modesetting-gem' of ssh://git.freedesktop.org/git/mesa/drm into modesetting-gem
+
+commit 893315d49ed678de95cf6ac553efb6093cc7343c
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Sat Aug 16 11:35:10 2008 -0700
+
+    i915: set domain properly on fb mapping, flush out changes
+    
+    The user visible ioctl does this, but since we call into GEM internals
+    directly, we have to flush things ourselves.  Fixes initial fb console
+    corruption.
+
+commit 2030db75328b7d896a5dd030fc171020b33149e1
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Aug 15 09:56:42 2008 +1000
+
+    radeon: reserve 64k of VRAM for now for text mode so we don't trample it
+    
+    need to revisit this later I'm sure
+
+commit e0bbd04eb0e2395872983e243d242f5ba2f2306f
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Aug 15 09:42:06 2008 +1000
+
+    radeon: fix LVDS modes problem
+
+commit 30ff279e42b3b0608e8ff6620d2958c174449798
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Aug 14 14:43:51 2008 +1000
+
+    radeon: add support for memory map init
+
+commit eb8f9b9da4d34b9bfa16dc3847e81976a12d2d0c
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Aug 14 14:41:15 2008 +1000
+
+    radeon: add copy/solid regs for rn50
+
+commit 5f9e4a764ac7acf1311388dd693bc4f0e6c0c4e9
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Wed Aug 13 16:57:42 2008 -0700
+
+    i915: update cursor handling to use GEM objects
+
+commit 9dff806802bad79242c58cc5dca3fd108099982b
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Aug 14 09:43:23 2008 +1000
+
+    i915: fixup from last merge hopefully
+
+commit 2d4420c6669dbaead27346b8c7e1979edc94ae5a
+Merge: 1c6abce 2a65759
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Aug 14 09:36:34 2008 +1000
+
+    Merge branch 'radeon-gem-cs' into modesetting-gem
+    
+    Conflicts:
+    
+    	libdrm/xf86drm.c
+    	linux-core/Makefile.kernel
+    	linux-core/drmP.h
+    	linux-core/drm_compat.h
+    	linux-core/drm_drv.c
+    	linux-core/drm_stub.c
+    	linux-core/drm_vm.c
+    	shared-core/i915_dma.c
+    	shared-core/r300_cmdbuf.c
+    	shared-core/radeon_drv.h
+
+commit 2a65759d159478b126c660ef124777548dcc872c
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Tue Aug 12 20:18:07 2008 -0400
+
+    Add com bios asic init bits
+
+commit f38fff5416bc8e40ce9426f78bfea1bad415faab
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Tue Aug 12 18:13:21 2008 -0400
+
+    Fill in and make use of more com bios tables on legacy chips
+
+commit 9b79d356c171e86e529ad1a4e5e145a36d1af601
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Tue Aug 12 15:33:20 2008 -0400
+
+    Add additional quirks from ddx
+
+commit a1f12024702d0636ead0ef512fd0372d6d1aa79f
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Tue Aug 12 14:07:33 2008 -0400
+
+    Fix warnings
+
+commit b486ed7f7d89528c94f2345040324946f6eadc81
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Tue Aug 12 13:52:35 2008 -0400
+
+    Get legacy working finally
+    
+    - extra ~ in RADEON_WRITE_P()
+    - re-arrange crtc setup a bit
+    - add debugging for tracing calls
+    - fix pitch calculation
+
+commit 8867eca8721a02135f4b0e65a454d5e05141eee3
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Tue Aug 12 03:05:11 2008 -0400
+
+    set base in legacy crtc mode set
+
+commit ae89ced7ded55c164c620ebbd799fdb44ed9c09f
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Tue Aug 12 02:11:44 2008 -0400
+
+    Convert COM BIOS to table offset lookup function
+
+commit 5af426a2b29f5426ba5714cb6501aa5b270089b4
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Mon Aug 11 18:37:16 2008 -0400
+
+    Restructure cursor handling and add support for legacy cursors
+
+commit f2351ab38c8157bdbc839ad628b1dde6693f51bd
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Mon Aug 11 17:02:18 2008 -0400
+
+    atom: implement crtc lock
+
+commit e20c670a5a7896a7ad6c004c744993e3be3879dc
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Mon Aug 11 16:29:19 2008 -0400
+
+    LUT updates
+    
+    - Add gamma set for legacy chips
+    - Add 16 bpp gamma set
+
+commit d4f9eaa55a0f9c1c9b3f8d92d734eff4a6ae859e
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Mon Aug 11 16:15:21 2008 -0400
+
+    various cleanups
+    
+    - white space
+    - move i2c_lock to radeon_i2c.c
+    - enable tv dac on legacy
+
+commit 019745c41758173eacb910dde512de0beb6a69eb
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Mon Aug 11 14:41:13 2008 -0400
+
+    Add legacy dac detect stubs
+
+commit b6f5b8ec7169320b79561c88ad04aefa795b3497
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Mon Aug 11 14:26:43 2008 -0400
+
+    unify connector, i2c handling for atom and legacy
+
+commit 5f427e9aaed76ec827b9523b4022205f5bd09a4a
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Mon Aug 11 12:29:42 2008 -0400
+
+    Brute force port of legacy crtc/encoder code
+    
+    - removed save/init/restore chain with set functions
+
+commit 7677c2dba5d06e888c742a607bc7f42d934043c6
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Fri Aug 8 19:36:46 2008 -0400
+
+    on_each_cpu() compat fixup from krh
+
+commit b167ccf10fffb3e0ae0be14fc3b168fcacc373d8
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Aug 14 09:17:43 2008 +1000
+
+    radeon: fix kernel_mm properly
+
+commit 0580785030714f10f624ad329354dc7c688c32ad
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Aug 14 09:15:28 2008 +1000
+
+    radeon: FEDORA: patch to make 3D driver work
+    
+    set gart buffers start
+
+commit 58df2fa0ecc7e4dac83b4e7a72d70c3ea41c7ed2
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Aug 14 09:14:56 2008 +1000
+
+    radeon: remove debugging
+
+commit b0ee12e6bb55655c92184483a065780529c8aa63
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Aug 14 09:14:14 2008 +1000
+
+    radeon: use mm_enabled variable to denote memory manager running
+
+commit 18020e5e9647e218caf8f1566cdc053aac126f23
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Aug 14 09:12:36 2008 +1000
+
+    radeon: make buffer swap for older drivers work again on GEM
+
+commit d59f41b8cf0634a433be7d11f6b473035060c5e1
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Aug 14 09:11:15 2008 +1000
+
+    radeon: add userspace call for mm support check
+
+commit 957c71ff52e93bb2c1bc01b99d29d763d0ef3899
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Aug 14 09:10:11 2008 +1000
+
+    radeon: FEDORA: add old DMA buffers on top of GEM
+    
+    This really shouldn't go upstream, it just lets me
+    run the old 3D driver on GEM setup system
+
+commit 1c6abcefdc37f5cbb447e8fee1f3805fd7d19bea
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Wed Aug 13 11:39:22 2008 -0700
+
+    i915: setup hardware status page if physical addrs are required
+    
+    Needed for the modesetting case where we initialize the ring at load time.
+
+commit b8724ae647c2c622f33f3a82d1b8632c887fa69b
+Merge: 2f03ba4 9a2adc4
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Wed Aug 13 10:09:41 2008 -0700
+
+    Merge branch 'modesetting-101' into modesetting-gem
+
+commit 2f03ba4aad1718a36168550b6a146b79540252e6
+Merge: 085df64 b0e6882
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Wed Aug 13 10:08:02 2008 -0700
+
+    Merge branch 'master' into modesetting-gem
+    
+    Conflicts:
+    
+    	libdrm/Makefile.am
+    	libdrm/xf86drm.h
+    	shared-core/i915_dma.c
+    	shared-core/i915_irq.c
+
+commit af12ef4f6b4ca111d9a2ef45263ad89610498724
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Aug 13 10:04:21 2008 +0200
+
+    Don't call the vblank tasklet with irqs disabled.
+    If a specific tasklet shares data with irq context,
+    it needs to take a private irq-blocking spinlock within
+    the tasklet itself.
+
+commit b0e68829462aad00ce68be998da6313bca754e9a
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Aug 12 22:22:15 2008 -0400
+
+    [intel_bufmgr_gem] Fix flink buffer name caching (#17085, #17092).
+    
+    Store the global name in global_name, don't overwrite the gem_handle.
+
+commit 085df6491e4975681a6e17ff9a67d01268aa7553
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Tue Aug 12 18:23:58 2008 -0700
+
+    Add error checking to framebuffer creation
+    
+    Make the Intel routine return an error if needed and make the core check for
+    it.
+
+commit e9648e9107e90c3ef38a9c9ebb95bac1297d0df5
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Tue Aug 12 18:22:34 2008 -0700
+
+    Export a generic dri_bo handle for use by clients
+    
+    We'll need something like this (either a handle field or a dri_bo_get_handle
+    function) for kernel mode setting to get at the handles.
+
+commit 966c783e96b3f8ae0271db3dd6862177c659ab13
+Author: Matthieu Herrb <matthieu.herrb@laas.fr>
+Date:   Mon Aug 11 10:44:39 2008 -0700
+
+    libdrm: Allow build outside of source tree.
+
+commit 08faab27e5fbf12e53dc9d4bf38eda8da1a55007
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Aug 11 10:58:41 2008 +1000
+
+    drm_vm: fix for build on 2.6.22
+    
+    thanks to malc0 for pointing it out
+
+commit 280d415957c0af099c44aaecb69a06c68c86aebb
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Aug 11 10:47:00 2008 +1000
+
+    drm: add OS_HAS_GEM option.
+    
+    To build i915 driver pass OS_HAS_GEM=1 to make for now
+
+commit 9a2adc442af9d83b85e4d558cb5e4d33597b60b9
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sat Aug 9 19:50:00 2008 +0200
+
+    NV50: minor changes
+
+commit f79ed5546229aa923f8dd54055bebeb56efaa76c
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sat Aug 9 19:47:06 2008 +0200
+
+    NV50: enable hotplug irq
+
+commit 2b7feebb8ad5f49391b4f6bd6fc548e4f93b94f3
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sat Aug 9 19:33:32 2008 +0200
+
+    NV50: call drm_sysfs_hotplug_event when appropriate
+
+commit 12e6a114cf9ebd0e1d8ccdbf9a7aef7c67e24b58
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 9 17:19:16 2008 +1000
+
+    drm: TRUE/true
+
+commit f7a99407153eaba5724b6f1f2cadab62c6a50a26
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Aug 8 15:55:34 2008 -0700
+
+    Drop TTM interfaces from the userland library.
+
+commit 9e9d9b1741965f6529153bc2bcbe2dd8ba96ef3f
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Aug 8 14:08:43 2008 -0700
+
+    Fix compile warning from check_aperture change.
+
+commit e1b8e79796b172c356af98eb49107c8abbebfe5a
+Merge: 0c47151 46e9274
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Aug 8 14:05:01 2008 -0700
+
+    Merge branch 'drm-gem'
+    
+    Conflicts:
+    
+    	shared-core/i915_dma.c
+    
+    This brings in kernel support and userland interface for intel GEM.
+
+commit 46e9274e8538e5b0517f611dca99dde611f4e95d
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Aug 8 13:13:46 2008 -0700
+
+    Replace the check_aperture API with one we can make thread-safe.
+    
+    While the bufmgr isn't thread-safe at the moment, we need it to be for shared
+    objects between contexts.
+
+commit 0c47151a571827905c34649208e22f8ec0175d62
+Author: Stuart Bennett <sb476@cam.ac.uk>
+Date:   Fri Aug 8 16:20:52 2008 +0100
+
+    nouveau: wait for pgraph idle after loading or saving a context
+    
+    the nvidia driver does this, and it stops the error message appearing on nv40
+
+commit c2184e450e4c5613c1f1a004d183ad478358013e
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Aug 8 16:04:45 2008 +1000
+
+    radeon: add initial support for legacy crtc/encoders.
+    
+    not all there yet
+
+commit 8074b2e83d18bbf85d1c3284f561d849c829dd4b
+Merge: c7fb19e 4585787
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Thu Aug 7 17:15:50 2008 -0700
+
+    Make modesetting-gem build with recent kernels
+    
+    Needed to merge in VM fault changes & pci_read_base API update.
+
+commit 5968e061db90451b19c3948bbd91c6d5ac9af941
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu Aug 7 15:26:30 2008 -0700
+
+    Make flink save the kernel-assigned name and return it instead of creating another name
+
+commit c7fb19e9b074281f143b0e1c9d054ebcf5ff1091
+Merge: 086716c ac20e14
+Author: Jesse Barnes <jbarnes@virtuousgeek.org>
+Date:   Thu Aug 7 14:02:04 2008 -0700
+
+    Merge branch 'drm-gem' into modesetting-gem
+
+commit ac20e14d2361160cf199dc31c3fe1ffbacdf5bb7
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Aug 4 23:33:03 2008 -0700
+
+    Switch from shmem_getpage to read_mapping_page
+
+commit 8c042a0b0531117f2663ae6932d299cb47941607
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Aug 6 15:59:31 2008 +1000
+
+    radeon: fixup PCI GART table with GEM enabled
+
+commit 64359586730268fc83ccc0db0487e217a894335b
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Aug 6 15:58:09 2008 +1000
+
+    radeon: just evict to TT not cached
+
+commit a6c075fca6faf83ccbfa38fb27dc4f743b6cdd61
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Aug 6 15:57:38 2008 +1000
+
+    drm: don't teardown things in modeset paths
+
+commit 04b5584c62fa3311e717692e261870276cbd6350
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Aug 6 15:56:08 2008 +1000
+
+    pcigart: fixup memset + remove wbinvd
+
+commit 513d4c3ff1937159e0d32047376415df09031ce6
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Aug 6 10:21:20 2008 +1000
+
+    radeon: fix setting new memmap in right place
+
+commit dc0546c87ffc6701802d6141810c24954274e1ac
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue Aug 5 16:06:40 2008 -0700
+
+    [gem-intel] Retiring flush requests should clear flushed write_domains
+    
+    When i915_gem_retire_request has a flush which matches an object write
+    domain, clear the write domain. This will move the object to the inactive
+    list rather than the flushing list, avoiding trouble with objects left stuck
+    on the flushing list.
+
+commit ceb3d5e3834452f9d54f974b8066f90168467443
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue Aug 5 14:44:53 2008 -0700
+
+    [gem-intel] Don't clear write_domain until flush completes
+    
+    In i915_gem_object_wait_rendering, if the object write domain is being
+    written by the GPU, the appropriate flushing commands are written to the
+    device and an additional request queued to mark that flush. Finally, the
+    function blocks on that new request.
+    
+    The bug was that the write_domain in the object was cleared before the
+    function blocked.
+    
+    If the wait is interrupted by a signal, the flushing commands may still be
+    pending. With the current write_domain information lost, the restarted
+    syscall will drop right through the write_domain test as that value was
+    lost, and so the function will not block at all. Oops.
+    
+    Fixed by simply moving the write_domain clear until after the wait_request
+    succeeds. Note that the restarted system call will generate an additional
+    flush sequence and request, but that should be 'harmless', aside from a
+    slight performance impact.
+    
+    Someday we'll track flushing more accurately and clear write_domains more
+    efficiently, but for now, this should suffice.
+    
+    This bug was discovered in the 2d gem development by running x11perf
+    -copypixwin500 and noticing that the window got cleared accidentally.
+
+commit 8e41ce17b4ab72f526cc6e9acd75c3fa81a60433
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Aug 4 00:34:08 2008 -0700
+
+    Expose pin/unpin/set_tiling/flink APIs
+
+commit 4748fbcbd7b0337448ce88c2cdbbc500ff959e42
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Aug 5 11:36:20 2008 +1000
+
+    radeon: fix blit due to registers wrong
+
+commit fd75c02ddd380c102ca089f015f14dfe964910b1
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Aug 4 14:59:49 2008 +1000
+
+    drm: finish bo after lastclose
+
+commit aa8e15f8b51e555e78cb93e279bad5843eea5391
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Aug 4 14:59:17 2008 +1000
+
+    radeon: add userspace mm enable switch
+
+commit 29649ddedee6b07b922c99233b8afc7c3a1db66f
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Aug 4 14:56:08 2008 +1000
+
+    radeon: don't use ring if cp not going
+
+commit dff84851516a71639d734e134c584f6ed4d3ee07
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Aug 4 14:55:12 2008 +1000
+
+    drm: remove unused types
+
+commit 717dd804d0d1d9984345a998b28ee47079c70639
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Aug 4 14:54:32 2008 +1000
+
+    drm: fixup master code to use krefs
+
+commit af6efc3d778b96164849f822331938c4cdf8f4b2
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Aug 4 14:53:45 2008 +1000
+
+    i915/radeon: use rmmap locked
+
+commit 129c8a11814741a997e3d039ab4be542d38e5ed8
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Aug 4 14:53:14 2008 +1000
+
+    modesetting: pick_crtcs can't be static
+
+commit 922f74f3c95fae39ffe8cf0659fa47e0bc354076
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Aug 4 14:52:58 2008 +1000
+
+    drm: remove unneeded debugging
+
+commit 086716c8e2516dd71e94ebda03e20943188a5e5e
+Merge: 5052e96 ccbaad5
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Fri Aug 1 13:35:56 2008 -0400
+
+    Merge commit 'origin/drm-gem' into modesetting-gem
+    
+    Conflicts:
+    	linux-core/Makefile.kernel
+    	linux-core/drmP.h
+    	linux-core/drm_mm.c
+    	linux-core/drm_stub.c
+    	linux-core/i915_gem.c
+    	linux-core/i915_opregion.c
+    	shared-core/i915_dma.c
+    	shared-core/i915_drv.h
+    	shared-core/i915_irq.c
+
+commit 4585787bd1a1d782b9e7c06095f98d09165b8c23
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Aug 1 07:43:58 2008 +1000
+
+    Revert "i915: Move all of the irq install/uninstall to load time."
+    
+    This reverts commit 965a72202b439068e62ac341990f51953457b202.
+    
+    Please re-do over properly
+
+commit 5052e966ec7fe5146c2d73b90482003619add5da
+Merge: 6d4e147 95c0274
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Thu Jul 31 15:18:32 2008 -0400
+
+    Merge commit 'origin/master' into modesetting-gem
+    
+    Conflicts:
+    	linux-core/Makefile.kernel
+    	linux-core/ati_pcigart.c
+    	linux-core/drm_compat.h
+    	linux-core/drm_irq.c
+    	linux-core/drm_lock.c
+    	linux-core/i915_drv.c
+    	shared-core/i915_dma.c
+    	shared-core/i915_drv.h
+    	shared-core/i915_irq.c
+    	shared-core/nouveau_mem.c
+    	shared-core/radeon_cp.c
+    	shared-core/radeon_drv.h
+
+commit 296073dc5f0bf3f8b74a7d6db48b05c09a1b9242
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jul 31 14:39:25 2008 +1000
+
+    drm: remove object hash
+
+commit d2d7f3069dac4bc5ddd3c8da4d3955f690274276
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jul 31 13:13:21 2008 +1000
+
+    drm: userspace rip out TTM API
+
+commit 10d5b037b85706037df89bf0275436797e4eb559
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jul 31 13:12:36 2008 +1000
+
+    drm: add fault handler support so as to be more like possible upstream
+
+commit 55761b2fe706f8f68ca3a8827b950fd01af1650b
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jul 31 13:12:36 2008 +1000
+
+    drm: add fault handler support so as to be more like possible upstream
+    (cherry picked from commit 10d5b037b85706037df89bf0275436797e4eb559)
+
+commit 9b8d71b5eb09857b07409731d3de182751f712a2
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jul 31 12:54:48 2008 +1000
+
+    TTM: remove API and userspace objects.
+    
+    This removes all the TTM userspace API and all userspace objects.
+    
+    It also removes the drm_bo_lock.c code
+
+commit ccbaad52f79162a77d98d0dde00681b1dbf14165
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jul 30 14:10:36 2008 -0700
+
+    intel-gem: Replace version bump signalling GEM with I915_PARAM_HAS_GEM.
+
+commit 6d4e147480a334d32fa59c7fde53e10d7ab6e106
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Jul 22 14:24:32 2008 -0400
+
+    Make it compile again.
+
+commit 689548b5270a0049cfaf844013ef61ad4c9eaeea
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jul 30 11:29:32 2008 -0700
+
+    intel-gem: Remove dead field from reverted changes.
+
+commit 33c8e03787308c2b86a4f724ba7ce4dc43918b6a
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jul 30 11:22:48 2008 -0700
+
+    Revert "Rename drm_mm.c and its fuctions to drm_memrange."
+    
+    This reverts commit 3ad8db2071d30c198403e605f2726fc5c3e46bfd.
+    
+    We ended up not needing that namespace, and I'd rather not have the churn
+    for producing diffs.
+
+commit fb5542aaa87aca9b6b312968abe0a6044812cf0e
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jul 30 17:06:11 2008 +1000
+
+    radeon: hack gem to get an offset back for Mesa.
+
+commit d659302e0955598ae08316ab911a0fb74d5e2f2f
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jul 30 17:05:50 2008 +1000
+
+    radeon: add some handles to the sarea + kernel mm available check
+
+commit 95c02743c96ca9e959f68a6e942206bdfadae53a
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jul 30 16:52:13 2008 +1000
+
+    i915: more version checks
+
+commit 02b09d271c60d13fbb738c7053429a3b816397db
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jul 30 16:26:51 2008 +1000
+
+    i915: add version checks for opregion on old kernels
+
+commit 8fc72aef70cdec71e3dbce548046974aecc15325
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Jul 29 20:26:38 2008 -0700
+
+    intel-gem: actually add i915_gem_debug.c.
+
+commit 0f78e30e0a189b76df3558f53ff2a92b841cd7ab
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Jul 29 11:10:47 2008 -0700
+
+    intel-gem: Check return value of pci_read_base.
+
+commit 90b90c65dc78648ddded5eff7628749182c73295
+Author: Nicolai Haehnle <nhaehnle@gmail.com>
+Date:   Tue Jul 29 19:56:51 2008 +0200
+
+    r300: Fix cliprect emit
+    
+    This makes our handling of cliprects sane. drm_clip_rect always has exclusive
+    bottom-right corners, but the hardware expects inclusive bottom-right corners,
+    so we adjust this here.
+    
+    This complements Michel Daenzer's commit 57aea290e1e0a26d1e74df6cff777eb9f038f1f8
+    to Mesa. See also http://bugs.freedesktop.org/show_bug.cgi?id=16123 .
+
+commit 0452be882607f2d1601f4e592a11ccf543f5f9ca
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Jul 29 18:05:11 2008 +1000
+
+    radeon: move code around putting emit into cs
+
+commit 4234f82acc70f41e005d8cc301da56634352425c
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Jul 29 16:51:47 2008 +1000
+
+    radeon_cs: add relocate hook for mm and non-mm relocations
+
+commit 0e49e49c9f8fdbe77740c1bdcc0cb4102d26bf7a
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jul 28 23:14:11 2008 -0700
+
+    intel: Fix typo in unused register definition name.
+
+commit e68b57c17da422f61b34c8221c8f4655c676b925
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jul 28 16:33:50 2008 -0700
+
+    intel-gem: checkpatch.pl on drm_proc.c new contents.
+
+commit 1d2bb68d28fe39746299ee8ddb664a62de839b0c
+Merge: 487c42b 514c05c
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jul 28 15:17:21 2008 -0700
+
+    Merge commit 'origin/master' into drm-gem
+    
+    Conflicts:
+    
+    	linux-core/Makefile.kernel
+    	shared-core/i915_dma.c
+    	shared-core/i915_drv.h
+    	shared-core/i915_irq.c
+
+commit 6b903f5edfbba19980a5518df9a89643378516d4
+Author: Stuart Bennett <sb476@cam.ac.uk>
+Date:   Tue Jul 29 02:32:13 2008 +0100
+
+    nouveau: fix nv04 fifo context save to save reg contents, not reg offset
+    
+    clearly the function had never been used :)
+
+commit 591f6bcba35e482280299eef91d57b23a69106d1
+Author: Stuart Bennett <sb476@cam.ac.uk>
+Date:   Tue Jul 29 02:26:34 2008 +0100
+
+    nouveau: fix bad rename from 5a072f32c8f941d1ef301811881e8c89c8d8a5f1
+
+commit 487c42bd42d93304278abce03b36c935bdc83284
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jul 28 11:45:22 2008 -0700
+
+    intel-gem: Another checkpatch.pl pass.
+
+commit 1bdf35fe19c1aa02b301375b3cae7ad29adacef8
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jul 28 11:24:00 2008 -0700
+
+    intel-gem: Fix regression tests.
+    
+    Main fix is an oops that was triggered by the gtt pwrite path when we don't
+    have the gtt initialized.  Also, settle on -EBADF for "bad object handle",
+    and -EINVAL for "reading/writing beyond object boundary".
+
+commit f85fd1b42dc2d77266007c02144d4f4f524e4157
+Author: Eric Anholt <eric@anholt.net>
+Date:   Sat Jul 26 19:28:14 2008 -0700
+
+    intel-gem: Speed up tiled readpixels by tracking which pages have been flushed.
+    
+    This is around 3x or so speedup, since we would read wide rows at a time, and
+    clflush each tile 8 times as a result.  We'll want code related to this anyway
+    when we do fault-based per-page clflushing for sw fallbacks.
+
+commit 478e019cb7caa0c336b19a18eb3cb4e81896b493
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Mon Jul 28 15:16:45 2008 +0100
+
+    set to 2.4.0
+
+commit 42e373e903d960b38c605229ab102933b18cff73
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Jul 28 18:18:28 2008 +1000
+
+    radeon_cs: extract some offsets from packet data
+
+commit 87520347b45e2f40a2d84831538a38d6a8d92439
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Jul 28 17:42:53 2008 +1000
+
+    r300: add some packet 3 decodes
+
+commit dc3a7c023dd089150ee2dc40755fde348252bedb
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Jul 28 17:27:24 2008 +1000
+
+    r300: initial command stream parser for packet 0.
+    
+    this at least parses the DDX stream and lets me run gnome-terminal/metacity
+
+commit 38835f9cd2b44cfb6587a52ba1bfe292b958d0e1
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Jul 28 15:21:13 2008 +1000
+
+    radeon command submission start
+    
+    take code from Jerome munge into a TTM IB re-use
+
+commit 04ae66db1c517264cddc786be962fdd393c9c8ac
+Author: Eric Anholt <eric@anholt.net>
+Date:   Sat Jul 26 19:51:58 2008 -0700
+
+    intel-gem: Move debug-only functions to a separate file.
+
+commit 5282a505b6fd1f0e2bb772b15daf652f7149f370
+Author: Alex Deucher <alexdeucher@gmail.com>
+Date:   Sat Jul 26 16:57:02 2008 -0400
+
+    NV50: s/FALSE/false/
+
+commit 514c05cebe31a62f827a76f348d35596bef97811
+Author: Stefan Becker <stefan.becker@nokia.com>
+Date:   Sat Jul 26 16:49:14 2008 +0200
+
+    radeon: Add suspend/resume hooks for saving/clearing/restoring interrupts.
+    
+    Fixes http://bugs.freedesktop.org/show_bug.cgi?id=16799 .
+
+commit c3d463840c902a28221f1514bfb69fb7905a05c2
+Author: Nicolai Haehnle <nhaehnle@gmail.com>
+Date:   Sat Jul 26 11:39:10 2008 +0200
+
+    r300_cmdbuf: Always emit INDX_BUFFER immediately after DRAW_INDEX
+    
+    DRAW_INDEX writes a vertex count to VAP_VF_CNTL. Docs say that behaviour
+    is undefined (i.e. lockups happen) when this write is not followed by the
+    right number of vertex indices.
+    
+    Thus we used to do the wrong thing when drawing across many cliprects was
+    necessary, because we emitted a sequence
+     DRAW_INDEX, DRAW_INDEX, INDX_BUFFER, INDX_BUFFER
+    instead of
+     DRAW_INDEX, INDX_BUFFER, DRAW_INDEX, INDX_BUFFER
+    The latter is what we're doing now and which ought to be correct.
+
+commit 0443d2a32ab791867cb0ce361a3905357d6a87d9
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jul 26 08:56:43 2008 +1000
+
+    tests: add some basic radeon gem tests
+
+commit df9871064e8b564d9ae2e56d561b64434fd004af
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jul 26 08:56:23 2008 +1000
+
+    radeon: add initial atombios modesetting and GEM -> TTM translation layer.
+    
+    This is an initial import of the atom bios parser with modesetting support
+    for r500 hw using atombios. It also includes a simple memory manager
+    layer that translates a radeon GEM style interface onto TTM internally.
+    
+    So far this memory manager has only been used for pinned object allocation
+    for the DDX to test modesetting.
+
+commit 31da9492a4129f5255e949836c51e9dfbfb270c4
+Merge: 11d3075 7fd7ba8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jul 26 08:46:38 2008 +1000
+
+    Merge remote branch 'origin/modesetting-101' into modesetting-gem
+
+commit 7fd7ba87f35aa4881e99b95bab4151b3f9db9b8e
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Jul 25 13:30:08 2008 +1000
+
+    drm: don't set the signal blocker on the master process.
+    
+    this lets us debug the X server through xkb startup.
+    
+    Not sure what the correct answer is, probably X needs to drop
+    the lock when execing stuff, with input hotplug it can get
+    xkb stuff at any time I believe.
+
+commit 66723c09f5e4d60f1c746d112b065bacc1cfa89f
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jul 26 08:43:59 2008 +1000
+
+    modesetting: pass file priv to cursor
+
+commit 2be292f6ea8df96afc1454f30918b1b391fba2ba
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jul 26 08:43:01 2008 +1000
+
+    nv50: remove TRUE/FALSE
+
+commit 11d30750873260fe19498d90831f07079dfad5d8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jul 26 08:41:01 2008 +1000
+
+    modesetting: pass file_priv into cursor set functions
+
+commit fb05c4d621084d7a3fb3dd52d7d9c888eac852d0
+Merge: 2556341 5342845
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jul 26 08:38:59 2008 +1000
+
+    Merge remote branch 'origin/modesetting-101' into modesetting-gem
+
+commit 7a3d6624c47d87bdd46f5394b8cc5130c7a4ed0d
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Fri Jul 25 13:46:28 2008 -0400
+
+    [FreeBSD] Duh, we need to actually define the drm_modeset_ctl...
+
+commit 50db5aefa18283282400fd4a5090b686b5870206
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Jul 25 13:30:08 2008 +1000
+
+    drm: don't set the signal blocker on the master process.
+    
+    this lets us debug the X server through xkb startup.
+    
+    Not sure what the correct answer is, probably X needs to drop
+    the lock when execing stuff, with input hotplug it can get
+    xkb stuff at any time I believe.
+
+commit 53428453758621da70d9608c9baec58b4b9383ec
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jul 24 15:22:44 2008 +1000
+
+    drm: use correct mode destructor
+
+commit 2580a065d81be645a14af1e91b8441f7e72fcbe4
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Thu Jul 24 00:21:00 2008 -0400
+
+    [FreeBSD] Catch up to linux on vblank-rework
+
+commit 965a72202b439068e62ac341990f51953457b202
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Wed Jul 23 19:55:06 2008 -0400
+
+    i915: Move all of the irq install/uninstall to load time.
+    
+    This resolves a panic on FreeBSD which was caused by trying
+    to re-initialize the swap lock.  It's just much easier to
+    initialize all of the locks at load time.  It should also
+    ensure that the vblank structures are available earlier.
+
+commit 6d258ddf7715412e2fb6fae35ea28d49c57ee130
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jul 23 11:49:25 2008 -0700
+
+    intel-gem: Fix pread math and logic errors.
+    
+    Fixes an oops in fbotexture from walking off the end of the page list.
+
+commit 439d7106832f2e9742deb900d96f1d3bc07162b1
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jul 23 10:07:16 2008 -0700
+
+    intel-gem: Add a quick hack to reduce clflushing on pread.
+    
+    This increases overhead for the large-readpixels case due to the repeated
+    page cache accessing, but greatly reduces overhead for the small-readpixels
+    case.
+
+commit bddb952578d58c4dcfafe969c045a39d27666b56
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jul 23 08:36:54 2008 -0700
+
+    intel-gem: Don't do the GTT-pwrite shortcut on tiled buffers.
+    
+    These will be covered by the fence, while pread/pwrite are supposed to be
+    CPU-perspective writes, with manual detiling done by the client.
+
+commit a5d8f35f0fa651fbe8ca2897875ba188ca7dcda5
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jul 21 14:33:55 2008 -0700
+
+    intel-gem: Move /proc debugging to a separate file.
+
+commit 589f9681734770dce966bcded7d3d4bd78f4bea5
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jul 22 18:47:27 2008 +1000
+
+    radeon: fix typo with a better typo
+
+commit c669489813c089b5aa176367e696396b071a4bee
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jul 22 18:10:03 2008 +1000
+
+    radeon: fix type DST vs Z cache flush
+
+commit f57f01f02843747d423f2e1c2936f0b987c5b067
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Jul 21 18:04:02 2008 -0400
+
+    [FreeBSD] Improve upper_32_bits define.
+    
+    Thanks to airlied.
+
+commit e31d27857ffc1b01ca49e70b5ba6f7425414d7c8
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jul 21 14:21:16 2008 -0700
+
+    intel-gem: Remove recently added pci_read_base prototype.
+    
+    This is in pci.h in the fixed patch to the kernel.
+
+commit 67d15215660407b07265c37d60ea5cac8930cef9
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Jul 1 12:31:37 2008 -0700
+
+    intel-gem: Set up HWS when it needs a vaddr during GEM init.
+    
+    This requires an updated 2D driver to not try to set it up as well.
+
+commit 4d5b9f484885ac01457f0a8c39b24ca4aac34b5a
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Mon Jul 21 16:57:25 2008 +0200
+
+    NV50: Don't create a "native" mode for LVDS when there is none.
+
+commit 147ef45873868a0df9216dac0370ada1ed835590
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Mon Jul 21 16:40:55 2008 +0200
+
+    NV50: don't fail on LVDS by default
+
+commit 03f8208ab0a3ea77a8b30dd1c3fe2b62892f9d8c
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Mon Jul 21 14:50:07 2008 +0200
+
+    NV50: Use bios table for load pattern when possible.
+
+commit d00644c27ddc7023ea0e442c7be6b67d9d0da047
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Mon Jul 21 14:29:13 2008 +0200
+
+    NV50: Do detect with hpd and load detect if possible.
+    
+    - Appropriate error messages when an unknown situation is encountered are included.
+    - Fallback to i2c will occur when needed.
+
+commit b5cddbcc1536d70dfa9fec833732b2a715d82e65
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Mon Jul 21 13:43:12 2008 +0200
+
+    Remove accidental leftover tests.
+    
+    Thanks to Nicolai Haehnle for pointing this out on IRC.
+
+commit 4be367b84b5a6691c28d9419039ea8113ebabc92
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Mon Jul 21 11:48:04 2008 +0200
+
+    Reinstate dev->vblank_enabled[].
+    
+    I incorrectly thought it was obsolete.
+
+commit f529a510d200c87919084fda1e053545c25ebeab
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Mon Jul 21 08:16:59 2008 +0200
+
+    Drop workaround for driver vblank counter going backwards.
+    
+    The driver code that caused this is no longer necessary and has been dropped.
+
+commit e4feaf506db0bc8ad15dbb5154e093478c3dd56a
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Mon Jul 21 08:16:59 2008 +0200
+
+    radeon: Post-vblank-rework-rework cleanups.
+    
+    Thanks to the reworked vblank-rework, we can just use the hardware frame
+    counter directly, and make the RADEON_PARAM_VBLANK_CRTC getparam just return
+    what was set by the corresponding setparam.
+
+commit 205aff6a5cc7b037f53b6bbcd3fa5b2d42f43f5b
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Mon Jul 21 08:16:55 2008 +0200
+
+    vblank-rework rework cleanups.
+    
+    Remove some dead/obsolete code and make drm_update_vblank_count() static.
+
+commit 014935b680d12856a01c0b2fe6077a38d69d14d3
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Mon Jul 21 08:13:45 2008 +0200
+
+    Remove obsolete dev->vblank_suspend[crtc] tests.
+    
+    Caused drm_update_vblank_count() not to do its thing when called from
+    drm_modeset_ctl() -> drm_vblank_get().
+    
+    The vblank functionality no longer needs to be suspended during a modeset, so
+    rename the field to vblank_inmodeset.
+
+commit 685bca02fe6b7406bb157a1a4e0f147b47ba28f8
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Jul 20 15:40:40 2008 +0200
+
+    NV50: delay changing gpu<->non-gpu scaling modes until next modeset
+
+commit e51cd78cac24df15e32e23d8db73614524e6ff0d
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Jul 20 14:58:46 2008 +0200
+
+    modesetting-101: Only store property value when set_property was successful.
+
+commit f1e4785d4cf04b679948602ffbbef2043ce81ec0
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Jul 20 14:55:59 2008 +0200
+
+    NV50: LVDS always needs some kind of gpu scaling
+
+commit 3ef1d05001a9e28ed52536de7e020323d8d34d83
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Jul 20 14:51:22 2008 +0200
+
+    modesetting-101: set_property should return an int, not a bool
+
+commit 65803e53a696347e38d7f6c2c8dc186c6764ff03
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Jul 20 13:49:18 2008 +0200
+
+    modesetting-101: implement optional scaling and dithering properties
+
+commit e2ffee839ed7ae6c55a0a8c6bb8ee872ae8a2a70
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Jul 20 00:09:06 2008 +0200
+
+    drm: As a workaround don't tear down sg with a modesetting driver.
+    
+    - This allows me to maintain a useful prototype driver.
+
+commit 04893aa99abfbed8eb6d7067a974fa1f31193c87
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Sat Jul 19 13:18:02 2008 -0400
+
+    i915: convert to using drm_vblank_get/put around vblank counter usage
+    
+    All interrupt off vblank count updates are done in drm_vblank_get/put
+    now, so convert users of the vblank counter over to that interface.
+
+commit 6ac1f8a760e1e757569a5f6f420df91cf203b02d
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Sat Jul 19 13:15:23 2008 -0400
+
+    Update vblank code to new API
+    
+    In my last push I forgot to convert users of drm_update_vblank_count
+    over to drm_vblank_get/put, since that's where any interrupt off->on
+    update accounting is done now.  Since the modeset ioctl did something
+    similar (an open coded update of the counter) convert it over to using
+    get/put too, which saves us from having to deal with every combination
+    of interrupt off & on between calls.
+
+commit 4d83a751b421ec3f3e0c572070c3bc295b9adbcc
+Author: Ian Romanick <ian.d.romanick@intel.com>
+Date:   Fri Jul 18 12:42:43 2008 -0700
+
+    drm-gem: Fix build
+    
+    On some distros missing prototypes cause kernel builds to fail.  These
+    are hack to make the code build.
+
+commit f5c2f00e2f99732311c9a35a91b6adc93047c51b
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jul 17 16:56:42 2008 -0700
+
+    intel-gem: Leave 8xx tiling on until we find any issues.
+
+commit 0ef097b598433a5756df2bd6a72deba1f0e1d1c7
+Author: Ben Skeggs <skeggsb@nisroch.keine.ath.cx>
+Date:   Mon Jun 23 01:24:11 2008 +1000
+
+    nv50: use same dma object for fb/tt access
+    
+    We depend on the VM fully now for memory protection, separate DMA objects
+    for VRAM and GART are unneccesary.  However, until the next interface break
+    (soon) a client can't depend on the objects being the same and must still
+    call NV_OBJ_SET_DMA_* methods appropriately.
+
+commit 4872ac9c6204c3f212fd622ed292f6fc245020bf
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Jun 25 04:39:32 2008 +1000
+
+    nouveau: interface changes for nv5x 3d
+
+commit 7cfdba2b30e40efc688f1704bd4f4141dc6f9a6c
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Jul 18 14:30:57 2008 +1000
+
+    radeon: remove microcode version
+
+commit ed7e1709158ca42736650379ee2aba64a827c51e
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jun 19 11:38:43 2008 +1000
+
+    drm/radeon: fixup 0 vs NULL
+
+commit 480c317a6ae634d777931eee54fadd2a50a2f650
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Thu Jul 17 14:01:04 2008 -0400
+
+    [FreeBSD] drm_irq.c updates for vblank fixes.
+
+commit a9427cf31861542ff4f4d3db498e5f2ada7da4c1
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Thu Jul 17 13:51:24 2008 -0400
+
+    i915: remove old broken vblank code
+    
+    Remove the unused (and broken) "in vblank" code now that the core has
+    been fixed to use a counter while interrupts are enabled.  Also make the
+    vblank pipe get/set ioctls into dumb stub functions, since with the new
+    code we can no longer let userspace control whether vblank interrupts
+    are enabled, or the core code will misbehave.
+
+commit 2204f926abe4da87a38955c4ecf9adb73b646666
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Thu Jul 17 13:48:14 2008 -0400
+
+    Avoid incorrect vblank wakeups
+    
+    The current code uses the hw vblank counter exclusively, which can lead
+    to wakeups during the active period rather than during the vblank period
+    if the hw counter counts displayed frames rather than vblank periods.
+    
+    This change coverts the code over to using the counter while interrupts
+    are enabled, fixing that issue.  It also includes a couple of related
+    changes:  one to not enable the new enable/disable behavior until the
+    modeset ioctl is called (to preserve old client behavior) and another to
+    account for lost events due to mode setting with the new counter scheme.
+    
+    BSD will require similar changes to its drm_irq.c code, but they should
+    be straightforward.
+
+commit b0e4619a396f2db8c594cd0a26fd2f0ab9358095
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Wed Jul 16 23:39:25 2008 -0400
+
+    FreeBSD: Fix radeon build
+
+commit 74cf1f91be7f4139601624af0343e3d411190dec
+Author: Owain Gordon Ainsworth <oga@openbsd.org>
+Date:   Mon Jul 7 17:23:48 2008 +0100
+
+    BSD: change drm_locked_task*() to use the same scheme as linux.
+    
+    The current code can sleep in an interrupt handler, that is bad. So
+    instead if we can't grab the lock, flag it and run the tasklet on
+    unlock.
+    
+    Signed-off-by: Robert Noland <rnoland@2hip.net>
+
+commit 96580f660e5509dcf6c34de5630e3d36b156bcd5
+Author: Robert Noland <rnoland@wombat.2hip.net>
+Date:   Mon Jun 9 08:54:53 2008 -0400
+
+    [FreeBSD] We aren't allowed to hold locks over bus_dma_tag_create or bus_dmamem_alloc.
+
+commit dfd441cf964f20e4a761cb8490d7cd82cf32e7b9
+Author: Hong Liu <hong.liu@intel.com>
+Date:   Tue Jul 15 10:14:17 2008 -0700
+
+    This is a modified version of Hong's patch from last month, with a few
+    modifications to make it work correctly on my test hardware (altered the
+    backlight write function, made it enable the legacy backlight controller
+    interrupts on mobile hardware, sorted the interrupt function so we don't
+    get an excessive number of vblank interrupts). This lets the backlight
+    keys on my T61 work properly, though there's a 750msec or so delay
+    between the request and the brightness actually changing - this sounds
+    awfully like the hardware spinning waiting for a status flag to become
+    ready, but as far as I can tell they're all set correctly. If anyone can
+    figure out what's wrong here, it'd be nice to know.
+    
+    Some of the functions are still stubs and just tell the hardware that
+    the request was successful. These can be filled in as kernel modesetting
+    gets integrated. I think it's worth getting this in anyway, since it's
+    required for backlight control to work properly on some new platforms.
+    
+    Signed-off-by: Matthew Garrett <mjg@redhat.com>
+
+commit 764573f3b8bec90f20c3bdd58c4b55490fbbdaf4
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jul 15 20:27:14 2008 +1000
+
+    drm: fix missing symbol export
+
+commit abdd523c759a5e19e733e3b544c2f1bcaa7a0b9a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jul 15 16:18:22 2008 +1000
+
+    drm: add fix for PAT on radeon with 2.6.26
+
+commit 76c8e19a29d635d2c62937a381ab33014cfe6cea
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jul 15 16:18:04 2008 +1000
+
+    drm/pcigart: fix warning
+
+commit 78f1fc9cbcb383d42d903a8b9febdcf3c438ea7c
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jul 14 09:16:45 2008 -0700
+
+    intel-gem: Disable tiling if we get junk from the MCHBAR read.
+    
+    One of our systems has been returning 0xffffffff from all MCHBAR reads, which
+    means we'll need to figure out why, or add an alternate detection method.
+
+commit a9089c45570c7b2df9155c2cd73aeea59cc0e34e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jul 12 16:32:09 2008 +1000
+
+    modesetting/helper: fix array overrun - count should be reset here
+
+commit a0474be4e78d678eb615b37aad355effb955ee19
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Jul 11 14:47:33 2008 -0700
+
+    intel-gem: Add two new ioctls for managing tiling on objects.
+    
+    Various chips have exciting interactions between the CPU and the GPU's
+    different ways of accessing interleaved memory, so we need some kernel
+    assistance in determining how it works.
+    
+    Only fully tested on GM965 so far.
+
+commit 2556341f8baf0e0b7b5f7843135e43e662751af0
+Merge: 38a5f66 0b7d9a9
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jul 9 14:53:47 2008 +1000
+
+    Merge remote branch 'origin/modesetting-101' into modesetting-gem
+
+commit eac0933be75b226e0b623d8dcbf343c391eb88a2
+Author: martin capitanio <martin@capitanio.org>
+Date:   Tue Jul 8 17:58:10 2008 +1000
+
+    xgi: use true/false instead of TRUE/FALSE
+
+commit c7ed2c67916ee8058301c53b9d4690d81728fb95
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Jun 25 04:39:32 2008 +1000
+
+    nouveau: interface changes for nv5x 3d
+
+commit 38a5f6686cd38d5204e240f30006538bcf70f5ac
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Mon Jul 7 18:00:23 2008 -0400
+
+    Add back flink, open and close ioctls.
+    
+    They fell through the cracks in 86accbcb.
+
+commit 1f9a5307acfe2ef0d104f7036d2d93504dc7673f
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jun 26 09:35:14 2008 -0700
+
+    [intel-gem] typo fix in DRM_ERROR
+
+commit 3e02f7fd310ae062d250d8db01ddc3b7de3d7943
+Merge: 7fd8a5d d250a55
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Mon Jul 7 15:43:43 2008 -0400
+
+    Merge commit 'origin/drm-gem' into ms-gem
+    
+    Conflicts:
+    
+    	linux-core/drmP.h
+    	linux-core/drm_drv.c
+    	linux-core/drm_stub.c
+    	linux-core/i915_drv.c
+    	linux-core/i915_gem.c
+    	shared-core/i915_drv.h
+    	shared-core/i915_irq.c
+
+commit 7fd8a5de63781f6faa053509c80e02e8f1cdbb69
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Mon Jul 7 11:56:59 2008 -0400
+
+    Use lowercase bool constants.
+
+commit 0b7d9a97bd2383fe4382fc1b1b266542020f0c4e
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Mon Jul 7 15:11:48 2008 +0100
+
+    Synchronize the DDC EDID read to it's fb_ddc.c counterpart
+
+commit d5d3f31b108c8514a820bb50a5736ba06fc33275
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Jul 6 12:51:43 2008 +0200
+
+    NV50: init gamma storage
+
+commit 88f668a0b91a9961d599c46392f3acbb5573ed9d
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Jul 6 11:23:17 2008 +0200
+
+    NV50: fix minor bug in fbcon crtc selection
+
+commit 6738e7b00bf05529303ed690873495db6d83337c
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Jul 6 11:08:49 2008 +0200
+
+    modesetting-101: Rename DPMS modes to avoid compatibility issues with xorg definitions.
+
+commit e810cb9243fe6c4905182869d9e3272d861a14cb
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Jul 6 10:52:25 2008 +0200
+
+    modesetting-101: rename modeflags, as to avoid conflicts with the xorg definitions
+
+commit d495a6e28f7fe5428c1ceb75378cad31b51a517a
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Jul 6 10:11:33 2008 +0200
+
+    NV50: minor fix
+
+commit e1cd21bcc8747fcc573708bd4d74df39b60c476a
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sat Jul 5 20:17:49 2008 +0200
+
+    NV50: remove edid when monitor is gone, improve fbcon, misc fixes
+    
+    - This should avoid switching crtc's when going to fbcon.
+
+commit c48cddc7ef984c1e05ed4f64a7fc182b6a5031f5
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sat Jul 5 16:54:26 2008 +0200
+
+    NV50: fix switch_fb and connector_is_digital
+
+commit 7cbc5f6145046f3775e3b3ca2862bfb71831ec44
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sat Jul 5 12:04:07 2008 +0200
+
+    modesetting-101: Make the interface variable names a little more consistent + modeprint changes.
+    
+    - All things are now called _id when they are id's.
+    - modeprint now accepts driver name as first argument.
+
+commit be31a0fa73272b9c727668096ba652ea748a9735
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Fri Jul 4 18:47:59 2008 +0200
+
+    modesetting-101: tv_left_margin_property shouldn't be immutable.
+
+commit 0028ca33e90d3405bd47a554e9398e0c2aa6099b
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Fri Jul 4 17:37:45 2008 +0200
+
+    Forgot the 0'th element for the tv property.
+
+commit c9915d695dad8e4f75b4f551f9f78ff3d64dc666
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Fri Jul 4 17:28:04 2008 +0200
+
+    modesetting-101: Move some defines used for enumeration into the public header.
+    
+    - Otherwise userspace has no idea of the meaning.
+
+commit b29578103f57a8d684b4a3a79f220e6cc626605e
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Fri Jul 4 17:17:11 2008 +0200
+
+    [modesetting-101] Add subconnector and select_subconnector properties.
+    
+    - These facilitate DVI-I and tv-out that can drive multiple types of signals.
+
+commit 142a309604b65c26ca95594943ee91dde8688697
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Jul 4 09:34:24 2008 +1000
+
+    modesetting: rip out all of the generation code.
+    
+    not needed, hotplug will work just as well hopefully.
+
+commit 11b7a81c8a776aa7761ee03fe55d741a44ba5df7
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Thu Jul 3 17:25:37 2008 +0200
+
+    libdrm: fix typo in comment
+
+commit 062d85062061199f2326982e27d54955a4ad76dc
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Thu Jul 3 09:08:01 2008 +0200
+
+    nv50: s/FALSE/false && s/TRUE/true
+
+commit d5ca5c9cd379438ac303598677f3789adc3687b1
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Thu Jul 3 08:07:35 2008 +0200
+
+    [drm-sysfs] connected is ambigious in the context of a connector, replace with enabled
+
+commit 47c8f317410976c679aeaee69a372ec45485d442
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Thu Jul 3 07:18:18 2008 +0200
+
+    NV50: replace active by enabled
+
+commit 02b30739f7676082af4ce92448d910085d1dfc65
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Thu Jul 3 01:05:07 2008 +0200
+
+    [modeseting-101] add connected field to sysfs
+
+commit 94cf07bff1bf9a42ba6360f8feaa441b763b337f
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Thu Jul 3 00:30:00 2008 +0200
+
+    Forgot to fix the modeprint test.
+
+commit 5de978905abd6d44ee2ecdc7393194a4950c595c
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Thu Jul 3 00:25:06 2008 +0200
+
+    [libdrm] count connectors and such has no place in a crtc object
+
+commit 59a9a756e238dd73f3051434545b2d3bf225da87
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jul 3 08:05:51 2008 +1000
+
+    modesetting: lookup blob using correct identifier.
+    
+    blob is a blob not a connector
+
+commit aa2d3cfc168481b7637d935af990ce447012ebfe
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Thu Jul 3 00:03:48 2008 +0200
+
+    tests: Fix faulty error messages in modeprint
+
+commit 70ba0871916af586b355550184e0782b36e132c9
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jul 3 08:00:39 2008 +1000
+
+    drm: fix encoders get permissions
+
+commit 49e1fa1d503bb66949d825c41c1d97c83cf86361
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Wed Jul 2 23:12:33 2008 +0200
+
+    tests: modeprint s/fb/fd/
+
+commit 4f233ce61858b94e0c1bd36e331b36d1b59512e5
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Wed Jul 2 22:46:44 2008 +0200
+
+    tests: Updated modeprint
+
+commit 401f77a2ef1d55feaccc13cdae1e5379f4cfec7e
+Author: Zhenyu Wang <zhenyu.z.wang@intel.com>
+Date:   Thu Jul 3 00:49:19 2008 +0800
+
+    i915: official name for GM45 chipset
+    
+    Signed-off-by: Zhenyu Wang <zhenyu.z.wang@intel.com>
+
+commit f1fe9178f1a2aef272c7feeb15c8de42c8c609d5
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Wed Jul 2 16:13:54 2008 +0200
+
+    NV50: basic fbcon + misc fixes
+    
+    - There is one fb, used for as many outputs as possible.
+    - Eventually smaller screens will be scaled to see the full console, but for the moment this'll do.
+
+commit b28d309210475b6f671af7617c779bd1d7a6810a
+Author: Jakob Bornecrantz <jakob@aurora.(none)>
+Date:   Wed Jul 2 13:59:19 2008 +0200
+
+    tests: Improved and renamed the mode app to modeprint
+
+commit 301d984ea80cb250460d6701c4373cf0af8bf59e
+Author: Jesse Barnes <jbarnes@hobbes.(none)>
+Date:   Tue Jul 1 16:10:01 2008 -0700
+
+    i915: only use tiled blits on 965+
+    
+    When scheduled swaps occur, we need to blit between front & back buffers.  I
+    the buffers are tiled, we need to set the appropriate XY_SRC_COPY tile bit,
+    only on 965 chips, since it will cause corruption on pre-965 (e.g. 945).
+    
+    Bug reported by and fix tested by Tomas Janousek <tomi@nomi.cz>.
+    
+    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
+
+commit 94dcc83ad2e8f848a3cac6cdc6f123e676e91cf8
+Author: Jesse Barnes <jbarnes@hobbes.(none)>
+Date:   Tue Jul 1 16:09:02 2008 -0700
+
+    Revert "i915: only use tiled blits on 965+"
+    
+    This reverts commit 727d4f1d1667e43b3558bd5f6ed6dc2cd9c29401, somehow git
+    deleted the symlink and replaced it with the file.
+
+commit 727d4f1d1667e43b3558bd5f6ed6dc2cd9c29401
+Author: Jesse Barnes <jbarnes@hobbes.(none)>
+Date:   Tue Jul 1 12:25:16 2008 -0700
+
+    i915: only use tiled blits on 965+
+    
+    When scheduled swaps occur, we need to blit between front & back buffers.  If
+    the buffers are tiled, we need to set the appropriate XY_SRC_COPY tile bit, but
+    only on 965 chips, since it will cause corruption on pre-965 (e.g. 945).
+    
+    Bug reported by and fix tested by Tomas Janousek <tomi@nomi.cz>.
+    
+    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
+
+commit e935925cd733fffef44b3e3210a875b57b3812e9
+Author: Jie Luo <clotho67@gmail.com>
+Date:   Tue Jun 24 10:38:31 2008 -0700
+
+    i915: enable bus mastering on i915 at resume time
+    
+    On 9xx chips, bus mastering needs to be enabled at resume time for much of the
+    chip to function.  With this patch, vblank interrupts will work as expected
+    on resume, along with other chip functions.   Fixes kernel bugzilla #10844.
+    
+    Signed-off-by: Jie Luo <clotho67@gmail.com>
+    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
+
+commit 2b9c5719c09226a36a4a1e9869e6075b8ec08824
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Tue Jul 1 16:00:09 2008 +0200
+
+    NV50: switch to fixed point scale factor calculations
+
+commit bc32d1798a213d7701b20feb95781eb51a42e945
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Tue Jul 1 15:14:30 2008 +0200
+
+    NV50: some i2c cleanup
+
+commit 91c742663a618e81da69ad4f098321d9af56d636
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Fri Jun 27 18:58:13 2008 +0200
+
+    NV50: use list_head item instead of list_head head to avoid confusion
+
+commit 9f28da80f6cc8e45670b217a2483983f2838095d
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Fri Jun 27 18:45:08 2008 +0200
+
+    Change some obviously wrong things about property blobs, still broken though.
+    
+    - I do not fully understand these blobs, so i'm leaving it at this for the moment.
+
+commit 71906e86e81440037aa08b6f23f36e9fd3835639
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Fri Jun 27 16:30:25 2008 +0200
+
+    [modesetting-101] Actually store properties when being changed.
+
+commit 01ee5eda9aaff880153223df8bb70a34b1a87cee
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Fri Jun 27 01:29:30 2008 +0200
+
+    NV50: A minor change.
+
+commit 701011224c048e064295ee12e8a02f7f66d4175a
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Fri Jun 27 01:16:36 2008 +0200
+
+    NV50: Implement DPMS.
+
+commit d88616555d2d3abc118f77d5556e14dd1512272b
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Thu Jun 26 23:21:01 2008 +0200
+
+    [modesetting-101] tab-cleanup
+
+commit 087e3f577d795bcd007619514bb2977eede70c16
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Thu Jun 26 23:12:04 2008 +0200
+
+    Revert "modesetting-101: Make dpms property optional + misc cleanup."
+    
+    This reverts commit 13943fe5823c45759091c1a1f487a4abe377421e.
+
+commit 13943fe5823c45759091c1a1f487a4abe377421e
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Thu Jun 26 21:28:29 2008 +0200
+
+    modesetting-101: Make dpms property optional + misc cleanup.
+    
+    - intel_crt seems the only one to provide it, so init it there.
+
+commit 4d85d5d25116304e476849ee64c206ffb3a7f372
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Wed Jun 25 15:27:07 2008 +0200
+
+    NV50: i misunderstood NOUVEAU_MEM_INTERNAL, so remove it
+
+commit 09b67dda0bc040860aedce4a2d28bce1c80e56d6
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Wed Jun 25 15:16:38 2008 +0200
+
+    NV50: Some cleanup and fixes.
+
+commit be7276281694145e7c947b91a1c8e6e347de666c
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Jun 25 16:45:41 2008 +1000
+
+    nv50: when destroying a channel make sure it's not still current on PFIFO
+    
+    We won't get a PFIFO context switch when the same channel ID is recreated if
+    the hw still thinks the channel is already active, which causes fun issues.
+    
+    Should allow X to be stopped and started without tearing down the entire
+    card state in lastclose().
+
+commit 5a0164d1e1799b68b3131efd7b9fcaf20c578257
+Author: Ben Skeggs <skeggsb@nisroch.keine.ath.cx>
+Date:   Mon Jun 23 01:00:42 2008 +1000
+
+    nouveau: allocate drm-use vram buffers from end of vram.
+    
+    This avoids seeing garbage from engine setup etc before X gets around
+    to pointing the CRTCs at a new scanout buffer.  Not actually a noticable
+    problem before G80 as PRAMIN is forced to the end of VRAM by the hardware
+    already.
+
+commit 5d27fd94afaaf434c3a92af0075420b550055bfb
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Jun 25 16:45:41 2008 +1000
+
+    nv50: when destroying a channel make sure it's not still current on PFIFO
+    
+    We won't get a PFIFO context switch when the same channel ID is recreated if
+    the hw still thinks the channel is already active, which causes fun issues.
+    
+    Should allow X to be stopped and started without tearing down the entire
+    card state in lastclose().
+
+commit d55629a13d0f287e186e93a4828ef86b36678eba
+Author: root <root@localhost.(none)>
+Date:   Tue Jun 24 23:18:29 2008 +0100
+
+    silence warning
+
+commit d250a55fc6a726a8bfaf4f871eeb09c895a9ba51
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue Jun 24 13:39:25 2008 -0700
+
+    [intel] Get vblank pipe from irq_mask_reg instead of hardware enable reg
+    
+    With the interrupt enable/disable using only the mask register, it was wrong
+    to use the enable register to detect which pipes had vblank detection
+    turned on. Also, as we keep a local copy of the mask register around, and
+    MSI machines smack the hardware during the interrupt handler, it is more
+    efficient and more correct to use the local copy.
+
+commit e36da6a133328a4cf9c98d9347c87dc3c3a12d16
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue Jun 24 13:08:04 2008 -0700
+
+    [intel] Create functions to enable/disable interrupts
+    
+    This shares common code sequences for managing the interrupt register bits
+
+commit d726eb2e5e192f22e41e399d9133edcd7202f0c5
+Author: Jesse Barnes <jbarnes@hobbes.(none)>
+Date:   Tue Jun 24 12:57:21 2008 -0700
+
+    i915: remove unused variable
+    
+    Leftover dev_priv from the move of the suspend/resume code into shared-core.
+
+commit 893cd01a1d6bed9740e9bfccde07f41ee401f898
+Author: Jesse Barnes <jbarnes@hobbes.(none)>
+Date:   Tue Jun 24 12:50:29 2008 -0700
+
+    i915: register definition & header file cleanup
+    
+    It would be nice if one day the DRM driver was the canonical source for
+    register definitions and core macros.  To that end, this patch cleans things up
+    quite a bit, removing redundant definitions (some with different names
+    referring to the same register) and generally tidying up the header file.
+
+commit 5dbcb7551ff0b2c759f34ca85c30cfa95f33ba09
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Tue Jun 24 20:29:08 2008 +0200
+
+    NV50: minor change
+
+commit ce2effbe2dd205e67e294304b97ee7bf221137b1
+Merge: 2c6feb7 01a33d7
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue Jun 24 10:03:05 2008 -0700
+
+    Merge branch 'drm-gem' into drm-gem-965
+
+commit 2c6feb7a5a3fe60ed3961bc133ad5d6e63b8196a
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Jun 23 22:03:33 2008 -0700
+
+    [intel-gem] Include drm_compat.h to get kmap_atomic_prot_pfn
+
+commit c0043155ad7199835d631e3daed5c641642c314e
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Jun 23 22:03:06 2008 -0700
+
+    drm_compat: it's CONFIG_HIGHMEM, not CONFIG_HIMEM
+    
+    A mis-spelled config option (was it spelled that way in the past?)
+    eliminated kmap_atomic_prot_pfn from core DRM.
+
+commit 5540457fa5bf291e88efb23721b5ac71379c6a6e
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Jun 23 11:21:30 2008 -0700
+
+    [intel-gem] Use I915_GEM_DOMAIN_GTT in dri_gem_bo_wait_rendering.
+    
+    I915_GEM_DOMAIN_CPU is very expensive to wait for -- it generally requires
+    clflushing the frame buffer.
+
+commit ed73651d47a5f95c3436207144b70811366e4edd
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Jun 23 10:16:35 2008 -0700
+
+    [intel-gem] Recover resources from wedged hardware.
+    
+    Clean up queues, free objects. On the next entervt, unmark the hardware to
+    let the user try again (presumably after resetting the chip). Someday we'll
+    automatically recover...
+
+commit 71d975072cf57507385bdf8e0bf4af4c23b1fceb
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Jun 23 00:53:53 2008 -0700
+
+    [intel-gem] pwrite through GTT
+    
+    Pin/copy_from_user/unpin through the GTT to eliminate clflush costs.
+    Benchmarks say this helps quite a bit.
+
+commit 01a33d742cee55a3df66a3d29c9c55b10cc9221d
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue Jun 24 09:46:51 2008 -0700
+
+    Was using irq_enable_reg in the use_mask_reg path
+
+commit 14522b3e1bd1129333af7f1a16a436a5f90388ea
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Tue Jun 24 12:38:57 2008 +0200
+
+    NV50: fix a few misc things
+
+commit 315fef7ee44f9ca565f158a6a84fd29b34e69fd8
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Tue Jun 24 10:16:52 2008 +0200
+
+    NV50: fix cursor hide/show
+
+commit e7582cfff6cb561d8bdfcd640d6843cdbb6b3391
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Tue Jun 24 09:41:13 2008 +0200
+
+    NV50: These are actually errors.
+
+commit 472981a4a952e551a581e5296a575a51d4f02e3d
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Jun 23 22:03:33 2008 -0700
+
+    [intel-gem] Include drm_compat.h to get kmap_atomic_prot_pfn
+
+commit 020a59e46ca1d89c98a3e309b6e5571354115133
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Jun 23 22:03:06 2008 -0700
+
+    drm_compat: it's CONFIG_HIGHMEM, not CONFIG_HIMEM
+    
+    A mis-spelled config option (was it spelled that way in the past?)
+    eliminated kmap_atomic_prot_pfn from core DRM.
+
+commit 5072a2911e134bb3fec06a6d7011a92e714a9953
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Tue Jun 24 00:00:02 2008 +0200
+
+    NV50: fix some misc bugs
+
+commit 246b41fea462a3b1669c0e3f9fe7f6077a479832
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Mon Jun 23 22:59:17 2008 +0200
+
+    [modesetting-101] update mode count after fill_modes.
+    
+    - This avoids returning with a mode count of 0, thus not allocating space for the 2nd ioctl.
+
+commit f9dad8cc22994e0e4671d14b3ee721e4b5777a68
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Mon Jun 23 21:15:54 2008 +0200
+
+    libdrm: check for allocation failure
+
+commit 0a45f150669eaa2737d7485c9b68ea4c483f3048
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Mon Jun 23 20:33:32 2008 +0200
+
+    NV50: Improve set_config and fix some minor bugs.
+
+commit 52bf2e77b0ff77ab0c93fec374ccfeb9d214a464
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Jun 23 11:21:30 2008 -0700
+
+    [intel-gem] Use I915_GEM_DOMAIN_GTT in dri_gem_bo_wait_rendering.
+    
+    I915_GEM_DOMAIN_CPU is very expensive to wait for -- it generally requires
+    clflushing the frame buffer.
+
+commit 27f61d0c9364bbf8bc88a4ffceb78b645aff6680
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Jun 23 11:20:17 2008 -0700
+
+    [intel] leave interrupts disabled in ISR only on MSI again
+    
+    While debugging the 915, I tried this trick there and accidentally left it
+    set.
+
+commit 626e9ba494b46f6e8352c9e461227187f335e229
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Jun 23 10:16:35 2008 -0700
+
+    [intel-gem] Recover resources from wedged hardware.
+    
+    Clean up queues, free objects. On the next entervt, unmark the hardware to
+    let the user try again (presumably after resetting the chip). Someday we'll
+    automatically recover...
+
+commit 1c2dd9826793579d5ef6f51fb9f5470c4af95548
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Jun 23 10:07:47 2008 -0700
+
+    [intel] Switch to using IMR instead of IER
+
+commit 61caf797aeb88af42ea0d333ad3f6ba88468d37f
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Jun 23 00:53:53 2008 -0700
+
+    [intel-gem] pwrite through GTT
+    
+    Pin/copy_from_user/unpin through the GTT to eliminate clflush costs.
+    Benchmarks say this helps quite a bit.
+
+commit a0ebcbe9d490c3e1fb8212d52e6783b7d9bd9a70
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Jun 23 00:53:04 2008 -0700
+
+    [intel] allow the irq code to use either enable or mask registers
+    
+    still not sure which works best on which hardware; this will make it easier
+    to experiment.
+
+commit 30f153a7c2a9bc69e615b7fff3fb060af0e3ed83
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Jun 22 19:31:55 2008 +0200
+
+    nouveau: disable KMS for pre-NV50 even when specifically enabled
+
+commit b0b0f374432ecf84b5115130caa4697d6d1ca789
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Jun 22 19:04:22 2008 +0200
+
+    NV50: Fix a few more possible leaks.
+
+commit 7c9551a464e168279224139b70a439f985b601c9
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Jun 22 18:58:04 2008 +0200
+
+    fix typo
+
+commit e67cd7dda9d7d6d82f4026f246d07bf4c4021a57
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Jun 22 18:47:51 2008 +0200
+
+    NV50: A few minor added safeties + cleanup.
+
+commit 01e8f0ea426970859bafba72e067590df1a64eb0
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Jun 23 02:42:15 2008 +1000
+
+    nv50: oops, keep VRAM allocations aligned at 64KiB - that's our page size..
+
+commit 89cf2ee2e5b3930b36f2347f35933fc29bc42518
+Author: Ben Skeggs <skeggsb@nisroch.keine.ath.cx>
+Date:   Mon Jun 23 01:24:11 2008 +1000
+
+    nv50: use same dma object for fb/tt access
+    
+    We depend on the VM fully now for memory protection, separate DMA objects
+    for VRAM and GART are unneccesary.  However, until the next interface break
+    (soon) a client can't depend on the objects being the same and must still
+    call NV_OBJ_SET_DMA_* methods appropriately.
+
+commit 3809209349ccf12aa71c7848f0b21d77fa0a5f03
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Jun 22 17:01:30 2008 +0200
+
+    Undo something i didn't want to change.
+    
+    - I made it consistent with recent kernel fb code (maybe this is older bugged code?)
+    - Still i don't use this and i should leave it to others.
+
+commit b9ed0f995077f69ae806aae2e83085738ea5e651
+Author: Ben Skeggs <skeggsb@nisroch.keine.ath.cx>
+Date:   Mon Jun 23 01:00:42 2008 +1000
+
+    nouveau: allocate drm-use vram buffers from end of vram.
+    
+    This avoids seeing garbage from engine setup etc before X gets around
+    to pointing the CRTCs at a new scanout buffer.  Not actually a noticable
+    problem before G80 as PRAMIN is forced to the end of VRAM by the hardware
+    already.
+
+commit 473a1997ace1a9fb545d0457549e50d17eb36175
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Jun 22 16:29:00 2008 +0200
+
+    NV50: Initial import of kernel modesetting.
+
+commit 11f2a2ed6f854e7b461a98408df54167e9b9566d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Jun 22 18:25:22 2008 +1000
+
+    agp: use true/false instead of TRUE/FALSE
+
+commit 207f701e1affa18b0d54e09f7bf8b6447cb16258
+Author: Alex Deucher <alex@botch2.com>
+Date:   Sat Jun 21 10:46:55 2008 -0400
+
+    RADEON: 0x1002 0x5657 is actually an RV410
+    
+    See bug 14289
+
+commit a369bf0e575697308690f532576caf652e42b4cb
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sat Jun 21 00:33:07 2008 -0700
+
+    [intel] Use IMR instead of IER to pend interrupts during ISR
+    
+    Noting that the interrupt mask register was more reliable than the interrupt
+    enable register for managing interrupts in user_irq_on/user_irq_off, this
+    patch replaces the remaining IER frobbing with IMR instead.
+    
+    The test which exposes IER related failures is:
+    
+    $ glxgears & glxgears & glxgears
+    (reposition the glxgears windows away from the upper left corner)
+    $ while :; do x11perf -rect100 -reps 800 -repeat 1; sleep 1; done &
+    $ while :; do runoa; runet; done &
+
+commit 8be6ec491f7b9c633a426a34006ea4ff5a3f8392
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sat Jun 21 00:13:18 2008 -0700
+
+    [intel-gem] Add /proc/dri/*/i915_gem_interrupt
+    
+    This tracks most of the interrupt-related status, including the
+    interrupt registers in the chip and the sequence number variables.
+
+commit 33114e4a1167ac79cb53043e77c16cc7fe40a640
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sat Jun 21 00:12:21 2008 -0700
+
+    [intel] Count received interrupts
+    
+    Another patch adds this to a /proc/dri file for debugging and monitoring.
+
+commit f4bd566e0bead0904c38bb3a526eb9b35b215ff5
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sat Jun 21 00:10:10 2008 -0700
+
+    [intel-gem] Remove unused variable.
+
+commit 54817317e9dd8a791418f97503fe574038dbe4b9
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 20 21:10:42 2008 -0700
+
+    [intel-gem] Use polling in i915_gem_idle instead of interrupts.
+    
+    While waiting for the hardware to idle on leavevt or lastclose, poll
+    for the sync sequence number instead of waiting for an interrupt. This
+    allows the code to bail if the hardware hangs for some reason. Also, this
+    avoids issues with signals as the exisiting wait function is interruptible.
+
+commit 71b1623e22c54d42837840a1d0479127a5049caf
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 20 21:07:46 2008 -0700
+
+    [intel-gem] Add intel-specific /proc entries to help monitor gem operation
+    
+    This adds gem_active, gem_flushing, gem_inactive, gem_request and gem_seqno
+    entries to monitor gem operation and help debug issues.
+
+commit 2bd9799e4cf0d778e46453422157143e36274062
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 20 16:40:14 2008 -0700
+
+    Add device-specific proc_init and proc_cleanup hooks
+    
+    This allows device drivers to add proc files
+
+commit 918420deefb978d4e572121b4273d717bdbfde8e
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 20 00:21:37 2008 -0700
+
+    [intel-gem] Use shmem_getpage instead of find_or_create_page
+    
+    find_or_create_page doesn't quite set up pages correctly; any newly created
+    pages aren't hooked into the shmem object quite right; user space mmaps of
+    those pages end up mapping pages full of zeros which then get written to the
+    real pages inappropriately. This patch requires that the kernel export
+    shmem_getpage.
+
+commit 52e5d24fae4af6f2f4a5304a516c8c5ab347a11b
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 20 00:19:42 2008 -0700
+
+    [intel-gem] Add DRM_IOCTL_I915_GEM_SW_FINISH to flag CPU writes
+    
+    When a software fallback has completed, usermode must notify the kernel so
+    that any scanout buffers can be synchronized. This ioctl should be called
+    whenever a fallback completes to flush CPU and chipset caches.
+
+commit 1915de2c56d71bbd04a7c085cbd35fbe8e33af9d
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Jun 20 15:35:47 2008 +1000
+
+    drm: only use kernel ioctl cmd when doing a core ioctl.
+    
+    Need to overhaul the mess that is driver ioctls
+
+commit 9d79944a93e8e164e2261cdeb10cbd49ff8f314d
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Jun 20 15:35:16 2008 +1000
+
+    r300: fix warning
+
+commit 8712f0a17bb135d4ad3eb85b30f47c561cf9c148
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Jun 20 12:03:41 2008 +1000
+
+    drm: fix the ioctl to not believe userspace.
+    
+    believing userspace causes oopses
+
+commit f58e21c7d056017340dc0ecac7e53dee2b33fe3b
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Wed Jun 18 16:49:51 2008 -0700
+
+    i915:  add blanking support to intelfb
+    
+    Got tired of not having my LCD actually turn off when I left the machine at the
+    console.
+
+commit 57b8837b4eb3b4972390680ad8042cd6920bf003
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Wed Jun 18 15:31:48 2008 -0700
+
+    i915: cleanup PCI state before disabling MSI
+    
+    Core MSI code will BUG() if an interrupt handler is still registered when
+    pci_disable_msi() is called.
+
+commit 86accbcb344ff25fbb47a788bb0f7464b5cd797f
+Merge: c843d47 e7424e4
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Wed Jun 18 15:25:54 2008 -0700
+
+    Merge commit 'origin/drm-gem' into modesetting-gem
+    
+    Lots of conflicts, seems to load ok, but I'm sure some bugs snuck in.
+    
+    Conflicts:
+    
+    	linux-core/drmP.h
+    	linux-core/drm_lock.c
+    	linux-core/i915_gem.c
+    	shared-core/drm.h
+    	shared-core/i915_dma.c
+    	shared-core/i915_drv.h
+    	shared-core/i915_irq.c
+
+commit c843d47b906e57fb3002af4a609d3cb95c5e195d
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Wed Jun 18 14:51:46 2008 -0700
+
+    i915: use WC mapping for framebuffer screen_base
+
+commit 241ff808b0f7368e3988d51d2ea3775adb75b6f4
+Merge: 4a2e29b 7010d50
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Wed Jun 18 14:01:47 2008 -0700
+
+    Merge branch 'modesetting-101' into modesetting-gem
+
+commit 7010d500072977f63a0bac08f2141d69dbd19595
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Wed Jun 18 13:57:39 2008 -0700
+
+    i915: switch back to fbcon on panic
+    
+    Normally when X is running, panic messages will be invisible and the machine
+    will just appear to hard hang.  This patch adds support for switching back to
+    the fbcon framebuffer on panic (through the use of a panic notifier
+    registration) so we can see what happened.
+    
+    Note that in order to be really useful, X will have to run its VT in something
+    other than KD_GRAPHICS mode.  Also, not all kernel errors result in panics,
+    some go through BUG() which may trigger another type of event, not resulting in
+    a switch.
+
+commit 00f549bd5f40d9ad6ec7164cd01646ed468b9a4a
+Author: Zhenyu Wang <zhenyu.z.wang@intel.com>
+Date:   Wed Jun 18 14:19:38 2008 +0800
+
+    i915: Add support for Intel 4 series chipsets
+    
+    Signed-off-by: Zhenyu Wang <zhenyu.z.wang@intel.com>
+
+commit e7424e4580159b0ac3e232674dff5c862e851dff
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jun 16 15:15:02 2008 -0700
+
+    [intel] Quirk away MSI support on 945G/GM.
+    
+    The PCI caps register reports MSI support even though it isn't really there.
+
+commit c847271179da382af52a6874e2edec586b88af75
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jun 16 13:09:31 2008 -0700
+
+    [linux] Use the device's irq for handler setup instead of stale dev->irq.
+    
+    This fixes registration when MSI is set up after the stub function fills in
+    dev->irq.  Otherwise /proc/interrupts would report attachment to the fasteoi
+    interrupt.  dev->irq is still exposed (and updated at IRQ setup)
+    for the drivers that use it for whatever reason.
+
+commit 59112c9e521d1543e8b76635ef223e7f29d35e6a
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sun Jun 15 20:18:29 2008 +0200
+
+    radeon: *really* fix screen corruption thanks to Lukasz Krotowski
+
+commit 6f8cc957034a887a9cbd576c1af9922862f6a7a7
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sun Jun 15 19:31:02 2008 +0200
+
+    radeon: actualy try to fix the corruption
+
+commit 9dd58d6568702358bfb3d6d1b6459092cf77ae91
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sun Jun 15 18:49:47 2008 +0200
+
+    radeon: fix screen corruption introduced by last patch
+
+commit 3e48e144992fb11b31875989d45bc8a7c041cdef
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 13 19:49:47 2008 -0700
+
+    [intel-gem] Execute MI_FLUSH in leavevt_ioctl
+    
+    In leavevt_ioctl, queue an MI_FLUSH and then block waiting for it to
+    complete. This will empty the active and flushing lists. That leaves only
+    the inactive list to evict.
+
+commit 19c3418848ccdbb163cd16b354b14b0559813d6c
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 13 19:47:23 2008 -0700
+
+    [intel-gem] inactive list may contain objects in CPU write domain
+    
+    Pin/unpin need to know whether to remove/add objects from the inactive list,
+    inactive objects cannot be in any GPU write domain as those would be on the
+    flushing list instead. However, inactive objects may be in the CPU write
+    domain.
+
+commit 93c2871eccc1abde0d88ea439cf963c4895a26fc
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 13 19:43:40 2008 -0700
+
+    [intel-gem] BUG_ON active objects in gem_object_unbind
+    
+    Now that gem_object_unbind waits for rendering to complete, objects should
+    not be active when they are being pulled from the GTT. BUG_ON if this is
+    broken.
+
+commit 68856b619bc1a2e91e67764911c8af4e2466fad9
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 13 19:40:16 2008 -0700
+
+    [intel-gem] Debugging -- verify inactive list invariants
+    
+    Inactive list elements may not be pinned, active or have non-CPU write
+    domains.
+
+commit 732b1960742042eb33f49c2b3cdd2d36eadbc920
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 13 19:37:44 2008 -0700
+
+    [intel-gem] whitespace fixes
+
+commit a7139cb8511a9d31d9f79bcaae62020d30e09f90
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 13 19:35:22 2008 -0700
+
+    [intel-gem] show total GTT space in /proc/dri/*/gem_objects
+
+commit 73bc18cad8d1c6b4481a199cebf7f0a28d19c2bb
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 13 17:06:35 2008 -0700
+
+    [intel-gem] Wait for rendering to complete before unbinding.
+    
+    Moving to the CPU domain doesn't ensure that rendering is finished, the
+    buffer may still be in use as a texture or other data source.
+
+commit 8b9ab108ec1f2ba2b503f713769c4946849b3cb2
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 13 16:03:22 2008 -0700
+
+    [libdrm] Restart all ioctls on signal receipt
+    
+    Receiving a signal should be ignored by the library, so just restart any
+    ioctl which returns EINTR or EAGAIN.
+
+commit 217beb9c8de01417ac6219b54bd25046da6d4c7a
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 13 15:43:02 2008 -0700
+
+    [intel-gem] add gtt and pin counts to /proc/dri/*/gem_objects
+    
+    Not quite portable, but these are useful for intel. Some more general
+    mechanism could be done...
+
+commit 4086cdb6550a4e957fd436c77a6260204e026538
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 13 15:38:13 2008 -0700
+
+    [intel-gem] Left the last exec buffer pinned. oops.
+    
+    Loop end variable 'pinned' was set one too low.
+
+commit 29ffa0017d002f9e74de42817b962b6ca2e5f20a
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Fri Jun 13 17:41:20 2008 -0400
+
+    [FreeBSD] Fix another lock leak
+    
+    Reported by vehemens
+
+commit baf521369478eff2842b99feda16f9d145402d27
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 13 14:28:18 2008 -0700
+
+    [intel-gem] Pin objects during execbuffer
+    
+    Pinning the objects avoids accidentally evicting them while binding
+    other objects.
+
+commit ced9ebf64543b4d64a38feee3293040af953acc0
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 13 12:06:13 2008 -0700
+
+    [intel-gem] throttle based on frames rather than time. Reduces jitter.
+    
+    Record the last execbuffer sequence for each client.
+    Record that sequence in the throttle ioctl as the 'throttle sequence'.
+    Wait for the last throttle sequence in the throttle ioctl.
+
+commit 6b2cba1ecc5f9f289b5d91e229b7f7b0999bee5b
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 13 11:33:27 2008 -0700
+
+    [intel-gem] evict_something was failing when wait_request freed objects
+    
+    When i915_wait_request clears object from the active list, it may end up
+    freeing them and not moving them to the inactive list. This ends up
+    unbinding objects from the GTT without there ever being new objects visible
+    to i915_gem_evict_something on the inactive list. As the only success
+    condition required the presence of objects on the inactive list, this would
+    falsely assume that no GTT space had been made available, and end up
+    returning -ENOMEM to the application.
+
+commit 3762c9ea6754763694b1de4df3acd9dc37247f87
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 13 10:27:39 2008 -0700
+
+    [intel] Enable MSI for i915 IRQ
+
+commit 5957470ca3be6c0225985f74b1511401e02c014b
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue Jun 10 18:19:19 2008 -0700
+
+    [intel] Restructure irq to pend all work until after iir write.
+    
+    The interrupt identity register must be writen before any work occurs lest
+    we drop an interrupt on the floor. This patch just shuffles code around to
+    make sure that IIR is written as early as possible.
+
+commit 462af73149b9286a74b95b9cda5e4224ebe0dd87
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 13 09:19:30 2008 -0700
+
+    [intel-gem] Use a delayed_work instead of a timer + work_struct
+    
+    We want request retirement to occur about once a second when the request
+    queue is non-empty. This was done with a timer that queued a work_struct,
+    using a delayed_work instead makes a lot more sense.
+
+commit e5364914ac2b785f9d806c72fff8d2ae914cad61
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue Jun 10 18:11:15 2008 -0700
+
+    [intel-gem] Reorder i915_add_request to schedule work last
+    
+    i915_add_request was calling schedule_delayed_work before adding the request
+    to the list; it makes more sense to do that last.
+
+commit f378319b5627d84ca821c8e6a9f2fee612119477
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue Jun 10 17:53:32 2008 -0700
+
+    Use /bin/pwd instead of trusting shell built-in
+
+commit df4ef348c8a48cead807a42fcd315f7e422aa156
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Jun 13 10:47:33 2008 -0700
+
+    Fix i915_wait_irq in the presence of interrupt masking.
+    
+    In the short-circuit code for the breadcrumb already being new enough, we
+    need to update the sarea_priv copy of the breadcrumb just as if we had
+    waited.  Otherwise userland error checking will notice that we returned
+    too early based on its wrong information, and call wait_irq again (leading
+    to spinning until someone else comes along and updates the sarea_priv).
+    
+    This bug was hidden when we had interrupt masking disabled, such as in
+    master, since the interrupt handler would update sarea_priv.
+
+commit e558e1d7dacafa1e7f9681f1eaec072d663287de
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Jun 13 10:04:14 2008 -0700
+
+    [gem] Catch -EINTR from blocking ioctls and restart them.
+    
+    Thanks to Thomas Hellstrom for catching the issue, no thanks to the kernel
+    developer who authoritatively told me that they would get restarted on their
+    own.
+
+commit 0558d99c01c38e24e97b57ef55f66bb94a92e157
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Jun 13 09:53:36 2008 -0700
+
+    [gem] Remove the interrupt handler for retiring requests.
+    
+    This was insufficient once we started masking interrupts to only when someone
+    was waiting for them (and would thus retire requests themselves).  It was
+    replaced by the retire_timer.
+
+commit c892e26bdfcacfe7213085a08dd82e2cb7faa003
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Jun 13 09:49:05 2008 -0700
+
+    [gem] Don't require the lock in execbuf now that it's not needed for the ring.
+
+commit 00b406390649175bb432da5693bfbd3360ad21b3
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Fri Jun 13 10:02:41 2008 +0200
+
+    radeon: bump driver date to know if lockup fix is in
+
+commit 1aafbb83d97ccc78b78d5cbd311f1239a3dad11e
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Fri Jun 13 09:54:05 2008 +0200
+
+    radeon: r345xx fixe hard lockup
+    
+    This patch should fixe hard lockup and convert them in
+    softlockup (ie you can ssh the box but the gpu is busted
+    and we are waiting in loop for it to come back to reason).
+
+commit 5d99e79c3ee027a035d4ef0a920e3fc30bd053c1
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jun 12 15:36:48 2008 -0700
+
+    xgi: Bump kernel version
+    
+    This should have been bumped when the fence interface was changed the
+    other day.  Better late than never, I suppose.
+
+commit 100d6f3f83b559be000f69c04f9e5596cdc17c77
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jun 12 13:22:40 2008 -0700
+
+    Bump libdrm version to 2.4.0.
+    
+    We need a version to depend on from the other components that require GEM and
+    the bufmgr code.  Some interfaces will be removed before the 2.4.0 release.
+
+commit cc74ac359053e95fd79d7011a2e18defcefb5c19
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jun 12 10:56:37 2008 -0700
+
+    Don't clear USER_INTERRUPT if we're not handling it.
+    
+    This fixes a regression from commit d434b64f6a760d85295e32298a9a1f3624ee1b69
+    which could cause us to fail to wake up for user interrupts if we lost a race.
+
+commit b2606e325ac02782297def5ce27028c7fe2287c8
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jun 11 16:19:23 2008 -0700
+
+    [gem] Remove the drm_client_lock_take in set_domain.
+    
+    We no longer need to use it to protect against shared ringbuffer access.
+
+commit 4a2e29bf9982165deeeabb5c585fc0a8a659f380
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Wed Jun 11 15:59:01 2008 -0700
+
+    Use GEM in modesetting
+    
+    Use GEM for ring buffer setup and framebuffer allocation.  This means reworking
+    the hardware status page stuff a bit (just use the basic range allocator for
+    vram for now) and #ifdef'ing out the TTM & DRI2 code.  Works well enough to
+    load/unload several times and display fbcon on my T61 (though there's still
+    some unexplained console corruption).
+
+commit 57b4c4c32d3b474939775042bb8a17423def446d
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jun 11 15:58:33 2008 -0700
+
+    Move the renaming of mm.c symbols to #defines in the header.
+    
+    This reduces the diff from Mesa and reduces the illegibility of what I did.
+
+commit 846d792ac10c4b2738bb5ff59e56df168b9921ff
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jun 11 15:51:17 2008 -0700
+
+    [gem] Another round of cleanups from checkpatch.pl
+
+commit a07c82183abdcde9777a456d45b7ae741ddfd44c
+Author: Alex Deucher <alex@botchco.com>
+Date:   Wed Jun 11 18:25:47 2008 -0400
+
+    RADEON: use DSTCACHE_CTLSTAT rather than RB2D_DSTCACHE_CTLSTAT
+    
+    According to the hw guys, you should use DSTCACHE_CTLSTAT to flush
+    the 2D dst cache rather than RB2D_DSTCACHE_CTLSTAT.
+
+commit 2655005762b8915d5f44d1d1ee7e6c2eb34841d7
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jun 11 14:42:40 2008 -0700
+
+    [gem] Move potentially device-specific ioctls to the intel driver.
+    
+    This is the create (may want location flags), pread/pwrite/mmap
+    (performance tuning hints), and set_domain (will 32 bits be enough for
+    everyone?) ioctls.  Left in the generic set are just flink/open/close.
+    
+    The 2D driver must be updated for this change, and API but not ABI is broken
+    for 3D.  The driver version is bumped to mark this.
+
+commit 2a35d857b35c9d30d073e2372aa302cd999321ba
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jun 11 12:20:56 2008 -0700
+
+    Remove override of drm module list in preparation for merge.
+
+commit dac3bcb414a21a77847c96740a1578f3488c774f
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jun 11 11:28:20 2008 -0700
+
+    [gem] Remove carefully-sprinkled i915_kernel_lost_context().
+    
+    They are not unnecessary since the kernel's the only thing touching the ring.
+
+commit f5412a944fa4666e25f4fa27b6ed85c21ccb65a0
+Merge: a1d9600 62a3be9
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Wed Jun 11 10:25:45 2008 -0700
+
+    Merge commit 'origin/drm-gem' into modesetting-gem
+    
+    Use new GEM based ring buffer initialization.  Still need to init GEM & use it
+    for framebuffer allocation etc.
+    
+    Conflicts:
+    
+    	shared-core/i915_dma.c
+    	shared-core/i915_drv.h
+
+commit 62a3be962f1915d17813ecbfc9544232908b44e4
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Jun 10 23:10:33 2008 -0700
+
+    [intel] Fix BUG_ON trigger in irq masking if you did on/off with irqs disabled.
+
+commit 2150da5d1a57d25d0f4bc39bb6c883d410f586d1
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Jun 10 15:30:23 2008 -0700
+
+    [gem] Manage the ringbuffer from the kernel in the GEM case.
+    
+    This requires that the X Server use the execbuf interface for buffer
+    submission, as it no longer has direct access to the ring.  This is
+    therefore a flag day for the gem interface.
+    
+    This also adds enter/leavevt ioctls for use by the X Server.  These would
+    get stubbed out in a modesetting implementation, but are required while
+    in an environment where the device's state is only managed by the DRM while
+    X has the VT.
+
+commit b535567ee95b8407d7860a4d6350df8e8fbac15a
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jun 10 22:18:14 2008 -0700
+
+    xgixp: Remove dependency on TTM fences
+
+commit a1d96007241a78dd2b4a718df8e0568fe7994c22
+Merge: c987e76 500c81d
+Author: Jesse Barnes <jbarnes@hobbes.lan>
+Date:   Tue Jun 10 17:31:54 2008 -0700
+
+    Merge commit 'origin/drm-gem' into modesetting-gem
+    
+    Passed the compile test; it's ready to ship.
+    
+    Conflicts:
+    
+    	libdrm/Makefile.am
+    	linux-core/Makefile.kernel
+    	linux-core/drmP.h
+    	linux-core/drm_memrange.c
+    	linux-core/drm_stub.c
+    	shared-core/drm.h
+    	shared-core/i915_dma.c
+    	shared-core/i915_drv.h
+    	shared-core/i915_irq.c
+
+commit 4f3da2f200577fcfbf913985246b3a4d23c6a818
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon May 12 15:58:55 2008 -0700
+
+    xgi: Fix 64-bit kernel / 32-bit user issue.
+
+commit cdd0cb0ab372ac93adc73945627f4071f86f75c0
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Jun 10 16:27:50 2008 +1000
+
+    ati_pcigart: split out the page insert function
+
+commit c987e76d953b6aecbfb69058fc4c387aa3fb33c9
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Mon Jun 9 16:20:45 2008 -0700
+
+    Add EDID quirk handling
+    
+    Port over EDID quirks from X.Org so we can handle more monitors.  This meant
+    adding size info to the drm_display_mode struct, but other than that the
+    changes were isolated to the DRM EDID handling code (as they should be).
+
+commit 4b8aecbde8e62af5370d5401d49a8ab8d089fe8e
+Author: Alex Deucher <alex@botchco.com>
+Date:   Mon Jun 9 16:58:06 2008 -0400
+
+    RADEON: Add untested support for RS400 chips
+    
+    GART setup appears to work the same as RS480 chips.
+    Also RC4xx chips are actually RS400 based, not RS480 based.
+
+commit f6982b54c96bc871df94d01abad72a501e87aa65
+Author: Alex Deucher <alex@botchco.com>
+Date:   Mon Jun 9 16:28:35 2008 -0400
+
+    RADEON: switch IGP gart to use radeon_write_agp_base()
+
+commit 63eb58040deff42e8272f1a580f7fd947af1b488
+Author: Robert Noland <rnoland@wombat.2hip.net>
+Date:   Sun Jun 8 23:46:14 2008 -0400
+
+    Fix typo in i915_suspend
+    
+    Reported by vehemens
+
+commit 116870a908edd8da02381d23694b321e8878f92e
+Author: Robert Noland <rnoland@wombat.2hip.net>
+Date:   Tue Jun 3 21:15:54 2008 -0400
+
+    I915 suspend/resume for FreeBSD
+
+commit d43f3cb0974b635c1a31b839807e5a691c44b4c6
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jun 9 05:32:41 2008 +1000
+
+    r300/r500: add hier-z regs
+
+commit 3b6ca4bf3f334341a158a9917ef117c23f145597
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Wed Jun 4 15:04:41 2008 -0400
+
+    [FreeBSD] Rework ati_pcigart.c
+    
+    This is mostly just a diff reduction with the linux version.
+    I'm not convinced that it will make anything better.
+
+commit 96141bd33c0d6c4b95a2adb668538ffc1103cc18
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Thu Jun 5 12:46:39 2008 -0400
+
+    [FreeBSD] We need to request busmastering support.
+    
+    This seems to be the key to getting at least some radeon
+    cards working.  Most, if not all drivers need it enabled,
+    so just request it once the driver has attached.
+
+commit 6d6921719c7d475856199ddbe88bbe11fc882ba6
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Tue Jun 3 16:21:13 2008 -0400
+
+    [FreeBSD] Incorporate vblank fixes for bsd.
+
+commit ec3d9960219e49e1bd24a097e04c3da88e2fcc53
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Tue Jun 3 13:02:38 2008 -0400
+
+    [FreeBSD] Forgot to call mtx_destroy on all the locks at unload.
+
+commit 93c57ff4e5d9f62be0a353222fef564dd9e59e39
+Author: Robert Noland <rnoland@wombat.2hip.net>
+Date:   Mon Jun 2 19:35:00 2008 -0400
+
+    [FreeBSD] Remove the locks in the vblank_disable_fn
+    
+    They are recursive and causing panics with witness enabled.
+
+commit fc74c2e9d65dbd0c611e1610886df098c6e3273b
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Mon Jun 2 13:12:59 2008 -0400
+
+    [FreeBSD] Go back to using vbl_lock and move init/destroy to load/unload.
+
+commit 500c81d194115fb3c4b97d742519689478eeb4e8
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Jun 6 17:13:16 2008 -0700
+
+    [gem] Don't forget to munmap in the non-bo-reuse object-freeing case.
+
+commit c2fc142ea7e9dd651702773efbc9c3366f977aa6
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 6 21:54:38 2008 +0100
+
+        [intel] remove settable use_mi_batchbuffer_start
+    
+        The driver can know what hardware requires MI_BATCH_BUFFER vs
+        MI_BATCH_BUFFER_START; there's no reason to let user mode configure this.
+
+commit 6cd0ef06a6c2bdcede166d9a2d0434e58e4a01f2
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 6 13:26:03 2008 -0700
+
+    [intel] remove settable use_mi_batchbuffer_start
+    
+    The driver can know what hardware requires MI_BATCH_BUFFER vs
+    MI_BATCH_BUFFER_START; there's no reason to let user mode configure this.
+
+commit 9f46c6935d154743162c6239903a4a9e443907bc
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 6 12:59:52 2008 -0700
+
+    [intel-gem] Use timers to retire requests periodically.
+    
+    Without the user IRQ running constantly, there's no wakeup when the ring
+    empties to go retire requests and free buffers. Use a 1 second timer to make
+    that happen more often.
+
+commit a708106c77f74f146722fba35eae772fb554ee9a
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 6 12:58:41 2008 -0700
+
+    [intel] free the hardware status page at driver_unload
+    
+    This goes with the other hardware status page patch.
+
+commit 56a96841d01d112d7d4adfebb572016398551ba8
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Jun 6 12:57:01 2008 -0700
+
+    [intel-gem] Add explicit throttle ioctl
+    
+    Instead of throttling and execbuffer time, have the application ask to
+    throttle explicitly. This allows the throttle to happen less often, and
+    without holding the DRM lock.
+
+commit 329e0862255e8ad27e2aa4e3755421a18ea1acc5
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu Jun 5 16:05:35 2008 -0700
+
+    [libdrm/intel] Eliminate extra dri_gem_bo_bucket_entry structure
+    
+    Place the buffer reuse links right into the dri_bo_gem object.
+
+commit 5a55b48a410bb25666177c0ea8e5711ea2e3c795
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu Jun 5 15:58:55 2008 -0700
+
+    [libdrm/intel] Remove unused intel_validate_entry structure
+
+commit a919ff5d5ec2fe716cbf5c593be7cc0705499107
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu Jun 5 15:58:09 2008 -0700
+
+    [libdrm/intel] Reuse entire dri_bo_gem structure
+    
+    The code was discarding the dri_bo_gem structure and saving only the kernel
+    handle. This lost the mmap address, causing pain when the next buffer user
+    wanted to map the buffer.
+
+commit 5f5badb26f761eec87b951ce1b7b3a51a5060c50
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu Jun 5 14:09:57 2008 -0700
+
+    [intel] Allocate hardware status page at driver load time
+    
+    I couldn't get the re-allocated HWS to work on my 965GM, so I just gave up
+    and made it persist across the lifetime of the driver instead.
+
+commit 84162ccb7dc0286336292ac7f8e80678bfc11804
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu Jun 5 13:49:21 2008 -0700
+
+    Ignore X server provided mmio address
+
+commit 118baeee1820102177f4f5bb48dd2a1e3d95d21e
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu Jun 5 13:47:41 2008 -0700
+
+    [intel-gem] Dump error status on wait_request failure
+
+commit 6d4ffd12cd8d3713067adf5fa3bdcb023b0745f1
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Jun 6 16:24:27 2008 +1000
+
+    drm: fix up fb resize again
+
+commit 00bb548c6129ee712742d0e893aaa50fc65e49fc
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Jun 6 15:38:53 2008 +1000
+
+    intel: don't set the mode on the framebuffer if isn't set to scanout our framebuffer
+
+commit ec774e4d7201cf875a48cd2fb799e8e5b7f30cc8
+Merge: be501f0 03bf1fb
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Jun 6 15:21:57 2008 +1000
+
+    Merge remote branch 'origin/modesetting-101' into modesetting-101-fb
+
+commit be501f00a3c91a8ae78189577873d8a6b8ea1c67
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Jun 6 15:21:22 2008 +1000
+
+    intelfb: add multi fb paths
+
+commit e6a3a1fdadd162e3cf12e88ad13c4342f9ee23a1
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Jun 6 14:55:03 2008 +1000
+
+    intelfb: remove duplicate define
+
+commit fc08877b1759f569890665b9d24ea35d11352158
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Jun 6 14:53:34 2008 +1000
+
+    intelfb: admit fbdev is crap and punt on trying to resize to a larger fbdev.
+
+commit 8387a232a3305d10c4ac4cd08f9ebd0888944e55
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Jun 6 12:02:51 2008 +1000
+
+    intelfb: move mode sets into the intel crtcs
+    
+    better place to store them.
+
+commit 25c1bb334f3a32e3e635e9d5de1abf8abdcc87f0
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Jun 6 10:38:35 2008 +1000
+
+    drm/intel: make hotplug just be an event
+
+commit 5f94172f81120c56ba07843ff860a9e265dac1f8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Jun 6 10:31:36 2008 +1000
+
+    intel: if no spare crtc exists don't just take one.
+
+commit 03bf1fba67413f381d2a548fe08bd634a48fcc48
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Thu Jun 5 15:58:43 2008 -0700
+
+    sysfs registration/teardown fixups
+    
+    A check in drm_sysfs_connector_remove was supposed to allow it to be called
+    even with unregistered objects, to make cleanup paths a little simpler.
+    However, device_is_regsitered didn't always seem to return what we thought it
+    would, so we'd sometimes end up leaving objects lying around rather than
+    unregistering them.
+    
+    Fix this situation up by requiring devices to be registered before being
+    removed.  Any problems resulting from this change should be easier to track
+    down than the alternative (which is leaving kobjects registered after unload).
+
+commit 6905c7a29d2a3bc0e605a09b98ac02a4a50893d0
+Author: Dennis Kasprzyk <onestone@opencompositing.org>
+Date:   Thu Jun 5 17:08:44 2008 +0200
+
+    radeon: Restore software interrupt on resume.
+    
+    Fixes performance drop after suspend/resume on some systems.
+
+commit d198e9b091e919a90895e551e48fb30d36a849ef
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jun 5 08:44:46 2008 -0700
+
+    Add a function to bufmgr_fake to evict all buffers in the GTT.
+    
+    This will be used by the X Server for VT switch.
+
+commit d9ead89c79732124f54b4a9dfe698bc7aad7faee
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jun 5 16:32:41 2008 +1000
+
+    drm/modeset: add more debugging and fixup some fb enable/disabe bits
+
+commit b31adb005afc5553fb30aa2c1710faee299bc730
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jun 5 15:55:03 2008 +1000
+
+    drm/modesetting: more fb interface cleanups
+
+commit efcf066eff690887ace33c0f1192168a31115805
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jun 5 15:21:07 2008 +1000
+
+    drm/modesetting: attempt to make fb code more sane
+
+commit f73e54bbf0b97a8f5184ede64d4f263020d623ee
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jun 5 13:40:08 2008 +1000
+
+    drm: modesetting unify the hotplug init paths a lot.
+    
+    remove fb callbacks, just probe into the driver to sort it out
+
+commit 56a1293184e4f628498c88e38e1601349b05ad93
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jun 5 11:43:48 2008 +1000
+
+    modesetting: fix fb clearing up
+
+commit 1495dd31d60e588743f20a9e470c8b0045313e7c
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jun 5 11:24:57 2008 +1000
+
+    modesetting: use surface width height for buffer allocs
+
+commit 1d980669e6d448e15c61507d81552c532b93bcd8
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jun 5 11:20:52 2008 +1000
+
+    modesetting: add surface width/heights
+
+commit 967bd219116a4f20aec828b890a225d2f92afd0b
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jun 5 11:11:22 2008 +1000
+
+    modesetting: initial attempt at debonging fb
+
+commit e90716671d7a5dabf13c22a339f750dba77f438a
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Wed Jun 4 12:50:03 2008 -0700
+
+    i915: use kzalloc to allocate intel_output for lvds
+    
+    Better to initialize all the struct fields to 0.  Also more consistent with
+    other output init routines.
+
+commit 52183fb05b8f8db0705e230fc0b8a436512759a1
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Wed Jun 4 09:38:44 2008 -0700
+
+    Fix crash in drm_mode_connector_update_edid_property
+    
+    We need to initialize the edid_blob_ptr to NULL when we init a connector,
+    otherwise drm_mode_connector_update_edid_property may think there's a valid
+    EDID lying around and try to destroy it, causing a crash.
+
+commit cf1964f971cc298ece91064953f7d00ed13e541d
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jun 4 15:17:13 2008 +1000
+
+    drm: fix hotplug oops
+
+commit a8725d95bc2b51500ff56c4e6365408d15f3bc6e
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jun 4 15:17:00 2008 +1000
+
+    intel: report a known connector
+
+commit 0903de0c8f7d2566c1bd65600142a71572eec07e
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue Jun 3 21:49:51 2008 -0700
+
+    Drop struct_mutex while waiting in drm_client_lock_take
+    
+    struct_mutex cannot be held while blocking on DRM lock.
+
+commit 9390bdab7cce67ad0eb8103da8782aec7bfad017
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jun 4 13:53:33 2008 +1000
+
+    libdrm: shouldn't rely on this
+
+commit 382aa3ceeb79165a9bdddc8f944de131c8cbf2dd
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jun 4 13:49:43 2008 +1000
+
+    drm: introduce generation counter to interface.
+    
+    Idea being if you want to add new crtc/output/encoder dynamically later,
+    you just increase the generation counter and userspace should re-read
+    all the resources
+
+commit 9f31bd09c1e748f72a30f6a0861cd72d93258992
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jun 4 13:16:49 2008 +1000
+
+    drm/sysfs: don't try an unregister if not registered
+
+commit 8e4c61e52651c47f3d9fbbe5e80455baff0de2bb
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jun 4 13:09:20 2008 +1000
+
+    intel: use kzalloc
+
+commit 8690ad8ae0778f2ccd8b428e1c6a8614ebc51707
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jun 4 13:09:05 2008 +1000
+
+    drm/modesetting: bo not used anymore
+
+commit 58aca7485a4cd9fcccc6e4044325048abcc2f9c7
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jun 4 13:03:23 2008 +1000
+
+    drm: remove sysfs in driver for now.. should probably be in helper
+
+commit fd27591c6cadd2a868f4110b8993a86c37837d3e
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jun 4 13:00:31 2008 +1000
+
+    drm/modesetting: pass object handle to driver !bo
+
+commit 76a44f14d6339e5bc0c936ef4a360f6c152511bd
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jun 4 11:59:28 2008 +1000
+
+    drm/modesetting: overhaul the fb create/delete.
+    
+    Move TTM code into the driver
+
+commit 40229b6ad539cebad5ebe8ca373796ca2422efdb
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jun 4 10:34:34 2008 +1000
+
+    drm: make mode comparison more betterer.
+    
+    This compares the clocks after converting to fb pico timings so we
+    get the same answer if the X and fb modes are the same.
+
+commit 8a3b510405f9fc6c920c456e3481bddd296a2af7
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Jun 3 14:34:54 2008 -0700
+
+    Fix libdrm to actually include the new code instead of just building it.
+
+commit c4857429c716f35e1fa054d1990cae28055d96d7
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Jun 3 10:20:49 2008 -0700
+
+    Fix and hook up bufmgr code to the build.
+
+commit 6a9eb08a872ac0388aad2c901888888964f14559
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Jun 3 09:27:37 2008 -0700
+
+    Import bufmgr code to libdrm.  Not yet hooked up to the build.
+
+commit ba7263b8c2f8c14c647da725ecbc73fcd456d63c
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Tue Jun 3 11:28:10 2008 +0200
+
+    vblank: Don't wait or update the counter while the CRTC is supposedly disabled.
+    
+    Without kernel modesetting, this requires cooperation of the userspace
+    modesetting driver. We may have to leave the vblank interrupt enabled otherwise
+    to avoid problems.
+
+commit 237172b7670611b36d92be3b92983674846f6564
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Tue Jun 3 11:28:10 2008 +0200
+
+    vblank: Clean up compensation for spurious wraparounds of driver counter.
+    
+    Only compensate when the driver counter actually appears to have moved
+    backwards.
+    
+    The compensation deltas need to be incremental instead of absolute; drop the
+    vblank_offset field and just use atomic_sub().
+
+commit d1dcb2b32e0c51d7cbcaa2ba1e0544452cf8f47b
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Tue Jun 3 11:28:09 2008 +0200
+
+    vblank: Special-case driver vblank counter going back by 1.
+    
+    Turns out the radeon driver is affected by the same problem that prompted i915
+    to revert to less useful counter flipping at the end of the vblank interval. In
+    the long term, we can hopefully implement more reliable methods to achieve
+    counter flipping at the beginning of vblank, but otherwise this should be an
+    acceptable workaround.
+
+commit 0144ebeb8a713b1420d35004075037cd4b0495a1
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Tue Jun 3 11:28:09 2008 +0200
+
+    vblank: Don't return current sequence number and time if interrupted by signal.
+
+commit 6b520005c6714d8a8afa68b8a43065a40da298cc
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Tue Jun 3 11:27:39 2008 +0200
+
+    Revert "don't copy back if an error was returned."
+    
+    This reverts commit 6671ad1917698b6174a1af314b63b3800d75248c.
+    
+    The vblank ioctl needs to update the userspace parameters when interrupted by
+    a signal, which was prevented by this. Let's see if this breaks other ioctls...
+
+commit d5ae19ebcf2dc6402872e0575b5786b6e8117b6f
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Jun 3 12:42:49 2008 +1000
+
+    drm: sg alloc should write back the handle to userspace
+
+commit f1e12d40af6ce9b6159c28529bcbdc877c565c82
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Jun 3 12:40:54 2008 +1000
+
+    drm/ati_pcigart: use proper page mapping function
+    
+    This should be pci_map_page not pci_map_single
+
+commit 867c2bb461e4bf7765fdbf502f625b739ceecb96
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Jun 2 12:37:10 2008 -0700
+
+    [intel-gem] reloc_and_validate_object → object_bind_and_relocate
+    
+    Just renaming this function and related parameters to match terminology used
+    elsewhere in the driver.
+
+commit 1cb2940a252f970bad0f88a5f14b4d39ea53ef1f
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Jun 2 10:59:15 2008 -0700
+
+    [intel-gem] Propagate set_domain errors.
+    
+    set_domain can block waiting for rendering to complete. If that process is
+    interrupted by a signal, it can return -EINTR. Catch this error in all
+    callers and correctly deal with the result.
+
+commit 3ed17803d826b10f8f94d09acf12877e9738823c
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Mon Jun 2 10:44:29 2008 +0100
+
+    more checks for NULL encoder so we don't segfault.
+
+commit dc022084cda0a5558f033c3caa657d5af84ef544
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Mon Jun 2 10:03:28 2008 +0100
+
+    Fix warnings
+
+commit 149b17311ad5f117e8f53a7a8cc032e369b95ed2
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Jun 2 16:45:44 2008 +1000
+
+    drm: initial mode object groups.
+    
+    This creates a default group attached to the legacy drm minor nodes.
+    
+    It covers all the objects in the set. make set resources only return
+    objects for this set. Need to fix up other functions to only work on
+    objects in their allowed set.
+
+commit 50d3e5bd020d0b6877a5fef441408f16e31121cd
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Jun 2 16:19:21 2008 +1000
+
+    drm/modesetting: redo object handles around a core object.
+    
+    handle crtc/encoders/connectors/fb/mode/property/blob using this system.
+
+commit c321bc4f9280fe93e2df2b1c47e13cba7499e486
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Jun 2 14:33:42 2008 +1000
+
+    drm: only report framebuffers available on this fd.
+    
+    Not 100% sure this is a good idea, but I think I'd rather things
+    communicate with bo handles not fb ids.
+
+commit 4e7b24639808e5e1e2c05143028db1a3bc2812e9
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Jun 2 14:04:41 2008 +1000
+
+    drm: add functions to get/set gamma ramps
+
+commit 416754f1cc5a55b1c6b2d2fa2f501b18462d62e6
+Author: Robert Noland <rnoland@wombat.2hip.net>
+Date:   Sun Jun 1 19:34:29 2008 -0400
+
+    [FreeBSD] Declare vblank_disable_fn callout MPSAFE.
+
+commit 4ce47fd328cd885d66abdd42db1f7c054bd44498
+Author: Robert Noland <rnoland@wombat.2hip.net>
+Date:   Sun Jun 1 16:17:31 2008 -0400
+
+    [FreeBSD] Get rid of vbl_lock and re-use irq_lock.
+
+commit eba6cdc936cb33d929997ccb9bade6f75bb40670
+Merge: efb48c6 7fec6c0
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Jun 2 12:58:10 2008 +1000
+
+    Merge branch 'modesetting-101-encoders' into modesetting-101
+
+commit 7fec6c0e2a2457925b88ed3bd70d9defde77b81b
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Jun 2 12:57:09 2008 +1000
+
+    drm: fixup encoder picking in set_config stage
+
+commit 46c78a2223802b9105a87b7125fd4872ab69c4ca
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Jun 2 11:44:35 2008 +1000
+
+    drm/modesetting: add best encoder finding for modesetting
+    
+    This asks the driver to suggest the best encoder for the connector
+    during the pick crtcs stage.
+    
+    Need to also do this during mode setting stages
+
+commit 0dd000b578adec6ff101c957bce7dc9a32b76713
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Jun 2 11:12:28 2008 +1000
+
+    drm/modesetting: move some connector functions to helper.
+    
+    Migrated the output mode collection into the helper.
+
+commit dba95ec34315d62934ff0e493e085aa6a03cde7c
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Jun 2 10:41:12 2008 +1000
+
+    drm: fixup some interfaces so test code works again
+
+commit e439e74776b215d70d8e34e8aa9cea22179dcbc6
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Jun 2 10:05:54 2008 +1000
+
+    drm/modesetting: another re-org of some internals.
+    
+    Move dpms into the helper functions.
+    Move crtc into the encoder.
+    Move disable unused functions into the helper.
+
+commit ac4da869285173ad0ac947bdf41ffe10efe21c05
+Author: Robert Noland <rnoland@wombat.2hip.net>
+Date:   Sun Jun 1 12:56:34 2008 -0400
+
+    [FreeBSD] Add symlink for radeon_microcode.h
+
+commit 2186f9f6eff4b3b4f605d35a030c0910646865ab
+Author: Robert Noland <rnoland@wombat.2hip.net>
+Date:   Sun Jun 1 12:49:20 2008 -0400
+
+    [FreeBSD] Call drm_vblank_cleanup during irq uninstall
+    
+    I needed to re-arrange some functions for this.
+    Also needed to call DRM_SPINUNINIT on the vbl_lock during cleanup.
+
+commit a12cbf8aa5cf21d30bd2c798ff059cb1ba92b382
+Author: Alex Deucher <alex@botchco.com>
+Date:   Fri May 30 18:20:01 2008 -0400
+
+    RADEON: fix typo in last commit
+
+commit 461bfa3da6f85b85c21cd84f81bb4eefa5481418
+Merge: 50bce2b 6e8a2cf
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri May 30 14:42:08 2008 -0700
+
+    Merge commit 'origin/master' into drm-gem
+    
+    Conflicts:
+    
+    	linux-core/Makefile.kernel
+    	shared-core/i915_drv.h
+    	shared-core/nouveau_state.c
+
+commit 50bce2bc625deb439dd61f504496dddd0cd4f572
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri May 30 13:47:34 2008 -0700
+
+    [intel-gem] Only update obj->write_domain if we're actually changing it.
+    
+    The problem was revealed where on 965, the display list vertex buffer would see:
+    
+    create		      -> (CPU, CPU)
+    set_domain (CPU, CPU) -> (CPU, CPU)
+    set_comain (CPU, 0)   -> (CPU, 0) (no clflush occurred)
+    execbuf	   (GPU, 0)   -> (CPU+GPU, 0) (still no clflush)
+    
+    instead of:
+    
+    create		      -> (CPU, CPU)
+    set_domain (CPU, CPU) -> (CPU, CPU)
+    set_comain (CPU, 0)   -> (CPU, CPU)
+    execbuf	   (GPU, 0)   -> (CPU+GPU, 0) (clflushed)
+
+commit 4f92ed34270ae4afaa0ddba38d227c6e359bcc98
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri May 30 10:04:22 2008 -0700
+
+    [intel-gem] Add an option to check GTT versus CPU coherency at execbuf time.
+
+commit efb48c6cf7bbb57e7b2ea6ce7671905e84384963
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Fri May 30 14:23:04 2008 -0400
+
+    Fix ivch i2c read function to use the "special" i2c format.
+
+commit 6e8a2cff66ac0d6afaf9bb233bc81449c2014078
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri May 30 20:27:31 2008 +1000
+
+    r500: attempt to make AGP work by programming agp base in the MC correctly
+
+commit 5d47185eb69d73dd7e6ee3ddde4d0c7642c2d5b7
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 30 15:32:58 2008 +1000
+
+    drm: switch possible crtc/clones over to encoders
+
+commit 30fc88fdf9084ffcb9e76acbdee95d9691ac4ba4
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 30 15:18:07 2008 +1000
+
+    modesetting: drop crtcs/clones from the connectors
+
+commit 9d38448ed33aaff324cc4bbe1e0878593e97d07d
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 30 15:03:12 2008 +1000
+
+    modesetting: the great renaming.
+    
+    Okay we have crtc, encoder and connectors.
+    
+    No more outputs exposed beyond driver internals
+    
+    I've broken intel tv connector stuff.
+    Really for TV we should have one TV connector, with a sub property for the
+    type of signal been driven over it
+
+commit 6aeef92c0cad784a5019ea90d97ab81f4e51fdd9
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 30 13:57:27 2008 +1000
+
+    drm: attach an encoder.
+    
+    Time to do some renaming on the connectors I think
+
+commit 1c4b25a2b1c31df190eab173128702d1b5871906
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 30 13:49:39 2008 +1000
+
+    drm: fix a couple of bugs in the encoder return to userspace
+
+commit 9239cf511f65a43eb578fbb6a7c5255e05db2101
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 30 13:31:16 2008 +1000
+
+    drm: add encoder attach/detach
+
+commit 4403c59b76c55c9c430decac8bc76e4230a253ab
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 30 13:22:51 2008 +1000
+
+    tests: add basic encoder reading to test
+
+commit 514147e3f3180b46d3e9e6e906580fe232d4ad26
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 30 12:29:45 2008 +1000
+
+    drm: add encoder free function
+
+commit 1542492b797fbdf4970e0213827e2f9887d6174d
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 30 12:24:19 2008 +1000
+
+    drm: init the encoder list/count
+
+commit 6b5592790dcaed503bec8f441eab52d22b76d7c1
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 30 12:20:36 2008 +1000
+
+    drm: add red hat copyright.
+
+commit b72419a8f74bfb1d3b6a5ca1d8f6dfa3c6a84e86
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 30 12:19:13 2008 +1000
+
+    drm: add encoder ids to the output handling
+
+commit fae2c17b313e2838652c32ea4a576172b4063639
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 30 12:14:44 2008 +1000
+
+    drm: add more encoder interfaces
+
+commit 16a8f824face8067029ef6f3d10f1723d87b23f6
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 30 12:10:01 2008 +1000
+
+    libdrm: add encoder retrival
+
+commit 8ae82f3a2feb8b8fe56214c4c9e806bf1f87cbf8
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 30 12:03:36 2008 +1000
+
+    drm: add encoder / get encoder to the modesetting resources interface
+
+commit 6b970f193b69a912183dcbf85b9dc51ec99aeefe
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 30 11:48:41 2008 +1000
+
+    drm: remove unused init func from outputs
+
+commit 9654c776fda55d6420a14449bf2e274839c444a6
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 30 11:47:57 2008 +1000
+
+    drm/modesetting: add initial encoder structures and setup functions
+
+commit 98c5cf7f6fc51f1a8f5f90b3895009cd38dd8f22
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 30 11:25:41 2008 +1000
+
+    modesetting: reorganise out crtc/outputs are allocated.
+    
+    Use subclassing from the drivers to allocate the objects. This saves
+    two objects being allocated for each crtc/output and generally makes
+    exit paths cleaner.
+
+commit 3b1e4e6dc38029e697afb8e6ec81ebbed7adf442
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu May 29 12:53:13 2008 -0700
+
+    [intel-gem] Write the presumed_offset back out after updating it.
+    
+    Otherwise, 965 constant state buffers get re-relocated every exec.  Ouch.
+
+commit 19ff3366e4ed591741af4bcf49991823115bdb17
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue May 27 16:49:49 2008 -0700
+
+    [intel-gem] Clean up active/inactive/flushing list debugging.
+
+commit df8cd54286fbae5903d8ede390ec4a11cb6c4b6c
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu May 29 14:02:14 2008 +1000
+
+    modesetting: reorganise code into core and helper functions.
+    
+    This splits a lot of the core modesetting code out into a file of
+    helper functions, that are only called from themselves and/or the driver.
+    
+    The driver gets called into more often or can call these functions from itself
+    if it is a helper using driver.
+    
+    I've broken framebuffer resize doing this but I didn't like the API for that
+    in any case.
+
+commit ee5afc63428488c9c39e5ecd7d8cdc646a7b65b7
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu May 29 13:58:26 2008 +1000
+
+    modeset: disable radeon ms by default
+    
+    as I'm going to break it.
+
+commit 3a3f39d144c47ce937d6924d344a9ad3d82a2db5
+Merge: 070755a 5b86823
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Wed May 28 21:01:18 2008 +0100
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+    
+    Conflicts:
+    
+    	shared-core/i915_dma.c
+    	shared-core/i915_drv.h
+
+commit 070755af3fecefb6b09e8ef98738e4926e4148a7
+Author: Jesse Barnes <jbarnes@hobbes.lan>
+Date:   Wed May 28 08:24:42 2008 -0700
+
+    i915: unmap BIOS when we're done with it
+    
+    At the moment, we only read it at startup time, so we can just unmap it there
+    when we're done.
+
+commit 5b86823fa36513f521412a38c240cb18f02dcc9a
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed May 28 11:12:57 2008 +1000
+
+    radeon: split microcode out into a separate header file.
+
+commit e10502002f0ebb2b56b19384b2f2eae7a7a84512
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue May 27 17:50:39 2008 -0700
+
+    [intel-gem] Replace idlelock usage with real lock acquisition.
+
+commit 0c8a8db1b6c97dd0fad18bd72a1bc56e2a673a10
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed May 28 10:28:13 2008 +1000
+
+    i915: fix BSD bh, DRI2 not uses anywhere else
+
+commit c06096d34fa4afb3f24d610ccfb385f92dbc1e83
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed May 28 10:02:20 2008 +1000
+
+    radeon: bump release date/version for r500 3D support
+
+commit 59c953245c583bb1062d3a8409a9b615a3a19654
+Author: Alex Deucher <alex@botch2.com>
+Date:   Tue May 27 18:33:33 2008 -0400
+
+    RADEON: add get_param for number of GB pipes
+
+commit df127c303d944720937fa6b54a8a9f84bc2fe518
+Author: Owain Ainsworth <oga@stephanie.cybernetseraph.org>
+Date:   Tue May 27 15:12:35 2008 -0700
+
+    [BSD] Move unlock in drm_vm.c from accidental platform #ifdeffing.
+    
+    Also remove an unreachable unlock.
+
+commit cc7ad27fe414cdf87b7561778a766a012541f116
+Author: Owain Ainsworth <oga@stephanie.cybernetseraph.org>
+Date:   Tue May 27 15:11:25 2008 -0700
+
+    [BSD] Fix lock leak in drm_update_draw malloc failure path.
+
+commit 9a2ae28fbe0e1e5cce0a5d89fbcc84fbdba1206e
+Author: Owain Ainsworth <oga@stephanie.cybernetseraph.org>
+Date:   Tue May 27 15:07:04 2008 -0700
+
+    [BSD] Fix lock leaks in error paths in drm_bufs.c.
+
+commit 200ac59573b43abd112d27a1ddda3c124ba9db2a
+Author: Owain Ainsworth <oga@stephanie.cybernetseraph.org>
+Date:   Tue May 27 14:59:38 2008 -0700
+
+    [BSD] Remove superfluous recursive locking in drm_add_magic.
+
+commit e45f95a03b7242115030a74ab27b142bc5c004c4
+Author: Jie Luo <clotho67@gmail.com>
+Date:   Tue May 27 14:55:01 2008 -0700
+
+    [i915] Fix typo in (unused) START_ADDR definition.
+
+commit 8cd045079e21093437b99cb150b97403e945d2c2
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Fri May 23 14:36:05 2008 -0400
+
+    [FreeBSD] Add vblank-rework support and get drivers building.
+    
+    The i915 driver now works again.
+
+commit ad8eb0ed01d96cc16cdafd3b48c0f0cd73d315b4
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue May 27 14:12:51 2008 -0700
+
+    [FreeBSD] Convert from drm_device_t to struct drm_device for consistency.
+
+commit 1f4e36081bd6ff7d7b53a62e0c8db7c0f82edf99
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon May 26 17:41:46 2008 -0700
+
+    [intel-gem] Must hold DRM lock while setting object domain
+    
+    Object domain transfer can involve adding flush ops to the request queue,
+    and so the DRM lock must be held to avoid having the X server smash pointers
+    badly.
+
+commit d434b64f6a760d85295e32298a9a1f3624ee1b69
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon May 26 03:25:16 2008 -0700
+
+    [i915] leave interrupts masked off when not in use.
+    
+    The interrupt enable register cannot be used to temporarily disable
+    interrupts, instead use the interrupt mask register.
+    
+    Note that this change means that a pile of buffers will be left stuck on the
+    chip as the final interrupts will not be recognized to come and drain things.
+
+commit 7cf3fd29fe058a0bfc2ba7e889d1b360398be161
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sun May 25 20:45:20 2008 -0700
+
+    [intel-gem] Add DRM_I915_GEM_BUSY ioctl to check for idle buffers.
+    
+    This new ioctl returns whether re-using the buffer would force a wait.
+
+commit 6d1d11704ab36e4ee50b2c1d3b984ab6bb691417
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sun May 25 20:44:19 2008 -0700
+
+    [intel-gem] Compute npages instead of nbytes in flush_pwrite
+    
+    i915_gem_flush_pwrite optimizes short writes to the buffer by clflushing
+    only the modified pages, but it was miscomputing the number of pages.
+
+commit c69b81df62cb7e04f956f2cf77091216754c3632
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sun May 25 20:41:42 2008 -0700
+
+    [intel-gem] replace call to jiffies_to-msec with simple inline
+
+commit 9fc4ea5c00dfb91ebff893fb5092e768155cc2e2
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Fri May 23 18:42:47 2008 -0700
+
+    i915: do a better job of parsing VBIOS data
+    
+    Add code to get panel modes from the VBIOS if present and check whether certain
+    outputs exist.  Should make our display detection code a little more robust.
+
+commit b4d8cda8e6d6ea319ab7c471d6d68b8af8693cfe
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Fri May 23 18:41:58 2008 -0700
+
+    drm_mode_debug_printmodeline doesn't need struct drm_device *
+    
+    Makes printing modelines from some routines easier.
+
+commit 8c2b207f9b1fb1cf6df23c7ef73ca57dfb5dd459
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu May 22 23:08:38 2008 -0700
+
+    [intel-gem] Encourage multiple caches to hold read data
+    
+    When reading from multiple domains, allow each cache to continue
+    to hold data until writes occur somewhere. This is done by
+    first leaving the read_domains alone at bind time (presumably the CPU read
+    cache contains valid data still) and then in set_domain, if no write_domain
+    is specified, the new read domains are simply merged into the existing read
+    domains.
+    
+    A huge comment was added above set_domain to explain how things are
+    expected to work.
+
+commit 44ed693ca6f8d19acb39174c6efada070652a027
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu May 22 11:34:56 2008 -0700
+
+    [gem] Use CPU domain for new or pageable objects
+    
+    Newly allocated objects need to be in the CPU domain as they've just been
+    cleared by the CPU. Also, unmapping objects from the GTT needs to put them
+    into the CPU domain, both to flush rendering as well as to ensure that any
+    paging action gets flushed before we remap to the GTT.
+
+commit 71b09a5f75c6063a592f7be07465761519839bcd
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu May 22 10:59:59 2008 -0700
+
+    [intel-gem] Force ring retire by emiting flush before user-interrupt.
+    
+    Commands in the ring are parsed and started when the head pointer passes by
+    them, but they are not necessarily finished until a MI_FLUSH happens. This
+    patch inserts a flush after the execbuffer (the only place a flush wasn't
+    already happening).
+
+commit a51c3a76ff415104426493a97ac686ccfe3f3926
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu May 22 10:48:32 2008 -0700
+
+    [intel] Add debug code to verify the cached ring tail pointer.
+    
+    Recording the tail pointer in a local variable improves performance, but if
+    someone messes up and fails to reload at the right time, the driver will
+    write commands to the wrong part of the ring and scramble execution badly.
+    
+    This change (available by setting I915_RING_VALIDATE to 1) checks to make
+    sure the cached tail pointer matches the hardware tail pointer at each ring
+    buffer addition, calling BUG_ON when that's not true.
+
+commit da3f099a7c4a18468ff84819ed39e42bec641e11
+Author: Keith Packard <keithp@keithp.com>
+Date:   Wed May 21 00:32:02 2008 -0700
+
+    [intel-gem] invalidate ring locals for pin/unpin/set_domain/free functions
+    
+    Ring locals must be reloaded from hardware in case the X server ran.
+
+commit 5e662f90d1143de53db866e2b8a94f1bfbe5fc51
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed May 14 15:13:14 2008 -0700
+
+    [gem] Release GEM buffers from work task scheduled from IRQ.
+    
+    There are now 3 lists.  Active is buffers currently in the ringbuffer.
+    Flushing is not in the ringbuffer, but needs a flush before unbinding.
+    Inactive is as before.  This prevents object_free → unbind →
+    wait_rendering → object_reference and a kernel oops about weird refcounting.
+    
+    This also avoids an synchronous extra flush and wait when freeing a buffer
+    which had a write_domain set (such as a temporary rendered to and then from
+    using the 2d engine).  It will sit around on the flushing list until the
+    appropriate flush gets emitted, or we need the GTT space for another
+    operation.
+
+commit 49075b678fad6c3a5cadd1af67a37332b9255ace
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri May 23 09:39:54 2008 +1000
+
+    r500: add two more register ranges for mesa driver to setup
+
+commit 74a9ea896e4c3f4bb3c7195872755ad40da30828
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu May 15 11:13:03 2008 +1000
+
+    drm: fix nouveau warning
+
+commit 1cde3cc1ac467eb0527ed55127cf3bb983afde80
+Author: Hong Liu <hong.liu@intel.com>
+Date:   Mon May 19 17:06:40 2008 +0800
+
+    i915: check dummy page before freeing
+    
+    The dummy read page will point to NULL if drm_bo_driver_init failed at
+    firstopen (modeset is not enabled), and will cause kernel oops at
+    subsequent drm_lastclose call, so be sure to check it.
+
+commit e8320a716d97504d91299d20d640b847c86e4b17
+Author: Hong Liu <hong.liu@intel.com>
+Date:   Mon May 19 17:06:38 2008 +0800
+
+    i915: init bo mm at driver init only when modeset=1
+    
+    To avoid bo memory manager being inited twice, it will be called
+    at firstopen when modeset is not enabled.
+
+commit d6f796857780fc54641047e2aa4e7091376928eb
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue May 20 16:27:05 2008 -0700
+
+    [gem] Replace ring throttling hack with actual time measurement.
+
+commit 54fa32cdfe1529023324a0a261ee5d4e033f46ea
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed May 21 15:15:58 2008 -0700
+
+    [gem] Fix bad test for list_for_each completion.
+    
+    Since it's a circular list, the entry won't be NULL at termination.
+
+commit 7078978db0e014a2621984f6c67ca65fa4f23f3a
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed May 21 15:03:47 2008 -0700
+
+    [gem] Hold a reference on the object in i915_gem_wait_space.
+    
+    Otherwise, in the middle of the function called using it the last ref
+    might disappear.
+
+commit f8e38e49dd70bf4a5ef97c29f0c405a1fc5023f5
+Author: Keith Packard <keithp@keithp.com>
+Date:   Wed May 21 00:32:02 2008 -0700
+
+    [intel-gem] invalidate ring locals for pin/unpin/set_domain/free functions
+    
+    Ring locals must be reloaded from hardware in case the X server ran.
+
+commit 91c6c4b2403caca80273e8010e9ced74cf900be3
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed May 21 20:14:45 2008 +1000
+
+    rs690/r500: vblank support.
+    
+    The new display controller has the vblank interrupts in a different place.
+    
+    Add support for vbl interrupts for these chips
+
+commit af8e087157ef5034fa12d93202037f87da61355d
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue May 20 14:03:27 2008 -0700
+
+    [gem] Use a separate sequence number field from classic/ttm
+    
+    This lets us get some qualities we desire, such as using the full 32-bit
+    range (except zero), avoiding DRM_WAIT_ON, and a 1:1 mapping of active
+    sequence numbers to request structs, which will be used soon for throttling
+    and interrupt-driven list cleanup.
+
+commit ab36a6f983107971890e81473452b3f0313fb692
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue May 20 10:52:24 2008 -0700
+
+    [gem] Rename sequence numbers from "cookie" to "seqno"
+
+commit 6c3ac484b049681f9f3e692f9a6238ed122a8191
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue May 20 10:48:36 2008 -0700
+
+    [gem] Clean up active/inactive list handling using helper functions.
+    
+    Additionally, a boolean active field is added to indicate which list an
+    object is on, rather than smashing last_rendering_cookie to 0 to show
+    inactive.  This will help with flush-reduction later on, and makes the code
+    clearer.
+
+commit 83996561061b99bb490fa0692a491ac9e51245a1
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Sat May 17 10:22:12 2008 +1000
+
+    r500: add more register ranges for Mesa driver
+
+commit 7dced2f33a952ad12aafb7a3e34747156020a3ae
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu May 15 11:21:11 2008 -0700
+
+    [gem] Hold dev->struct_mutex to protect structure data.
+
+commit 3ab152da66f6c7bcc68a13efcf4a62800354f13b
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu May 15 09:37:49 2008 -0700
+
+    [gem] Rename the GTT LRU lists to active (executing) and inactive (idle).
+
+commit aafafe507ba6d073bad25b74c808b73c428db67f
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu May 15 09:32:34 2008 -0700
+
+    [gem] typo fix in comment.
+
+commit a09c0bbe11004a020d0fac47f7517db55fb91754
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed May 14 22:48:12 2008 +1000
+
+    ati_pcigart: oops wrong way around not that it actually mattered
+
+commit 4c6ec02eb8b1a5723f1a00dc420740d440a9ee0d
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed May 14 22:44:22 2008 +1000
+
+    ati_pcigart: stop working in the evenings you mess up too often
+
+commit 2712cdeec319d73187a6cccb06522a4125eef619
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed May 14 22:43:28 2008 +1000
+
+    Revert "ati_pcigart: fixup properly this version might even work"
+    
+    This reverts commit bc0836e12a9790f1cc83f8bc29bc05043c4bc840.
+    
+    tree has some kref hacks in it - oops
+
+commit bc0836e12a9790f1cc83f8bc29bc05043c4bc840
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed May 14 22:42:21 2008 +1000
+
+    ati_pcigart: fixup properly this version might even work
+
+commit dd1f33f83cbbb9917e13f194fadda4f7066ea98a
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed May 14 22:35:32 2008 +1000
+
+    ati_pcigart: fill out 40-bit gart table support properly
+    
+    Thanks to Alex for supplying this info.
+
+commit caace3692f3121dcc18fa5e9260ffe1a4abbb943
+Author: Alex Deucher <alex@cube.(none)>
+Date:   Tue May 13 21:02:17 2008 -0400
+
+    RS4xx: separate out RS400 and RS480 IGP chips
+    
+    RS400 (intel based IGP) and RS480 (AMD based IGP) have
+    different MC and GART setups.  Currently we only support
+    RS480.
+
+commit e4f29968f4860008c13635fa0891cb535e672b93
+Merge: ee631e1 5be53a0
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Tue May 13 14:47:17 2008 -0700
+
+    Merge branch 'modesetting-101' of ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+
+commit ee631e1b8604a176b9118396998ce5bfc6475dae
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Tue May 13 14:44:17 2008 -0700
+
+    i915: register definition & header file cleanup
+    
+    It would be nice if one day the DRM driver was the canonical source for
+    register definitions and core macros.  To that end, this patch cleans
+    things up quite a bit, removing redundant definitions (some with
+    different names referring to the same register) and generally tidying up
+    the header file.
+
+commit 5be53a0881c5248146c585015bf60bb2958773af
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Tue May 13 09:24:47 2008 +0200
+
+    i915: execbuf now works without i915_dma_init being called
+
+commit d32ce7f621c0d8e42cdf88ce6f1d15638a3d34b7
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Mon May 12 15:47:19 2008 -0700
+
+    i915: TV hotplug fixes
+    
+    In order to avoid recursive ->detect->interrupt->detect->interrupt->...
+    we need to disable TV hotplug interrupts in
+    intel_tv.c:intel_tv_detect_type.  We also need to enable the TV interrupt
+    detection and hotplug sequence properly in i915_irq.c.
+
+commit 6e46a3c762919af05fcc6a08542faa7d185487a1
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon May 12 15:42:20 2008 -0700
+
+    [GEM] Update testcases for new API.
+
+commit f650d7240a5b6eea8e605734f1211c20727c21d7
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon May 12 12:55:36 2008 -0700
+
+    [GEM] Typo (and thinking) fixes in drm-gem.txt and doxygen.
+
+commit 17e8000ac046e912bf02649e67165cafed270e2e
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon May 12 13:04:18 2008 -0700
+
+    [intel] Minor kludge -- wait for the ring to be nearly empty before queuing
+    
+    No need to fill the ring that much; wait for it to become nearly empty
+    before adding the execbuffer request. A better fix will involve scheduling
+    ring insertion in the irq handler.
+
+commit 7e7ea313c4a38370194290d05697bdb6a746669d
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon May 12 13:03:16 2008 -0700
+
+    [intel] When polling for ring space, sleep for a lot longer (10ms)
+    
+    If the ring is full, the engine will surely be running for more than 10ms.
+
+commit 6aeff6b9e32b61beed0d5c3d871968fa6217b79d
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon May 12 13:01:57 2008 -0700
+
+    [gem] Set write domain to CPU when doing pwrite.
+    
+    Leave the flush call in place, which can fix domains up if necessary.
+
+commit 6950b7da7157d4d775fc09c7bc31fb0e769c4249
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon May 12 13:00:55 2008 -0700
+
+    [gem] Clarify use of explicit domain control. Remove Gen3 from I-cache usage.
+
+commit a51e38548cfdece2978e9b5f0d6f0467ba7a7272
+Author: Hong Liu <hong.liu@intel.com>
+Date:   Fri May 9 10:06:17 2008 +0800
+
+    fix kernel oops when removing fb
+    
+    drm_crtc->fb may point to NULL, f.e X server will allocate a new fb
+    and assign it to the CRTC at startup, when X server exits, it will destroy
+    the allocated fb, making drm_crtc->fb points to NULL.
+
+commit b2dee13f5d7209b62c5e9ba8cd059717a8302fec
+Author: Hong Liu <hong.liu@intel.com>
+Date:   Fri May 9 10:15:17 2008 +0800
+
+    free dummy read page if fail to init mm
+    
+    Since drm_bo_driver_init will be called in driver_load, we need to free
+    what it alloced when error to avoid memory leak.
+
+commit f1b9bbe2b8f2339359afa39bf27702eca6f6c975
+Author: Hong Liu <hong.liu@intel.com>
+Date:   Mon May 12 16:14:38 2008 +0800
+
+    modeset init code cleanup
+    
+    moving modeset init code into one function and correct error
+    handling druing i915 init
+
+commit af60d87869303d7f17352c82d2fb1cebb9a8f7ff
+Author: Hong Liu <hong.liu@intel.com>
+Date:   Mon May 12 14:38:49 2008 +0800
+
+    fix G33 hardware status page in modeset
+    
+    We need to alloc a hw status page bo for G33 if modeset is enabled since the 2D
+    driver can't alloc gfx memory when working in drm modeset.
+
+commit 10d754f0a2ba2bdda87c243305c8fc46616e965c
+Author: Alex Deucher <alex@cube.(none)>
+Date:   Mon May 12 14:49:43 2008 -0400
+
+    RADEON: fix copy/pasto in last commit
+
+commit 75bc739bee366b8e0520c61c9b9cc10b94524525
+Author: Alex Deucher <alex@cube.(none)>
+Date:   Mon May 12 09:44:20 2008 -0400
+
+    R3/4/5: init pipe setup in drm
+    
+    Similar (broken) code in mesa needs to be removed
+
+commit e16a7101e809aa816463547e0c0284853b0247ed
+Author: Alex Deucher <alex@cube.(none)>
+Date:   Mon May 12 09:35:06 2008 -0400
+
+    RADEON: cleanup radeon_do_engine_reset()
+
+commit 5532b8d2a006451555c4f1309987e62971660cea
+Author: Alex Deucher <alex@cube.(none)>
+Date:   Mon May 12 09:30:47 2008 -0400
+
+    R300+: fixup pixcache flush
+
+commit 3582e82f140cdae947864af8403674e6e117588e
+Author: Alex Deucher <alex@cube.(none)>
+Date:   Mon May 12 09:24:13 2008 -0400
+
+    RS4xx: fix MCIND index mask
+
+commit d26af273f8558c8ee6eca1914b35bfd174129da7
+Author: Alex Deucher <alex@cube.(none)>
+Date:   Mon May 12 09:21:45 2008 -0400
+
+    RADEON: write AGP_BASE_2 on chips that support it
+
+commit c307e50724c8d0d88b9ac1788de02b8478261967
+Author: Alex Deucher <alex@cube.(none)>
+Date:   Mon May 12 09:18:28 2008 -0400
+
+    R300+: fixup PURGE/FLUSH macros
+
+commit fb9eaff74712b7b29a7e76209d803fec21c0318c
+Author: Alex Deucher <alex@cube.(none)>
+Date:   Mon May 12 09:13:44 2008 -0400
+
+    Radeon IGP: merge RS4xx/RS6xx gart setup
+
+commit 68b7f550ba140d275c6f9bb26c2186069354be24
+Author: Alex Deucher <alex@cube.(none)>
+Date:   Mon May 12 09:00:40 2008 -0400
+
+    Radeon IGP: wrap MCIND access
+    
+    first step in merging rs4xx/rs6xx gart setup
+
+commit a34025ce227e8755505b483b1a77c4cf5d7fece5
+Author: Alex Deucher <alex@cube.(none)>
+Date:   Mon May 12 08:56:11 2008 -0400
+
+    Radeon IGP: clean up registers and magic numbers
+
+commit 3f66a0005c1273b0fc935b9bd62a6fabaf99c2be
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon May 12 16:29:13 2008 +1000
+
+    drm: remove root only from a lot of drm ioctls to get stuff running as non-root
+
+commit 1eedeed09192738334570e13acab381441f3d817
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon May 12 16:28:58 2008 +1000
+
+    drm: masters are always authenticated
+
+commit 8f7fc880e8bbe9e59521df707f2ddd3e80e06e6f
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon May 12 16:28:40 2008 +1000
+
+    drm: fix oops on reading proc file with no master
+
+commit ff39db099b9ca6c8feee68101a2269345b7bd798
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sun May 11 00:10:16 2008 -0700
+
+    [GEM] Make pread/pwrite manage memory domains. No luck with movnti though.
+    
+    pread and pwrite must update the memory domains to ensure consistency with
+    the GPU. At some point, it should be possible to avoid clflush through this
+    path, but that isn't working for me.
+
+commit 1b0bf301431e76712de1ee43681bc818383b2e56
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sat May 10 22:04:39 2008 -0700
+
+    [intel-GEM] exec list can contain pinned, lru cannot.
+    
+    The exec list contains all objects, in order of use. The lru list contains
+    only unpinned objects ready to be evicted. This required two changes -- the
+    first was to not migrate pinned objects from exec to lru, the second was to
+    search for the first unpinned object in the exec list when doing eviction.
+
+commit 1f9eaceb71792879a3ecb0046b64dbf65b870d50
+Merge: 177b8b0 48a8531
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sat May 10 21:05:25 2008 -0700
+
+    Merge commit 'anholt/drm-gem' into drm-gem
+
+commit 177b8b07033c56c84d335808121690d235516bb5
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sat May 10 21:04:42 2008 -0700
+
+    [GEM] Add drm-gem.txt
+    
+    Add some API and implementation documentation for GEM.
+
+commit a37ac493da1730436028ecc79a38513380ce15d0
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sat May 10 21:04:18 2008 -0700
+
+    [intel-GEM] Clean up GEM ioctl naming.
+    
+    Rename 'validate_entry' to 'exec_object', then clean up some field names in
+    structures (renaming buffer_offset to just offset, for example).
+
+commit 48a8531aa403ea250696338aa8717e3e36477370
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri May 9 18:23:51 2008 -0700
+
+    GEM: Fix arguments to drm_memrange_init so we don't exceed our allocation.
+    
+    It takes (offset, size), not (offset, end).
+
+commit c5c59eab809604e4d0d4d1dc71fc11186d0220f8
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri May 9 14:34:20 2008 -0700
+
+    GEM: Separate the LRU into execution list and LRU list.
+    
+    Now, the LRU list has objects that are completely done rendering and ready
+    to kick out, while the execution list has things with active rendering,
+    which have associated cookies and reference counts on them.
+
+commit f56f2acb5a3f34ad6916ff315d3d2058bd4b8f9c
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri May 9 15:07:49 2008 -0700
+
+    GEM: Clear obj_priv->agp_mem when we free it.
+    
+    Still managing to get something wrong with this, oopsing down in agp.
+
+commit f0ae335cd70077043f2f7af39d7edcc529367c61
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri May 9 15:02:50 2008 -0700
+
+    GEM: Avoid leaking refs on target objects on presumed offset success.
+
+commit dce34421947d1828ff76c001281107e937e307d4
+Author: Hong Liu <hong.liu@intel.com>
+Date:   Fri May 9 10:08:36 2008 +0800
+
+    fixup i915 workqueue handling when modeset=1
+    
+    Fixup workqueue creation error handling and make sure we destroy the queue on
+    unload.
+
+commit 6ee0c09b0e2746022c25962cbfe655f2f1d5c53e
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Fri May 9 14:19:39 2008 -0700
+
+    i915:  use BDB TV flag for TV detection
+    
+    Even if the TV encoder hasn't been fused off, we may not have a TV connector on
+    the platform.  The BDB in the BIOS should give us this info in some cases.
+
+commit 12725a37af691345e74fe22d53300abec2581852
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Fri May 9 14:19:00 2008 -0700
+
+    i915:  add basic VBT support
+    
+    Map the VBIOS (and therefore VBT) at init time for use by various output
+    initialization routines.
+
+commit 1e26ca44c9f3e8a1a30652aa860b405e0248aae1
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri May 9 12:18:09 2008 -0700
+
+    [gem] API cleanup. allocate->create unreference->close name->flink
+    
+    Make the API names a bit more consistent.
+
+commit eeff906aa0f64da12a0154c66d99e8492dd95107
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Fri May 9 16:36:28 2008 +0100
+
+    Fix build problems
+
+commit 7317e774b5cddb7218c1416fa4d9ee98756e4890
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Fri May 9 09:26:17 2008 +0100
+
+    Fix test applications for recent DRM changes
+
+commit ec75369b402235d74b06b08907572050962075a6
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu May 8 11:45:53 2008 -0700
+
+    [i915] clean up whinging from checkpatch.pl
+
+commit 07ad5ce1e199ebca1e51a831503f923fa49cc57e
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu May 8 11:13:29 2008 -0700
+
+    Clean up whinging from checkpatch.pl in drm_gem.c
+    
+    Whitespace changes, a few too-long-lines and some extra braces.
+
+commit 2f573e6df4890784124eea24ce168702574f0152
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu May 8 12:46:02 2008 -0700
+
+    GEM: Fix oops on NULL dereference when we try clflushing when we don't need to.
+
+commit 7bcbc443f4f5161ab1e1a11cb6694e6d6269377c
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Thu May 8 20:10:18 2008 +0200
+
+    i915: Changed intel_fb to use the new drm_crtc_set_config interface
+
+commit 9af4c497433398fa4576a7c1c31036448cf4f24c
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu May 8 10:44:02 2008 -0700
+
+    [intel-gem] Move domains to relocation records. add set_domain ioctl.
+    
+    Domain information is about buffer relationships, not buffer contents. That
+    means a relocation contains the domain information as it knows how the
+    source buffer references the target buffer.
+    
+    This also adds the set_domain ioctl so that user space can move buffers to
+    the cpu domain.
+
+commit 9d9104ad5fcd2d284a0a87385e9eb1a77adc869e
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Thu May 8 15:25:37 2008 +0200
+
+    i915: Fixed indent in intel_fb.c
+
+commit ba36d54ad4a3ea52b338d55ca19a864283e7c9ce
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Thu May 8 15:00:18 2008 +0200
+
+    drm: Made set_config use drm_mode_set as a argument
+
+commit 4466fea7bab2af5c1e25947af474d0ae69df1ffd
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu May 8 17:12:16 2008 +1000
+
+    Revert "i915: fix vbl swap for multi-master"
+    
+    This reverts commit 2a78ad22647933aa8842d534bce6495ff93fbf76.
+
+commit 2a78ad22647933aa8842d534bce6495ff93fbf76
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu May 8 16:14:33 2008 +1000
+
+    i915: fix vbl swap for multi-master
+    
+    patch from F9 tree
+
+commit 442e12412396280eb5164d7b8f6792969c2cf6a0
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu May 8 16:11:25 2008 +1000
+
+    drm: check for NULL fb here, shouldn't happen but avoid oops for now
+
+commit 19abd5c1ac3456e67241fbd2d8cd08148d6de9f9
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu May 8 16:10:26 2008 +1000
+
+    drm: set crtc->fb to NULL
+
+commit 74a49aea6104ebea7525a04760ef21646a3ffaf4
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu May 8 16:10:06 2008 +1000
+
+    intel: set correct limits on screen width/height from DDX
+
+commit 576cba86b704c0de484ba852b8dce5b24d683f7e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu May 8 16:09:45 2008 +1000
+
+    drm: fix replacefb to change fb properties
+
+commit ed072ed075ec431b0746ac1aa8bad5f687d75d8c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu May 8 14:01:24 2008 +1000
+
+    drm_mode: initial replacefb implemenation
+
+commit df46e0691bdd62da8ccc6b3811f57731dd5a2a4b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu May 8 10:45:18 2008 +1000
+
+    drm: fix typo from previous merge
+
+commit 9d1db4ced1cd8e9e23f9ae945625a54d4f7f3721
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu May 8 10:26:37 2008 +1000
+
+    cursor: pass handle not BO.
+
+commit ef204fb5c24f9bd09192a9abebad6a06dd0b88db
+Merge: 7f269be b44f2da
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu May 8 10:25:01 2008 +1000
+
+    Merge remote branch 'origin/master' into modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/Makefile.kernel
+    	shared-core/i915_drv.h
+
+commit effc6d998f080ba6f9c81d1b4b0e75a42be0238e
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed May 7 16:00:58 2008 -0700
+
+    GEM: fix testcases for new ioctl args.
+
+commit aa0621a19ffcdf2a92eac08fa4950e0423a8dd2b
+Author: Arjan van de Ven <arjan@linux.intel.com>
+Date:   Wed May 7 15:54:32 2008 -0700
+
+    Apply a few stylistic cleanups to match kernel code.
+
+commit 06e9761f94599c6378c8fa0cdbd1e1c1776bae7a
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed May 7 14:10:04 2008 -0700
+
+    GEM: Wait for existing rendering to complete before writing relocation data.
+    
+    This should already have been generally safe since we don't change contents
+    and put in new relocations between execbufs, so if we were writing in a new
+    relocation then we'd already waited rendering to complete when we moved
+    the target of the relocation.  However, doing the right thing will be required
+    if we do buffer reuse.
+
+commit 5f5f01ed91f5ad50f2b38e11740a30441ac845a4
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed May 7 12:46:06 2008 -0700
+
+    GEM: Extend cache domain stuff for 965.
+    
+    One of our MI_FLUSH bits is reserved on 965, being always implied, and there's
+    a vertex cache that was forgotten.
+
+commit b44f2da380e78769b58c751e81f376f0fa1f48aa
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed May 7 15:10:23 2008 +1000
+
+    drm: nopage compat fixup for drm_vm
+    
+    The kernel has removed nopage so move the old nopage codepaths into a compat vm file and switch to using the fault paths.
+    
+    nopfn is on its way out in the future also, so we should switch to using fault
+    for that path as well soon
+
+commit 6a6c37af9ecaabfe1399a1300cadaff730767013
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue May 6 21:59:06 2008 -0700
+
+    [intel-GEM] ref count objects in gtt-lru.
+    
+    If objects on the lru aren't ref counted, they'll get pulled from the gtt as
+    soon as they are freed. This change does cause objects to get stuck in the
+    gtt until they're forced out by new requests. The lru should get cleaned
+    when the irq occurs.
+
+commit 61253f4f677518537368103799c9510b8b5ad1e3
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue May 6 20:00:23 2008 -0700
+
+    [intel-GEM] Add memory domain support.
+    
+    Memory domains allow the kernel to track which caches to flush and how to
+    move objects before buffer execution.
+
+commit 2b9ef32669acf8197cf7d9b73b851c001db494cd
+Merge: 631e86c d2373b2
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue May 6 14:43:56 2008 -0700
+
+    Merge commit 'anholt/drm-gem' into drm-gem
+
+commit 631e86c5c4ad9b2cdd40749ea3b351204a362c80
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue May 6 14:43:49 2008 -0700
+
+    Start coding up memory domains
+
+commit d2373b2a341868882208bb4297ab4f2f51302031
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue May 6 13:28:26 2008 -0700
+
+    GEM: Use irq-based fencing rather than syncing and evicting every exec.
+
+commit dd6976c56f9f14ea8aa630833e9cc9711157d74f
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue May 6 11:25:53 2008 -0700
+
+    GEM: Skip relocation if presumed offset matches.
+
+commit 8551bfc6dba03dcd9d182b2099a0906153ecfa01
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue May 6 11:18:47 2008 -0700
+
+    GEM: Save the last ioremapped page for relocations in case we need it again.
+
+commit 91cba3ae17eb34d1836164f86c13a2a8e08c2a29
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon May 5 22:10:02 2008 -0700
+
+    Dump last batch buffer when hardware lockup is detected.
+
+commit ed6657fa8e7977b19bb836782ac8e87f0f703cef
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon May 5 22:09:34 2008 -0700
+
+    Monitor ACTHD register while polling for idle ring.
+    
+    When batch buffers are executing, the ring may be stuck for a long time.
+    Monitor the ACTHD pointer which will show if the execution engine is
+    actually hung.
+
+commit 2c8f970baaba9c72c882677f40ce8271bff03bac
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon May 5 17:17:19 2008 -0700
+
+    Unlock pages right after getting them.
+    
+    pages come back from find_or_create_page locked, but must not stay locked
+    for long. Unlock them immediately instead of waiting until we're done with
+    them to avoid deadlock when applications try to touch them.
+
+commit 5b0d0fa7f81fb297778af97124a2273b2af317bb
+Merge: d59a930 dafe48e
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon May 5 14:40:20 2008 -0700
+
+    Merge commit 'anholt/drm-gem' into drm-gem
+    
+    Conflicts:
+    
+    	linux-core/i915_gem.c
+
+commit dafe48e6239a4e9b49dd87b8c70224e8eeeb6079
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon May 5 14:38:04 2008 -0700
+
+    GEM: Replace drm_memrange_for_each with just evicting what we brought in.
+    
+    I was wrong about how the data structure worked, and didn't care to fix it
+    to support debugging code.
+
+commit d59a9300ec2ec5d6dc606f847a7589c197994793
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon May 5 14:32:01 2008 -0700
+
+    Remove some debug messages.
+
+commit f0bc796a028dc7c6281d3d0cb2deef9df37e380a
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon May 5 14:22:42 2008 -0700
+
+    Add object base to relocation store address.
+    
+    The relocated value was being written to the wrong location, missing
+    the object base address.
+
+commit 4867780bd6900293880d1db963798d075ec9b01a
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon May 5 13:32:28 2008 -0700
+
+    Emit clflush and chipset flush when mapping objects to gtt
+
+commit 4511e6cd80b4c47a142db48727753da8d0898857
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon May 5 11:27:06 2008 -0700
+
+    Correct execbuffer offset. Add memory barrier and chipset flush.
+
+commit b6f173c4300e90be9bdd3b24003b800afd8819c5
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon May 5 10:51:49 2008 -0700
+
+    Add i915_dispatch_gem_execbuffer (broken).
+    
+    This function submits a gem-based execbuffer to the ring.
+    It doesn't work yet.
+
+commit d015219bd0b25f367be23e5df8355f479ee53a0f
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon May 5 16:49:04 2008 +1000
+
+    r500: add allowed range for us config/pixsize
+
+commit 166ff364fb09ec9885a164fca517c079a1d88718
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri May 2 17:50:46 2008 -0700
+
+    Don't forget to set the memrange private, and reset ring on kernel entry.
+
+commit afe574f328fca42f2fa5fbc1c7a1c13d0f35d2f6
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri May 2 17:49:52 2008 -0700
+
+    Don't include the tail guard memrange in foreach callbacking.
+
+commit 5f0614b86ff5760016bef87c6f6012fe4f42e14e
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri May 2 17:13:11 2008 -0700
+
+    Check for do_mmap errors
+
+commit ab3549d1336fc6c08581a9fd14a83513649d9187
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri May 2 16:34:16 2008 -0700
+
+    Add a bit of /proc/dri/*/gem support. Clean up some refcount/pagelock issues.
+    
+    Track named objects in /proc/dri/0/gem_names.
+    Track total object count in /proc/dri/0/gem_objects.
+    Initialize device gem data.
+    return -ENODEV for gem ioctls if the driver doesn't support gem.
+    Call unlock_page when unbinding from gtt.
+    Add numerous misssing calls to drm_gem_object_unreference.
+
+commit 39e20bcd5f4bf9fedac80188fda2e9fcab2f0360
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri May 2 12:28:49 2008 -0700
+
+    Add name/open ioctls, separate handle and pointer ref counts.
+    
+    Names are just another unique integer set (from another idr object).
+    Names are removed when the user refernces (handles) are all destroyed --
+    this required that handles for objects be counted separately from
+    internal kernel references (so that we can tell when the handles are all
+    gone).
+
+commit 49e8e3372afcf5fab9ffef5691d87ad8bc19599a
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri May 2 10:36:00 2008 -0700
+
+    Remove drm_driver argument to functions taking drm_gem_object.
+    
+    Now that drm_gem_object has a drm_driver * in it, functions don't need both
+    parameters.
+
+commit 5b5b68ffd220f43d4da35ac475b8a3dd91ebbfa7
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri May 2 10:34:46 2008 -0700
+
+    Fix nouveau warning when returning pointers in uint64_t objects.
+
+commit 0d547c9ed92c0183f2c727496154baa2849f326e
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu May 1 20:41:55 2008 -0700
+
+    Add alignment to all aperture allocation requests.
+    
+    When pinning buffers, or using execbuffer, allow the application to specify
+    the necessary aperture allocation alignment constraints.
+
+commit 30efad5113944681c1abd6452e10355c105e9c39
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu May 1 20:31:16 2008 -0700
+
+    Fix gem ioctls to be 32/64-bit clean.
+    
+    mixed 32/64 bit systems need 'special' help for ioctl where the user-space
+    and kernel-space datatypes differ. Fixing the datatypes to be the same size,
+    and align the same way for both 32 and 64-bit ppc and x86 environments will
+    elimiante the need to have magic 32/64-bit ioctl translation code.
+
+commit abc896638fdcd8ccb457ad7b43dbe7ad229ba501
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu May 1 20:12:39 2008 -0700
+
+    Use krefs for refcounting.
+    
+    krefs are way easier than a custom-coded spinlock+int combo.
+
+commit c10695bb7ab44494badc21c822eac3140cf4e117
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu May 1 17:31:57 2008 -0700
+
+    Unbind objects when freeing, fix some error paths, and warn in others.
+
+commit ddc80651d561ef3820e205255f34dc7c60dc2e7c
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu May 1 17:31:29 2008 -0700
+
+    Fix offset passed to AGP to be pages instead of bytes.
+    
+    Fix some utterly bonged loop while we were staring at it.
+
+commit 3f641b56c79d48f7e11aa3eb1dc678e09c8e01f7
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu May 1 16:48:25 2008 -0700
+
+    Fix missing member settings in obj/obj_priv, and some error paths.
+
+commit 7d5f783eca3302ec7efa164e2980c75e5e591585
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu May 1 16:38:37 2008 -0700
+
+    Make GEM object handles be nonzero.
+
+commit c530011aaaf485157ba6284c0c32c0db83523b64
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu May 1 16:35:12 2008 -0700
+
+    Update mm tests for GEM rename.
+
+commit d2529d13961f0df00754393e1ad9b72da5e998a4
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu May 1 16:27:03 2008 -0700
+
+    Remove _args from gem ioctl argument structure tags.
+
+commit 793549116ee6e9202fc7e474bd382eb19ffeb87f
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu May 1 15:40:02 2008 -0700
+
+    Add pin/unpin object ioctls for gem.
+
+commit ccd1bae0f676490a88240c62f02e072d2cf3b030
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu May 1 15:22:21 2008 -0700
+
+    checkpoint: relocations support.
+
+commit 5af87acbc2025b9f72d51b30f176e9c3909695ac
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu May 1 14:20:44 2008 -0700
+
+    checkpoint: gtt binding written.
+
+commit 2140e102f942edf7982cee2a3f00caf234551687
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu May 1 11:39:06 2008 -0700
+
+    checkpoint: rename to GEM and a few more i915 bits.
+
+commit 3ac74f3208ed15a990a0a26742fbfe566f08aa80
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri May 2 01:36:30 2008 +1000
+
+    nv50: enable 0x400500 bit 0 after PGRAPH exception also
+    
+    No solid idea about what these 2 bits do, but nv50 can now survive a few
+    PGRAPH exceptions just as nv40 does :)
+
+commit 6d8062ac1e048c3643d3a9d2432e497e17f717de
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri May 2 01:03:51 2008 +1000
+
+    nouveau: guard against channels potentially not having a context, fix nv50
+
+commit 77d20928b330acda5b6ceb469f50757b5300702b
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri May 2 00:53:42 2008 +1000
+
+    nouveau: disable all card interrupts when unknown PFIFO IRQ occurs.
+    
+    This is possibly temporary.  I can trigger an unending IRQ storm on G8x
+    in some circumstances, and have no idea how to handle that particular PFIFO
+    exception correctly yet.
+
+commit 5c4c778c0d7d3f4749efade3b1023b8b22c029a9
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri May 2 00:52:21 2008 +1000
+
+    nouveau: restore original NV_PFIFO_CACHES_REASSIGN value in fifo handler
+    
+    Doesn't fix any issue I've seen, but is a potential issue if a FIFO IRQ
+    occurs during channel creation/takedown.
+
+commit bfbe4ade3253330bd0c625d50fa2e7b5cb62dada
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri May 2 00:50:21 2008 +1000
+
+    nouveau: gather nsource in trap_info()
+    
+    The IRQ handling stuff really is a mess.. On the TODO :)
+
+commit e317dfdabfb836165fbe3b006e53a88a1bc7c264
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri May 2 00:06:22 2008 +1000
+
+    nv50: PGRAPH exception handling completely different from earlier chips
+
+commit b92efd59565b9c63734b762b9d2be46447309007
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Thu May 1 23:47:42 2008 +1000
+
+    nv50: I cave...  Add nv84 initial context values.
+    
+    I swore I'd actually do this properly and not go the horrible route
+    we did with nv4x, but I won't get around to it just yet with so many
+    *actually* interesting things to do first.. One day.
+    
+    Since someone already added nv86, why not!
+
+commit 1a8406795052e3ec49e400465f3211d04fd9dd86
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Apr 30 16:03:15 2008 -0700
+
+    Hacking towards hooking up execbuffer.
+
+commit 81ba8ded7e01b21e600069977e496017c8966d66
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Apr 29 13:47:12 2008 -0700
+
+    Remove the remainder of the mmfs device.
+
+commit 3148c1636408cc422ab83c149a8963916dd376b0
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Apr 29 13:45:43 2008 -0700
+
+    Move mmfs tests over to be drm tests.
+
+commit dabd056bf34b389585b618cf03a297877505f06b
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Apr 29 13:30:44 2008 -0700
+
+    Move mmfs ioctls into the DRM. Untested.
+
+commit cb33133ef354b77a8cf06b16ce95a0babbe8bc6f
+Author: Jesse Barnes <jbarnes@jbarnes-d500.(none)>
+Date:   Tue Apr 29 12:36:04 2008 -0700
+
+    i915: fix off by one in VGA save/restore of AR & CR regs
+    
+    Turns out it's important to save/restore AR14 in particular.
+
+commit f31e04a96013c059fc90c98a878de14adbea524a
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Tue Apr 29 19:34:22 2008 +0200
+
+    nouveau: NV9x cards exist as well.
+
+commit 3ad8db2071d30c198403e605f2726fc5c3e46bfd
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Apr 28 16:54:53 2008 -0700
+
+    Rename drm_mm.c and its fuctions to drm_memrange.
+    
+    It's not really a graphics memory allocator, just something to track ranges
+    of address space.  It doesn't involve actual allocation, and was consuming
+    some desired namespace.
+
+commit 7f269bec7ed49385de394fdbd970f463ef2060f0
+Merge: 55a9941 7f8e406
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Apr 28 12:10:44 2008 +0200
+
+    Merge branch 'master' into modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/Makefile.kernel
+    	linux-core/drm_compat.c
+    	linux-core/drm_fops.c
+    	linux-core/drm_lock.c
+    	shared-core/drm.h
+    	shared-core/i915_dma.c
+    	shared-core/i915_drv.h
+    	shared-core/i915_irq.c
+
+commit 7f8e4060859651993921281445ec00940c577222
+Author: Jesse Barnes <jbarnes@hobbes.(none)>
+Date:   Sun Apr 27 09:42:17 2008 -0700
+
+    Use fixed sized types in new ioctls
+    
+    Make both crtc and the command argument 32 bits to avoid any 32-on-64 compat
+    issues.
+
+commit b45fe49bcd989be4e1327c13dd734410b395761c
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Sat Apr 26 17:11:18 2008 -0700
+
+    Enum-ectomy of vblank modesetting ioctl
+    
+    Enum can be of pretty much any size since C leaves the choice of size up to the implementation.  So avoid using it in new interfaces like the vblank pre- & post-modeset ioctl.  Thanks to hch for spotting this.
+
+commit 22877864c204139fe1c46899bedd237e38f0e849
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Apr 23 14:52:30 2008 -0700
+
+    Add mmap ioctl to mmfs.
+
+commit 8c741ed54e1be63528e79222b600f37506c6d6d2
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Apr 23 13:06:58 2008 -0700
+
+    Add pread/pwrite ioctls to mmfs.
+
+commit c1fec43b553ea93460b58995a1229e84d8bb45b4
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Apr 23 11:32:31 2008 -0700
+
+    Extend the mmfs basic test to do a couple of ioctls.
+
+commit 8665b666c7e2ecdee7d27e1ad540910a0223ba6d
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Apr 23 11:22:59 2008 -0700
+
+    Move mmfs.h userland interface to shared-core.
+
+commit 47a2b7dc03e35d4eaf8148b87aeea8dd96723b4d
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Apr 22 16:08:23 2008 -0700
+
+    Initial add of mmfs module.
+
+commit c82894034f611696c54c5aaf2112be638aa2cb35
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Mar 4 15:08:24 2008 -0800
+
+    Clarify that drm_agp_ttm_backend is associated with a drm_ttm.
+    
+    On first looking at it I assumed it was an aspect of the ttm backend as a
+    whole rather than specific allocations from a backend.
+
+commit 55a9941977953d16b36bbf3e1dcad392ac70e1ef
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Wed Apr 23 12:43:52 2008 -0400
+
+    Make via compile.
+    
+    Chase the lock to it's new location.
+
+commit 33fa02f2d850da252d5ddd9ef7428b02de7bd6a7
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Wed Apr 23 12:42:26 2008 -0400
+
+    Make radeon_ms compile.
+    
+    Remove lock functions and use pci_map_rom() instead of pci_map_rom_copy().
+
+commit 10b9a116a7b7fe3acf0848de9e0cf40f8e1bcd75
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Apr 23 17:33:09 2008 +0200
+
+    Don't disable IRQs, just tasklets, when taking the drm lock spinlock.
+
+commit 9ba3aaaa1a22663ec3d8d9d1792edf10a25d0ad7
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Wed Apr 23 12:43:30 2008 +0200
+
+    Fixed unlock check on EAGAIN
+
+commit feff72929e94b6c17e352a2ec86b3440b9edf059
+Author: Xiang, Haihao <haihao.xiang@intel.com>
+Date:   Wed Apr 23 17:17:16 2008 +0800
+
+    i915: fix for compatibility mode
+
+commit 8dc4d4fa1f1394c2faed89760e1183287577fed3
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Tue Apr 22 18:41:28 2008 -0700
+
+    i915: allocate devname at init time
+    
+    Since it'll be freed at unload time, we should alloc devname rather than
+    pointing to the DRIVER_NAME string.
+
+commit b57e1f7efd6e27efbf960ab11323981e016ea86e
+Author: Hong Liu <hong.liu@intel.com>
+Date:   Fri Apr 18 16:52:04 2008 +0800
+
+    add sysfs entry for DVO output
+    
+    forget to add it in the previous DVO porting patch.
+    
+    Signed-off-by: Hong Liu <hong.liu@intel.com>
+
+commit 8a390e058fcea70b0c3a912543816bdf4c3e7c4c
+Author: Hong Liu <hong.liu@intel.com>
+Date:   Fri Apr 18 16:49:23 2008 +0800
+
+    clear interrupt status before install irq
+    
+    On my 865G machine, it seems the CPU will receive interrupt before
+    irq_postinstall is called. This will cause kernel oops because vblank is not
+    inited at that time. Clear interrupt status before install seems fixing this
+    problem.
+    
+    Signed-off-by: Hong Liu <hong.liu@intel.com>
+
+commit c250104c8f81026b4191ec8b2a709ff7ab5baedb
+Author: Hong Liu <hong.liu@intel.com>
+Date:   Fri Apr 18 16:26:41 2008 +0800
+
+    fix removing output_attrs
+    
+    fix a typo in removing output sysfs.
+    
+    Signed-off-by: Hong Liu <hong.liu@intel.com>
+
+commit b3967765c082c4fae1954ec70474fb428ef42c70
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Sun Apr 20 20:47:38 2008 +0300
+
+    linux-core Makefile: add GIT_REVISION
+    
+    This tries to automatically fetch a git revision string and if succeeds,
+    it #defines GIT_REVISION string macro. Packagers can override it by
+    'make GIT_REVISION=foo'.
+    
+    Update Nouveau to use GIT_REVISION, if defined, instead of DRIVER_DATE
+    in struct drm_driver.
+    
+    Signed-off-by: Pekka Paalanen <pq@iki.fi>
+
+commit ce8c8425185cfe0390230b7b537f2e0514c721c6
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Apr 22 16:08:17 2008 +1000
+
+    i915: gfx hw and i945gme fixes from upstream
+    
+    From Jesse and Zhenyu originally.
+
+commit f0e38f521790becbf9ca13ef5c579d12c6985d52
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sun Apr 20 16:10:05 2008 -0700
+
+    [I915] Handle tiled buffers in vblank tasklet
+    
+    The vblank tasklet update code must build 2D blt commands with the
+    appropriate tiled flags.
+
+commit 21dbba5a227e20dd64ce300cc78927e139a684dd
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sun Apr 20 01:55:57 2008 -0700
+
+    On I965, use correct 3DSTATE_DRAWING_RECTANGLE command in vblank
+    
+    The batchbuffer submission paths were fixed to use the 965-specific command,
+    but the vblank tasklet was not. When the older version is sent, the 965 will
+    lock up.
+
+commit 21a93915d8a21518c5da76a739f9459ed7f99d6a
+Author: Hong Liu <hong.liu@intel.com>
+Date:   Thu Apr 17 16:51:00 2008 +0800
+
+    Porting DVO stuff
+    
+    Ported from Xorg intel 2d driver. Changed interfaces definitions, which needed
+    to be changed later if other device wants to use these DVO stuff.
+
+commit 1ad1bd5bd95db71500edfcea8b46421d7f3cdb15
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Apr 14 13:52:33 2008 +0200
+
+    Fix buffer object map wait error.
+    Add some branch prediction hints.
+
+commit c5955c652302d66719984cb5a218cb590c74ad42
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Apr 14 12:10:50 2008 +0200
+
+    Fix buffer object creation validation.
+    
+    BO lock fixes.
+
+commit c9b73ef6daff75df27d17260a9fc84e68f1b21b4
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Apr 13 14:49:14 2008 +0200
+
+    Unlock the BO mutex while waiting for idle, unmapped, unfenced.
+    
+    Move unfenced checking into idle checking.
+    Never time out while waiting for software events like unmapped or unfenced.
+
+commit 65dd0e68ff0e0e354925adb7d5fffeb0ffbb485c
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Apr 11 09:36:12 2008 +0200
+
+    Fix up buffer manager locking.
+
+commit b986d7d2c9090fc62c1853f62886dd124e8066c1
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu Mar 27 11:40:04 2008 -0700
+
+    Save and restore dsparb and d_state regs
+
+commit 6cc2d7e7ae92bbac630d0053fc214521ce610dc6
+Merge: 5891b0b 3b32ee3
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sat Apr 12 00:15:47 2008 +0200
+
+    Merge branch 'modesetting-101' of ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+
+commit 5891b0bd2ae441d738e78737a4c4826bd2e60b43
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sat Apr 12 00:15:12 2008 +0200
+
+    radeon_ms: rework command submission ioctl & cleanup
+
+commit 3b32ee36ae58f733f281a2fa569ea8a8a926bb6d
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Thu Apr 10 20:31:31 2008 -0700
+
+    Fixup Intel TV property code
+    
+    Use the new TV property creation routine and fixup the set_property code
+    to actually do a mode set call when properties change.
+
+commit 83c3acb7da1043a63d260d5443f7149b2c664b08
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Thu Apr 10 20:30:12 2008 -0700
+
+    Split TV property creation into its own routine
+    
+    It needs to take arguments from the caller about supported TV formats,
+    so declare it in drm_crtc.h and export it.
+
+commit bee546ad696e3157b878dfa90e563786b5b5c7ac
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Thu Apr 10 19:02:53 2008 -0700
+
+    Remove structure fields & code
+    
+    Cleanup some random cruft left over from the initial port.
+
+commit ebd154497383e3bcb6b5c6284148aff3633a5d99
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Thu Apr 10 11:27:39 2008 -0700
+
+    Fix masking in get_load_detect_pipe
+    
+    Start i at -1 so that the masking works right.
+
+commit 0a6e301e6de3421f116d1b5d8205ca4f442091e2
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Thu Apr 10 11:23:55 2008 -0700
+
+    Keep display info in struct display_info
+    
+    Some fields had snuck into the drm_output structure.  Put them back and
+    fill in more stuff from the EDID block.
+
+commit 386ea38b8e3af9bc9166d4ab63c4beb7e0e2267b
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Wed Apr 9 14:12:56 2008 -0700
+
+    Add TV out hotplug detection
+    
+    Doesn't yet work on my i915 test machine, but most of the necessary bits
+    should be there.
+
+commit b3737f3fd9210aead1f7fc4187dd05eea77ed0a6
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Wed Apr 9 14:09:29 2008 -0700
+
+    Fix TV load detection
+    
+    Now that we can allocate load detect pipes, we can perform TV out load
+    detection correctly.  Call the new routines and enable proper TV
+    detection.
+
+commit 6c92689dcc627886c32afd4eca8f0da25bd07183
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Wed Apr 9 14:07:55 2008 -0700
+
+    Port pipe reservation code for load detection
+    
+    TV out needs to do load detection, which means we have to find an
+    available pipe to use for the detection.  Port over the pipe reservation
+    code for this purpose.
+
+commit 256a96135e6b48f5d3545896f7226edea8c70a0c
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Wed Apr 9 14:06:36 2008 -0700
+
+    Add newline to debug output for output add
+
+commit 61a81a043cce747a32e514bf0e78fe3993a62f00
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Wed Apr 9 22:07:40 2008 +0100
+
+    Older kernels don't have kobject_uevent_env(), so punt
+    the event for these older kernels.
+
+commit fa116081a919e716eb95fcfa421d93f10f6f0a4f
+Author: Jesse Barnes <jbarnes@jbarnes-t61.(none)>
+Date:   Wed Apr 9 11:30:15 2008 -0700
+
+    Fixup sysfs output registration
+    
+    Put off registering new outputs with sysfs until they're properly configured,
+    or we may get duplicates if the type hasn't been set yet (as is the case with
+    SDVO initialization).  This also means moving de-registration into the cleanup
+    function instead of output destroy, since the latter occurs during the normal
+    course of setup when an output isn't found (and therefore not registered with
+    sysfs yet.
+
+commit e3c7a0fcb0122400e5b5035125ad4fa88599f28a
+Merge: a2edd07 779e826
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Tue Apr 8 12:48:41 2008 -0700
+
+    Merge branch 'modesetting-101' of ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+
+commit a2edd07f20df67e741026097c5d46f12296d7c9d
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Tue Apr 8 12:44:52 2008 -0700
+
+    Add devname in modeset case
+    
+    If the driver is 'modeset' enabled, it'll register it's interrupt
+    handler at load time.  Set the devname in this case so that
+    /proc/interrupts makes sense.
+
+commit 5a3ce06f3a3dfa9412b9660c1e1f35d24c815dbb
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Tue Apr 8 12:42:23 2008 -0700
+
+    Improved DRM sysfs support
+    
+    This patch ties outputs, output properties and hotplug events into the
+    DRM core.  Each output has a corresponding directory under the primary
+    DRM device (usually card0) containing dpms, edid, modes, and connection
+    status files.
+    
+    New hotplug change events occur when outputs are added or hotplug events
+    are detected.
+
+commit 779e826c1e2c127f4950c78a56cc314c43b7eb56
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Tue Apr 8 02:18:14 2008 +0200
+
+    radeon_ms: command buffer validation use array of function pointer
+
+commit db61f02bd7e4b9d5ac416f1ef98bac1bd4d984bc
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Mon Apr 7 22:24:24 2008 +0200
+
+    Missing KERNEL_VERSION macro
+
+commit fee64980c4581f1c3cac4be834fa5fb663c2029b
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Mon Apr 7 20:49:36 2008 +0200
+
+    radeon_ms: another fb fix reset mode if fb changed
+
+commit 27c3785d3f12743a9e160238a4d00353060ec2f2
+Author: Hasso Tepper <hasso@estpak.ee>
+Date:   Mon Apr 7 15:27:43 2008 +0300
+
+    Add DragonFly BSD support for device creation
+    
+    DragonFly behaves just like FreeBSD in this regard.
+
+commit dfa9f0399223d86a6478bf93be879da476f93eda
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Apr 7 13:29:11 2008 +1000
+
+    nouveau: enable accelerated move to sysmem
+
+commit c12b60b5094fe97db60cd0f18fafd1720679bd38
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Apr 7 13:05:51 2008 +1000
+
+    nouveau: enable m2mf for tt<->vram moves, fix fence_poll
+
+commit 060e725a0e8aa1f1157f97ca8e7dfa60d02d17ac
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sun Apr 6 19:23:20 2008 +0200
+
+    radeon_ms: fix framebuffer code
+
+commit 91bfd69745dbb62dc28c57f940ff44da867e96ea
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sun Apr 6 19:01:31 2008 +0200
+
+    radeon_ms: check for NULL fb
+
+commit e89710bef7691e4e9d0bc7d427542bfae6ce4258
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Apr 6 11:21:22 2008 +0200
+
+    Place highmem pages last in the ttm page array.
+
+commit c3888b97f60fbbc0b1382e5a16689eecaa2f79a5
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Apr 6 10:32:02 2008 +0200
+
+    Use clflush() when available for cache flushing.
+
+commit 51a0fdcf3fef5af57938d9958efd698e96d78803
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Apr 6 09:46:29 2008 +0200
+
+    [I915] Fix VRAM eviction.
+
+commit 87ae5b22e3120d205f520a99cea31743903d49a2
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Apr 6 09:33:50 2008 +0200
+
+    Fix emergency allocation accounting.
+
+commit 1692d30cea263a084bfea824cd8638000e97bc57
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sat Apr 5 21:02:00 2008 +0200
+
+    nv50: primitive i2c interrupt handler
+
+commit dfc8d2b2fe70a84de53f72f0eeff911c58469089
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Thu Apr 3 03:15:47 2008 +0200
+
+    radeon_ms: add crtc set base callback & fix palette
+
+commit 4dfb959238cbaac6b4db425d9349c7907f4e32fd
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Thu Apr 3 03:14:52 2008 +0200
+
+    radeon_ms: fixes fb handling
+
+commit 3fc444a5e8e35ffec7a1426c80c9644e5777ddbe
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Thu Apr 3 01:13:31 2008 +0200
+
+    nv50: primitive display interrupt handler.
+
+commit 960042345866ff4ab7d76b56e4af60e800c60a36
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Mon Mar 31 21:50:02 2008 +0200
+
+    radeon_ms: small fix & cleanup to command checking
+
+commit 562f95ea96f08e1d73a872dc87237614292c873a
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Mar 31 11:34:48 2008 +1000
+
+    nouveau: fix return from function..
+    
+    dude kernel moduless use kernel errors :)
+    
+    this fixes an oops on init when this codepath hits.
+
+commit 09e637848a6afa54a091c4c70fdfbfbdce7ac805
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Mon Mar 31 00:55:05 2008 +0200
+
+    radeon_ms: initial pass at command buffer validation
+
+commit 22d931f9664e1857e07ce7ab8aad760a4a22f15e
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Mar 30 21:30:43 2008 +0200
+
+    Initialize the fence::error member.
+
+commit 1f4ba62567d32fdd32786273326e1aab17d5d412
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Mar 30 15:14:45 2008 +0200
+
+    [i915] Report buffer state _after_ fence submission to user-space.
+    This fixes a problem where the wrong bo->fence_type was reported, and
+    also saves some memory space.
+    [bo core] export the drm_bo_fill_rep_arg function.
+
+commit b8567bafff58cfb9d77145088fd5b8ad2e5cde6b
+Author: Thomas Hellström <thomas@linlap0.(none)>
+Date:   Thu Mar 6 17:35:56 2008 +0100
+
+    Don't call fence::poll during irq if there are no waiters.
+
+commit cf3c0123a038a825d478fa10e29cd7490bab369e
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Mar 30 14:50:41 2008 +0200
+
+    nouveau: forgot to add a break
+
+commit 68b83a88135cd236be220dafde65c877e396eb0d
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Mar 30 14:46:45 2008 +0200
+
+    nouveau: Add ctx values for nv86.
+    
+    - Note that this may not work for all nv86.
+
+commit 2d9eccfd056425e4ebdf1a7b879979fd0a9d1340
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sun Mar 30 12:45:57 2008 +0200
+
+    radeon_ms: add hang debuging helper functions
+
+commit 753a4bdf1b554490f7b288c0203050b5114433c3
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Sun Mar 30 07:33:39 2008 +1000
+
+    drm/r300: fix wait interface mixup
+    
+    This interface was defined completely wrong, however userspace has only
+    ever used 4 values from it (0x1, 0x2, 0x3 and 0x6), so fix the interface to do what userspace actually expected but define new defines for new users to use
+    it properly.
+
+commit 1674d2817929fe4ee4e1c4762e89600119dbdc50
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Sat Mar 29 17:25:44 2008 +0000
+
+    r300: Correctly translate the value for the R300_CMD_WAIT command.
+    
+    Previously, the R300_CMD_WAIT command would write the passed directly to the
+    hardware. However this is incorrect because the R300_WAIT_* values used are
+    internal interface values that do not map directly to the hardware.
+    
+    The new function I have added translates the R300_WAIT_* values into appropriate
+    values for the hardware before writing the register.
+    
+    Thanks to John Bridgman for pointing this out. :-)
+
+commit 0da289bafd2da72a14f3d5cf82fec836d30f7b8d
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Thu Mar 27 20:08:37 2008 +0100
+
+    radeon_ms: this is a modesetting driver, bring things up to date
+
+commit acb6c9ef97df999f3fa87639b1bb4f2840970f71
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Mar 27 15:55:49 2008 +1000
+
+    drm: remove authentication on master exit.
+    
+    using contexts for this is bad for multiple masters
+
+commit a81d07f64d7557da3c4888867a20d2eec94b4ec1
+Author: Stuart Bennett <sb476@cam.ac.uk>
+Date:   Tue Mar 25 18:30:05 2008 +0000
+
+    nouveau: nv20 bios does not initialise PTIMER
+    
+    The wait functions depend on PTIMER, so write the old (incorrect, but working) values for uninitialised hw
+
+commit b0817a42e789a83454e6acba0578116829e2bf51
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Mar 24 18:52:26 2008 +1000
+
+    i915: fix oops on agp=off
+    
+    Kernel bug 10289.
+
+commit 4323ee3e5b263a1dc8cfdf72485a20a3c1d8f144
+Merge: a244d29 36e11dd
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Mar 24 18:47:50 2008 +1000
+
+    Merge branch 'r500-fp'
+
+commit a244d2905052d3263bdcc26b295558a354702b89
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Mar 24 03:22:42 2008 +1100
+
+    nouveau: silence warning
+
+commit 24ba0c9c3bd0f160eb0c3a820fd407998f85fd55
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Mar 24 03:20:59 2008 +1100
+
+    nv40: voodoo - not quite.
+
+commit 6f4b3de284e93e8fdb133f0aadfc86d298f45916
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Mar 24 03:13:05 2008 +1100
+
+    nv40: allocate massive amount of PRAMIN for grctx on all chipsets.
+    
+    More or less a workaround for issues on some chipsets where a context
+    switch results in critical data in PRAMIN being overwritten by the GPU.
+    
+    The correct fix is known, but may take some time before it's a feasible
+    option.
+
+commit 36e11dd3801734ff5af9f5edb7aa698f0e2c49c2
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Mar 21 16:59:52 2008 +1000
+
+    r500: fragment program upload is also used to upload constants.
+    
+    Limit frag address to 8 bits
+
+commit 71b66b00435a10e762a4bb7abedb263196942da4
+Merge: 6ef119a 607964e
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Thu Mar 20 17:44:32 2008 +0100
+
+    Merge branch 'modesetting-101' of ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+
+commit 6ef119abf5d19c85fe039fd19d12e9bd64fd44df
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Thu Mar 20 17:43:43 2008 +0100
+
+    radeon_ms: fix fence
+
+commit 316979356f05796c5bd5a47dfc29fe48d6874b49
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Mar 20 14:20:53 2008 +1000
+
+    drm: fixup r500fp submission
+
+commit 1021799b6ca6b195ad2d5f002e45668f69c44651
+Author: Stuart Bennett <sb476@cam.ac.uk>
+Date:   Tue Mar 18 23:12:28 2008 +0000
+
+    nouveau: do not set on-board timer's numerator/denominator to bad values
+
+commit 9e4f9082872838084a3c4f9661d65c12768d3dc4
+Author: Alex Deucher <alex@cube.(none)>
+Date:   Wed Mar 19 15:37:56 2008 -0400
+
+    RADEON: switch over to new production microcode
+    
+    This needs to be tested thoroughly before pushing to the
+    kernel.
+
+commit d8af16d2a75f38dacb9b87a4b317790c88c6ba40
+Author: Alex Deucher <alex@samba.(none)>
+Date:   Wed Mar 19 14:57:42 2008 -0400
+
+    RADEON: production microcode for all radeons, r1xx-r6xx
+    
+    This updated microcode is not in use yet.
+
+commit a3c808d8feff9dc379f71f971ca20ec3c686b0c0
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Mar 19 16:10:37 2008 +1000
+
+    move some more r300 regs into not allowed on r500
+
+commit d18c2c684229ec6923e1a578ae837f34e6b97422
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Mar 18 09:07:45 2008 +1000
+
+    drm: add new rs690 pci id
+
+commit 602800a280ecaf562427eada19b118b990ab26e1
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Mar 17 11:37:10 2008 +0100
+
+    Evict cached_mapped relocatee before applying reloc.
+    
+    Fix that got left out after the intel-post-reloc merge.
+
+commit 607964ed9e5f6d86a0960bef2341e7f5de9c71da
+Author: Dave Airlie <airlied@panoply-rh.(none)>
+Date:   Mon Mar 17 16:37:46 2008 +1000
+
+    drm: add master set/drop protocol
+    
+    this may not survive long - just need something for testing
+
+commit 2d0411cb7544ea45b5879d4f454cb9ee3c9ff5fb
+Author: Dave Airlie <airlied@panoply-rh.(none)>
+Date:   Mon Mar 17 16:34:15 2008 +1000
+
+    i915: safety check the sarea map still exists
+
+commit e6be93b2a6f508b2284a6d352f5f0640ef1a542a
+Author: Dave Airlie <airlied@panoply-rh.(none)>
+Date:   Mon Mar 17 16:33:15 2008 +1000
+
+    drm: pick correct master for cleaning up
+    
+    When a master is exiting, make sure we clean it up and not the currently
+    in charge master.
+
+commit d1513528d7e1a7bd119468087baa6839897627f4
+Author: Dave Airlie <airlied@panoply-rh.(none)>
+Date:   Mon Mar 17 16:32:27 2008 +1000
+
+    drm: select the correct master to attempt to remove the lock from.
+    
+    When destroying DRI sarea, make sure you use the master associated with the
+    sarea and not the one currently in charge
+
+commit 3add9494037e7c88b5e5a476001176784d743a26
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Mar 17 11:08:03 2008 +1000
+
+    initial r500 RS and FP register and upload code
+
+commit 1f96e9a98245b18c99cc6a7e66372a076b9abf6b
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Mar 17 07:05:46 2008 +1000
+
+    drm/pcigart: fix the pci gart to use the drm_pci wrapper.
+    
+    This is the correct fix for the RS690 and hopefully the dma coherent work.
+    
+    For now we limit everybody to a 32-bit DMA mask but it is possible for
+    RS690 to use a 40-bit DMA mask for the GART table itself,
+    and the PCIE cards can use 40-bits for the table entries.
+    
+    Signed-off-by: Dave Airlie <airlied@redhat.com>
+
+commit 1a2d8c4bfa96dd176ec084811ad286f95968ee52
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Mar 16 20:07:14 2008 +0100
+
+    Avoid unnecessary waits for command regulator pause.
+
+commit 3a3a9485aadced820f7619ef7f2a11e72782769f
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Mar 16 11:44:35 2008 +0100
+
+    [via] Remove some leftover vars.
+
+commit b81d7b3b8d7ca83a9b79d2dbea22f00e78180516
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Mar 16 11:39:18 2008 +0100
+
+    [via] Allow a little larger stride for SG DMA DownloadFromScreen.
+
+commit 7d3d15e67de27f7c47859f36bb55002f0c9d52d6
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Mar 16 11:37:17 2008 +0100
+
+    [via] The millionth fixup for the millionth-1 attempt to stabilize the AGP
+    DMA command submission. It's worth remembering that all new bright ideas on how
+    to make this command reader work properly and according to docs
+    will probably fail :( Bring in some old code.
+
+commit 563fe9dcd4d08de8864ade161258df891f3db471
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Mar 16 11:29:57 2008 +0100
+
+    [via] Fix driver after vblank-rework merge.
+
+commit afa803ee40c1d06066f58a34761be58ba03badb5
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Sun Mar 16 15:01:27 2008 +1000
+
+    ati: fix rs690 igp gart by allocating the page table in 32-bit memory
+
+commit 5b1d9263d3c108be7360ccd3aeed4cc3a0bf1ada
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Mar 16 14:00:16 2008 +1000
+
+    drm/rs690: set AGP_BASE_2 to 0
+
+commit dd9eb923edd15284113dc12c05fb341ad60f1b46
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Mar 16 12:58:07 2008 +1000
+
+    drm: set rs690 gart base completly.
+    
+    The docs state bits 4-11 represent bits 32-39 of a 40-bit address
+
+commit 76946ed83df2e39e3867538e54dc743fecb4f8e8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Mar 16 12:56:11 2008 +1000
+
+    drm: this u32 should be a dma_addr_t
+    
+    doesn't fix anything but just making it consistent
+
+commit 1ea8a470fe9103036817ae3a960522c37901bddc
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Fri Mar 14 00:25:42 2008 +0000
+
+    fix build problems
+
+commit ae1bb96a7e24362500e02cf3a86bd268c2dcc835
+Author: Mike Isely <isely@pobox.com>
+Date:   Fri Mar 14 09:53:05 2008 +1000
+
+    drm: Fix race that can lockup the kernel
+    
+    The i915_vblank_swap() function schedules an automatic buffer swap
+    upon receipt of the vertical sync interrupt.  Such an operation is
+    lengthy so it can't be allowed to happen in normal interrupt context,
+    thus the DRM implements this by scheduling the work in a kernel
+    softirq-scheduled tasklet.  In order for the buffer swap to work
+    safely, the DRM's central lock must be taken, via a call to
+    drm_lock_take() located in drivers/char/drm/drm_irq.c within the
+    function drm_locked_tasklet_func().  The lock-taking logic uses a
+    non-interrupt-blocking spinlock to implement the manipulations needed
+    to take the lock.  This semantic would be safe if all attempts to use
+    the spinlock only happen from process context.  However this buffer
+    swap happens from softirq context which is really a form of interrupt
+    context.  Thus we have an unsafe situation, in that
+    drm_locked_tasklet_func() can block on a spinlock already taken by a
+    thread in process context which will never get scheduled again because
+    of the blocked softirq tasklet.  This wedges the kernel hard.
+    
+    To trigger this bug, run a dual-head cloned mode configuration which
+    uses the i915 drm, then execute an opengl application which
+    synchronizes buffer swaps against the vertical sync interrupt.  In my
+    testing, a lockup always results after running anywhere from 5 minutes
+    to an hour and a half.  I believe dual-head is needed to really
+    trigger the problem because then the vertical sync interrupt handling
+    is no longer predictable (due to being interrupt-sourced from two
+    different heads running at different speeds).  This raises the
+    probability of the tasklet trying to run while the userspace DRI is
+    doing things to the GPU (and manipulating the DRM lock).
+    
+    The fix is to change the relevant spinlock semantics to be the
+    interrupt-blocking form.  After this change I am no longer able to
+    trigger the lockup; the longest test run so far was 20 hours (test
+    stopped after that point).
+    
+    Note: I have examined the places where this spinlock is being
+    employed; all are reasonably short bounded sequences and should be
+    suitable for interrupts being blocked without impacting overall kernel
+    interrupt response latency.
+    
+    Signed-off-by: Mike Isely <isely@pobox.com>
+
+commit 631c6af4d926fd1fe73f017cfb032538cee7ea7d
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Thu Mar 13 11:47:37 2008 +0000
+
+    Fix green offset
+
+commit 9be916f3537599489e083437c9a948eb93004904
+Author: Alex Deucher <alex@botch2.com>
+Date:   Wed Mar 12 11:16:12 2008 -0400
+
+    Fix chip family for RV550
+
+commit 1766e1c07b03c6ccf545469663334be762c0bddf
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Mar 12 23:37:29 2008 +1100
+
+    nv50: force channel vram access through vm
+    
+    If we ever want to be able to use the 3D engine we have no choice.  It
+    appears that the tiling setup (required for 3D on G8x) is in the page tables.
+    
+    The immediate benefit of this change however is that it's now not possible
+    for a client to use the GPU to render over the top of important engine setup
+    tables, which also live in VRAM.
+    
+    G8x VRAM size is limited to 512MiB at the moment, as we use a 1-1 mapping
+    of real vram pages to their offset within the start of a channel's VRAM
+    DMA object and only populate a single PDE for VRAM use.
+
+commit 88bd1e4a350d011ec44f6786e0bfdf8fb386800c
+Merge: 2a618e5 612c22f
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Mar 12 11:34:29 2008 +0100
+
+    Merge branch 'intel-post-reloc'
+    
+    Conflicts:
+    
+    	linux-core/drm_compat.c
+    	linux-core/drm_compat.h
+    	linux-core/drm_ttm.c
+    	shared-core/i915_dma.c
+    
+    Bump driver minor to 13 due to introduction of new
+    relocation type.
+
+commit b6dc381fabb199e70dc681e44e31452af8536313
+Merge: 7f04dd0 2a618e5
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Wed Mar 12 10:18:33 2008 +0000
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+    
+    Conflicts:
+    
+    	shared-core/i915_dma.c
+    	shared-core/i915_drv.h
+    	shared-core/i915_irq.c
+
+commit 7f04dd06e6003dd492ae5ddc876121a686f49157
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Wed Mar 12 09:47:52 2008 +0000
+
+    Add sample code to test hotplug events
+
+commit 2a618e5a7f6d26fe85e7d931d0ef08d9f18b1b7c
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Mar 12 10:36:40 2008 +0100
+
+    Bug # 14712
+    Disable page saving for GPU read-only TTMs.
+
+commit 5bebcd7a0b548b29a9859b2949b06662968cc868
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Mar 12 10:19:36 2008 +0100
+
+    Dont allow !sysadmin clients to alter the memory type of
+    NO_EVICT buffers.
+
+commit 88be276a427124cc545a7d89b137e4ae6dd79acb
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Thu Jan 17 13:04:42 2008 +0000
+
+    Fix for debug memory routines
+
+commit 32625774072f905d15024cc40ce7fd364d9ee4cd
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Thu Jan 17 13:04:23 2008 +0000
+
+    Add error message
+
+commit c0a1cd052ac44d1b342fa3f26afe1bd21d92b194
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Jan 17 13:10:36 2008 +0100
+
+    Add an emergency pinnable memory quota for root-only processes.
+
+commit 7bcce66a1d5c93ff9b9f20d45d5b2c33c8ca8da9
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Mar 12 10:07:56 2008 +0100
+
+    Fix kernel crash when we hit OOM conditions.
+    (Alan Hourihane)
+
+commit f1a681ebe5573c2ec7806ba4cb754314baef6935
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Mar 12 10:02:09 2008 +0100
+
+    Avoid duplicate calls to drm_ttm_bind in some cases.
+
+commit fa1d88e3b2de843f33c9d77c9d95db762a950a14
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Mar 12 09:56:06 2008 +0100
+
+    Make sure other TTM memory types than TT is really unbound when evicted.
+
+commit 8a18d123f55a7fb11ce333f0b1095020918b8616
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Feb 28 09:08:52 2008 +0100
+
+    Avoid large kmallocs.
+
+commit 981f515e2bd4d570ea33bb74ae82cd5b56cc9121
+Author: Dave Airlie <airlied@panoply-rh.(none)>
+Date:   Wed Mar 12 14:48:01 2008 +1000
+
+    drm: fix fd closing ordering.
+    
+    If the master fd goes away before the aiglx fd, we try and get a lock
+    that actually doesn't exist.
+
+commit cf1a2499ed9a0051bcd8627136fb53b496b6484c
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Mar 11 21:24:29 2008 +0000
+
+    global hotplug events happen in the pipe A stat register,
+    they are not pipe A specific. Remove pipe B code.
+
+commit 903d9231d6f998657cc80ee6f20ded4df68e691b
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Mar 11 20:29:37 2008 +0000
+
+    Add support for monitor hotplug signals/waits
+    
+    Also adjust i915 irq handling as it follows the 16bit'ism's
+    of the i8xx series.
+
+commit f13936f7fc4d4932d5c511ccec29f1c4d24dc2dc
+Author: Stuart Bennett <sb476@cam.ac.uk>
+Date:   Tue Mar 11 00:33:58 2008 +0000
+
+    nouveau: move AGP reset to mem_init_agp
+    
+    Also, power cycle PGRAPH when resetting AGP -- it seems to fix problems encountered by p0g on nv25
+
+commit 5a7f4b3074d5cda909fc7329bc91da11d89181e1
+Author: Dave Airlie <airlied@panoply-rh.(none)>
+Date:   Tue Mar 11 16:05:26 2008 +1000
+
+    drm: fix oops on unload.
+    
+    if we are unloading the module, there is no master so therefore no lock
+
+commit 52748d17923b7e501b707b950227864c0b64d8a1
+Author: Dave Airlie <airlied@panoply-rh.(none)>
+Date:   Tue Mar 11 11:49:27 2008 +1000
+
+    drm: hopefully fix cursors on 965
+
+commit a7e6ca62ad0d9c3c45fd9e1d81b59c2db2d714cf
+Merge: a7dc4d0 9f19e79
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Mon Mar 10 23:36:27 2008 +0100
+
+    Merge branch 'modesetting-101' of ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+
+commit a7dc4d08b9b4f8fe6fcaa4c778f6dd3718d1e36a
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Mon Mar 10 23:35:07 2008 +0100
+
+    rradeon_ms: rework fence code and bring radeon ms up to date
+
+commit 07ba3b7193f1a50c3ef0509f9e37dab41457f81b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Mar 10 18:30:17 2008 +1000
+
+    remove unneeded load call
+
+commit 2848f048616c2c97f02701386ee73137a1307e2c
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu Jan 24 11:46:45 2008 -0800
+
+    Switch from PIPE_VBLANK to PIPE_EVENT interrupts.
+    
+    My 965GM gets interrupts stuck when using the old PIPE_VBLANK interrupt.
+    Switch to the PIPE_EVENT interrupt mechanism, and set the PIPE*STAT
+    registers to use START_VBLANK on 965 and VBLANK on previous chips.
+
+commit ce3733572e4eea6d9adb167d8fccac745455445b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Mar 8 08:30:03 2008 +1000
+
+    drm/radeon: check sarea_priv exists
+
+commit 9f19e79f955281b9de393219e4ad9835ffe29c49
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Mar 7 17:09:51 2008 +1100
+
+    drm: we already worked out the pitch. multiplying by 4 is just madness..
+
+commit 1ccccbd4ce3463edb459eb193feb572938fce19e
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Mar 7 15:08:59 2008 +1100
+
+    nouveau: redo channel idle detection
+    
+    Will hopefully work a bit better than previous code, which depended on
+    knowing the channel's most recent PUT value.  Some chips always return
+    0 on reading these regs, and currently userspace is the only other entity
+    which knows the value.
+
+commit cd924de02927a091c517b0ac6b9cd8f065ce448c
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Mar 7 14:38:05 2008 +1100
+
+    nouveau: don't touch NV_USER regs on channel destroy.
+    
+    Not only was this entirely pointless, it actually causes my NV30GL to
+    die randomly when channels are destroyed.
+
+commit 33cb42a9f7c7c4f4dd91756af55de7352944efa4
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Mar 7 13:03:42 2008 +1100
+
+    make startup of Xorg smoother if the mode doesn't change.
+    
+    just flip the framebuffer in when required.
+
+commit cf28ca4212662c3c7e4bfbe51aee307ac539fb3d
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Mar 7 13:03:32 2008 +1100
+
+    actually turn the irq off
+
+commit 348d95e00be73b650dabcf121e6b18d669bf4192
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Mar 7 12:25:26 2008 +1100
+
+    worst merge effort ever
+
+commit 47b7ec71fefc2574293c48172c563f549c31f87a
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Mar 7 12:15:38 2008 +1100
+
+    drm/modesetting: fixup irq removal on exit
+
+commit f96baf1e1ec10768ea2027f75ebaef46f7d7f30a
+Merge: ccae12a 2540ea7
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Mar 7 11:59:21 2008 +1100
+
+    Merge branch 'master' of ../../drm into modesetting-101
+
+commit 2540ea7dc6c0c4f0ebca3370d6ec7359e4276e13
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Mar 7 09:29:35 2008 +1000
+
+    flush_agp_mappings commit
+
+commit ccae12a837e7b17c4e9211295ecbd18807020742
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Mar 7 08:58:24 2008 +1000
+
+    I really screwed up that merge somehow
+
+commit add7d21c79e2bd2012d92bb0043023230ec9aa74
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Mar 7 08:56:20 2008 +1000
+
+    drm: fixup for new sysfs API
+
+commit 48a166af14d7455835b9dc2ffd831347d18635d2
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Mar 7 08:49:27 2008 +1000
+
+    woah somehow got these upstream
+
+commit 92a30dd608c2838dea97efc04e1447056f37d0b5
+Author: Dave Airlie <airlied@panoply-rh.(none)>
+Date:   Thu Mar 6 14:43:23 2008 +1000
+
+    drm/bo: allow non-suser priv to add kernel BOs.
+    
+    modprobe can be run with dropped capabilities we still want the kernel bos
+    to work.
+
+commit fef1c93aa87a1ccbc473749a7e42557fc90a1fca
+Author: Alan Hourihane <alanh@localhost.(none)>
+Date:   Wed Mar 5 10:33:57 2008 +0000
+
+    build fix
+
+commit b87c7ff79ee88ec39a285bc17bd2996252b9fd48
+Author: Alan Hourihane <alanh@localhost.(none)>
+Date:   Wed Mar 5 10:33:16 2008 +0000
+
+    Add property info.
+    
+    fix bo handle
+
+commit 1a959a2095aef397ea14a6f6cbdf2a035ec0eb5c
+Author: Alan Hourihane <alanh@localhost.(none)>
+Date:   Tue Mar 4 17:53:04 2008 +0000
+
+    Check mode before adding to EDID
+
+commit 8bfe29d9e44690a3896406acb25ca654dfad054d
+Author: Alan Hourihane <alanh@localhost.(none)>
+Date:   Tue Mar 4 17:52:37 2008 +0000
+
+    Use ARRAY_SIZE
+
+commit 3ea1902be993e88c068ce67355e2b3d253d1c9f2
+Author: Alan Hourihane <alanh@localhost.(none)>
+Date:   Tue Mar 4 17:51:56 2008 +0000
+
+    propogate failed fixups back up
+
+commit 5662934ee467c3a29f9551a40fc7b2f6ee16280a
+Author: Alan Hourihane <alanh@localhost.(none)>
+Date:   Tue Mar 4 17:50:59 2008 +0000
+
+    Fix connector description table
+
+commit 44a2209790e3f9651b72a884cc8539144b619d1c
+Merge: e00dea8 d5c0101
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Mar 6 05:39:07 2008 +1000
+
+    Merge branch 'master' of ../../drm into modesetting-101
+    
+    Conflicts:
+    
+    	shared-core/drm.h
+
+commit d5c0101252e9f48ef1b59f48c05fea7007df97f0
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Feb 18 10:39:21 2008 +1000
+
+    ttm: make sure userspace can't destroy kernel create memory managers
+    
+    this adds something to say the kernel initialised the memory region not
+    the userspace. and blocks userspace from deallocating kernel areas
+
+commit 180c9188f4cb7163f1e3e7d5098eaabf29a98540
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Feb 20 13:27:10 2008 +1000
+
+    drm/ttm: add ioctl to get back memory managed area sized
+    
+    taken from modesetting branch but could be useful outside it.
+
+commit e00dea812ddb9b483de9f58f7a7aa7105427512d
+Merge: f78cdac 1257459
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Mar 6 05:26:23 2008 +1000
+
+    Merge branch 'master' of ../../drm into modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/drmP.h
+    	linux-core/drm_drv.c
+    	linux-core/drm_proc.c
+    	linux-core/drm_stub.c
+    	linux-core/drm_sysfs.c
+
+commit 12574590cdf7871755d1939463ca6898251fd0d1
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Mar 6 05:21:50 2008 +1000
+
+    drm: reorganise minor number handling using code from modesetting branch
+    
+    Rip out the whole head thing and replace it with an idr and drm_minor
+    structure.
+
+commit a875821f7b19a1bcee238cef5c3b507d2869542d
+Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
+Date:   Wed Mar 5 19:25:03 2008 +1000
+
+    drm: Fix for non-coherent DMA PowerPC
+    
+    This patch fixes bits of the DRM so to make the radeon DRI work on
+    non-cache coherent PCI DMA variants of the PowerPC processors.
+    
+    It moves the few places that needs change to wrappers to that
+    other architectures with similar issues can easily add their
+    own changes to those wrappers, at least until we have more useful
+    generic kernel API.
+    
+    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
+
+commit 638353103d009d44bd5bdbe97cc7cef1bf011cdf
+Author: Xiang, Haihao <haihao.xiang@intel.com>
+Date:   Wed Mar 5 15:08:46 2008 +0800
+
+    i915: Evict if relocatee buffer is CACHED_MAPPED before
+    writting relocations, otherwise the GPU probably sees some
+    inconsistent data. Fix fd.o bug#14656
+
+commit f78cdac8e512642db1aaf09bf9178e23ede25586
+Author: Dave Airlie <airlied@panoply-rh.(none)>
+Date:   Wed Mar 5 15:28:59 2008 +1000
+
+    fixup previous merge
+
+commit 4dbf447f4305e3c2aa8914b5ccfc07d9bf8ef28e
+Author: Dave Airlie <airlied@panoply-rh.(none)>
+Date:   Wed Mar 5 15:28:38 2008 +1000
+
+    drm: fixup compat with old x.org drivers
+
+commit 4aa7efe398911bd58fb348703444a92114e45114
+Author: Dave Airlie <airlied@panoply-rh.(none)>
+Date:   Wed Mar 5 10:41:54 2008 +1000
+
+    libdrm: fix warnings in mode code
+
+commit 43891ff2d0176f013796b3c2a340b7d379d703ee
+Merge: 81db485 a6a2f2c
+Author: Dave Airlie <airlied@panoply-rh.(none)>
+Date:   Wed Mar 5 10:37:02 2008 +1000
+
+    Merge remote branch 'origin/master' into modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/drm_compat.c
+
+commit 81db48536c9d7bb23c448af6a6f1de81df755585
+Author: Dave Airlie <airlied@panoply-rh.(none)>
+Date:   Wed Mar 5 10:31:43 2008 +1000
+
+    remove unused functions + include header file
+
+commit a6a2f2c8c491617de702dc7d62bb55cbada4d42b
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Mar 4 13:45:41 2008 -0800
+
+    Clarify when WAIT_LAZY is relevant to users.
+
+commit 3332a0add63162222bd9c829117cd7e30d981aa7
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jan 30 19:02:56 2008 -0800
+
+    Remove unused DRM_FENCE_FLAG_WAIT_IGNORE_SIGNALS.
+
+commit d41846adb72ba89c94ea1164e366032b1d36bd55
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Mar 4 13:35:23 2008 -0800
+
+    Clarify through the names what drm_ttm_alloc_pages() and friend actually did.
+    
+    These are all about the page directory (pointers to pages) rather than the
+    actual pages backing the allocation.
+
+commit eedf3fa2f08eb774a36109c2fbda7207bf83fbe9
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Mar 4 12:16:51 2008 -0800
+
+    Don't shortcut the info syscall for drmBOBusy on nonshareable objects.
+    
+    This broke the results when you're trying to check if a buffer you dispatched
+    some time ago is done being rendered from.
+
+commit 63fd6f284ddd1096d34b39941683ae244c1e01fc
+Author: Zou Nan hai <nanhai.zou@intel.com>
+Date:   Mon Mar 3 14:49:49 2008 +0800
+
+      [i915] 2D driver may reset Frame count value, this may lead driver
+      to leap it's vblank count a huge value.
+      This will stall some applications that switch video mode if vblank_mode is set to a non zero value in drirc.
+
+commit 9c5ba9f5d153877ab2e7cb623cab5607aa5cd4a8
+Author: Alan Hourihane <alanh@dhcppc16.(none)>
+Date:   Sun Mar 2 21:48:40 2008 +0000
+
+    Add FENCE registers to MMIO list
+
+commit 09999c90ab1bf3f7d8b277895c962c8a7b3afc18
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Fri Feb 29 21:57:40 2008 +0100
+
+    FIX_KMAP_BEGIN requires CONFIG_HIMEM (see include/asm-i386.h/fixmap.h)
+
+commit 612c22f131a25915196e69d7ec1adb6f4ec84a60
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Feb 29 15:38:55 2008 +0100
+
+    Working revision.
+
+commit 1d068973d5f5e6d8d14b4c0c6e28588107aafc6f
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Feb 29 13:31:14 2008 +0100
+
+    Fix compilation breakage on x86-64.
+
+commit 2305100c0fce9ec86a22660e5fed54791cff030b
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Feb 29 13:25:55 2008 +0100
+
+    More post-ioctl work.
+
+commit 0e72819629741339af46d0e303f33482acdf0972
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Feb 29 14:07:29 2008 +1000
+
+    drm: change fb api to take a bo handle not the bo pointer.
+
+commit cdbd616ea5f0ee491ff82cac74b918a14b039917
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Feb 29 10:16:24 2008 +1000
+
+    agp: export the correct symbol
+
+commit 8ef838e5ff7b3c005d7fbc725e17bcccd0e1e1eb
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Feb 28 13:47:15 2008 +0100
+
+    Add a compat kmap_atomic_prot_pfn to do quick kernel map / unmaps of
+    
+    PCI- or high memory.
+    This is substantially more efficient than drm_bo_kmap,
+    since the mapping only lives on a single processor.
+    Unmapping is done use kunmap_atomic(). Flushes only a single tlb() entry.
+    
+    Add a support utility int drm_bo_pfn_prot() that returns the
+    pfn and desired page protection for a given bo offset.
+    
+    This is all intended for relocations in bound TTMS or vram.
+    Mapping-accessing-unmapping must be atomic, either using preempt_xx() macros
+    or a spinlock.
+
+commit 28d4d02d6791c15f61b718039f1d4b907f0e31e9
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Feb 28 14:05:53 2008 +0100
+
+    Initial commit.
+
+commit 40c9e6a26dd251fe2bf207bb259ba7e4a7704fbe
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Feb 28 13:47:15 2008 +0100
+
+    Add a compat kmap_atomic_prot_pfn to do quick kernel map / unmaps of
+    PCI- or high memory.
+    This is substantially more efficient than drm_bo_kmap,
+    since the mapping only lives on a single processor.
+    Unmapping is done use kunmap_atomic(). Flushes only a single tlb() entry.
+    
+    Add a support utility int drm_bo_pfn_prot() that returns the
+    pfn and desired page protection for a given bo offset.
+    
+    This is all intended for relocations in bound TTMS or vram.
+    Mapping-accessing-unmapping must be atomic, either using preempt_xx() macros
+    or a spinlock.
+
+commit 01dcc47d895997f77c9457558e974d41c23ed4e1
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Feb 28 16:24:17 2008 +1000
+
+    drm: add modesetting as a driver feature.
+    
+    This change adds a driver feature that for i915 is controlled by a module
+    parameter. You now need to do insmod i915.ko modeset=1 to enable it the
+    modesetting paths.
+    
+    It also fixes up lots of X paths. I can run my new DDX driver on this code
+    with and without modesetting enabled
+
+commit 132ba667f4a88bb182e2d2abc7c4e60699398380
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Feb 28 12:59:39 2008 +1000
+
+    drm: add a check for if modesetting is supported.
+    
+    This is Linux only code, it just uses sysfs to see if a control
+    device has been registered on the requested PCI ID
+
+commit fd595fa4dc6f788a8a1e1b56178e15f411706cb9
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Feb 27 21:44:40 2008 +0100
+
+    Reinstate buffer idle before applying relocations.
+
+commit 72983ff30183745cd96760aa07b857c44daebde7
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Feb 27 19:46:28 2008 +0100
+
+    Don't wait for buffer idle before applying relocations.
+
+commit 75c9e0d3462f04766d490fac5cc93569957a8365
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Tue Feb 26 23:30:45 2008 +0100
+
+    radeon: remove TTM from an earlier merge
+
+commit 1e66322633943bc27bf5e68609f564fa95e6e6a1
+Merge: 73cb02b e87cec1
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 26 15:42:41 2008 +0000
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+    
+    Conflicts:
+    
+    	shared-core/i915_dma.c
+
+commit 73cb02b5430b3881cbce5fb4852ac573c11ff831
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 26 15:21:44 2008 +0000
+
+    DRM_INFO  -> DRM_DEBUG
+
+commit 191385d51880d5757c8038ff4b46ee5ccb3561c1
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 26 15:20:59 2008 +0000
+
+    DRM_INFO -> DRM_DEBUG
+
+commit 89f65c50d70fd2165433ead3cfaa88ee9519e261
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 26 15:20:29 2008 +0000
+
+    define PRETHAW
+
+commit 2476cb209ebbb11edace4bbce0cfaff4e1599dca
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Fri Feb 22 11:46:22 2008 +0000
+
+    Implement short circuit for base change only
+    
+    Allow mode to be set with fb_id set to -1, meaning set
+    the mode with the current fb (if we have one bound).
+    
+    Allow intelfb to hook back up it's fb if modesetting
+    clears it (maybe temporary).
+    
+    Move any crtc->fb related register changes to set_base
+    in intel_fb.
+    
+    General intelfb cleanups.
+
+commit e87cec19687089f9f268ec0eb81b57e6fb8de6a9
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Feb 26 10:47:05 2008 +0100
+
+    [i915] Relocation fixes.
+
+commit b92e343dc46212b665f0465274ef6767882bb10c
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Feb 26 16:19:54 2008 +1000
+
+    i915: fix typos
+
+commit 35d1b13b4a574faf3a95bf3b7cdd14897ef07f67
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Feb 26 16:11:39 2008 +1000
+
+    i915_mmio: add overlay regs
+
+commit 879fb12e289e8997ef325dd5b0068d0d4d6c26df
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Feb 26 17:11:03 2008 +1100
+
+    drm: fix pick crtcs mode selection code
+
+commit 56bb29cf37c27b283efcd1a32d3583393e5208ea
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Feb 26 00:01:09 2008 +0100
+
+    Make the execbuffer code reasonably safe against errors.
+    
+    In particular -EAGAINs, which should be common during Xserver operation.
+    Also handle the fence creation failure case.
+
+commit d6098db1409e8ee45052920d3acdd3b6f2cb80aa
+Author: Roland Scheidegger <sroland@tungstengraphics.com>
+Date:   Sat Feb 23 11:01:36 2008 +0100
+
+    fix texture uploads with large 3d textures (bug 13980)
+    
+    Texture uploads could hit the blitter coordinate limit, adjust the texture
+    offset when uploading the pieces. Make sure to check the end address of the
+    upload too.
+
+commit 20d0e539160fcbdd65ecbe188ac1ce2800af1b5c
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Fri Feb 22 13:57:38 2008 -0800
+
+    i915: put ARX back into index mode before doing restore
+    
+    Fixes resume from hibernate in some configurations.
+
+commit 0d32015974f019e8d2ea1eb48acd9e082389d9c5
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Fri Feb 22 13:41:05 2008 +0100
+
+    nouveau: Remove some random (french) comment.
+
+commit 7e5f9c8bd33c503fef9bea20b955a5a48e255621
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Fri Feb 22 13:35:13 2008 +0100
+
+    nouveau: A single define of dma skips is more than enough.
+
+commit b7086e6ae5632ad3c0f7c54ffd641519959d84a6
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Fri Feb 22 11:22:52 2008 -0500
+
+    Fix one last occurance of struct _drm_i915_batchbuffer.
+    
+    Thanks to Todd Merrill for pointing it out.
+
+commit a72399da2a89aecdcf293bc262d76d8c6e10d0ef
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Fri Feb 22 11:38:08 2008 +0000
+
+    silence warning
+
+commit b0fee67a305cf37cf2a71d6c3753fba825400b71
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Fri Feb 22 00:12:39 2008 -0500
+
+    i915: Remove leading underscore from struct tags.
+    
+    This matches the changes in mesa to use the system drm includes
+    for the definitions of the drm ioctl structs.
+
+commit fad1db2d73f8dd95f17db10c7ea381c7774e3c29
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Feb 21 15:58:56 2008 +1000
+
+    modesetting: fix memory leak and misallocation
+
+commit cdad850ebc3570e5ff5a0996f36832c965aa8a1d
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Feb 20 13:27:10 2008 +1000
+
+    add ioctl to get back memory managed area sized - used for kernel inited areas
+
+commit 0d1cb1e8408d497fec66d9f31603f93800049c75
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Feb 20 13:26:40 2008 +1000
+
+    hopefully shit works now without this...
+
+commit e85ec6693ac85a75da1f4b20beee255b6672cb33
+Merge: ea3de6d 32c6792
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Thu Feb 21 23:56:27 2008 +0000
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+
+commit 32c67922b722e375268789600cd89b80749e7a71
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Thu Feb 21 15:31:48 2008 -0500
+
+    Don't free irq resources until after we've unregistered the handler.
+
+commit ea3de6daa4226cdcc4b50c339e0df6130014d2fe
+Merge: 3f6c8f6 374b41e
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Thu Feb 21 11:37:07 2008 +0000
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/drm_sysfs.c
+
+commit 374b41e5bcdb5c22471c8c16dd794ac54c4f76d2
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Thu Feb 21 11:49:38 2008 +0100
+
+    linux: Clean up vblank related resources from drm_irq_uninstall().
+    
+    This fixes at least two problems:
+    
+    * The vblank_disable_fn timer callback could get called after the DRM was
+      de-initialized, e.g. on X server shutdown.
+    * Leak of vblank related resources when disabling and re-enabling the IRQ, e.g.
+      on an X server reset.
+
+commit 9d1061b8cfaf91bff6b55398c6059be97c2e0165
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Wed Feb 20 22:22:49 2008 +0000
+
+    fix SAREA
+
+commit 3f6c8f64aa8c3a9e427d453433e828693fb4e017
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Wed Feb 20 22:22:49 2008 +0000
+
+    fix SAREA
+
+commit 88cb873045b76bf947f45fb127baa96f055ad32c
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Wed Feb 20 19:54:36 2008 +0000
+
+    minor test fixes
+
+commit 66cd6bd66667433f56feecdcc94a2bb228d5a7ca
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 19 15:32:00 2008 +0000
+
+    compatibility code for  pci_get_bus_and_slot()
+
+commit e484681a43964502bf7e61a1701bb85ab6befab3
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Feb 20 11:44:10 2008 +1000
+
+    remove more offset
+
+commit 8844245cfcc5b19caafc772fd457401ab3253a28
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Feb 20 10:51:19 2008 +1000
+
+    drm/fb: get rid of offset from structure use bo offset
+
+commit 2c409f9a07a9d815b95fc8a5a4705d7988afe5df
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Feb 18 10:39:21 2008 +1000
+
+    ttm: make sure userspace can't destroy kernel create memory managers
+
+commit 6c41e5381fb8ea890943b6679fe6ae7ac4cfea4d
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Feb 20 10:02:20 2008 +1000
+
+    drm: add support for passing state into the suspend hooks.
+    
+    fix i915 driver to use state for hibernate save avoidance.
+    
+    Signed-off-by: Dave Airlie <airlied@redhat.com>
+
+commit 8caf6e95712bfae8d1a42ffabafcbb9686766116
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 19 15:17:24 2008 +0000
+
+    Fix up conflicts for DRI2 (untested)
+
+commit f24ed2ad6c66e50268fd175146a1661ae4bbd350
+Merge: 2b1c9cd 5d8c754
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Mon Feb 18 22:35:46 2008 +0000
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/i915_fence.c
+    	linux-core/via_fence.c
+    	shared-core/i915_dma.c
+    	shared-core/i915_drv.h
+    	shared-core/i915_irq.c
+
+commit 5d8c754bc2c720d70bbdeca6b294660105717a62
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sat Feb 16 19:19:29 2008 -0800
+
+    [915]: more registers for S3 (DSPCLK_GATE_D, CACHE_MODE_0, MI_ARB_STATE)
+    
+    Failing to preserve the MI_ARB_STATE register was causing FIFO underruns on
+    the VGA output on my HP 2510p after resume.
+
+commit cd87e6352bf529ae0bc57e8434ddfccec3660d9a
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Sat Feb 16 03:50:10 2008 +0100
+
+    nouveau: no GART on ia64 either.
+
+commit 2b1c9cd696049d23845870329d2b61a5873f7b13
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Fri Feb 15 16:13:21 2008 -0800
+
+    i915: initial (and untested) TV out support
+    
+    Ported from xf86-video-intel.  Still need to tie in TV modes somehow, though
+    preferably w/o using the properties mechanism.
+
+commit 15cbde683f5006b541b22c41ff840aefb017ff8e
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sat Feb 16 04:33:27 2008 +1100
+
+    nv40: actually init all tile regs.
+
+commit 088b38382962a9dccca59a53af2444a1fe8bc18f
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Feb 15 16:42:44 2008 +1000
+
+    fb: fixup the offset by getting it from the right place
+
+commit 222092a1a810b67b014ad6881f0c028ec6563329
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Feb 15 16:15:04 2008 +1000
+
+    various fixes from trying to get userspace started
+
+commit 75b01cf996f2efdd72c5280238460443d5d1fbc7
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Feb 15 10:04:28 2008 +1000
+
+    switch naming to new proposed scheme
+
+commit f2f8ace3e1342d83096bf392922130d39cd86ec2
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Feb 15 09:57:30 2008 +1000
+
+    remove drm_minors_limit
+
+commit 8bf8cd63bb4631b57ceb27058f81d767a94edc74
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Feb 14 07:37:34 2008 +1000
+
+    missing bits
+
+commit 373dbcf8b25750967e9ba24433cff872df41cb74
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Feb 5 13:27:16 2008 -0500
+
+    i915: Add a dri2 init path that gets the lock from the dri2 sarea.
+
+commit db3f03ae3538bea3d29ef66ac24d9a1f54cff418
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Feb 12 16:08:18 2008 -0500
+
+    i915: Only look up dev_priv->mmio_map if it's not already set up
+
+commit ee15459483d50b2efe630051b45f36cfbb351683
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Feb 5 12:27:48 2008 -0500
+
+    i915: Add I915_PARAM_CHIPSET_ID param to get chipset ID.
+
+commit 4feb0638f1a8eb8527647ff47312ee61e3f683f9
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Feb 5 12:25:22 2008 -0500
+
+    i915: Make sarea_priv setup optional.
+
+commit a4fc1d7ac6be8d2648acda463723d56c68e4122e
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Feb 13 16:30:15 2008 +1000
+
+    start moving over to proper hierarchy wrt master accesses
+
+commit 0fbee62ec14d08714dbc558dd20cc00b9a79c042
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Feb 13 15:19:42 2008 +1000
+
+    major port of multi-master ideas into modesetting
+
+commit db85ed25afc616acfaadb21facf6066354f9d490
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Feb 13 12:20:02 2008 +1000
+
+    Revert "After the previous revert fix libdrm to start at minor 1"
+    
+    This reverts commit f51dc37d75b0b1b8e5636f8f2c201e29986517ea.
+    
+    Conflicts:
+    
+    	tests/modedemo/demo.c
+
+commit f276c845bde4c712aa383540a2dd2055ecc00031
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Feb 13 12:12:52 2008 +1000
+
+    drm: re-write minor number allocation to use an idr.
+    
+    Fixup the minor number allocation scheme to use an idr and move the control
+    nodes up higher.
+
+commit 04257f1a5a28550dc430d8051bb58fd0ac34e77d
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sat Feb 9 18:23:35 2008 +0100
+
+    radeon_ms: bring radeon_ms up to date with lastest changes
+
+commit d63b57749f097b36df04c6beff9b35a1dd859523
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu Feb 7 17:33:28 2008 -0800
+
+    Restore pipeconf regs unconditionally
+    
+    On many chipsets, the checks for DPLL enable or VGA mode will prevent the
+    pipeconf regs from being restored, which could result in a blank display or X
+    failing to come back after resume.  So restore them unconditionally along with
+    actually restoring pipe B's palette correctly.
+
+commit db2a1a223b94a5da9c5483b7963660c70052f025
+Author: Jakob Bornecrantz <jakob@aurora.(none)>
+Date:   Thu Feb 7 23:32:59 2008 +0100
+
+    Added you can now clone displays in modedemo
+
+commit f51dc37d75b0b1b8e5636f8f2c201e29986517ea
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Thu Feb 7 22:21:50 2008 +0000
+
+    After the previous revert fix libdrm to start at minor 1
+    and fixup the demos
+
+commit fe83c068612dd1abef8cf6d224b6b0330604a8f1
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Thu Feb 7 21:13:36 2008 +0000
+
+    Revert "DRM_CONTROL_ALLOW logic was reversed"
+    
+    This reverts commit 7af1bb874d9b8b1b8760ad200cee587c41c23434.
+
+commit 6f19473191ae543fcc199d252c5865c0734d38ad
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Thu Feb 7 11:21:09 2008 -0800
+
+    Fix saveGR array size
+    
+    Make sure we have enough room for all the GR registers or we'll end up
+    clobbering the AR index register (which should actually be harmless
+    unless the BIOS is making an assumption about it).
+
+commit 8b6c96dedd4ba5dfbfec6a7c831d566e31d28781
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Thu Feb 7 10:48:08 2008 -0800
+
+    i915: save/restore interrupt state
+    
+    On resume, if the interrupt state isn't restored correctly, we may end
+    up with a flood of unexpected or ill-timed interrupts, which could cause
+    the kernel to disable the interrupt or vblank events to happen at the
+    wrong time.  So save/restore them properly.
+
+commit 79d69285202b55f269aa88a6bcda257257c9dee3
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Thu Feb 7 10:40:06 2008 -0800
+
+    Fix vblank enable/disable callbacks
+    
+    There were two problems with the existing callback code:  the vblank
+    enable callback happened multiple times per disable, making drivers more
+    complex than they had to be, and there was a race between the final
+    decrement of the vblank usage counter and the next enable call, which
+    could have resulted in a put->schedule disable->get->enable->disable
+    sequence, which would be bad.
+    
+    So add a new vblank_enabled array to track vblank enable on per-pipe
+    basis, and add a lock to protect it along with the refcount +
+    enable/disable calls to fix the race.
+
+commit 2ceafcccb77723a464abd51d07e664933e117b6e
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Thu Feb 7 19:32:20 2008 +0100
+
+    Wrong open call
+
+commit c8b45e9362aa16fed08540996af6d0b1e2e730d0
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Thu Feb 7 19:25:52 2008 +0100
+
+    Added userspace part of hotplug ioctl and demo
+
+commit 0618ac8a07d834e469cb96818a1dfee6f50662b8
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Thu Feb 7 19:24:58 2008 +0100
+
+    Added kernel part of hotplug ioctl
+
+commit 34b76e0fac579e4afd269ebd3cbcbdd0416ec944
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Thu Feb 7 19:23:27 2008 +0100
+
+    Added hotplug ioctl
+
+commit 87d5f9cb2d2812c1da726e38965f0eb78c2b8dfa
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Thu Feb 7 19:22:38 2008 +0100
+
+    Small update to modedemo
+
+commit 516c7a7b28ebf4bba797eaa718450b51aa772c6e
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 5 15:30:28 2008 +0000
+
+    update app to cycle through 4 fbdev's
+
+commit 127cb1ff9a7bbb7af73cc418a7adc30d68c454d2
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 5 15:24:29 2008 +0000
+
+    tweak it
+
+commit 936e32b08c05c9658cc51cd8fe118e0342733a79
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 5 15:18:05 2008 +0000
+
+    make modefb/modedemo match each others test output.
+
+commit 5997e10ca75ac87fd54b3bc0035938e1a9ad7929
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 5 15:15:13 2008 +0000
+
+    consistency
+
+commit 7af1bb874d9b8b1b8760ad200cee587c41c23434
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 5 15:12:46 2008 +0000
+
+    DRM_CONTROL_ALLOW logic was reversed
+
+commit 53937a189f8dbe2dd82fb97c0e88454d29a6c7cd
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 5 10:12:21 2008 +0000
+
+    build fix for older kernels
+
+commit de0084590bc34c2c23cb3d7a754f3e98059f4cf2
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 5 10:11:46 2008 +0000
+
+    fix some warnings
+
+commit 5e81a40f3b531ef95f84581a40b5a5badd9ee986
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 5 10:11:24 2008 +0000
+
+    build fix for older kernels
+
+commit f2c706e24782940582b75d5286f9bbf2fe37f0cd
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 5 10:11:01 2008 +0000
+
+    Fix function declaration
+
+commit 7cc825f5946659ad586fd4aa4fd867a1373f3373
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 5 10:10:36 2008 +0000
+
+    Add missing round_jiffies_relative() for older kernels
+
+commit 76748efae2f51409813eeb6b91b783c73cb2845e
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Feb 5 10:35:56 2008 +0100
+
+    i915: Re-report breadcrumbs on poll to the fence manager,
+    
+    since a breadcrumb may actually turn up before a corresponding fence object
+    has been placed on the fence ring.
+
+commit c9772f8c037667ed3586337f90904e7978f8ab14
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 5 09:28:51 2008 +0000
+
+    consistency
+
+commit 709aa4629321533bfa30c72c4e33f229c895358a
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Feb 5 09:28:32 2008 +0000
+
+    Remove duplicate
+
+commit d8bbd02a6086ebe302859cec22c503d32ed77dc6
+Author: Jakob Bornecrantz <jakob@aurora.(none)>
+Date:   Mon Feb 4 20:51:59 2008 +0100
+
+    Modedemo now uses two crtc and output pairs
+
+commit a0781e762295ce3d5f6e839d437a0de505cefa3b
+Author: Stuart Bennett <sb476@cam.ac.uk>
+Date:   Mon Jan 28 22:59:26 2008 +0000
+
+    nouveau: make nv34 work every time, not just every 2nd time
+    
+    And make nv30_graph_init a bit more like mmio-traces
+
+commit 733e07663e50087ca1e9af8e9b5def556521e3b5
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sat Feb 2 12:46:31 2008 +0100
+
+    nouveau: NV40 can/should now be able to run after the blob.
+    
+    - Moved the fix from the ddx to drm, because it seemed more appropriate.
+    - Don't be shy, report if it works for you or not.
+
+commit c77b0937f290568604961fa0013691349c5fcf3b
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Jan 31 14:11:12 2008 +0100
+
+    Add an fence_class_manager::last_queued_sequence member, since a
+    sequence number may actually turn up before the corresponding fence
+    object has been queued on the ring.
+    
+    Fence drivers can use this member to determine whether a
+    sequence number must be re-reported.
+
+commit 47ee6237fe86a8621744bbd6cecb8b5e58848b05
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Jan 30 22:14:02 2008 +0100
+
+    i915: Avoid calling drm_fence_flush_old excessively.
+
+commit f1edb7ad91d8b92057ffa02eb162e3740d05a147
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Jan 30 22:06:02 2008 +0100
+
+    Simplify the fencing code and differentiate between flushes and
+    waiting types.
+    Add a "command_stream_barrier" method to the bo driver.
+
+commit abed0995585050d5fd179958d01f14f7e430e795
+Author: Jakob Bornecrantz <jakob@aurora.(none)>
+Date:   Wed Jan 30 16:16:10 2008 +0100
+
+    Fix for cursor off
+
+commit 841ef9eb8da8058d6495e9f8e1b14af2709dfaa1
+Author: Jakob Bornecrantz <jakob@aurora.(none)>
+Date:   Wed Jan 30 15:47:26 2008 +0100
+
+    ModeFB demo now display cursor
+
+commit 9a7e45858d8faa7afbe31b130d2de1be781085da
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Jan 30 11:40:13 2008 +1100
+
+    nv40: some more nv67 changes
+    
+    With some luck the drm-side will be OK now for this chipset.
+
+commit 0744cb153aabd290fd4832288a530adeb5561e2c
+Author: Mirko <mailbox.stan@gmail.com>
+Date:   Tue Jan 29 10:11:27 2008 -0500
+
+    Add new RV380 pci id
+    
+    bug 14289
+
+commit 01f6afcfea9d315ad1473045da141bfc95bcb7e6
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Mon Jan 28 21:05:22 2008 -0800
+
+    Fix hibernate save/restore of VGA attribute regs
+    
+    In hibernate, we may end up calling the VGA save regs function twice, so we
+    need to make sure it's idempotent.  That means leaving ARX in index mode after
+    the first save operation.  Fixes hibernate on 965.
+
+commit b9b6f9234dd9e702a7d58978cbd88dc297b2b51a
+Author: Jakob Bornecrantz <jakob@aurora.(none)>
+Date:   Mon Jan 28 22:06:09 2008 +0100
+
+    Misc panning fixes for intel_fb
+
+commit a2254c5a9670a3e865f0eb5acd46e905c9b146ce
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Mon Jan 28 03:12:29 2008 +0100
+
+    Added cursor support
+
+commit b8755ff7c33baac2abe5b5fe00897b33a896a098
+Author: Maciej Cencora <m.cencora@gmail.com>
+Date:   Sun Jan 27 12:50:31 2008 +1000
+
+    drm: add initial rs690 support for drm.
+    
+    This adds support for configuring the RS690 GART.
+
+commit 6bfb9b639ab2ab71969eeeb72105ce7e0c487462
+Author: George Sapountzis <gsap7@yahoo.gr>
+Date:   Fri Jan 25 16:54:29 2008 +0200
+
+    mach64: fix after vblank-rework
+    
+    don't disable vblank interrupts (similar to r128)
+
+commit 98361cf28c62530e34758b27aa1eea805269e0e5
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Jan 25 16:34:05 2008 +1000
+
+    if irq already enabled well just keep trucking
+
+commit fa7b779c91cbac16ec699efab4ee150412d4ba74
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Jan 25 16:32:09 2008 +1000
+
+    don't reinit ring if already initialised
+
+commit e7a41d7f5be49241480a20eb733262712e0f8dcb
+Merge: fb9ea12 bfdddd2
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Jan 25 15:27:53 2008 +1000
+
+    Merge remote branch 'origin/master' into modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/drm_bo.c
+    	linux-core/drm_drv.c
+    	shared-core/drm.h
+    	shared-core/i915_dma.c
+    	shared-core/i915_drv.h
+    	shared-core/i915_irq.c
+    	shared-core/radeon_irq.c
+
+commit bfdddd218ec3e7ce3f8e765b93af35661a7bf0fd
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Thu Jan 24 20:59:51 2008 -0800
+
+    Fixup modeset ioctl number & typedef usage
+    
+    Should be 0x08 rather than 0xa0, and shouldn't use typedefs.
+
+commit e3c42f00042ffacc7868ed608b9ecf786dcc4e4a
+Merge: c7ee6cc 5b99306
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jan 24 12:32:08 2008 -0800
+
+    Merge commit 'airlied/i915-ttm-cfu'
+    
+    This requires updated Mesa to handle the new relocation format.
+
+commit c7ee6cc269c26d8e7ed98a16a272eca63daab201
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Thu Jan 24 08:57:04 2008 -0800
+
+    Remove broken 'in vblank' accounting
+    
+    We need to return an accurate vblank count to the callers of
+    ->get_vblank_counter, and in the Intel case the actual frame count
+    register isn't udpated until the next active line is displayed, so we
+    need to return one more than the frame count register if we're currently
+    in a vblank period.
+    
+    However, none of the various ways of doing this is working yet, so
+    disable the logic for now.  This may result in a few missed events, but
+    should fix the hangs some people have seen due to the current code
+    tripping the wraparound logic in drm_update_vblank_count.
+
+commit 5b9930645227d52f47b6dc85cd1aee65bb5820ad
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jan 24 15:18:09 2008 +1000
+
+    i915: fix missing header when copying data from userspace
+
+commit 34b71eb45124b32377b82b4d3737537b9195b0a7
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jan 24 14:37:40 2008 +1000
+
+    i915 make relocs use copy from user
+    
+    Switch relocs to using copy from user and remove index and pass buffer
+    handles in instead.
+
+commit b5a34f5da50e22ecb80853f0f422beb90857dc2d
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Wed Jan 23 08:39:57 2008 -0800
+
+    Fix thinko in get_vblank_counter
+    
+    Should use vtotal not htotal to figure out if we're in a vblank period.
+
+commit cb917843711ab5fe22f311cbd3eb597bce105df5
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Wed Jan 23 08:38:01 2008 -0800
+
+    Fix IS_I915G macro
+    
+    One to many parantheses...
+
+commit 7c726086dd6591c7b32bffdcfd8e180309aad14d
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Wed Jan 23 16:40:19 2008 +0100
+
+    nouveau: Fix warning in nouveau_mem.c
+
+commit c57f43e3a266d247c8a2be6fd7702caab2dc009b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jan 23 16:45:09 2008 +1000
+
+    i915/flush: get the ret the right way around
+
+commit 2f19fe44983647328a97cb4ce513d773459ca853
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jan 23 16:44:51 2008 +1000
+
+    drm/i915: add support for E7221
+
+commit 531f25cfe9d0319f78fe58260bfed08d5e3e8bcc
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Tue Jan 22 15:16:01 2008 -0800
+
+    Correct vblank count value
+    
+    The frame count registers don't increment until the start of the next
+    frame, so make sure we return an incremented count if called during the
+    actual vblank period.
+
+commit 893e311999d1565943899d73c56c674fc9b6e502
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Tue Jan 22 13:11:29 2008 -0800
+
+    i915 irq fixes
+    
+    Ack the IRQs correctly (PIPExSTAT first followed by IIR).  Don't read
+    vblank counter registers on disabled pipes (might hang otherwise).  And
+    deal with flipped pipe/plane mappings if present.
+
+commit 0cd4cbc9a6330bd619608f274592082de7c05bcf
+Merge: 128a8f7 5231a52
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue Jan 22 09:42:37 2008 -0800
+
+    Merge branch 'master' into vblank-rework, including mach64 support
+    
+    Conflicts:
+    
+    	linux-core/drmP.h
+    	linux-core/drm_drv.c
+    	shared-core/i915_drv.h
+    	shared-core/i915_irq.c
+    	shared-core/mga_irq.c
+    	shared-core/radeon_irq.c
+    	shared-core/via_irq.c
+    
+    Mostly trivial conflicts.
+    
+    mach64 support from Mathieu Bérard.
+
+commit 5231a524f53babd127a576d7567671dafb29651b
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Jan 22 14:39:28 2008 +1100
+
+    Revert "Fix pipe<->plane mapping vs. vblank handling (again)"
+    
+    This reverts commit bfc29606e4a818897eebca46a5e23bbe7bc3ce25.
+    
+    This regresses i915 here for me I can't get greater than 0.333 fps with gears
+
+commit 616cef5ec84b97eb676ee7cc6699451d778fad3b
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Mon Jan 21 21:11:47 2008 +0100
+
+    nouveau: don't forget NV80.
+
+commit 641c9a2ecccb4fd51e2453c18df5d1e6a209d6e3
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Mon Jan 21 21:01:28 2008 +0100
+
+    nouveau: new card family for old card designs.
+
+commit fb9ea12438de95a6ac085879e079055eaea3daf8
+Author: Jakob Bornecrantz <jakob@aurora.(none)>
+Date:   Fri Jan 18 15:00:31 2008 +0100
+
+    Made radeon_ms not always compile
+
+commit c6f175cbea1dba3fc26426243acc55b89b8a8064
+Author: Kyle McMartin <kyle@mcmartin.ca>
+Date:   Thu Jan 17 18:51:56 2008 -0500
+
+    i915: fix invalid opcode exception on cpus without clflush
+    
+    i915_flush_ttm was unconditionally executing a clflush instruction
+    to (obviously) flush the cache. Instead, check if the cpu supports
+    clflush, and if not, fall back to calling wbinvd to flush the entire
+    cache.
+    
+    Signed-off-by: Kyle McMartin <kmcmartin@redhat.com>
+
+commit 44a9fa8cc6c7d598163d1885bf69e4bf747a004b
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jan 7 13:10:50 2008 -0800
+
+    Add additional explanation of DRM_BO_FLAG_CACHED_MAPPED before I forget again.
+
+commit ac6b3780c816f81c8159ff5ba07a77563e26a1c5
+Author: Zhenyu Wang <zhenyu.z.wang@intel.com>
+Date:   Wed Jan 9 11:30:35 2008 +0800
+
+    i915: Add chipset id for Intel Integrated Graphics Device
+    
+    This adds new chipset id in drm.
+    
+    Signed-off-by: Zhenyu Wang <zhenyu.z.wang@intel.com>
+
+commit 6ba979ea467ef6ff76c32ee63ee9a6d4073ec672
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Tue Jan 15 16:01:39 2008 +0100
+
+    radeon_ms: use radeon connector type insted of drm
+
+commit 20a8e2d30e99a3248e6f02f792a29d20ec9f2ce5
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Tue Jan 15 14:30:40 2008 +0100
+
+    radeon_ms: cope with lastest drm modesetting change
+
+commit f1f934c8c97d6664fb5e1920a41154c09cc7f293
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Tue Jan 15 14:05:25 2008 +0100
+
+    radeon_ms: add rom parsing & adapt code
+    
+    Add rom (only combios for now) parsing and use informations
+    retrieve instead of hardcoded table. Shuffle code around a
+    bit.
+
+commit 88c511e49dce869d1c4e3271bf642cbb22fef0cf
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Jan 15 10:03:41 2008 +0100
+
+    Properly propagate the user-space fence flags.
+    This avoids a sync flush when user-space has already programmed
+    and MI_FLUSH in the batchbuffer.
+
+commit 099e89edf094ec231621b67129e9226ba50e99ad
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Jan 15 09:46:59 2008 +0100
+
+    Define i915_compat.c upper_32_bits for kernels < 2.6.21
+
+commit 806c1929dcd344f6eab3133584a9c4ce9f3f47bc
+Author: Zou Nan hai <nanhai.zou@intel.com>
+Date:   Tue Jan 15 09:19:02 2008 +0800
+
+     this is to fix a deadloop in drm hang system issue.
+     (1 << bits) is an undefined value when bits == 32.
+     gcc may generate 1 with this expression
+     which will lead to an infinite retry loop in
+     drm_ht_just_insert_please.
+     Because of the different implement of hash_long,
+     this  issue is more frequenly see on 64 bit system
+
+commit 62df4f0a48776e55443d7f61a41e1ed0fb77b6ed
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 14 19:36:10 2008 +1000
+
+    fixup i915 compat resource allocation
+
+commit 269d518008a20dc81231574f2d07d101553d3824
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Mon Jan 14 03:16:40 2008 +0100
+
+    nouveau: make mem alloc debug a little more verbose.
+
+commit e6fc47129ffe972bbee1c08fd822a8c171f21322
+Author: Jakob Bornecrantz <jakob@aurora.(none)>
+Date:   Fri Jan 11 17:33:00 2008 +0100
+
+    Fix for X axis panning problem
+
+commit f07942f74a08e4c65e3b5e5c46f543686ae30c2b
+Author: Jakob Bornecrantz <jakob@aurora.(none)>
+Date:   Fri Jan 11 17:13:48 2008 +0100
+
+    Panning now works without modeset
+
+commit 12a47cd136803883231c9763f2007216236ec3b2
+Author: Jakob Bornecrantz <jakob@aurora.(none)>
+Date:   Fri Jan 11 04:23:32 2008 +0100
+
+    Updated the modedemo test
+
+commit 0b69c1d1d6a09d55d3367296dfdf23269f2721ea
+Author: Jakob Bornecrantz <jakob@aurora.(none)>
+Date:   Fri Jan 11 02:55:00 2008 +0100
+
+    Added fixed misc framebuffer problems
+
+commit f0b7c45653b510693821ad68a20a3820c29195ef
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Jan 11 12:51:08 2008 +1100
+
+    nv05: enable ctx/op methods, and ignore patch valid failures.
+    
+    Yes, I'm quite aware "real" nv04 doesn't support this, hopefully the GPU
+    will just ignore those PGRAPH_DEBUG_3 bits on that hw.
+
+commit 0a4df3372aec219298e3787f6f377941bc51bfcb
+Author: Jakob Bornecrantz <jakob@aurora.(none)>
+Date:   Thu Jan 10 05:03:13 2008 +0100
+
+    Updated test mode and added modedemo
+
+commit e04d942ee8e74fce90e332446e740a100d782033
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jan 9 18:11:17 2008 +1100
+
+    fixup crtcinfo on modes from userspace
+
+commit 87a32efcdde124df59656e00a402ba50a0ba1e45
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jan 9 18:11:04 2008 +1100
+
+    add control node open
+
+commit 73bf5e867089b58b2c4baaa833d15a2b1fb268a4
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jan 9 16:44:31 2008 +1100
+
+    add internals for opening a control node
+
+commit 8d6e3c208f8090ccc32ef3a38c58f2aca7f4be2a
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jan 9 16:43:51 2008 +1100
+
+    allow control getversion
+
+commit ebbc2e0a2e19f5e0fdc06af0951d7fc2cc9ddcbe
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jan 9 16:31:37 2008 +1100
+
+    add control ioctls
+
+commit 135f51306b08f9863d77ac85b69989288c62f147
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Jan 9 16:21:56 2008 +1100
+
+    drm: only call suspend/resume on control node
+
+commit 5f15f317fb304f6a2321c033d401f603b365f2d0
+Author: Stuart Bennett <sb476@cam.ac.uk>
+Date:   Mon Jan 7 17:38:18 2008 +0000
+
+    nouveau: AGP reset correction - don't touch FW bit
+
+commit 0bfd09f719fb1de3e489fe513a122f29cdcef0c3
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Jan 7 18:56:44 2008 +1100
+
+    nv50: more small changes
+
+commit 942b500e24fba25e3e047c7756b75a2782076512
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Jan 7 18:18:51 2008 +1100
+
+    nv50: oops, lost some state saving along the way somewhere.
+    
+    xf86-video-nv will now work again after nouveau.
+
+commit 3d248cd7e4538ced5c0b652a784eb4ef309d5e11
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Jan 7 17:23:31 2008 +1100
+
+    nv50: hook up timer funcs...
+
+commit 7a4ba7273c740503b6f254f74b2e06312c15790a
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Jan 7 17:10:36 2008 +1100
+
+    nv50: abort on chips without ctx ucode
+
+commit 15f8fd34df11d9fceb3f813c9478ffe66cae3473
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Jan 7 17:07:59 2008 +1100
+
+    nv50: some needed ctx vals
+
+commit fa5e18679fcdb7bd2d69c605183b0b205416bf2b
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Jan 7 16:55:20 2008 +1100
+
+    nv50: use dummy page in gart tables
+    
+    Just to be safe, we don't really know exactly how the tables work yet, so
+    we can't be certain there's a way to say "page not present".
+
+commit 3d3d509dcae7f26cfcbe63e527a16f181a24e37c
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Jan 7 16:52:47 2008 +1100
+
+    nv50: some cleanups + small changes
+
+commit cd19dcef4f7cc454f68618a0a1e903f159db21ad
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Mon Jan 7 06:11:33 2008 +0100
+
+    Nouveau: ppc oops.
+
+commit de522ae742bd058780135eb21fe287e9a9dc263a
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Mon Jan 7 05:54:05 2008 +0100
+
+    Nouveau: move PPC bios copy to firstopen.
+
+commit bd5d760a105e0a7aec00791d397511a0f7bc27ea
+Author: Jeremy Kolb <jkolb@glorfindel.hsd1.ma.comcast.net>
+Date:   Sun Jan 6 10:09:47 2008 -0500
+
+    nouveau: Add ctx_voodoo for NV86
+
+commit f5e5e5c0ea7d7a69f7bf16c718bf757fbb4b541d
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Fri Jan 4 23:47:57 2008 +0200
+
+    drm: One forgotten rename of 'mask' to 'proposed_flags'.
+    
+    Due to commit d1187641d64f442968a3b9ea6a19de6cdd45acd4.
+
+commit d3da253adbf471c9af9c68b2ff67cbf516856352
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Jan 4 17:49:40 2008 +1100
+
+    drm: add initial support for a drm control device node
+
+commit df9cfeff37d40722df4e8a785478ac41246ca51f
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Jan 4 17:48:42 2008 +1100
+
+    crtc: fixup allocation size
+
+commit 30fba69a68efc196908dab22581d1b99cf8750ae
+Author: Xavier Bachelot <xavier@bachelot.org>
+Date:   Fri Jan 4 16:29:04 2008 +1000
+
+    via: add P4M900 pci id.
+    
+    bug 12108
+
+commit 10937cf20b6814e4cf68114fab4619fad94eafcb
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Jan 4 16:12:24 2008 +1100
+
+    drm: move drm_head to drm_minor and fix up users
+
+commit 71adbfc874517efbba8b9f7c3f90baad0d7fb707
+Author: Stuart Bennett <sb476@cam.ac.uk>
+Date:   Thu Jan 3 16:57:55 2008 +0000
+
+    [PATCH] nouveau: reset AGP on init for < nv40
+    
+    This is necessary for AGP to work after running bios init scripts on nv3x, and
+    is seen in mmio traces of all cards (nv04-nv4x)
+    
+    I'm not making the equivalent change to nv40_mc.c, as early cards (6200, 6800gt)
+    use the 0x000018XX PBUS and later cards use the 0x000880XX PBUS and I don't know
+    the effects of using the wrong one
+
+commit 381724a35b662302b70f9a5c04f1412ff2c2ad5b
+Author: Stuart Bennett <sb476@cam.ac.uk>
+Date:   Thu Dec 27 01:10:52 2007 +0000
+
+    [PATCH] nouveau: Fix nv20/30 context loading
+    
+    Don't set the context as valid until it has been loaded
+
+commit 78d6649069a40c5c30ecc482eea803a5dc89c080
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jan 3 17:44:04 2008 +1000
+
+    mach64: some more minor cleanups
+
+commit 97b8c9591cfeb88d02bd9255adf8a1f9aaa72630
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jan 3 17:10:30 2008 +1000
+
+    mach64: cleanup some of the macro formatting
+
+commit 9ab620d661253f9b08f683a2a6f9ddee002015bc
+Author: Márton Németh <nm127@freemail.hu>
+Date:   Thu Jan 3 16:56:04 2008 +1000
+
+    drm: cleanup DRM_DEBUG() parameters
+    
+    As DRM_DEBUG macro already prints out the __FUNCTION__ string (see
+    drivers/char/drm/drmP.h), it is not worth doing this again. At some
+    other places the ending "\n" was added.
+    
+    airlied:- I cleaned up a few that this patch missed also
+
+commit 5e99b42b043e36a8db4a27522be27944a344715e
+Merge: b9417f4 96a0005
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jan 3 16:05:13 2008 +1000
+
+    Merge branch 'r500-support'
+
+commit 96a00054beb84050d618c8418e2da999530b117f
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jan 3 16:03:05 2008 +1000
+
+    remove duplicate pciids
+
+commit b9417f41418321d5081547a3a3386dcccae7541f
+Author: Xiang, Haihao <haihao.xiang@intel.com>
+Date:   Wed Dec 26 17:13:58 2007 +0800
+
+    i915: return fence argument from i915_execbuffer ioctl32 routine
+
+commit 5d8d64ad3881c10bc3cd3fd5cab1ac14268da5ce
+Author: Xiang, Haihao <haihao.xiang@intel.com>
+Date:   Tue Dec 25 16:57:14 2007 +0800
+
+    i915: i915_execbuffer ioctl32 routine, fix #13732
+
+commit da3601e43ae75695f3b080904b1e090c8eb1cd8e
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sun Dec 16 22:00:45 2007 -0800
+
+    Change drm_bo_type_dc to drm_bo_type_device and comment usage of this value.
+    
+    I couldn't figure out what drm_bo_type_dc was for; Dave Airlie finally clued
+    me in that it was the 'normal' buffer objects with kernel allocated pages
+    that could be mmapped from the drm device file.
+    
+    I thought that 'drm_bo_type_device' was a more descriptive name.
+    
+    I also added a bunch of comments describing the use of the type enum values and
+    the functions that use them.
+
+commit d1187641d64f442968a3b9ea6a19de6cdd45acd4
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sun Dec 16 20:16:50 2007 -0800
+
+    Rename inappropriately named 'mask' fields to 'proposed_flags' instead.
+    
+    Flags pending validation were stored in a misleadingly named field, 'mask'.
+    As 'mask' is already used to indicate pieces of a flags field which are
+    changing, it seems better to use a name reflecting the actual purpose of
+    this field. I chose 'proposed_flags' as they may not actually end up in
+    'flags', and in an case will be modified when they are moved over.
+    
+    This affects the API, but not ABI of the user-mode interface.
+
+commit 37fb2ac4071f62bad2c36cc9ca84f9c8feee6bf5
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sun Dec 16 01:47:51 2007 -0800
+
+    Use dummy_read_page for unpopulated kernel-allocated ttm pages.
+    
+    Previously, dummy_read_page was used only for read-only user allocations; it
+    filled in pages that were not present in the user address map (presumably,
+    these were allocated but never written to pages).
+    
+    This patch allows them to be used for read-only ttms allocated from the
+    kernel, so that applications can over-allocate buffers without forcing every
+    page to be allocated.
+
+commit 881ee70ab7bab5d6f6140dc9bf1e19c7b5844084
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sun Dec 16 01:12:07 2007 -0800
+
+    Move dummy_read_page from drm_ttm_set_user to drm_ttm_create.
+    
+    I'm hoping to use the dummy_read_page for kernel allocated buffers to avoid
+    allocating extra pages for read-only buffers (like vertex and batch buffers).
+    This also eliminates the 'write' parameter to drm_ttm_set_user and just
+    has DRM_TTM_PAGE_WRITE passed into drm_ttm_create.
+
+commit 6d44f48002c19d67187adb660ef74dd1870d52c2
+Author: Keith Packard <keithp@keithp.com>
+Date:   Sun Dec 16 00:54:25 2007 -0800
+
+    Clean up and document drm_ttm.c APIs. drm_bind_ttm -> drm_ttm_bind.
+    
+    Aside from changing drm_bind_ttm to drm_ttm_bind, this patch
+    adds only documentation and fixes the functions inside drm_ttm.c
+    to all be prefixed with drm_ttm_.
+
+commit 219ba5cd9aff2dc79e414bbe2e9f90406f7543df
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Dec 21 18:38:55 2007 +1000
+
+    s/TRUE/true
+
+commit 21b01cd4b54781cfab038016c2d644069d522787
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Thu Dec 20 12:35:54 2007 +0100
+
+    radeon_ms: update to follow lastest modesetting change
+
+commit d8c94a84b7f8da5fdf32a0799eaac72a1fc3007d
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Wed Dec 19 18:27:38 2007 +0100
+
+    radeon_ms: add sarea & install header
+
+commit 629231c62675fe09f4eb948861a21980a9b79a5a
+Merge: ea915c7 6d03411
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Dec 18 19:18:21 2007 +1100
+
+    Merge branch 'modesetting-airlied' into modesetting-101
+
+commit 6d03411e5faa124bac014ebacec470ffd7cf2ce4
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Dec 18 19:18:05 2007 +1100
+
+    HERE BEZ HACKZ.. magic variable to make shit work
+
+commit a19e0efb0e03dbaad68e281b7e018663fb8c3589
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Dec 18 19:17:11 2007 +1100
+
+    lockdep warned about a possible locking dependency
+
+commit 01f905c1779279811d4f0467da4bdf33ff786c86
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Dec 18 19:16:51 2007 +1100
+
+    we should not be unlocking this here
+
+commit b13dc383df85d75cb1ea422f4d13efc2a4a8a732
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Dec 18 17:41:20 2007 +1100
+
+    remove output names
+
+commit ea915c77e169a50ca7dc557512212eafa93e2205
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Tue Dec 18 02:52:09 2007 +0100
+
+    Fixed build
+
+commit bdbc34e297bd7e4cb036df6244dfb0d816eed36d
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Tue Dec 18 02:09:48 2007 +0100
+
+    Fix and cleanup of Hotplug
+
+commit e239882b1e90cba0297118ec7dc432bea06b0bd0
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Tue Dec 4 15:36:36 2007 +0100
+
+    Modesetting Hotplug
+
+commit 2db6400396ea5c8a5ce54fe9e211b9d01a11d506
+Author: Li Zefan <lizf@cn.fujitsu.com>
+Date:   Mon Dec 17 09:50:45 2007 +1000
+
+    drm: don't cast a pointer to pointer of list_head
+    
+    The casting is safe only when the list_head member is the first member of
+    the structure.
+
+commit 6180dbda203161b8926513cca4ee963bbbf18cc9
+Author: Jesper Juhl <jesper.juhl@gmail.com>
+Date:   Mon Dec 17 09:45:03 2007 +1000
+
+    While reading some code I stumbled across the use of 'err' in
+    drivers/char/drm/mga_dma.c::mga_do_cleanup_dma() and I think there's a small
+    problem.
+    
+    The variable is only used inside #if __OS_HAS_AGP which is fine, but all
+    that
+    ever happens is an assignment to the variable - it is never actually used
+    for
+    anything.  The variable is nicely initialized to zero which is also what the
+    return statement at the end of function returns (always at the moment).
+    
+    It looks to me like that function should be returning 'err' instead of
+    always
+    just returning 0.  Here's a patch to do that.
+    
+    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
+    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
+
+commit 0b031dbd63bbb3e0ba6d39e1e5c4eb4e87985158
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Dec 14 13:19:35 2007 -0800
+
+    Document drm_ttm_set_user.
+    
+    Add a comment explaining the parameters for this function
+
+commit 9d17373ffbba3cc4ee5f63ff02ff24d48ab99fe0
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Dec 14 13:19:09 2007 -0800
+
+    Document drm_buffer_object_validate function.
+    
+    Just add documentation for this function, no code changes.
+
+commit 7461519fed25f6d63415a9dd4b915c6cc668a69c
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Dec 14 12:49:22 2007 -0800
+
+    Document fence_class mess in drm_bo_setstatus_ioctl
+    
+    drmBOSetStatus does not bother to set the fence_class parameter.
+    Fortunately, drm_bo_setstatus_ioctl doesn't end up using it as it
+    calls drm_bo_handle_validate with use_old_fence_class = 1.
+
+commit 5f23519b14e54823c94f5db5ad81e6bd5ffd3877
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Dec 14 12:45:55 2007 -0800
+
+    Document drm_bo_handle_validate. Match drm_bo_do_validate parameter order.
+    
+    Document parameters and usage for drm_bo_handle_validate. Change parameter
+    order to match drm_bo_do_validate (fence_class has been moved to after
+    flags, hint and mask values). Existing users of this function have been
+    changed, but out-of-tree users must be modified separately.
+
+commit b5181d2506be332db8b07c02cdf37c6e25545c4d
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Dec 14 12:33:35 2007 -0800
+
+    Document drm_bo_do_validate. Remove spurious 'do_wait' parameter.
+    
+    Add comments about the parameters to drm_bo_do_validate, along
+    with comments for the DRM_BO_HINT options. Remove the 'do_wait'
+    parameter as it is duplicated by DRM_BO_HINT_DONT_BLOCK.
+
+commit b0bc5f1ae559c705565e516ebb289bf072559dec
+Author: Keith Packard <keithp@keithp.com>
+Date:   Fri Dec 14 11:42:17 2007 -0800
+
+    Make ttm create/destroy APIs consistent. Pass page_flags in create.
+    
+    Creating a ttm was done with drm_ttm_init while destruction was done with
+    drm_destroy_ttm. Renaming these to drm_ttm_create and drm_ttm_destroy makes
+    their use clearer. Passing page_flags to the create function will allow that
+    to know whether user or kernel pages are needed, with the goal of allowing
+    kernel ttms to be saved for later reuse.
+
+commit 449a3b19ff6e5bd054e7da3086e2d16604fae7ed
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Sat Dec 15 10:23:30 2007 +0100
+
+    Revert "nouveau: nv30: missing ramin init, does it brake other hw?"
+    
+    This reverts commit 46235ea4595152d8dd5f016c18c6845a77db30b0.
+
+commit f62a300547b1f495472f773587cd20c6c9da06aa
+Merge: 8d2da20 35a8b61
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Thu Dec 13 10:41:23 2007 +0000
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+
+commit 35a8b61317b57fcaaf5f7df06b0e2b532eddb9cb
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Thu Dec 13 10:40:36 2007 +0000
+
+    catch an out of memory condition
+
+commit 7dcaf0cdbb57dcf85aa8798736948c280d3966b2
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue Dec 11 20:21:23 2007 -0800
+
+    Make relocation validate client computed values when debugging
+
+commit 4ec8f58d042d7fe0dab570fed35a438759645ca8
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu Dec 6 15:12:21 2007 -0800
+
+    i915: wait for buffer idle before writing relocations
+    
+    When writing a relocation entry, make sure the target buffer is idle,
+    otherwise the GPU may see inconsistent data.
+
+commit 9ee511d786b1a87944f043c1a16057e8dfc48668
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue Dec 4 20:54:53 2007 -0800
+
+    Bump driver minor for relocation optimzations
+
+commit 57b9a54eb668477407c8be54c041d7a9f92c1f51
+Author: Keith Packard <keithp@keithp.com>
+Date:   Tue Dec 4 12:22:30 2007 -0800
+
+    Allow relocation to be skipped when buffers don't move.
+    
+    One of the costs of superioctl has been the need to perform relocations
+    inside the kernel. The cost of mapping the buffers to the CPU and writing
+    data is fairly high, especially if those buffers have been mapped and read
+    by the GPU.
+    
+    If we assume that buffers don't move around very often, we can have the
+    client compute the relocations itself using the previous GPU address. When
+    that object doesn't move, the kernel can skip computing and writing the
+    updated data.
+    
+    Here's a patch which adds a new field to struct drm_bo_info_req called
+    'presumed_offset', and a new DRM_BO_HINT_PRESUMED_OFFSET that is set when
+    this field has been filled in by the client.
+    
+    There are two separate optimizations performed when the presumed_offset is
+    correct:
+    
+     1. i915_exec_reloc checks to see if all previous buffer offsets were guessed
+        correctly. If so, there's no need for it to look at *any* of the
+        relocations for a buffer. When this happens, it skips the whole
+        relocation process, simply returning success.
+    
+     2. i915_apply_reloc checks to see if the target buffer offset was guessed
+        correctly. If so, it skips mapping the relocatee, computing the
+        relocation and writing the value. If no relocations are needed, the
+        relocatee should never be mapped to the CPU, and so the kernel shouldn't
+        need to wait for any fences to pass.
+
+commit 8d2da202337300e821f4867cb2654b41ff6053b6
+Merge: f99dea7 cfa21b2
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Dec 11 16:58:00 2007 +1000
+
+    Merge branch 'master' of ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/drm_drv.c
+    	shared-core/drm.h
+    	shared-core/i915_dma.c
+
+commit f99dea7db00dd46aa96eaed3a61dff9c956fd86f
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Dec 11 15:56:48 2007 +1000
+
+    modesetting: fixup property setting and add connector property
+
+commit 3b6786e3e6523b1ceca3645ea4c6081f170d2134
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Dec 11 14:46:51 2007 +1000
+
+    modesetting: add dpms property and initial settable property ioctl
+
+commit 814f695135f21aadeba77a3114df505d81a8d433
+Merge: e51b3c8 cfa21b2
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Dec 10 15:53:59 2007 +1000
+
+    Merge branch 'master' into r500-support
+
+commit cfa21b22b43c7113107b5eb086b5f4d4ec36dc0a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Dec 10 10:13:52 2007 +1000
+
+    drm: move agp include outside CONFIG_AGP as it isn't dependant on agp in kernel
+
+commit 7d08b816b7af3cd415bebf65f44313415fea091a
+Author: José Fonseca <jrfonseca@tungstengraphics.com>
+Date:   Sat Dec 8 19:21:27 2007 +0000
+
+    mach64: comment bus master / ring buffer behavior and security
+
+commit 9d064966d8495038921d0e731c0bfca0cd58d244
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sat Dec 8 00:45:33 2007 +0100
+
+    radeon_ms: fix pll computation to follow hw constraint
+
+commit bfc29606e4a818897eebca46a5e23bbe7bc3ce25
+Author: Jesse Barnes <jbarnes@nietzche.virtuousgeek.org>
+Date:   Fri Dec 7 14:24:45 2007 -0800
+
+    Fix pipe<->plane mapping vs. vblank handling (again)
+    
+    If drmMinor >= 6, the intel DDX driver will enable vblank events on both
+    pipes.  If drmMinor >= 10 on pre-965 chipsets, the intel DDX driver will
+    swap the pipe<->plane mapping to allow for framebuffer compression on
+    laptop screens.  This means the secondary vblank counter (corresponding
+    to pipe B) will be incremented when vblank interrupts occur.
+    
+    Now Mesa waits for vblank events on whichever plane has a greater
+    portion of the displayed window.  So it will happly ask to wait for the
+    primary counter even though that one won't increment.
+    
+    So we can fix this in either the DDX driver, Mesa or the kernel (though
+    I thought we already had several times).
+    
+    Since current (and previous) userspace assumes it's talking about a pipe
+    == plane situation and now uses planes when talking to the kernel, we
+    should probably just hide the mapping details there (indeed they already
+    are hidden there for vblank swaps), which this patch does.
+    
+    So as far as userland is concerned, whether we call things planes or
+    pipes is irrelevant, as long as kernel developers understand that
+    userland hands them planes and they have to figure out which pipe that
+    corresponds to (which will typically be the same on 965+ hardware and
+    reversed on pre-965 mobile chips).
+
+commit a693e8ab12432787a3c02fa5b8f7649a08122012
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Thu Dec 6 23:36:58 2007 +0100
+
+    radeon_ms: fix fbcon by fixing palette
+
+commit a39560e767f8d66508f7cf98222199b2cc96fcaf
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Thu Dec 6 23:19:52 2007 +0100
+
+    radeon_ms: update to lastest fb change
+
+commit 931b4a84a09e29570dfef1da96acc5b894529bc3
+Merge: 3a51a80 9814e87
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Thu Dec 6 22:42:17 2007 +0100
+
+    Merge commit 'origin/modesetting-101' into modesetting-radeon
+
+commit 3a51a8077bf55ba9d18805f2f03b78eb980fa982
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Thu Dec 6 22:38:44 2007 +0100
+
+    radeon_ms: avoid to unintialize things which haven't been initialized
+
+commit f1a99ddc14ebca303f20b6c23bd289fc887243ae
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Dec 6 16:03:28 2007 +1000
+
+    take down stuff after asking driver to unload
+
+commit 9814e87016ff90556ae34e3395c10d29add2ba08
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Dec 6 11:47:29 2007 +1000
+
+    retab intelfb code
+
+commit 8020724615eb6f334d5f90b1e83e6a46d4a126ac
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Dec 6 11:46:54 2007 +1000
+
+    check previous mode first
+
+commit 1ba2bb3a7e77576333b09f296abac4c01c895c48
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Dec 6 11:35:37 2007 +1000
+
+    oops initialise variable to false
+
+commit 67f6eb1eb8d3dc5bb5fdb097655d3da326f637c1
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Dec 6 10:44:51 2007 +1000
+
+    add property blobs and edid reporting support
+
+commit a64a4373e85a321a359e147b2c7220d501dff06a
+Author: José Fonseca <jrfonseca@tungstengraphics.com>
+Date:   Wed Dec 5 22:53:02 2007 +0000
+
+    mach64: make buffer emission macros normal functions
+
+commit 46ecd12c07f921bb015f87cb07ddb02baa94b382
+Author: José Fonseca <jrfonseca@tungstengraphics.com>
+Date:   Wed Dec 5 00:10:39 2007 +0000
+
+    mach64: use utf-8
+
+commit e38749ebe5ece08ec63dfd37aca28108ad5cc7ab
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Wed Dec 5 14:43:22 2007 -0500
+
+    Remove references to the sarea_priv perf_boxes field.
+    
+    This field isn't touched or read by any other code in the stack so it's
+    time to retire these last few references.
+
+commit c9cda51af5a8bea1d30ce575ae260de52950fe2f
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Dec 5 16:31:35 2007 +1000
+
+    more WIP on blobs..
+    
+    I'm going to pass back a list of blob ids and lengths in the getproperty.
+    will need another ioctl to return the blob data as it is variable length.
+
+commit 1a6c95ef711fce807659ab5e4fe480d65ac233b6
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Dec 5 16:03:05 2007 +1000
+
+    arrgggh.. make all ioctl structs 32/64-bit compatible hopefully.
+    
+    This also starts to add blob property support.
+    
+    someone needs to check this work for other things like ppc/x86 alignment diffs
+
+commit f7432d187e4b5e13c9e450bf12d5ab8c18ea5146
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Tue Dec 4 14:38:00 2007 -0800
+
+    Don't free driver mapped locks
+    
+    This fix is actually a bit of a cleanup too--it moves lock freeing to
+    drm_rmmap_locked and out of drm_lastclose.  This makes it symmetrical with
+    addmap and also prevents the lock from being incorrectly freed from driver
+    mappings.
+
+commit 34797ff67c16beb9c331920f663bdf8387c14c78
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sun Dec 2 23:48:45 2007 +0100
+
+    radeon_ms: radeon modesetting first commit.
+    
+    This should work on all radeon but there is still many things todo:
+        - add crtc2
+        - tmds
+        - lvds
+        - add bios data table so we don't need to hardcode dac/crtc infos
+        - separate clock control to make power saving easier & cleaner
+        - tiling (warning tiling shouldn't be enable in double scan or interlace)
+        - surface reg manager (this goes along with tiling)
+        - suspend/resume hook
+        - avivo & r500 family support
+        - atom bios support (for posting card mostly)
+        - finish superioctl skeleton
+        - what else ? :)
+
+commit 2f6e53342156ecb0e61a13816043445032c2b539
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Dec 5 04:54:58 2007 +1000
+
+    patch from -mm kernel to use upper_32_bits
+
+commit 1a07dd5ffd014aae8f767ab1f5166131aa27ef3f
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Dec 3 15:28:26 2007 +1000
+
+    hooks up sync and flags and also clocks to get mode matching better
+
+commit 9a843d3bc79ae529f56e2f19e463b1b31c869a5b
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Dec 3 15:27:57 2007 +1000
+
+    add flags to mode debug print
+
+commit 34bb2e733a612de49a390babddd8477825deb895
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Dec 3 15:27:49 2007 +1000
+
+    mode: copy back the mode if is valid correctly
+
+commit 96df9b11ad8974d7a2a0a589114cbbb04a584f18
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Dec 3 13:42:32 2007 +1000
+
+    finish of mode add/remove, just have attach/detach modes
+
+commit 91cd3e3c097d581ea75ec4bcbc1ba8d23b471a2e
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Nov 28 15:18:25 2007 +1000
+
+    modesetting API change for removing mode ids and making modes per output.
+    
+    so really want to get a list of modes per output not the global hammer list.
+    also we remove the mode ids and let the user pass back the full mode description
+    
+    need to fix up add/remove mode for user modes now
+
+commit 690dd04d1b9a4da92139793d3f5129a80f9c7353
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Sun Dec 2 01:45:09 2007 -0500
+
+    bsd: Replace other occurrences of msleep with mtx_sleep
+
+commit fbc307274f7cb29f986daae3d8e367d53172e3ba
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Sun Dec 2 01:23:11 2007 -0500
+
+    bsd: Now make secondary vblank work
+    
+    We needed to specifically check for driver support and test the correct
+    vbl_received value.  Also pulled over support for _DRM_VBLANK_NEXTONMISS
+    from the linux code.
+
+commit 787d500c15c964f2a715ea0c949177c1d38dc367
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Sat Dec 1 17:09:49 2007 -0500
+
+    bsd: Hook secondary vblank support.
+
+commit e6ca3f5754d649b6290ea017f815aeb18d565718
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Sat Dec 1 16:35:48 2007 -0500
+
+    bsd: Fix typo in i915_drv.c
+
+commit 0c3e5261b63f6a642f4c62d287e56a52954c2b06
+Author: Robert Noland <rnoland@wombat.2hip.net>
+Date:   Sun Nov 25 12:54:31 2007 -0500
+
+    mtx_sleep is preferred to msleep
+    
+    Calling semantics are the same and both were introduced in 5.0
+
+commit b2f8368b571efe610750640c5f10f4c4e0bf7133
+Author: Robert Noland <rnoland@wombat.2hip.net>
+Date:   Sun Nov 25 12:50:07 2007 -0500
+
+    Clarify order of operations
+
+commit 453a295c829dd9e07175f4b2e8fe7e179e5a4d79
+Author: Robert Noland <rnoland@wombat.2hip.net>
+Date:   Sat Nov 24 01:56:05 2007 -0500
+
+    DRM_DEBUG already prints the function name.
+
+commit d6295cc9ffe9f36f78131f8049baf24e77d35e15
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Sat Dec 1 02:40:13 2007 -0500
+
+    drm: Add _DRM_DRIVER map flag.
+    
+    This flag indicates that the driver is responsible for the map.
+
+commit 83e62be6f449ad480eb590ee9d4131974c9920e2
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Sat Dec 1 02:32:23 2007 -0500
+
+    bsd: Move counter initialization to load time.
+
+commit 887b920a7fd2cfa70b41425d26e4d3707d4075b9
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Fri Nov 30 22:50:34 2007 +0100
+
+    nouveau: Properly identify NV40 and NV44 generation.
+
+commit 309b2c4c05d02a7e7311a9491b74044f6c7f06a4
+Author: Jiri Slaby <jirislaby@gmail.com>
+Date:   Thu Nov 29 09:55:38 2007 +1000
+
+    Beside the emitted warning, the added cast (u64 -> unsigned) strips out
+    part of address on 64 bit. Cast to unsigned long instead.
+    
+    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
+
+commit 32c9a109b10c087f63964b4b055603feee522cc0
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 29 09:47:24 2007 +1000
+
+    drm: enable udev node creation
+
+commit 4602b6687ebb0dcf5047f2c3d88dccd751558c81
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 29 09:46:02 2007 +1000
+
+    drm: oops not a cleanup..
+
+commit 9be085cbf44ac8bd3bc6fe3e9b55df6fec7ac389
+Author: Robert C. Noland III <rnoland@bbeng-laptop.acs.internap.com>
+Date:   Wed Nov 28 00:33:42 2007 -0500
+
+    Fix up drm_ati_pcigart_info
+
+commit dc338921f94daad17055105a38214483d5ac33e1
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 29 09:37:51 2007 +1000
+
+    drm: more cleanups
+
+commit e9fa8fe7342fad710bee4f65bc23ec06d3020f05
+Author: Dave Airlie <airlied@clockmaker.usersys.redhat.com>
+Date:   Wed Nov 28 22:46:06 2007 +1000
+
+    i965: oops force mi batchbuffer start
+
+commit 617cbeed2ae71c5560f597db49637df10edd8a52
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Tue Nov 27 12:39:09 2007 -0800
+
+    Don't use panel fitter if we're programming a native mode
+    
+    Fix from the DDX driver.
+
+commit b3af2b59a77a6916ea7151236d3da9bde6a537fc
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Nov 27 14:31:02 2007 +1000
+
+    drm/modesetting: add initial gettable properites code.
+    
+    This allow the user to retrieve a list of properties for an output.
+    Properties can either be 32-bit values or an enum with an associated name.
+    Range properties are to be supported.
+    
+    This API is probably not all correct, I may make properties part of the general
+    resource get when I think about it some more.
+    
+    So basically you can create properties and attached them to whatever outputs you want,
+    so it should be possible to create some generics and just attach them to every output.
+
+commit e51b3c8ff4bb88bc0f57473b7c3fe7fcd6b1a916
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Nov 27 08:43:14 2007 +1000
+
+    r500: add a bunch of all r5xx pci ids..
+    
+    fix up a range that may be needed for r500 mesa
+
+commit f9ac54b0319b273de83a004d6cfdf46a3b9d6ced
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 26 15:06:42 2007 +1100
+
+    fb: make fb interface use user mode attach/detach for adding modes
+
+commit 362f4283205a01b2a60a49838721e9fff9ae1a4c
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 26 14:28:48 2007 +1100
+
+    add _ioctl to the end of two more ioctls
+
+commit 53b4e0cb789151164a0a43b55058319667847aaf
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Nov 26 14:05:49 2007 +1100
+
+    drm: make fb modes use usermode add/remove interface
+    
+    this stops usermode from getting a mode in the crtc it can't make sense off.
+
+commit a20587e3950f849deb1e723a0b4455a19f7b3fb8
+Merge: 8fd8bf5 5dc5c36
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Nov 22 17:17:06 2007 +1100
+
+    Merge branch 'origin' into modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/drmP.h
+    	shared-core/i915_dma.c
+    	shared-core/i915_drm.h
+    	shared-core/radeon_drv.h
+
+commit 5dc5c36e624e5393b5427a159ad34e5fc358cc9f
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 22 16:10:36 2007 +1000
+
+    drm: major whitespace/coding style realignment with kernel
+
+commit 7bf05708b686ec8822cc1ac7c8b647d4f7110bff
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 22 13:29:17 2007 +1000
+
+    drm: cleanup drm_regman.c coding style
+
+commit 6ff4a70a2be606c02f2b27f92ebdb9a8ec11cbe0
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 22 09:17:34 2007 +1000
+
+    i915: add context handle to superioctl struct
+    
+    This will be used later for lockless operation.
+
+commit 66079b91f38cd8e21ae4c8ea1e74c56d44b82329
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Nov 22 08:15:12 2007 +1000
+
+    r500: add pci id for X1650
+
+commit 09e51db77b049765117d3cfa8b59fab0b73e6c93
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sun Nov 18 19:16:40 2007 +0100
+
+    drm: don't reset to 0 irq_enabled when client open file descriptor
+
+commit 8fd8bf599b42b6caa062afabdfce7385d59a7695
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sun Nov 18 19:16:40 2007 +0100
+
+    drm: don't reset to 0 irq_enabled when client open file descriptor
+
+commit 5ec64d4a30ff6170e8b9f87fa52fd9cc0b5ddb9c
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Nov 21 13:02:19 2007 +1000
+
+    r500: suggestion from glisse to not add cliprect offset on r5xx
+
+commit dc0ec76d60093e4f7d9b886c5a6afcb0cc8a46bf
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Nov 20 08:44:33 2007 +1000
+
+    radeon: add initial r5xx support
+
+commit 3fc3fc082adfa9a7dfe45ea8fb7a9fb6e7019ff6
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Nov 19 08:41:23 2007 -0800
+
+    Fix capitalization of __linux__ define.
+
+commit f29b2a583d6f9d2cd02d58e915a0ca1cdee0919e
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Mon Nov 19 14:37:21 2007 +0100
+
+    drm: fix dead lock in drm_buffer_object_transfer
+
+commit 648b5b582a4fc5a925e7c3010d5a21b24daca572
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Mon Nov 19 14:37:21 2007 +0100
+
+    drm: fix dead lock in drm_buffer_object_transfer
+
+commit a74181ddb2776d7ffbcb10d8103950bd3d88b00d
+Author: Robert Noland <rnoland@squirrel.acs.internap.com>
+Date:   Tue Nov 13 17:50:46 2007 -0500
+
+    Bug #13233: Fix build on FreeBSD.
+
+commit c12a3a3ce08cbbba118acd8742b2ef990b417eea
+Author: Robert Noland <rnoland@squirrel.acs.internap.com>
+Date:   Sun Nov 18 22:40:13 2007 -0800
+
+    Bug #13233: Chase move of agp headers on FreeBSD.
+
+commit a90510966e12e20d3c51d224dda607ac9951d039
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Nov 18 19:25:31 2007 +1000
+
+    radeon: refactor out the fb/agp location read/write.
+    
+    Add a new get param to get the fb location into userspace. Mesa currently
+    hits MMIO to do this, but this isn't always possible.
+
+commit e0ab2034c3d87b9a1bbd86bfccd806793ce7c5b4
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Fri Nov 16 13:58:43 2007 -0800
+
+    Fix connection status ABI
+    
+    Userspace expects a 1 based enum for connection status so fix up the kernel
+    definition.
+
+commit 96e136c4794f9f57e18c1f984a27bbad4b5e1500
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Fri Nov 16 13:57:42 2007 -0800
+
+    Fix typo in copy_to_user calls
+    
+    We want to copy to card_res->modes + copied, not &card_res->modes + copied.
+
+commit 307fc3c92c85ded23de414b0d1a3d48f934c666d
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Fri Nov 16 15:02:25 2007 +0100
+
+    nouveau: also mention the number of succcessfully copied bios bytes.
+
+commit f2c8d39a0f99dab9d69d927214c8c66aabb70c5c
+Author: Jeremy Kolb <jkolb@brandeis.edu>
+Date:   Thu Nov 15 22:09:59 2007 -0500
+
+    nouveau: rename
+
+commit a3e627f8d66b5e9e896837824ce76664e5997b27
+Author: Jeremy Kolb <jkolb@brandeis.edu>
+Date:   Thu Nov 15 20:46:49 2007 -0500
+
+    nouveau: flip buffer into gart.
+
+commit 7ec4ebe95e7eec6625d68ae6300255901b69d5c7
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Thu Nov 15 17:14:03 2007 -0800
+
+    Use user copy routines for writing modes & ids back to userspace
+    
+    Since the drm_mode_card_res structure contains user pointers, we have to use
+    put_user and copy_to_user to write stuff out.  The DRM ioctl wrapper will only
+    take care of copying the base drm_mode_card_res struct, not the included
+    arrays.
+
+commit baf5d20297577c81d0a6be1abcc45555ed83643c
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Thu Nov 15 20:42:38 2007 +0100
+
+    nouveau: be verbose about PPC bios for now.
+
+commit 9b2a95bc6c9ddbf481d5f6017d9e85ed4def095d
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Thu Nov 15 18:01:26 2007 +0100
+
+    nouveau: revert the nv34 context size change, it was not the culprit after all.
+
+commit 3c998d8fcbb7745fd949347823eca678c6f904b8
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Thu Nov 15 16:00:25 2007 +0100
+
+    nouveau: use get_property instead of of_get_property on pre-2.6.22 kernels.
+
+commit d1b0258b32ad2af99f3aff4f0aedea676d0ff421
+Merge: ca499f4 6206091
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Nov 15 10:42:47 2007 +0100
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+
+commit 6206091e5f300616c27dc834922f2976d97f72d4
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Nov 15 10:38:55 2007 +0100
+
+    mm fixups.
+
+commit ca499f4d14ae29159f13957f2adc0536c71bf6d4
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 15 19:22:01 2007 +1100
+
+    libdrm: return crtc id to userspace
+
+commit f32688d3d011d631c18d584603d684edd9b9b512
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 15 18:31:50 2007 +1100
+
+    libdrm: add crtc/output ids to userspace interface
+
+commit 1e8984a3674c89c3b5ef9b6d3747fb75e10774b3
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 15 18:31:23 2007 +1100
+
+    drm: send correct fb id to userspace
+
+commit 2520d3fd99636e493060d51b1c3287a5faac22bf
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 15 16:52:04 2007 +1100
+
+    modes: pass type to userspace for preferred showing
+
+commit 7136f55faaf3afefe522ec978a4cbc906dace861
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 15 16:51:48 2007 +1100
+
+    drm: don't remove mappings added by the driver
+
+commit 12cbe1365b38ae04ad4979123eb5b4e9538ee533
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 15 16:51:35 2007 +1100
+
+    intel: fixup || vs |
+
+commit d275bb8fb87d8dc23e9a62c5f82627e36c8dc589
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 15 16:51:15 2007 +1100
+
+    tests: update for new drm interface
+
+commit f0fe478c1587780690edc465d957a762e02acc8a
+Merge: e1bc147 62cdc6d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 15 15:04:19 2007 +1100
+
+    Merge branch 'master' into modesetting-101
+    
+    Conflicts:
+    
+    	shared-core/i915_dma.c
+    	tests/ttmtest/src/ttmtest.c
+
+commit 62cdc6dbb3545d21bc3a68987d0781f277ae6ee4
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 15 14:43:23 2007 +1100
+
+    i915: remove excess debug output
+
+commit 2cf7ad0d9b2f265537c7030c6f93b4275cb2d051
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Thu Nov 15 03:43:22 2007 +0100
+
+    nouveau: Copy the PPC bios to RAMIN on init, that lets us do proper output detection in user space.
+
+commit 2eee33ace5b647153a7cf20990efd12313cc8472
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 15 13:29:55 2007 +1100
+
+    intel: add flushing for i8xx chipsets.
+    
+    Add a nut vs hammer style chipset flush for the i8xx chipsets - reenable TTM
+    code paths
+
+commit 46235ea4595152d8dd5f016c18c6845a77db30b0
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Wed Nov 14 23:31:59 2007 +0100
+
+    nouveau: nv30: missing ramin init, does it brake other hw?
+
+commit 68cdcda1eaf02353f2ef2d637c6bf1003c849185
+Author: Kristian Høgsberg <krh@temari.boston.redhat.com>
+Date:   Wed Nov 14 14:28:34 2007 -0500
+
+    Add new shared header file drm_internal.h.
+    
+    This header file is shared across linux and bsd, but is not installed
+    for user space to access.  It's the place to put prototypes and data
+    types that aren't platform or chipset specific, but still internal to
+    the drm.
+
+commit 448ccf13ba647a4b649857c661ab9c64bce91795
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Wed Nov 14 02:52:55 2007 +0100
+
+    nouveau: adjust the size of the NV34 context. That fixes mobile PPC cards.
+
+commit f3708b4c04b35b03c28b2297c23eb424206747cd
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Nov 13 15:42:08 2007 +0100
+
+    Fix ttmtest.
+
+commit 2d7eb4434f50ab190b530a7ef23e4a361092a33d
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Nov 14 05:36:20 2007 +1100
+
+    nouveau: Also wait until CACHE1 gets emptied.
+
+commit 7e4bb6099a492b90374565aa574ba65f19ae2ab2
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Nov 14 05:11:11 2007 +1100
+
+    Revert "nouveau: stub superioctl"
+    
+    This reverts commit 2370ded79b4176d76cda1ec5f495fd33c2d566ed.
+    
+    Err.. didn't mean for that to slip in :)
+
+commit eb5487b9ca1d7ce60d5ddc784089d91cf176f439
+Merge: 2370ded 7c1e59f
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Nov 14 05:09:07 2007 +1100
+
+    Merge branch 'fifo-cleanup' into upstream-master
+
+commit 7c1e59fb0c5043d3d369f5feb8e195a6a3da3457
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Nov 14 04:24:36 2007 +1100
+
+    nouveau: Attempt to wait for channel idle before we destroy it.
+
+commit 53ab6026cfb20bfdf34b245e41af424be62941a8
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Nov 14 04:15:13 2007 +1100
+
+    nouveau: Use "new" NV40 USER control regs.
+    
+    Probably entirely pointless, but a simple change in any case.
+
+commit 7246a33dd104903bc9227628270712ea9e6168d8
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Nov 14 04:05:48 2007 +1100
+
+    nouveau: store user control reg offsets in channel struct
+
+commit d0904f0f2b87c725d3e67060419c445259bd4a5e
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Nov 14 03:27:37 2007 +1100
+
+    nouveau: funcs to determine active channel on PFIFO.
+
+commit 2370ded79b4176d76cda1ec5f495fd33c2d566ed
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Nov 9 04:27:23 2007 +1100
+
+    nouveau: stub superioctl
+
+commit 793cd1dad5e248509a1b09dce7126f236efadb3e
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Sat Nov 10 14:39:36 2007 -0800
+
+    Make sure PLLs are enabled before writing pipe configuration regs
+    
+    Fix from the X driver.  Make sure the PLLs are enabled and not in VGA mode
+    before writing PIPE(A|B)CONF regs to avoid hangs or crashes.
+
+commit c2f80ecf4be09b5b9866d12e3b25cdcf7996b1f4
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Fri Nov 9 18:08:08 2007 +0100
+
+    suspend() and resume() need kernel 2.6.22 or later
+
+commit e1bc147ac9aa8ac2ac271b0a21f4138b17875ce5
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Fri Nov 9 17:28:56 2007 +0100
+
+    drm: check edid data, so we deal well with broken driver.
+
+commit ffb89d4c3b6650551aaab06076896540a78faddf
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Fri Nov 9 15:47:24 2007 +0100
+
+    drm: split edid handling in get_edid & add_edid_mode
+    
+    This way driver can get_edid in output status detection
+    (using all workaround which are in get_edid) and then provide
+    this edid data in get_mode callback of output.
+
+commit d983ed90cb9de559271817e04bddc8b40fc16a0d
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Nov 9 11:30:50 2007 +1000
+
+    i915: cleanup pageflip derefs sarea even if no sarea exists
+
+commit e9805de5c736f899dea5220ab8b521cc69c9eca6
+Merge: c07dd80 c20370e
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Nov 7 18:10:46 2007 +0100
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+    
+    Conflicts:
+    
+    	shared-core/i915_dma.c
+
+commit c20370e0969e41bbf735daf932e37ac5ec959213
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Nov 7 18:07:10 2007 +0100
+
+    Don't overwrite TTM page flags.
+
+commit 47497abc1e38081564db429329a3ba16198c1521
+Author: Dave Airlie <airlied@clockmaker.usersys.redhat.com>
+Date:   Wed Nov 7 23:10:24 2007 +1000
+
+    i915: oops disable TTM is backwards
+
+commit c07dd80269fad45fdad61de0a43fe3d15cd1a119
+Merge: 5ce43a3 40fb079
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Nov 6 10:01:52 2007 +0100
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/Makefile.kernel
+    	shared-core/i915_dma.c
+    	shared-core/i915_drv.h
+    	shared-core/i915_irq.c
+
+commit 40fb079aebae4277813e6a32e2e93c81dc0038e3
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Nov 6 09:47:57 2007 +0100
+
+    Avoid buffers not ending up on a list in some cases.
+
+commit 20eecf2b884193d865419312290b2bb9f94ebf37
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Nov 6 09:36:25 2007 +0100
+
+    Add missing drm_regman.c file.
+
+commit 9280076b6710e8fcc9594b7f8db87176d3e92097
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Nov 6 18:13:46 2007 +1100
+
+    i915: disable TTM on 8xx chips for now until flushing is solved
+
+commit 349eebd567246e3c2d47734772e882ae50723cb9
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Nov 6 18:00:10 2007 +1100
+
+    i915: compat code doesn't work in i8xx hw.
+
+commit 81b7f9b71c45fc621e0b5770062aedf5ae5e57ee
+Author: Zhenyu Wang <zhenyu.z.wang@intel.com>
+Date:   Tue Nov 6 17:59:14 2007 +1100
+
+    [PATCH] i915: fix missing G33 detect in IS_I9XX
+    
+    G33 detect seems missing with Jesse's suspend/resume patch.
+
+commit b437c8ca0fe62a43661a31a3010284926d20f209
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Nov 6 12:12:10 2007 +1000
+
+    drm/agp: kernel style fixes
+
+commit 9493ce6ca39b65b9f955943a043c0741a5c59f7c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Nov 6 11:32:58 2007 +1000
+
+    i915: cleanup most of the whitespace
+
+commit 5ce43a346cb9b2a6f6f31f1f750db75d5628c15b
+Merge: 1b91113 427cc56
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Nov 5 13:46:06 2007 +0100
+
+    Merge branch 'master' into modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/drm_bufs.c
+    	shared-core/i915_dma.c
+    	shared-core/i915_drv.h
+    	shared-core/i915_irq.c
+
+commit 427cc561b3dfbd504472e284e5fc16b63acd1816
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Nov 5 13:22:00 2007 +0100
+
+    Export a symbol.
+
+commit 44ad6f409d6d08163d26e20d41b1601b2fde53d7
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Nov 5 13:20:16 2007 +0100
+
+    Fix a user-buffer check.
+
+commit 1b91113957e731d264d1e5d49326597f3b78e96f
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Mon Nov 5 10:06:37 2007 +0000
+
+    remove unused define
+
+commit 306bb12603ad724f50fb6ce212a090ea7ea78013
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Mon Nov 5 10:05:01 2007 +0000
+
+    remove duplicate and obsolete ioctl statements
+
+commit 71385d6f75bb3b551e2f8d9f74a4438f0f3da9df
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Mon Nov 5 10:03:26 2007 +0000
+
+    add missing lock
+
+commit d0956339e322238d2af5d63a2e65405ca3b8c4f8
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Mon Nov 5 10:02:46 2007 +0000
+
+    Use _size
+
+commit 0bee83a8c8bca817459a0ee9caa6e13f3f1aa281
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Mon Nov 5 10:00:43 2007 +0000
+
+    Pass pointer to drmModeRmMode.
+
+commit 5e86f67a34c50ec49e1d7b3b834d1695ebf5d4c8
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Mon Nov 5 10:00:11 2007 +0000
+
+    pass pointer for drmModeRmFB
+
+commit 82ffcbbd628fc8c07d3becbbcb86a54214e78110
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Nov 5 19:14:23 2007 +1000
+
+    drm: more kernel coding style cleanups
+
+commit 6ee5412da0cc7516472235805482b8632cb374ef
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Nov 5 19:09:18 2007 +1000
+
+    drm/ttm: apply linux kernel coding style to bo_lock/move/object/ttm.c
+
+commit 7ad38907075852e347b5b4432c96d199387f5ce8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Nov 5 19:05:32 2007 +1000
+
+    drm/ttm: kernel coding style for bo.c and objects.h
+
+commit 3b43ed51cca4cf4b03d74ee403b8a72b919f87c8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Nov 5 18:56:46 2007 +1000
+
+    drm: fix the the typo
+
+commit 78fe88baee9271ceaf6187019633e4cccfebb776
+Author: Li Zefan <lizf@cn.fujitsu.com>
+Date:   Mon Nov 5 18:48:27 2007 +1000
+
+    drm: fix memset size error
+    
+    The size passing to memset is wrong.
+    
+    Signed-off-by: Li Zefan <lizf@cn.fujitsu.com>
+
+commit 921bd07c242355d187018f36d74bd95fd0d02b17
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Nov 5 12:56:55 2007 +1000
+
+    drm: update kernel generator script using v4l script
+
+commit 7f6bf84c238a1859ffd409c0ef1f1ca7eb5e6e72
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Nov 5 12:42:22 2007 +1000
+
+    drm: remove lots of spurious whitespace.
+    
+    Kernel "cleanfile" script run.
+
+commit 3664de73955aafe912318c91717ff9ecc1027af2
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Nov 5 12:10:52 2007 +1000
+
+    drm: move some of the OS stuff into the OS header
+
+commit d81bc78a04f3b72bdf2600158cea084223a3a682
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Thu Oct 25 22:34:45 2007 +0300
+
+    nouveau: more nv20_graph_init.
+    
+    This patch is originally from malc0_, but since it used some NV40_*
+    regs, I edited them into hex values with a comment.
+    This seems to correspond quite well with my own mmio-trace,
+    for the parts I cared to check.
+
+commit 5092865601ccaae1409abfa083147276916d6c25
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Nov 5 05:42:08 2007 +1100
+
+    nouveau: Use a sw method instead of notify interrupt to signal fence completion.
+
+commit 9096d50df7ac99f44d043556420f9f9f54e59b3f
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Nov 5 05:15:32 2007 +1100
+
+    nouveau: disable m2mf buffer move for the moment
+
+commit 6abbbb2f4f5b6b280077a6c88bb643507c8ec8fa
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Nov 5 04:44:40 2007 +1100
+
+    Fill fence sequence after emit ioctl.
+
+commit 0a2ab1a9003f132195fe70c145a78b4079a3fb7f
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Nov 5 03:53:46 2007 +1100
+
+    nouveau: cleanups
+
+commit c1008104adcd45faad2c6c1a2192c86447f3d9a3
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Nov 5 02:35:56 2007 +1100
+
+    nouveau: only pass annoying messages if irq isn't handled fully.
+
+commit dfa449cf9a7ce5de9cbd571f604ae7c3c778dabd
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Nov 5 02:32:46 2007 +1100
+
+    nouveau: vram is bar1
+
+commit 173a5be28f4ed59e27d7a719f62bc275959b5b70
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Nov 5 02:20:35 2007 +1100
+
+    nouveau: hook up an inital fence irq handler
+
+commit 9a999e57af4a3f5a863c21154dd3b9618888c1f7
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Nov 5 00:01:38 2007 +1100
+
+    nouveau: crappy ttm mm init, disabled for now.
+
+commit a2e8e294d8e5d7cf179cb562745c1b613ff60e52
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Nov 4 11:01:27 2007 +1100
+
+    drm: fix oops since user objects..
+
+commit 998d120a47cab85e985b24932fe8f4682f5f78e9
+Author: Jeremy Kolb <jkolb@brandeis.edu>
+Date:   Fri Nov 2 19:46:27 2007 -0400
+
+    nouveau: add darktama's email address to authors section.
+
+commit 2dc2ee7a5aed18b82a1125d8e56a7ef92be18532
+Author: Jeremy Kolb <jkolb@brandeis.edu>
+Date:   Fri Nov 2 19:44:30 2007 -0400
+
+    nouveau: put it all together.
+
+commit c1aa08106e0a7190c7a303ec8a9b6b5339251137
+Author: Jeremy Kolb <jkolb@brandeis.edu>
+Date:   Fri Nov 2 19:43:53 2007 -0400
+
+    nouveau:  Add darktama's fencing code.  Restructure some stuff.
+
+commit 2c6cbea7dedc0b06114117b4c4ce2a23f74c54f6
+Author: Jeremy Kolb <jkolb@brandeis.edu>
+Date:   Thu Nov 1 23:35:46 2007 -0400
+
+    nouveau: incorporate darktama's buffer object work.
+
+commit 239e81093f05e7d81f95a55527f3c9fcb8fc483a
+Author: Jeremy Kolb <jkolb@brandeis.edu>
+Date:   Thu Nov 1 19:04:38 2007 -0400
+
+    nouveau: more filling in for ttm.  Change copyright since it's based off of radeon code.
+
+commit 9906c7e54bdb9fa172155eaa57b7e6c47ab01c58
+Merge: 629c8b0 94c22c3
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Nov 2 16:07:36 2007 +0100
+
+    Merge branch 'master' into modesetting-101
+
+commit 94c22c334948a49641f4a1fa84687f992e5cc5cb
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Nov 2 16:03:41 2007 +0100
+
+    User buffer support.
+
+commit c06808fb6521822238bca4574758f30246b71c2d
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Nov 2 15:52:00 2007 +0100
+
+    Return fence errors.
+    Time out properly in the presence of signals.
+
+commit bb5f2158dbd30dbbffa3881fac75b71d71ecaaf9
+Author: Dave Airlie <airlied@clockmaker.usersys.redhat.com>
+Date:   Sat Nov 3 00:39:44 2007 +1000
+
+    radeon: set the address to access the aperture on the CPU side correctly
+    
+    This code relied on the CPU and GPU address for the aperture being the same,
+    On some r5xx hardware I was playing with I noticed that this isn't always true.
+    I wonder if this will fix some of those r4xx DRI issues we've seen in the past.
+
+commit 629c8b0dbf975632473d848f60606baf309f2f3b
+Merge: 90d8f79 5766d81
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Thu Nov 1 15:27:55 2007 -0700
+
+    Merge branch 'master' into modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/Makefile.kernel
+    	linux-core/drm_stub.c
+    	linux-core/i915_drv.c
+    	shared-core/i915_dma.c
+    	shared-core/i915_drv.h
+    
+    Fixup suspend/resume conflicts (basically use what's in DRM master for now).
+    Also fix up a few other conflicts that snuck in (i915_dma changes etc.).
+
+commit 128a8f7ea20af2549e448157b431d5c1f90f37c3
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Thu Nov 1 15:02:26 2007 -0700
+
+    Use unsigned long instead of u64 in drm_modeset_ctl_t
+    
+    A bad idea, ABI-wise, but we're going to be changing this structure anyway
+    before we merge upstream, so just fix the build for now.
+
+commit 00d60265570c866261c09fd3397d5853a1ce196a
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Thu Nov 1 12:50:03 2007 -0700
+
+    Cleanup vblank_init and fix drm_irq_install
+    
+    The vblank_init function wanted a couple of cleanups.
+    
+    Also, drm_irq_install wasn't checking the new return value of irq_postinstall.
+    If it returns a failure, assume IRQs didn't get set up and take appropriate
+    action.
+
+commit 5766d81074d6faa7f14b45635765cdb7209597fc
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Thu Nov 1 15:48:46 2007 +0100
+
+    nouveau: don't use AGP on PPC. It's a hopeless case.
+
+commit 1b176e76134224e2af94d24ff7b33c7b536eaeea
+Author: Jeremy Kolb <jkolb@brandeis.edu>
+Date:   Wed Oct 31 21:27:00 2007 -0400
+
+    nouveau: add missing file.
+
+commit 9416541fb29666c630f2bcfcc0f3ae0b6c4436d8
+Merge: 31847b4 61cbcb5
+Author: Jeremy Kolb <jkolb@brandeis.edu>
+Date:   Wed Oct 31 20:14:48 2007 -0400
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm
+
+commit 31847b4b62575739a164e019b33ced0531683403
+Author: Jeremy Kolb <jkolb@brandeis.edu>
+Date:   Wed Oct 31 20:13:01 2007 -0400
+
+    nouveau: ttm stubs
+
+commit 61cbcb5dbe487c6d4eba04794cbaa0279ab807b0
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Nov 1 10:34:11 2007 +1100
+
+    drm/ttm: add support for cached un-snooped mappings.
+    
+    This mapping allows cached objects to be mapped in/out of the TT space
+    with the appropriate flushing calls.
+    
+    It should put back the old CACHED functionality for snooped mappings
+
+commit 6b0b2546c29858866ae1986b3b7254551245967e
+Author: Dave Airlie <airlied@clockmaker.usersys.redhat.com>
+Date:   Thu Nov 1 02:00:36 2007 +1000
+
+    i915: fix compat code on 965/g33
+
+commit 17f0882d5080a2436e4351c2bf497b8e00bc8e74
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Oct 31 11:33:34 2007 +1100
+
+    drm: add chipset flushing via agp support
+
+commit 2489062a3319c72197914ee06b089ae581c5f0a8
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Oct 31 11:27:44 2007 +1100
+
+    i915: add backwards compat chipset flushing code
+
+commit c106a7d8b9ddc1f6da3d462e3114af2ca72b3b46
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Oct 31 11:21:05 2007 +1100
+
+    drm: call driver load after initing agp subsystem
+
+commit 91aae7e683786a48547872b0a5fa92b2232e02c0
+Merge: 7e9ea55 79744d7
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Tue Oct 30 12:52:46 2007 -0700
+
+    Merge branch 'master' into vblank-rework, fixup remaining drivers
+    
+    Conflicts:
+    
+    	linux-core/drmP.h
+    	linux-core/drm_drv.c
+    	linux-core/drm_irq.c
+    	shared-core/i915_drv.h
+    	shared-core/i915_irq.c
+    	shared-core/mga_drv.h
+    	shared-core/mga_irq.c
+    	shared-core/radeon_drv.h
+    	shared-core/radeon_irq.c
+    
+    Merge in the latest master bits and update the remaining drivers (except
+    mach64 which math_b is working on).  Also remove the 9xx hack from the i915
+    driver; it seems to be correct.
+
+commit 79744d730c90019edd367eee4a8ec1fa22d53402
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Tue Oct 30 16:55:17 2007 +0100
+
+    Nouveau: add a comment about SKIPS for next API breakage.
+
+commit 0cebcd43dd7b950c07625601b87c72329857d831
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Tue Oct 30 16:54:57 2007 +0100
+
+    Nouveau: fold some loops.
+
+commit 50dec29c800a6e980a01be38190e44a0ba7916b5
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Oct 30 17:51:59 2007 +1000
+
+    drm/i915: add driver cache flush entry point
+    
+    Use clflush on Intel hardware to flush cached objects.
+
+commit ff5889f8316e0c16112f114c1c8f57645b8dc54f
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Mon Oct 29 19:32:32 2007 -0400
+
+    Move struct drm_drawable_info out of public header file.
+
+commit 6342e0507be177be309774aff0c31746beab73f6
+Author: Jesse Barnes <jbarnes@jbarnes-mobile.amr.corp.intel.com>
+Date:   Mon Oct 29 10:51:11 2007 -0700
+
+    Remove unused memory save areas
+    
+    These need to be kmalloc'd separately anyway or we may hit kmalloc size
+    limits.
+
+commit cc745fcc3a16cb1ffc2ab578155dc880b862f95a
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Sun Oct 28 01:59:11 2007 +0200
+
+    nouveau: don't touch PMC_BOOT_1 on x86, it seems to be undefined on some early cards.
+
+commit 90d8f792794d46d1a8e998856bc7bbe54596114b
+Merge: 3436965 89d44a1
+Author: Jerome Glisse <glisse@freedesktop.org>
+Date:   Sun Oct 28 00:55:27 2007 +0200
+
+    Merge branch 'radeon-ttm' of git://people.freedesktop.org/~airlied/drm into modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/Makefile.kernel
+    	linux-core/drmP.h
+    	shared-core/radeon_cp.c
+    	shared-core/radeon_drv.h
+    	shared-core/radeon_irq.c
+    
+    	modified:   linux-core/Makefile.kernel
+    	modified:   linux-core/ati_pcigart.c
+    	modified:   linux-core/drmP.h
+    	new file:   linux-core/radeon_buffer.c
+    	modified:   linux-core/radeon_drv.c
+    	new file:   linux-core/radeon_fence.c
+    	modified:   shared-core/radeon_cp.c
+    	modified:   shared-core/radeon_drm.h
+    	modified:   shared-core/radeon_drv.h
+    	modified:   shared-core/radeon_irq.c
+    	modified:   tests/ttmtest/src/ttmtest.c
+
+commit 1e2a2bababf3fbaa0a665983856761c2284dba30
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Fri Oct 26 16:10:02 2007 -0700
+
+    i915:  suspend/resume support
+    
+    Add suspend/resume support to the i915 driver.  Moves some of the
+    initialization into the driver load routine, and fixes up places where we
+    assumed no dev_private existed in some of the cleanup paths.  This allows
+    us to suspend/resume properly even if X isn't running.
+
+commit 6707ab862656d766a4c78b85e5584a29d2434126
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Fri Oct 26 16:08:54 2007 -0700
+
+    update DRM sysfs support
+    
+    Make DRM devices use real Linux devices instead of class devices, which are
+    going away.  While we're at it, clean up some of the interfaces to take
+    struct drm_device * or struct device * and use the global drm_class where
+    needed instead of passing it around.
+
+commit b9d8ddd3ca587e87474d37637096b9ebd0a927e9
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Fri Oct 26 15:11:38 2007 +0200
+
+    nouveau: flip the CHECK_STATE bit off on nv30. This lets you do 8-bit surface destination.
+
+commit 343696583c77983ac7689b24cd49529864035cf7
+Merge: 26c32a3 a4c87d3
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Oct 26 10:33:42 2007 +0200
+
+    Merge branch 'master' into modesetting-101
+
+commit a4c87d3796cac374d25e01b26bdbb9028ce03107
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Oct 26 10:31:14 2007 +0200
+
+    Minor libdrm fixes.
+
+commit 1681189e11b5a00ae72a55de932146ea37f7afd9
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Oct 26 10:25:57 2007 +0200
+
+    Buffer flags and masks are 64-bit.
+    
+    don't mask off the high dword.
+    Signed-off-by: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+
+commit 26c32a3d797efb7474e5ae88c46afcb0e6015294
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Oct 26 10:25:57 2007 +0200
+
+    Buffer flags and masks are 64-bit.
+    don't mask off the high dword.
+
+commit 7e9ea55a2f052cc939ba9bbf9edac39798344b7a
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Oct 25 17:14:53 2007 -0700
+
+    Initial pass at porting MGA to vblank-rework
+    
+    This is currently only compile tested.
+
+commit 9adf8c02563b1e6110e46dabd733e2dc440b4200
+Merge: d5f2b4b b9d9c30
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Oct 25 11:00:45 2007 +0200
+
+    Merge branch 'master' into modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/Makefile.kernel
+    	linux-core/drm_bo.c
+    	linux-core/drm_objects.h
+
+commit b9d9c30474238ac8ba4899a19fe4a97e9376f6c4
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Oct 25 10:29:15 2007 +0200
+
+    Tighten permissions on some buffer manager ioctls.
+    Set bo init minor to 0.
+    Add the version function to header.
+
+commit 11f3e5e53f8fc4de90d1c289e0ba218ddfca23dc
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Oct 25 10:12:21 2007 +0200
+
+    Buffer manager:
+    Implement a version check IOCTL for drivers that don't use
+    drmMMInit from user-space.
+    Remove the minor check from the kernel code. That's really up
+    to the driver.
+    Bump major.
+
+commit b5cad27e05ad3666be8ccdf71e10d743efa5849e
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Oct 25 09:49:33 2007 +0200
+
+    Fix buffer object flag / mask checking.
+
+commit 07706c9b79b88baff5f160351b482ccdf3315f0c
+Merge: 3d4b32e a70fe82
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Oct 25 09:24:45 2007 +0200
+
+    Merge branch 'master' into drm-ttm-finalize
+
+commit a70fe82baf0ca2be98e02680cff489f90b0ea3de
+Author: Dave Airlie <airlied@optimus.(none)>
+Date:   Thu Oct 25 16:53:18 2007 +1000
+
+    i915: relocate buffers before validation add memory barrier between two
+
+commit c5f158abbe97492f56eb60ac54679945e9d6ddae
+Author: Dave Airlie <airlied@optimus.(none)>
+Date:   Thu Oct 25 16:52:33 2007 +1000
+
+    i915: remove relocatee kernel mapping sooner stops mutex taking during sleep
+
+commit 07abc3384e24356d1302459e2e5c4699ed7b0072
+Author: Roel Kluin <12o3l@tiscali.nl>
+Date:   Thu Oct 25 10:24:55 2007 +1000
+
+    missing mutex unlock bug
+
+commit 83199c257ea68a7cc0c6928109ff77bf25131819
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Oct 24 16:27:46 2007 -0700
+
+    Fix missing \n on some DRM_ERROR in i915_dma.c
+
+commit fd7c24753c4020a0022aaa183cfe8fc04a307abd
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Wed Oct 24 11:13:15 2007 +1100
+
+    i915: use a drm memory barrier define
+
+commit d5f2b4b411c5ca95d6f66a33d213ece387ac4fc5
+Merge: 198170a a294aa7
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Oct 23 15:34:12 2007 +0100
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+
+commit 198170ab97bbf2ca6362bb7100e9ed86d90aa51f
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Oct 23 15:33:20 2007 +0100
+
+    Need fb attached
+
+commit a294aa724a1e932fb6017383e08532bfcc914df0
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Oct 23 17:54:07 2007 +1000
+
+    i915: require mfence before submitting batchbuffer
+
+commit 9a115080e870f8196adef4a19598343e63e61e45
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Tue Oct 23 02:18:56 2007 +0200
+
+    nouveau: fix IGP
+
+commit 3d4b32e91647f61712d54a46f0a173deff46e6b4
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Oct 22 19:16:39 2007 +0200
+
+    Remove duplicate file.
+
+commit 824330d0e652e0bab1851437f120c7e76feee832
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Oct 22 19:09:36 2007 +0200
+
+    Don't clobber the unfenced list with DONT_FENCE operations.
+
+commit 919c886b2b7728768720aac93e0f6fd1acb8b2df
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Oct 22 18:59:37 2007 +0200
+
+    A cmdbuf mutex to implement validate-submit-fence atomicity in the absence
+    of a hardware lock.
+
+commit d4ce4be0dad516caa43fddcd8a56c28f264c9c2a
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Oct 22 13:16:51 2007 +0200
+
+    Setstatus header.
+
+commit 22883ff26b8a45ab2bec60accc4b822cf6b4f214
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Oct 22 11:54:41 2007 +1100
+
+    i915: split reloc execution into separate function
+
+commit 6420d33b02db0da900140c238bb35f13abc182e7
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Oct 21 12:57:43 2007 +0200
+
+    Get the lock flags right in libdrm.
+
+commit 4ebe7471cbfdd6afa33485ea9ec55812da38445f
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Oct 21 12:31:00 2007 +0200
+
+    Disable i915 accelerated blit copy moves for now until we can
+    guarantee that it doesn't clash with the X server.
+
+commit 9ddff6d15fdff571193aac10ef81e67798fd712d
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Oct 21 12:26:26 2007 +0200
+
+    Adapt i915 super-ioctl for lock-free operation.
+
+commit 3b19b50cb5cd31e60eb03e99dd1109b6d0f5b8a3
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Oct 21 12:20:56 2007 +0200
+
+    Remove the need for the hardware lock in the buffer manager.
+    Add interface entry cleaning a memory type without touching NO_EVICT buffers.
+
+commit 48b5eaf303b60077faed09db77785d7a544ac335
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sat Oct 20 16:49:43 2007 +0200
+
+    Simple replacement for hardware lock in some cases.
+    Fix i915 since last commit.
+
+commit c0e3537e77f1765001f665f93e5349ccd0f1d092
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Oct 19 16:44:12 2007 +0200
+
+    Some comment updates pending removal of the init mutex.
+
+commit 733ff568346e8fe40e9790f21f8b7efc659d5d12
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Oct 19 16:28:47 2007 +0200
+
+    No fence_class argument on drmBOSetStatus since it's not
+    associated with a particular command submission.
+
+commit cf2d1bba5513ae38d8efbaf50251fc136ed1d414
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Oct 19 16:24:36 2007 +0200
+
+    Remove the clean_unfenced function.
+    Change the restriction that non-creators can't change the buffer flags to
+    non-creators can't change EVICT and NO_MOVE flags.
+
+commit 2c5c18fbd394f419a9cf650720a1187440c643cd
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Wed Oct 17 13:25:31 2007 -0700
+
+    Bug #12838: Fix lock test client vs. server master race and misplaced closes.
+
+commit e7523d337997018a86530266a8f3f88dd061c138
+Author: Robert Noland <rnoland@2hip.net>
+Date:   Wed Oct 17 13:20:46 2007 -0700
+
+    Fix a race in the auth test where client prevents server from being master.
+
+commit 36120264ca8f43078f8748e022faeb9471edcb36
+Author: Jung-uk Kim <jkim@FreeBSD.org>
+Date:   Wed Oct 17 12:50:29 2007 -0700
+
+    Bug #11870: FreeBSD hardware lock cleanup fix with multiple opens by a process.
+    
+    Previously, the lock would get released on the first close by the X Server
+    (during AIGLX setup), and the Radeon driver would then hang in initialization
+    due to unexpected failure in DRM calls that required the lock to be held.
+    
+    Based on a patch by Kostik Belousov.
+
+commit bb29ba7fa77659be284c365ebfb2f740491e8506
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Oct 17 10:57:12 2007 +0200
+
+    Only allow creator to change shared buffer mask.
+
+commit 086c058a417317491320129d2cbeb68d1cfcfefe
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Oct 17 10:55:21 2007 +0200
+
+    Remove the op ioctl, and replace it with a setuser ioctl.
+    
+    Remove need for lock for now.
+    May create races when we clean memory areas or on takedown.
+    Needs to be fixed.
+    Really do a validate on buffer creation in order to avoid problems with
+    fixed memory buffers.
+
+commit 0d1926d36e59ddfc34d8c9c0cdef10b71a49ecf1
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Oct 4 10:14:41 2007 +0200
+
+    Revert "Replace NO_MOVE/NO_EVICT flags to buffer objects with an ioctl to set pinning."
+    
+    This reverts cf2d569daca6954d11a796f4d110148ae2e0c827 commit.
+
+commit cd276d9cab0be8eff2d9450e5c95b6eb3cd639af
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Oct 4 10:01:30 2007 +0200
+
+    Revert "Copy the important parts of object_validate into object_create()."
+    
+    This reverts f9c27aa50b715a7d21858f1ce9e4785120bd0c36 commit.
+
+commit 12b989a7108a52f16b1b1bb6dd2ea818c235b52c
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Oct 4 09:51:01 2007 +0200
+
+    Revert "Remove the pinned buffer from the LRU when pinning."
+    
+    This reverts 3a0bc518e35c62bb9c64c9105f836584d949653f commit.
+
+commit 646560d1d112b58899f9e4cab0c966cec7e0b8c3
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Oct 4 09:50:29 2007 +0200
+
+    Revert "Add some more verbosity to drm_bo_set_pin_req comments."
+    
+    This reverts e7bfeb3031374653f7e55d67cc1b5c823849359f commit.
+
+commit be2d68914d0992a37b9fb4d93338aeaf2240c4f5
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Wed Oct 17 09:35:44 2007 +0100
+
+    Fix a crash on X startup
+
+commit ec1162b212248042bf1317abcb3c47bb10db8aa3
+Author: Dave Airlie <airlied@optimus.(none)>
+Date:   Wed Oct 17 15:36:14 2007 +1000
+
+    i915: lock struct mutex about buffer object lookups
+
+commit 90bfc8e611cb0c72ee03dce47027b50d2cc614b1
+Merge: 2b07b0a db1709f
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Oct 16 15:28:33 2007 +0100
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/drm_bo.c
+    	linux-core/drm_objects.h
+    	shared-core/i915_dma.c
+    	shared-core/i915_drv.h
+
+commit db1709f2f3f8cab2477fb149b58420de4db65654
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Tue Oct 16 15:10:08 2007 +0200
+
+    Revert part of earlier commit that caused an unresolved symbol for i915.
+
+commit 3f1aa1550353e828814169915c9a74c67d2e81cd
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Oct 16 22:28:00 2007 +1100
+
+    drm: drop drm bo list handling code
+
+commit efc4fd7c4dabed384fa1ab67e744d38025aff47d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Oct 16 22:08:55 2007 +1100
+
+    drm: rename drmBOUnReference to drmBOUnreference for consistency
+
+commit a69c85fec8ed323bffb1324ea08157b3897e97db
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Oct 9 21:09:31 2007 -0400
+
+    Drop destroy ioctls for fences and buffer objects.
+    
+    We now always create a drm_ref_object for user objects and this is then the only
+    things that holds a reference to the user object.  This way unreference on will
+    destroy the user object when the last drm_ref_object goes way.
+
+commit dccefba71a65566e7e1628b3be67621866000411
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Oct 9 21:09:30 2007 -0400
+
+    Take bo type argument out of the ioctl interface.
+    
+    The buffer object type is still tracked internally, but it is no longer
+    part of the user space visible ioctl interface.  If the bo create ioctl
+    specifies a non-NULL buffer address we assume drm_bo_type_user,
+    otherwise drm_bo_type_dc.  Kernel side allocations call
+    drm_buffer_object_create() directly and can still specify drm_bo_type_kernel.
+    Not 100% this makes sense either, but with this patch, the buffer type
+    is no longer exported and we can clean up the internals later on.
+
+commit 440fc5113ef1ffb1a22bff92cf34eaf23896db8d
+Author: [utf-8] Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Oct 9 21:09:29 2007 -0400
+
+    Eliminate support for fake buffers.
+
+commit 9fdab5b5c512f586012654917438327b3c67eaa4
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Tue Oct 16 14:43:57 2007 +1100
+
+    nouveau: revert unintended change.
+
+commit 677753047f2b8a8b0b12bae348a2f4f9718682f1
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Tue Oct 16 14:42:26 2007 +1100
+
+    nouveau: Cleanup PGRAPH handler, attempt to survive PGRAPH exceptions.
+
+commit 3af053779cb0fe9b75a657df76c3dd0cc08966b6
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Tue Oct 16 13:32:03 2007 +1100
+
+    nouveau: Survive PFIFO_CACHE_ERROR.
+
+commit 6398325ba11da8a01c72f6203af0a2e4b43125c2
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Tue Oct 16 13:27:27 2007 +1100
+
+    nouveau: Handle multiple PFIFO exceptions per irq, cleanup output.
+
+commit 2b07b0a45d32a9ffb7f6b9bb1b8f6f8e615524cb
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Mon Oct 15 11:54:18 2007 +0100
+
+    should be unlocked
+
+commit cc9be8ac323e47616e48adebc5cc85c654524b45
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Mon Oct 15 11:51:19 2007 +0100
+
+    Fix some buffer teardown problems.
+
+commit 30353c8efcc026ee8940f3eadab084c42a3acd4e
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Sun Oct 14 23:07:30 2007 +0200
+
+    nouveau: PPC fixes. These regs are very touchy.
+
+commit 837e364353b3137ce87b5cce9c06f05a3d603201
+Author: Jeremy Kolb <jkolb@brandeis.edu>
+Date:   Sun Oct 14 10:56:31 2007 -0400
+
+    nouveau: fix warning.
+
+commit 811e43f9e27abdf4c8a4b36c7c287e53134fc950
+Author: Jeremy Kolb <jkolb@brandeis.edu>
+Date:   Sun Oct 14 10:56:17 2007 -0400
+
+    nouveau: fix warning.
+
+commit 8d3cb7e472ceb31a28de3acc19176e3a2d2995b1
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Sun Oct 14 21:19:13 2007 +1000
+
+    i915: fix vbl_swap allocation
+
+commit 3ab7627651f4c48a114d91158d41e4c4f528c4cc
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Fri Oct 12 23:55:59 2007 +0300
+
+    nouveau: Fix a typo in nv25_graph_context_init
+
+commit 50deb31e9ff556f941449bc788821eaa2e5f9e34
+Author: Stuart Bennett <sb476@cam.ac.uk>
+Date:   Tue Oct 9 20:39:10 2007 +0100
+
+    nouveau: Fix typos in nv20_graph_context_init
+
+commit 0d2554f83e72cae1bc44e476fbed4fc78873264f
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Fri Oct 12 23:43:31 2007 +0300
+
+    nouveau: Make notifiers go into PCI memory
+    
+    On some hardware notifers in AGP memory just don't work.
+
+commit 9d779e2c88a02f5f9d57618145654610f0f10e28
+Author: Arthur Huillet <arthur.huillet@free.fr>
+Date:   Fri Oct 12 22:39:58 2007 +0200
+
+    nouveau: mandatory "oops I forgot half of the files" commit
+
+commit 74ea019863c1d08d31eac81d3bfc73e97479b2c5
+Author: Arthur Huillet <arthur.huillet@free.fr>
+Date:   Fri Oct 12 22:35:39 2007 +0200
+
+    nouveau: added support for software methods, and implemented those necessary for NV04 (TNT1) to start X
+
+commit 74001c34e5ad768feec8b2fbe9a617bc598a0a4b
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Oct 12 10:54:38 2007 +1000
+
+    i915: add superioctl support to i915
+    
+    This adds the initial i915 superioctl interface. The interface should be
+    sufficent even if the implementation may needs fixes/optimisations internally
+    in the drm wrt caching etc.
+
+commit 604f02ff619d87d1372bcb7969c826d981fefc60
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Oct 12 09:46:11 2007 +1000
+
+    i915: check mask instead of flags for buffer fence types
+
+commit f0fd53f86b30e230f3f34b49b54392d20f053a89
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Oct 10 15:31:00 2007 -0700
+
+    FreeBSD: Fill in domain field when supported.
+
+commit fc7d4d19d36b6a12ed23d4d9e50826346258299f
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Wed Oct 10 15:27:07 2007 -0700
+
+    Eliminate trailing whitespace from last commit.
+
+commit 83da774b192966b8c3f00b531ecfd4ec2b5eceaa
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Wed Oct 10 15:25:30 2007 -0700
+
+    Fix command list submission on big-endian.
+
+commit bf126f4925bf1601935e085be2feeb004b474a05
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Wed Oct 10 21:11:43 2007 +0200
+
+    nouveau : nv10 and nv04 PGRAPH_NSTATUS are different
+
+commit d912709a63c59d0b3e48458bac41fb76ea279214
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Wed Oct 10 16:41:21 2007 +0200
+
+    nouveau: PMC_BOOT_1 was not mapped.
+
+commit d4680333dc850832258d0f38fb2a236a3f568fc8
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Oct 10 09:31:51 2007 +0200
+
+    Only add native-type on EXE signals. Otherwise flush flags may
+    get out of sync.
+
+commit 9b294bbe0ec79177298ea32746fbed03fcf62055
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Wed Oct 10 01:12:20 2007 +0200
+
+    nouveau: try to fix big endian.
+
+commit 20928a2f2b3f1fa15c46edcf7e20f97566664ce8
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Oct 7 19:01:56 2007 +0200
+
+    nouveau: A char is signed, so it may overflow for >NV50.
+
+commit 89d44a1023543a95b429bf72662b5e2308b0a550
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Oct 7 08:16:38 2007 +1000
+
+    radeon: make vram fixed type
+
+commit 18952a167014f21545e3fda28ed2c09b09789323
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Sat Oct 6 12:00:08 2007 +0200
+
+    nouveau : print correct value in nouveau_graph_dump_trap_info for nv04
+
+commit 19b7cc34443889fc73de2e10462e1c0f9fa38041
+Merge: d351601 495bbba
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Fri Oct 5 12:11:43 2007 +1000
+
+    Merge branch 'pre-superioctl-branch'
+
+commit d351601899e5814d809b8e86ab6f0d6e7676f585
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Thu Oct 4 09:46:16 2007 +0200
+
+    nouveau: Remove excess device classes.
+
+commit 319436c5cc51a1beb641e899987969fcf912deda
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Thu Oct 4 09:39:31 2007 +0200
+
+    nouveau: NV47 context switching voodoo + warning
+
+commit b510517d59efcb45cc7079743be967bee122b251
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Thu Oct 4 09:31:46 2007 +0200
+
+    nouveau: Switch over to using PMC_BOOT_0 for card detection.
+
+commit 5ca12104f8a3eebecae6d238c1c456c8e6540ae3
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Tue Oct 2 21:54:37 2007 +0200
+
+    linux-drm: Obey device class requirements when detecting devices.
+
+commit 495bbbaadc93c574eb98dd2ad64bdca4d91d4152
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Oct 4 16:13:22 2007 +1000
+
+    drm: fix page count calculation
+    
+    Also no need to do pre-populate work on single page
+
+commit 7fbd10d93310345164d1e65da281848b05493797
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Thu Oct 4 03:43:59 2007 +0200
+
+    nouveau: nv2a drm context switch support.
+
+commit 0379919e99542bc50cf9d0a8a3996b2896ec4e64
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Wed Oct 3 14:12:16 2007 -0700
+
+    Use 'ifdef __BIG_ENDIAN' instead of 'if __BIG_ENDIAN'
+
+commit 7f99fd5d7aa1f0d2463907d9d8c483b6249ac831
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Wed Oct 3 14:08:18 2007 -0700
+
+    First round of byte-ordering fixes for PowerPC.
+    
+    This isn't 100% as command submission via PCI-e GART buffers doesn't work.
+    I've hacked around that for the time being.  This is essentially the code
+    that was used at the POWER.org event to show Bimini.
+
+commit a72eb27fbc7a66e35018ffbcb5137cfaaf4049aa
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Tue Oct 2 21:56:01 2007 +0300
+
+    nouveau: nv20 graph_create_context difference
+    
+    nv20 writes the chan->id to a different place than nv28.
+    This still does not make nv20 run nv10_demo.
+
+commit afc57ef1dfb5bdf17411505d4dfbb03863a870bf
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Tue Oct 2 21:51:14 2007 +0300
+
+    nouveau: fix nv25_graph_context_init
+    
+    It was writing 4x the data in a loop.
+
+commit ffa3173ec4bb5a310b3f8539bb6c2f8589ce2ed5
+Author: Stuart Bennett <sb476@cam.ac.uk>
+Date:   Tue Oct 2 15:45:30 2007 +0100
+
+    nouveau: nv20 graph context init
+
+commit b0473699ed7bef4efd0742e0a350d345a7cc9a0c
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Oct 2 15:48:28 2007 +1000
+
+    ttm: returning into dummy causes a buffer object leak
+    
+    as nobody ever derefs dummy, however not returning does the deref
+    correctly.
+
+commit 69fcfb413e72ad2204d306f20af6547819e040da
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Mon Oct 1 22:21:23 2007 +0200
+
+    nouveau: Fix dereferencing a NULL pointer when erroring out during initialization.
+
+commit e1600646a90f11c7a5874c83bda6f70f789f7f48
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Mon Oct 1 03:28:10 2007 +0200
+
+    nouveau: flip the ctx switch bit on. it seems to be ignored on nv34 but causes nv30 issues.
+
+commit 75e8f4b5cfdff0bb62ce8439ecf743cd12fc560d
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Sun Sep 30 23:19:39 2007 +0200
+
+    nouveau : nv30 remove harcoded NV20_PGRAPH_CHANNEL_CTX_TABLE
+
+commit 9cd6ece3079373eddff320a1d3e09bfe2a35be83
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Sun Sep 30 23:09:30 2007 +0200
+
+    nouveau : nv20_graph replace nouveau_graph_wait_idle by nouveau_wait_for_idle
+    Also clean PGRAPH_CHANNEL macros
+
+commit aa135ba8e86d43a738973a25d638b7dc4cdddc55
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Sun Sep 30 22:04:53 2007 +0300
+
+    nouveau: rename nv30_graph.c to nv20_graph.c
+
+commit 205403aea8213ffc0e36f4103d78d62bf1584a69
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Sun Sep 30 21:10:06 2007 +0300
+
+    nouveau: nv30 graph function renames, removed nv20_graph.c
+    
+    All nv30 functions in nv30_graph.c that can be used on nv20 are renamed
+    as accordingly. nv20 specific parts from nv20_graph.c are moved into
+    nv30_graph.c.
+
+commit a67060c810613059b71c14e9fa91ea114fcf0106
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Sun Sep 30 18:14:24 2007 +0300
+
+    nouveau: graph ctx init nv25
+    
+    According to mmio_trace_900XGL.tar.bz2 by Evan Fraser the nv25 init is
+    exactly the same as nv28 init.
+
+commit aa2c3379914fc6fea63bfcfd8579ab6cd8d70a68
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Sun Sep 30 12:03:22 2007 +0300
+
+    nouveau: nv28 graph context init
+
+commit 8ad605a2644251a400700e6f0e25ef76a1c80628
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Sat Sep 29 23:17:19 2007 +0300
+
+    nouveau: let nv20 hardware do ctx switching automatically.
+
+commit dc592c8b7bc12d16c658648f124792ac4d2882b9
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Sat Sep 29 23:06:29 2007 +0300
+
+    nouveau: Make nv20 use the nv30 PGRAPH ctx functions.
+
+commit 88bdb38cea60cea918b6e6a1ca97a7ec3de5b832
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Sat Sep 29 21:09:09 2007 +0300
+
+    nouveau: Change couple constants to symbols.
+
+commit a45fce77125aafc42c2cae6b5a896526ec4ab630
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Sat Sep 29 21:07:46 2007 +0300
+
+    nouveau: NV30 should never call nouveau_nv20_context_switch().
+
+commit fb3ed99fb110a540d16923417c33ff581721ba3a
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Sun Sep 30 14:50:22 2007 +0200
+
+    nouveau : pgraph_ctx dynamic alloc for nv04, nv10
+
+commit c76e04828bd5849f526fae5af7deaf1cbc9f4c55
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Sun Sep 30 14:21:47 2007 +0200
+
+    nouveau : nv04 don't use chan->pgraph_ctx array
+    This commit is a first step to dynamic alloc pgraph context on nv04, nv10.
+
+commit f8f31f04574cd6986d7d9ef2215bbb23e0f44b73
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Sat Sep 29 23:06:29 2007 +0200
+
+    nouveau : stop the fifo of the channel we are deleting
+
+commit 097db7a9b0cd0e53fb82dffa57c662f327c19670
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Sat Sep 29 23:05:44 2007 +0200
+
+    nouveau : nv1x fix strange corruption
+    that appears when running glxgears and nouveau demo
+
+commit f863d23e01bf0b851c2c7addedfaec77ef951a0c
+Author: chaohong guo <Minskey.Guo@Sun.COM>
+Date:   Sat Sep 29 18:06:47 2007 +0200
+
+    radeon: Commit the ring after each partial texture upload blit.
+    
+    This makes sure each blit starts as early as possible, which may improve
+    texture upload performance in some cases.
+
+commit 215eab6ccfb6d3a22218f996c8215a7dcaf65d01
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Thu Sep 27 08:01:58 2007 +0200
+
+    Don't build without any optimization on Linux.
+    
+    Building without optimization causes the drm module not to link correctly on
+    ppc.
+
+commit 72134e939eda578bc53746bf43f7096cbeaf9b7b
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Fri Sep 28 21:28:47 2007 +0200
+
+    nouveau : clean chan->pgraph_ctx stuff. We now do a static init of the array.
+    This avoid hardcoding pgraph_ctx size and potential buffer overflow.
+
+commit 0bb2395a8be0c33cc687dfd6aae7df81a82ed8e5
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Fri Sep 28 10:10:08 2007 -0700
+
+    Revert drm_i915_flip_t braindamage
+    
+    I should not have renamed this field.
+    I should not have renamed this field.
+    I should not have renamed this field.
+    
+    On the plus side, it was at least binary compatible.
+
+commit d69721a14a8954420b4e0022ecf10bb040c6b807
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Fri Sep 28 09:21:09 2007 +0100
+
+    Set the fb_base, so userspace applications can actually work
+    now instead of locking up.
+
+commit bf9bd5671c184e1caeeb25ead588cbb2ab77c360
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Thu Sep 27 14:21:29 2007 +0100
+
+    Create memory pool for TT memory
+
+commit 2ed12b6b7eee8a1b5b0adf0cd8f3cb8c1bc3ccaf
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Thu Sep 27 14:21:03 2007 +0100
+
+    Add some more checks to modelist walking for matching
+    incoming modes to current modelist.
+
+commit 24cdd2f8c494573e1f84a752ae4eccec8890347a
+Author: Keith Packard <keithp@koto.keithp.com>
+Date:   Wed Sep 26 14:25:10 2007 -0700
+
+    Allow parallel module compile
+
+commit 61dfd19de81716aea0eaba90518fcb110b46b8f0
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Sep 26 16:18:19 2007 +0100
+
+    Add brackets
+
+commit b44925b2a553df6a611db320b553336a946aa1a8
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Sep 26 16:18:19 2007 +0100
+
+    Add brackets
+
+commit dfcf9272ce4427d959098b0f9e1748832a47a786
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Sep 26 15:40:40 2007 +0100
+
+    no need to copy to/from user as the unlocked ioctl does
+    that for us.
+    
+    other small cleanups.
+
+commit b2c4c7ae5e14598dbb8c1de32918ec9cc8dde7c9
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Sep 26 15:38:54 2007 +0100
+
+    don't copy back if an error was returned.
+
+commit 6671ad1917698b6174a1af314b63b3800d75248c
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Sep 26 15:38:54 2007 +0100
+
+    don't copy back if an error was returned.
+
+commit 972ec4fa25059c84ed103c28efcb17f9f97a6d74
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Tue Sep 25 16:18:01 2007 -0700
+
+    Hack out i915_mem_takedown
+    
+    We may want to make the old i915 memory manager obsolete eventually, and in the
+    meantime the takedown causes problems on unload so remove it for now.
+
+commit 053ff86566bcf050c7fd5b5dc7158bb35d39c38b
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Tue Sep 25 16:16:33 2007 -0700
+
+    Move map hash destruction to after driver unload hook is called
+    
+    The driver unload routine will want to remove register and SAREA maps, so don't
+    destroy the map hash before we get there.
+
+commit 5433bbbfde10bed7fbafcd90c64c364546ca724f
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Tue Sep 25 16:15:48 2007 -0700
+
+    Remove buffer object user list check in drm_bo_destroy_unlocked
+    
+    In the case of driver allocated buffers, there won't necessarily be a user list
+    associated with the buffer, so don't bug out on an empty list.
+
+commit c4b3a0f602abd02038f7e5dd45fcfb2df4b5fcfa
+Merge: 0774090 03c47f1
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Sep 25 18:03:31 2007 +0200
+
+    Merge branch 'master' into pre-superioctl-branch
+    
+    Conflicts:
+    
+    	linux-core/drm_bo.c
+    	linux-core/drm_fence.c
+    	linux-core/drm_objects.h
+    	shared-core/drm.h
+
+commit 03c47f1420bf17a1e0f2b86be500656ae5a4c95b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Sep 25 16:16:14 2007 +1000
+
+    drm: use fence_class as name instead of class
+
+commit bb5516f4f47d16d5d59797fa170abd50d35377a7
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Sep 12 23:50:38 2007 +1000
+
+    drm/ttm: fixup fence class naming and interfaces
+    
+    This is some code for nouveau that Ben Skeggs worked on, and also
+    fixes the naming (having class in a system header file == C++ keyword == bad plan)
+
+commit cbcbe80c09bd95485ce8a9b0d86242fedcd7c182
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Mon Sep 24 15:43:00 2007 -0700
+
+    Cleanup SDVO debug output
+    
+    SDVO debug messages were incorrectly including severity prefixes in each print
+    rather than each unique line.  Fix it up.
+
+commit 0be6e919aa3e7af884980e2004755848a2aa7519
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Mon Sep 24 15:40:55 2007 -0700
+
+    Add 965GM macro bits
+    
+    Update IS_MOBILE macro to include new IS_I965GM test.
+
+commit 5cc3083179b19678456905a9122a3d0f04e6f623
+Merge: 2a2d02b 54df1b9
+Author: Jesse Barnes <jbarnes@jbarnes-mobile.amr.corp.intel.com>
+Date:   Mon Sep 24 14:41:46 2007 -0700
+
+    Merge branch 'master' into modesetting-101 - TTM & typedef removal
+    
+    Conflicts:
+    
+    	linux-core/drmP.h
+    	linux-core/drm_bo.c
+    	linux-core/drm_drv.c
+    	linux-core/drm_objects.h
+    	shared-core/drm.h
+    	shared-core/i915_dma.c
+    	shared-core/i915_drv.h
+    	shared-core/i915_irq.c
+    
+    Mostly removing typedefs that snuck into the modesetting code and
+    updating to the latest TTM APIs.  As of today, the i915 driver builds,
+    but there are likely to be problems, so debugging and bugfixes will
+    come next.
+
+commit 2a2d02bbc500140a861380df52ce66abcac39312
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Mon Sep 24 14:53:10 2007 +0200
+
+    Added small modesetting test
+
+commit 54df1b9ff3b79097fedd8ed7bf54aca30a660cbd
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sat Sep 22 14:30:55 2007 +0200
+
+    Fix pinned buffer fence class.
+
+commit 0774090d5b7d3eba734086b437021039bc19c365
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sat Sep 22 13:59:56 2007 +0200
+
+    Fix drm_bo.c compiling.
+
+commit bea727b8387f3094b9921004d7686a2d77184466
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sat Sep 22 13:38:36 2007 +0200
+
+    Make nouveau compile on older kernels.
+
+commit da63f4ba0f15c3ae614eba92c8219670c674727e
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sat Sep 22 13:34:33 2007 +0200
+
+    Add fence error member.
+    
+    Modify the TTM backend bind arguments.
+    Export a number of functions needed for driver-specific super-ioctls.
+    Add a function to map buffer objects from the kernel, regardless of where they're
+    currently placed.
+    A number of error fixes.
+
+commit 24e33627c5dfb92324a9faf1c7d366e7f33e622a
+Merge: 7587e96 e7bfeb3
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Sep 21 17:05:21 2007 -0700
+
+    Merge branch 'bo-set-pin'
+    
+    This branch replaces the NO_MOVE/NO_EVICT flags to buffer validation with a
+    separate privileged ioctl to pin buffers like NO_EVICT meant before.  The
+    functionality that was supposed to be covered by NO_MOVE may be reintroduced
+    later, possibly in a different way, after the superioctl branch is merged.
+
+commit e7bfeb3031374653f7e55d67cc1b5c823849359f
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Sep 21 16:14:22 2007 -0700
+
+    Add some more verbosity to drm_bo_set_pin_req comments.
+
+commit 3c995c2c4d2530e5bd01548764b20c4d062fd7a5
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Sep 21 15:58:02 2007 -0700
+
+    Fix mapCount refcounting on unmap, even though the value is unused.
+
+commit 7587e9682c1b70930c015915d588b42ccd00c7c4
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Fri Sep 21 22:42:39 2007 +0200
+
+    nouveau: fix ppc and get it right this time.
+
+commit dc60c452e6ac72ebc4e5c73153d4d9d8c9edfae5
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Fri Sep 21 22:27:53 2007 +0200
+
+    nouveau: fix notifiers on PPC.
+
+commit 74c6f2f47a9977fef8fcc7c698862d5bd2f54336
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Fri Sep 21 22:04:45 2007 +0200
+
+    nouveau: add some checks to the nv04 graph switching code.
+
+commit bc5423f16838257a040a55b88df9588d268fda06
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Sep 20 14:01:29 2007 +1000
+
+    drm_sysfs: update sysfs code from kernel
+
+commit 3d3a96ad4e5596187236898ca241515a21661b69
+Merge: 0055fd5 e349b58
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Sep 19 15:55:58 2007 -0700
+
+    Merge branch 'origin' into bo-set-pin
+
+commit e349b58b4a6ebfe299720cb921039a600c145e65
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Tue Sep 18 21:03:22 2007 +0100
+
+    i915: Reinstate check that drawable has valid information in i915_vblank_swap.
+
+commit 78d111fa967d18e7f9f9b2acd26aff20b884eb6c
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Tue Sep 18 20:55:43 2007 +0100
+
+    i915: Fix scheduled buffer swaps.
+    
+    One instance of unlocking a spinlock was converted incorrectly when this code
+    was fixed to build on BSD.
+
+commit a3881ad2fef99aaf0a863609a847020ea822798c
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Sep 18 11:03:49 2007 -0700
+
+    Add ioc32 compat layer for XGI DRM.
+
+commit e7d4a26913ba3a4949ac36280925062948ee21ce
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Sep 18 11:03:08 2007 -0700
+
+    Fix ioc32 compat layer
+    
+    Previously any ioctls that weren't explicitly listed in the compat ioctl
+    table would fail with ENOTTY.  If the incoming ioctl number is outside the
+    range of the table, assume that it Just Works, and pass it off to drm_ioctl.
+    This make the fence related ioctls work on 64-bit PowerPC.
+
+commit 41345b95a2cdc1e509171d31fc8aed8cecb43dbd
+Author: Brian <brian@i915.localnet.net>
+Date:   Wed Sep 12 12:05:15 2007 -0600
+
+    Added bool typedef added in kernel 2.6.19
+    
+    This allows the xgi code to compile with older kernels.
+
+commit c453135789597648ef5aa641c4e59bb5b5e320de
+Author: Brian <brian@i915.localnet.net>
+Date:   Wed Sep 12 11:48:48 2007 -0600
+
+    Added idr_replace() function which was apparently added in Linux 2.6.18
+    
+    Someone should probably double-check my work here since this is the
+    first time I've touched drm_compat.[ch]
+
+commit 852232fb803bef92b12136be2766ddee3e3613b2
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Wed Sep 12 08:55:33 2007 -0700
+
+    Remove plane->pipe mapping from SAREA private after all
+    
+    We can figure out which pipe a given plane is mapped to by looking at the
+    display control registers instead of tracking it in a new SAREA private field.
+    If this becomes a performance problem, we could move to an ioctl based solution
+    by adding a new parameter for the DDX to set (defaulting to the old behavior if
+    the param was never set of course).
+
+commit 7fdf98051a51a0117f415f7f7374f2b4d0b2e531
+Merge: 3cb8acd 0bd8752
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Tue Sep 11 03:50:17 2007 -0700
+
+    Merge branch 'master' of ssh://git.freedesktop.org/git/mesa/drm
+
+commit 3cb8acd5abcb410ab2982f55aec94b5a793a47d6
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Tue Sep 11 03:48:46 2007 -0700
+
+    Disambiguate planes & pipes for swap operations
+    
+    This mod makes the SAREA track plane to pipe mappings and corrects the name of
+    the plane info variables (they were mislabeled as pipe info since until now all
+    code assumed a direct mapping between planes and pipes).
+    
+    It also updates the flip ioctl argument to take a set of planes rather than
+    pipes, since planes are flipped while pipes generate vblank events.
+
+commit 0bd8752a0cb8afb7f29a5f659c3459aab42d9955
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Mon Sep 10 18:52:17 2007 +0200
+
+    nouveau: nv10: add combiner registers
+
+commit 00bb534a546a4ca4bb6e167f5b387fa8156f4ca7
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Sun Sep 9 15:49:33 2007 +0200
+
+    nouveau : nv10 fix NV10_PGRAPH_CTX_USER save/load
+
+commit b2ee72f4400999b2cf783256547fe8c7bfa698f5
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Sun Sep 9 12:13:00 2007 +0200
+
+    nouveau : nv10 pipe ctx switch load/save.
+    
+    This fix some issues with more than one 3D fifo, but there still some "corruption" sometimes
+
+commit f19d80b0465d9ba93005d8499654e3256494c831
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sat Sep 8 22:19:00 2007 +0200
+
+    nouveau: Add Quadro NVS 140 pciid
+
+commit 06bb07259531d10df2c1979919af899e3812057b
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Sep 7 20:07:13 2007 +1000
+
+    nouveau: Use nv41 ctxprog/vals on nv42.
+
+commit 54c96cbc46a21e05cf991d0e4a26da58bd87ce85
+Merge: edf5a86 c597bd5
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Sep 6 15:37:52 2007 -0700
+
+    Merge branch 'xgi-0-0-2'
+
+commit c597bd57eee3ea05a3b8c851615c7351d0b32fce
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Sep 6 15:20:52 2007 -0700
+
+    Bump version to 1.0.0.
+
+commit edf5a86a269690b0e42a5cee7d4ac3828b42ca3e
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Thu Sep 6 02:46:45 2007 +0200
+
+    nouveau: fix some nv04 graph switching.
+
+commit ff9a019cf06b7ebaf2fa8dee8e37c866ca4623af
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Thu Sep 6 02:12:05 2007 +0200
+
+    nouveau: add pure nv30 support.
+
+commit ef4944de85b974e6b91087fdcb8f241f2619d28d
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Tue Sep 4 18:51:57 2007 +0200
+
+    Add context init voodoo and context switch code for NV41.
+
+commit fee49e2071f2f528d7041bf1f14c640fff7478cc
+Merge: bb3da88 bac3f49
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Aug 31 10:54:55 2007 -0700
+
+    Merge branch 'master' of ssh+git://git.freedesktop.org/git/mesa/drm into xgi-0-0-2
+
+commit bb3da88601749cd647632eed86fb57dfd7cb81ee
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Aug 31 10:48:13 2007 -0700
+
+    Acutally emit the IRQ (duh) when setting the fence post.
+
+commit bac3f49daa54bf34ea21854be23061d10a0d0d1b
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Fri Aug 31 01:39:40 2007 +0200
+
+    nouveau: nv04 context switching support. Works for starting X up at least.
+
+commit 69b11f44f0a0cfe0806e18dae2f360bc1ed8e005
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Thu Aug 30 21:51:53 2007 +0200
+
+    nouveau: give nv03 the last cut.
+
+commit 9c5b9d458bc618fb9d7d8590c866655e92f9cb0b
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Wed Aug 29 14:41:49 2007 -0700
+
+    Use ati_pcigart for PCI-e GART table handling.
+
+commit c46ffd6b2943332a88589fb525305ffd09d35b8d
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Wed Aug 29 00:23:30 2007 -0700
+
+    Fix late night dumb-dumb mistake.
+
+commit 2bcd5b5e330843e1e1a5f0a19105ecd33e76b00b
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Wed Aug 29 00:04:18 2007 -0700
+
+    Use DRM_SPINLOCK / DRM_UNSPINLOCK macros.
+
+commit c78e610fa42c8122ed6bc504222ef650f5693d22
+Author: Keith Packard <keithp@koto.keithp.com>
+Date:   Tue Aug 28 12:23:51 2007 -0700
+
+    Add register defines for hw binning
+
+commit 589707b765eee78cc278c10603e2c858bb819436
+Author: Dave Airlie <airlied@optimus.(none)>
+Date:   Tue Aug 28 15:17:11 2007 +1000
+
+    drm: remove XFREE86_VERSION macros
+
+commit a331d2e352675be260254e8abef412540ead9c30
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Sun Aug 26 20:48:32 2007 +0200
+
+    nouveau : add NV04_PGRAPH_TRAPPED_ADDR definition
+    
+    - fix offset for nv04
+    - use it in nv10 graph ctx switch for getting next channel
+    - dump NV10_PGRAPH_TRAPPED_DATA_HIGH on nv10+
+
+commit 4182fce4084f4d884a7435b8ad2acb5c209f4544
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Sat Aug 25 22:10:45 2007 +0200
+
+    nouveau : nv1x graph reworks
+    
+    - add forgotten init value
+    - use the same PGRAPH_DEBUG than the blob
+    - remove init of ddx reg : it should be done with object
+    - better handle of channel destruction
+    
+    hope I didn't break anything ;)
+
+commit 502bbdbe14fa458ed06c7fa4b1ccb63e4f126625
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Sat Aug 25 00:12:58 2007 +0200
+
+    nouveau: nv10: output a warning if last channel invalid, and switch to next
+
+commit 98750111961a5729eba9433b927f8c24548fbace
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Thu Aug 23 10:18:34 2007 +0200
+
+    nouveau: nv10: check some NULL pointers inside context switch
+
+commit 8645dac8952473dc3e09ba7a7a9db3fbdf75215f
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Wed Aug 22 23:17:56 2007 +0200
+
+    nouveau : fix some potential crashes with objects causing hash collision
+
+commit 11c46afe7599cf3cefd30a7e55325a1a1aa8e5ba
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Aug 22 13:23:49 2007 +1000
+
+    nouveau/nv40: Preserve other bits in 0x400304/0x400310 like NVIDIA do.
+
+commit a654c0341a7892307522ed6e7f4518cc7e28a99e
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Aug 22 13:17:19 2007 +1000
+
+    nouveau/nv40: Dump extra info on ucode state if ctx switch fails.
+
+commit 81eaff44c47cfb23e96b1cb848df5fd7ea24f913
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Aug 22 13:09:27 2007 +1000
+
+    nouveau: NV4c ctx ucode.
+    
+    Seems we already have a nv4c_ctx_init() somehow, a quick check shows the
+    ucode matches it still.
+
+commit ae883c97ad7af5529d40c8d52c2da614d34233e0
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Aug 22 12:54:26 2007 +1000
+
+    nouveau/nv50: Correct thinko for 8800 chips + cleanup a bit.
+
+commit c8ee6a6cabbd44c06e382f99c2691d3efe46b984
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Wed Aug 22 04:20:09 2007 +0200
+
+    nouveau: redo nv30_graph.c. Should work better, but we still lack a couple of cards.
+
+commit 76337bdb19fb6a098fc6d6ceaafb58a4ed15f9b0
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Mon Aug 6 17:42:31 2007 +0200
+
+    nouveau: fix the comment and debug message for PCIGART size
+
+commit 03c0490129816b5f5b40855438e948fdae572d06
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Tue Aug 21 02:23:21 2007 +1000
+
+    nouveau: Add NV44 ctx ucode.  Patch from stillunknown.
+    
+    Microcode is similar enough to the NV4A one that it should be able to use
+    the same initial PGRAPH context.  One day this mess will go away, honest..
+
+commit 216f1b0573b2c0e39ac82c7f56235c1003e9bd4d
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Tue Aug 21 02:18:27 2007 +1000
+
+    nouveau: Poke 0x2230 on NV47 also.
+    
+    Makes 0x2220 work the same way as on NV40.
+
+commit c8760c7999b8aeb6d51b09c062331f518953a920
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Sun Aug 19 18:45:01 2007 +0200
+
+    Check also for Linux, as it's not supported on different OS
+
+commit a122e7dabfaade751e8f6bb6d1488902fd36a40e
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Sun Aug 19 18:41:18 2007 +0200
+
+    Function pci_get_bus_and_slot needs 2.6.19 or later
+
+commit 3383e8bd6bcd2323c81252e617c8522593baf818
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Aug 17 10:53:18 2007 -0700
+
+    Remove unnecessary include.
+
+commit 0d3c741df19c35307723422c1f2f28a23995823d
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Aug 16 13:43:04 2007 -0700
+
+    Forgot to add this file on the last commit.
+
+commit 0055fd5c35306a6363b0414f7f2220b3d1c27ecc
+Merge: 3a0bc51 02c4e0e
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Aug 16 09:23:09 2007 -0700
+
+    Merge branch 'master' into bo-set-pin
+
+commit 8a4d7f34d9c0182c466518c6f413d9a039db402d
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Aug 17 01:12:46 2007 +1000
+
+    nouveau: Detect memory on NFORCE/NFORCE2 correctly.
+
+commit d8a800b63de09f41d482d2b3367e4da67ed0f92b
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Wed Aug 15 21:05:26 2007 -0700
+
+    Implement fence support.
+
+commit b668d6d9050106bebfb704e4ed32d2924bb26371
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Aug 15 14:29:31 2007 -0700
+
+    Fix dev->agp->base initialization on BSD, and fix addmap range check on Linux.
+    
+    With the previous linux commit, an AGP aperture at the end of the address space
+    would have wrapped to 0 and the test would have failed.
+
+commit 6e93c35ba7c5001e756d0c9d1a4f534384652a5a
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Aug 15 13:42:04 2007 -0700
+
+    BSD: Return EINVAL if drm_unlock is called on an unheld or other-owner lock.
+
+commit 9254e00e4bbbc02282415cd0ca7bd6b5cb52be82
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Aug 15 13:41:24 2007 -0700
+
+    Add a set of tests for DRM locking, exposing issues on BSD.
+
+commit 8a1ca401b403848d894f664977f9e939eaf07291
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Aug 15 13:13:24 2007 -0700
+
+    Fix a bad error message in auth.c regression test.
+
+commit d1a2b26a99205b802919aa0901b4e19cb2d251fe
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Aug 15 13:08:19 2007 -0700
+
+    Require master in setversion test, since it requires auth.
+
+commit a9ee144eab5bbd5f90747c38cdc016da46c124fe
+Author: vehemens <vehemens@verizon.net>
+Date:   Wed Aug 15 11:12:46 2007 -0700
+
+    BSD: simplify drm_ioctl() after other refactoring.
+
+commit 4cdd871e90cd5fe440d0a4af5d69f1d84e49e742
+Author: vehemens <vehemens@verizon.net>
+Date:   Wed Aug 15 11:05:44 2007 -0700
+
+    Bug #11989: Fix regression in getstats ioctl (kernel panic).
+
+commit 56133e04de40e3004018d069cb229e62ee10e0f4
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Aug 15 11:04:56 2007 -0700
+
+    BSD: Fix regression in setversion ioctl (current version not returned).
+
+commit a23a47b16cf813f0e7e9616ef6eb66f6ae0bc2ac
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Aug 15 11:03:10 2007 -0700
+
+    Add a regression test for the setversion interface.
+
+commit 8a881b47f7c21be2cdeff4b0d1b00d39d503f358
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Aug 15 10:52:01 2007 -0700
+
+    Add simple regression test for getstats (does it not crash the kernel?).
+
+commit 5346fc5f36b5e7c55fc7b5cd46f1e4d7563a86a4
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Aug 14 14:41:24 2007 -0700
+
+    BSD: Replace brief description in each file's first line with doxygen later on.
+    
+    The brief descriptions usually had the wrong filename in them.
+
+commit 10f9b7bd0b471487371813083bd3481629b2a56f
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Aug 15 14:14:23 2007 +1000
+
+    nouveau: Use count parameter in nouveau_notifier_alloc().
+
+commit a615d2fde77092062f7e2bbfa39705b5f34547e8
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Aug 15 13:53:58 2007 +1000
+
+    nouveau: Turn some messages into DRM_DEBUGs..
+
+commit c3faa589b09616acdfd827be1719f6c2706c49ab
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Aug 15 13:36:54 2007 +1000
+
+    nouveau: Allow GART notifiers when using sgdma code.
+
+commit ee01d3755ac03f2c47e3b4d9bf084d68e6ee95bc
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Aug 15 13:34:57 2007 +1000
+
+    nouveau: Workaround mysterious PRAMIN clobbering by the card.
+
+commit f563a50d145848ed296b63c63422caff80232ddf
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Aug 14 13:44:51 2007 -0700
+
+    Eliminate unused / useless ioctls.
+
+commit 7b12174aacd09a991be3e74a3db47534961a6887
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Aug 14 13:24:02 2007 -0700
+
+    Clean up remaining C++ style comments.
+
+commit d3c8e98dd9ccc366513c117d032fbf80be4eb06a
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Aug 14 13:20:37 2007 -0700
+
+    Move dwWriteReg to xgi_cmdlist.c, the only file where it is used.
+
+commit be76f0eea9b455fde77e15ff35f4f00c70661e51
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Aug 14 13:19:48 2007 -0700
+
+    Remove unused interrupt related functions.
+
+commit 891714d8d732480af97fbc45562145a560b7999b
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Aug 14 13:18:44 2007 -0700
+
+    Clean up xgi_(en|dis)able_(mmio|ge) and move to xgi_misc.c.
+
+commit a6ea60c77e8d4a266d696e0d99c11b1f39578dcc
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Aug 15 01:40:46 2007 +1000
+
+    nouveau: Catch all NV4x chips instead of just NV_40.
+
+commit 02c4e0e757b69cd6ae38b8ab2c078b3f06fea661
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Aug 15 00:56:24 2007 +1000
+
+    nouveau/nv40: Fix channel scheduling.
+    
+    Ensure NV_PFIFO_DMA_TIMESLICE_TIMEOUT_ENABLE gets set, otherwise channels
+    will appear to "freeze" in some circumstances.
+
+commit 3ee211f4f7435792752c1dbcd3a60e2e7abfba09
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Aug 13 16:29:24 2007 -0700
+
+    Bug #11895: Only add the AGP base to map offset if the caller didn't.
+    
+    The i830 and newer intel 2D code adds the AGP base to map offsets already,
+    because it wasn't doing the AGP enable which used to set dev->agp->base.
+    
+    Credit goes to Zhenyu for finding the issue.
+
+commit 15f841bd529b50901272ca35a4c57de42a51901a
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Aug 13 16:21:20 2007 -0700
+
+    Strobe magic 0xB03F register to flush PCI-e GART table.
+    
+    The original XGI kernel driver strobed 0xB03F each time a page was
+    allocated to back a GART page.  When the driver was converted to use
+    the DRM SG interface, this code was lost.  Returning it fixes a long
+    standing issue where the X-server would work fine the first time, but
+    acceleration commands would be ignored on the second X-server
+    invocation.
+
+commit 4340f49bf79a5421886363e08501ad347973b083
+Author: vehemens <vehemens@verizon.net>
+Date:   Mon Aug 13 10:17:47 2007 -0700
+
+    Bug #11951: Fix an errno sign inversion on pre-FreeBSD 5.
+    
+    Also, annotate where signs change, to hopefully remind the reader of these
+    issues in the future.
+
+commit d6a45ebf0ee47c31f560f3072a4b70c4039e454a
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Aug 13 11:27:46 2007 -0700
+
+    Add a regression test for authentication.
+
+commit 3b07a37a48ca6dc22d538221b59b430dd72c6203
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Aug 13 10:50:25 2007 -0700
+
+    Add doxygen and fix whitespace for drm_auth.c
+
+commit 263775c454f381fffc8f5d4f309b4e1b131c3734
+Author: vehemens <vehemens@verizon.net>
+Date:   Mon Aug 13 10:24:39 2007 -0700
+
+    Fix drm_auth.c locking to not recurse on dev_lock.
+
+commit da279868706cc799bdf25cdd5523d11fda64d4cc
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Mon Aug 6 18:33:29 2007 +1000
+
+    i915: i965 non-secure batchbuffer bit has moved.
+
+commit a46104674f129e873b8dfa29cf8aac9c67bd77be
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Aug 10 13:54:26 2007 +1000
+
+    nouveau/nv50: demagic instmem setup.
+
+commit 39907f613b6c84499c34c9a6ece5f5dde64788c0
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Aug 10 13:53:10 2007 +1000
+
+    nouveau: Allow creation of gpuobjs before any other init has taken place.
+
+commit 20a0e5e4298761ae6005399e45d66b93109d2121
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Aug 9 18:57:15 2007 -0700
+
+    After calling drm_sman_cleanup, mark both heaps as uninitialized.
+    
+    Since the heaps weren't marked as uninitialized, SG memory was never
+    re-allocated.  This prevented the X-server from being able to restart
+    without re-loading the kernel module.
+
+commit 06e09842dfbdaa9502d3b3e6b657de4e3630644c
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Aug 9 18:28:16 2007 -0700
+
+    Use DRM_MEMORYBARRIER() macro instead of mb().
+
+commit 371f0a4d410f02d8db050b51fd2e714f888a71e0
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Aug 9 18:15:42 2007 -0700
+
+    Mask off correct bits in M2REG_AUTO_LINK_STATUS for interrupt handling.
+
+commit 6dd97099ea5c6dc7931c6b482eb5935f7dd9ed2d
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Aug 9 16:20:44 2007 -0700
+
+    Minor clean up of IRQ code.  Much, much more to come.
+
+commit dbd4d0597ff32458bbe4347bdea0e4b9e55a14da
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Aug 9 16:01:14 2007 -0700
+
+    Use sman memory manager instead of internal version.
+
+commit aea6b4dea9708f66f5fc2068fe84407682570aca
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Aug 9 15:30:36 2007 -0700
+
+    Unify alloc and free ioctls.
+    
+    The DRM_XGI_PCIE_ALLOC and DRM_XGI_FB_ALLOC ioctls (and the matching
+    free ioctls) are unified to DRM_XGI_ALLOC.  The desired memory region
+    is selected by xgi_mem_alloc::location.  The region is magically
+    encoded in xgi_mem_alloc::index, which is used to release the memory.
+    
+    Bump to version 0.11.0.  This update requires a new DDX.
+
+commit 25cb876f8513d02d4d189371eaa8b7b9a88e860d
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Aug 9 15:23:13 2007 -0700
+
+    Associate master file pointer with command list buffer.
+    
+    Pass the master's file pointer, as supplied to xgi_bootstrap, to
+    xgi_cmdlist_initialize.  Associate that pointer with the memory
+    allocated for the command list buffer.  By doing this the memory will
+    be automatically cleaned up when the master closes the device.  This
+    allows the removal of some clean up code.
+
+commit 7784e8c6e74b93ffb39d82e3385bd3268a55507c
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Thu Aug 9 11:12:13 2007 +1000
+
+    nouveau: silence irq handler a bit
+
+commit 7281463f8d5d45a26f4cdff3fb67d896e0e74f74
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Thu Aug 9 10:23:36 2007 +1000
+
+    nouveau/nv40: add some missing pciids.
+
+commit e326acf5493a7193954d3dd794855e2a11dc1782
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Wed Aug 8 22:55:32 2007 +0200
+
+    nouveau : nv10, nv20, nv30 : don't save all channel in the same RAMFC entry
+    
+    	  This should improve multi fifo
+
+commit 05633ca3708f48cfbbb77518da4e791d7e1613c2
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Aug 8 16:37:55 2007 +1000
+
+    nouveau: Always allocate drm's push buffer in VRAM
+    
+    Fixes #11868
+
+commit 40f21563564332786ca2b9ffc7d7ba9c7e6f7f1a
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Aug 8 16:11:28 2007 +1000
+
+    nouveau: return channel id
+
+commit 296050eee6ca7b496e8702ceca9628de803d79f8
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Aug 8 13:01:29 2007 +1000
+
+    nouveau/nv50: hack up initial channel context from current state
+    
+    We really should be providing static values like the nv40 PGRAPH code does,
+    however, this will do for now to keep X at least working.
+
+commit 4ad487190d5b79947c65e238330506db6b77e523
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Aug 8 10:42:12 2007 +1000
+
+    nouveau: enable/disable engine-specific interrupts in _init()/_takedown()
+    
+    All interrupts are still masked by PMC until init is finished.
+
+commit a4759b85139dd8d81de25e170777309b770f5316
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Tue Aug 7 23:09:44 2007 +0200
+
+    nouveau : fix enable irq (in the previous code all irq were masked by engine
+    init after irq_postinstall)
+
+commit f7ba02b7458823627097a2320bf9befa84fc9c76
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Aug 6 17:27:15 2007 -0700
+
+    Unify infrastructure for freeing on-card / GART memory.
+
+commit 6718198897ef9e275506d3fcb497641e1b09d3b1
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Aug 6 16:56:20 2007 -0700
+
+    Release client memory in reclaim_buffers_idlelocked instead of preclose.
+
+commit f3072becda3a2d5fe587f20e155d4d4f9ace60a2
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Aug 6 16:35:07 2007 -0700
+
+    Refactor xgi_(fb|pcie)_free_all into xgi_free_all.
+
+commit 90907c59152f628d6f0efea4927a06e547f4a3c7
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Aug 6 16:17:23 2007 -0700
+
+    Replace per-heap semaphores with drm_device::struct_mutex.
+
+commit f96bff9e213a950ab910832908d30e732435e628
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Aug 6 16:09:05 2007 -0700
+
+    Unify infrastructure for allocating (not yet freeing) on-card / GART memory.
+
+commit 5362cc723e6605c31d152eb22ee3dc40c9e3f56b
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Aug 6 15:52:06 2007 -0700
+
+    Eliminate unnecessary function xgi_pcie_free_locked.
+
+commit d749cc9ae8c50157a1588369222a591410002c26
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Aug 6 15:45:37 2007 -0700
+
+    Initialize the AGP structure's base address at init rather than enable.
+    
+    Not all drivers call enable (intel), but they would still like to use this
+    member in driver code.
+
+commit a6fb93a150f90ada9af6760b52d34716497f744f
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Aug 6 15:43:51 2007 -0700
+
+    Finish removing allocation "owner" infrastructure.
+
+commit 78e9c1a93d00097895bc77d9ac90da1945021804
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Aug 6 15:37:56 2007 -0700
+
+    Eliminate special-case handling of framebuffer (fake) allocation.
+
+commit 997a9a738ec26cf0ef2c7dee5e30bb53bd11bf6c
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Aug 6 15:31:34 2007 -0700
+
+    Eliminate allocation "owner" usage.
+
+commit 66f5232d9393f6886d8fd1a60b2d75cd009b972c
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Tue Aug 7 01:51:46 2007 +1000
+
+    nouveau: Init global gpuobj list early, unbreaks sgdma code.
+
+commit ac24f328ec8954f78b1025db716abdd5b25b3dd9
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Mon Aug 6 17:14:26 2007 +0200
+
+    nouveau: Bump PCI GART to 16MB
+
+commit 8d5a8ebc316028f14666697cff33daddbe384bcd
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Aug 6 22:32:36 2007 +1000
+
+    nouveau: ouch, add nouveau_dma.[ch] files..
+
+commit 92084c6e056a738308ff65f3fcd7411fd7d2995a
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Aug 6 22:11:18 2007 +1000
+
+    Export some useful ttm functions to drivers.
+
+commit 7a0a812ea42d80eed89b7b9993eae42c7c1b1613
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Aug 6 22:06:52 2007 +1000
+
+    nouveau: Remove PGRAPH_SURFACE hack, it wont work now anyway.
+    
+    Need to find another way of doing this, ideally someone'd hunt down which
+    object/method controls it!  The Xv blit adaptor is likely now broken on
+    cards that have pNv->WaitVSyncPossible enabled.
+
+commit cf04641bc61c8bc18101713a8d95ef98e6afae7f
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Aug 6 22:05:31 2007 +1000
+
+    nouveau: Give DRM its own gpu channel
+    
+    If your card doesn't have working context switching, it is now broken.
+
+commit 51f24be578025e3f1eae859288adf5232afc898d
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Aug 6 21:46:55 2007 +1000
+
+    nouveau: Determine trapped channel id from active grctx on >=NV40
+
+commit 97770db72040dc032130413e0cdabc1777560a75
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Aug 6 21:45:18 2007 +1000
+
+    nouveau: Various internal and external API changes
+    
+    1. DRM_NOUVEAU_GPUOBJ_FREE
+    	Used to free GPU objects.  The obvious usage case is for Gr objects,
+    	but notifiers can also be destroyed in the same way.
+    
+    	GPU objects gain a destructor method and private data fields with
+    	this change, so other specialised cases (like notifiers) can be
+    	implemented on top of gpuobjs.
+    
+    2. DRM_NOUVEAU_CHANNEL_FREE
+    
+    3. DRM_NOUVEAU_CARD_INIT
+    	Ideally we'd do init during module load, but this isn't currently
+    	possible.  Doing init during firstopen() is bad as X has a love of
+    	opening/closing the DRM many times during startup.  Once the
+    	modesetting-101 branch is merged this can go away.
+    
+    	IRQs are enabled in nouveau_card_init() now, rather than having the
+    	X server call drmCtlInstHandler().  We'll need this for when we give
+    	the kernel module its own channel.
+    
+    4. DRM_NOUVEAU_GETPARAM
+    	Add CHIPSET_ID value, which will return the chipset id derived
+    	from NV_PMC_BOOT_0.
+    
+    4. Use list_* in a few places, rather than home-brewed stuff.
+
+commit beaa0c9a28b30a6ba3292184d04875b6a597e433
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Aug 6 03:40:43 2007 +1000
+
+    nouveau: Pass channel struct around instead of channel id.
+
+commit 2453ba19b6f9956ea5d412a66d5d33c8a8b301b2
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Fri Aug 3 23:06:39 2007 +0200
+
+    nouveau:nv10: fill and use load,save graph context functions
+
+commit 3a0bc518e35c62bb9c64c9105f836584d949653f
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Aug 2 14:08:04 2007 -0700
+
+    Remove the pinned buffer from the LRU when pinning.
+    
+    Also, be a little safer with setting the pinned flag within the struct lock.
+    I'm not 100% sure if this is required, but it seems like it might be.
+
+commit cf4f1a85af69c2c2e5ba9c822d30863f16ce6821
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Aug 2 13:51:55 2007 -0700
+
+    Add a couple of doxygen comments from reading the code.
+
+commit 9dfcc1ba07b6ad1a41234ae4016b54444094ac18
+Merge: 405c48b 7602e4f
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Thu Aug 2 20:08:05 2007 +0200
+
+    Merge branch 'master' of git+ssh://pmandin@git.freedesktop.org/git/mesa/drm
+
+commit 405c48b857a967c1174b27a5db975668e1d6a9f8
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Thu Aug 2 20:06:37 2007 +0200
+
+    Add libdrm source dir, to build tests from a different build dir
+
+commit 7602e4f8a67d777437502672b4f74d9b990535ce
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Aug 2 19:13:45 2007 +1000
+
+    drm: add unlocked ioctl code path - not used yet
+
+commit f83000c8b388f18f677238b9342fd6a7e262394b
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jul 31 17:27:00 2007 -0700
+
+    Refactor register dumping code.
+
+commit c395d27a725f170645704bfc0d27b1e935b53c83
+Author: Dave Airlie <airlied@pegasus.(none)>
+Date:   Wed Jul 25 14:32:15 2007 +1000
+
+    drm/fence: shut up lockdep
+
+commit 283eaa25594347267df4e6e5eedbb9d17bb3682c
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Tue Jul 31 09:22:45 2007 +1000
+
+    drm: fix fencing refcount error
+    
+    This extra increase was causing fence leaks on my system, due to create/user add already increasing it twice no need for a 3rd go.
+
+commit 08919d8a70558dc61c430be5ed6e4a2bed7429b2
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 30 12:01:52 2007 -0700
+
+    Move additional GE initialization into the kernel.
+    
+    This code comes directly from the X server.
+
+commit 2fc697a7d270d57463eb5a16a0c65bd8e14c9893
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 30 10:20:15 2007 -0700
+
+    Fix GE shut-down sequence.
+    
+    When the GE is shut down, an empty command packet without a begin-link
+    must be sent.  After this command is sent, wait for the hardware to go
+    idle.  Finally, turn off the GE and disable MMIO.
+
+commit 01628a430d476f5875270d7137fc083ba85cef90
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 30 10:02:46 2007 -0700
+
+    Use DRM_READ/DRM_WRITE macros instead of directly accessing MMIO space.
+
+commit 2ac80e79e424aa6577e556b2df01caea9e480852
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 30 09:59:19 2007 -0700
+
+    Use OUT3C5B macro instead of assuming little-endian byte order.
+
+commit cd51f131389297f923798daef6c734ba93f4422b
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jul 27 15:45:59 2007 -0700
+
+    Convert to new ioctl interface between core DRM and device-specific module.
+
+commit f01026eae69e81ae16a69a014ba3bcfb286fc7a4
+Author: Arthur Huillet <arthur.huillet@free.fr>
+Date:   Fri Jul 27 15:48:04 2007 +0200
+
+    nouveau: creating notifier in PCI memory for PCIGART
+
+commit c37ed9eca57a42b98cc67ca98dbf5135f5ab7aba
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jul 26 17:01:16 2007 -0700
+
+    Eliminate use of DRM_ERR.
+
+commit b89cc0346500d9875d4acebc611db8f9ee3463f7
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jul 26 16:58:59 2007 -0700
+
+    Eliminate unnecessary (and now wrong) call gto drm_sg_free.
+
+commit c561cb4650dc5895acfb3ae00c7ff455be31a860
+Merge: 2bafeb6 4175dd8
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jul 26 16:58:28 2007 -0700
+
+    Merge branch 'master' of ssh+git://git.freedesktop.org/git/mesa/drm into xgi-0-0-2
+    
+    Conflicts:
+    
+    	linux-core/drmP.h
+    	linux-core/drm_scatter.c
+
+commit 3c8ebd94e48589711f44d23e85d713a1ed980f37
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jul 26 11:26:12 2007 -0700
+
+    debug print ioctl return value as -integer rather than fffffwhatever.
+
+commit f9c27aa50b715a7d21858f1ce9e4785120bd0c36
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jul 26 11:17:41 2007 -0700
+
+    Copy the important parts of object_validate into object_create().
+    
+    This should let us allocate buffers without holding the hardware lock.
+    
+    While here, add DRM_DEBUG info for the drm_bo ioctls, so you can see something
+    more specific than just the cmd value per ioctl.
+
+commit cf2d569daca6954d11a796f4d110148ae2e0c827
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jul 26 10:14:17 2007 -0700
+
+    Replace NO_MOVE/NO_EVICT flags to buffer objects with an ioctl to set pinning.
+    
+    This cleans up the create/validate interfaces for this very uncommon path, and
+    makes pinned object creation much easier to use for the X Server.
+
+commit 4175dd818110bd10d6d09190d30c271e89202b18
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jul 26 15:26:36 2007 +1000
+
+    drm/bo: set the req pointer for each buffer to validate
+
+commit e2d00715cc1d3919aadd5066ef7355049f417bd2
+Author: Dave Airlie <airlied@redhat.com>
+Date:   Thu Jul 26 13:25:21 2007 +1000
+
+    drm: fix size argument for copy to/from user
+
+commit f2528cbc965858c6a7a81d659f9d5f4da290b5ae
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jul 25 12:54:15 2007 -0700
+
+    Improve the drawable test to use multiple drawables.
+
+commit be3099f26547f48066bbdd7a36578b54da9170b4
+Author: Eric Anholt <eric@anholt.net>
+Date:   Sun Jul 22 09:51:34 2007 +0100
+
+    Fix copy'n'paste-o in FreeBSD drawable code.
+
+commit 2bafeb673f14b1e3799bf00817138c0b8211635e
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jul 24 16:17:30 2007 -0700
+
+    Fix typo on previous commit.  Sigh...
+
+commit 75a68635a8f7b0d4fb31031832cc282a39a4a1e7
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jul 24 15:53:50 2007 -0700
+
+    Pass correct offset to xgi_find_pcie_virt.
+    
+    The wrong offset was being passed to xgi_find_pcie_virt.  This would
+    cause an oops in addFlush2D.
+
+commit 8e64d2ae862d5fa02e23c68db6b55393e1f86005
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jul 24 13:36:02 2007 -0700
+
+    Fix license formatting.
+
+commit 2ef2997ee38ff359c331b6a3febf194bd46e4962
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jul 24 13:29:29 2007 -0700
+
+    Fix flags for serveral ioctls.
+
+commit 887cb31ee9ec04e45829500f095aa4a3bc1095ea
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jul 24 13:27:44 2007 -0700
+
+    Fix bug preventing X server from restarting.
+    
+    The core DRM lastclose routine automatically destroys all mappings and
+    releases SG memory.  XP10 DRM and DDX assumed this data stayed around
+    until module unload.  xgi_bootstrap was reworked to recreate all these
+    mappings.  In addition, the drm_addmap for the GART backing store was
+    moved into the kernel.  This causes a change to the ioctl protocol and
+    a version bump.
+
+commit 46214fc3979ed60b32289ade1b8efbba1c8bf732
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 23 18:50:52 2007 -0700
+
+    Minor log message clean up.
+
+commit 388a2c54eea7575a5b046da3df09f7a1c63551d6
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 23 18:50:07 2007 -0700
+
+    Minor log message clean up.
+
+commit 03e932e32be6ae3de6994c6893c813a34623ad7d
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jul 23 15:11:12 2007 -0700
+
+    linux: Make DRM_IOCTL_GET_CLIENT return EINVAL when it can't find client #idx.
+    
+    Fixes the getclient test and dritest -c.
+
+commit 2097d743f287d994bd001baedd39e3bc808999c6
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 23 13:26:28 2007 -0700
+
+    Eliminate XGI_CHECK_PCI_CONFIG.
+    
+    Based on review comments from airlied, XGI_CHECK_PCI_CONFIG is
+    removed.  He believes (and I tend to agree) that this is a largely
+    unnecessary workaround for a bug elsewhere.
+
+commit 7e6d08f670a55d79ee037144aa29104e4e8fc700
+Author: Adrian Bunk <bunk@stusta.de>
+Date:   Mon Jul 23 18:15:00 2007 +1000
+
+    drm_rmmap_ioctl(): remove dead code
+    
+    This patch removes some obviously dead code spotted by the Coverity
+    checker.
+    
+    Signed-off-by: Adrian Bunk <bunk@stusta.de>
+
+commit 94203840fe53edaf1556d1a0a8a27773c24a7fc5
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Sat Jul 21 23:00:01 2007 -0700
+
+    Bump version.
+
+commit 699207cf2fa0c5255365dd28eeb3dd760f362818
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Sat Jul 21 21:37:45 2007 -0700
+
+    Remove some extraneous debug messages.
+
+commit 877296ade051cd45c0c2e0354b9f6765f8030413
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Sat Jul 21 21:36:11 2007 -0700
+
+    xgi_mem_alloc::offset is a hardware offset, so it should be u32, not long.
+
+commit 1a0775760c0eecbb238f0e928b185c267c1c3783
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Sat Jul 21 21:35:06 2007 -0700
+
+    Rename and document fields of xgi_cmdring_info.
+
+commit 3265a61f895a1d35072984e9cdc71aad898647fa
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Sat Jul 21 20:39:22 2007 -0700
+
+    Make s_cmdring a field in the xgi_info structure instead of a global.
+
+commit 5d6fdd9d7924fde8ce62631e6bdce8d5fe33fc3d
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Sat Jul 21 20:34:56 2007 -0700
+
+    Clean up xgi_cmd_info and associated code.
+    
+    There were numerous unnecessary fields in xgi_cmd_info.  The remaining
+    fields had pretty crummy names.  Cut out the cruft, and rename the
+    rest.  As a result, the unused parameter "triggerCounter" to
+    triggerHWCommandList can be removed.
+
+commit 0844c46759b96d52c4952fceb96f7c6bb74b2ce7
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Sat Jul 21 23:13:25 2007 +0300
+
+    Fix misc ioctl issues, makes Nouveau run.
+    
+    Debug print fix in drm_release().
+    Forgotten local variable init in drm_setversion().
+    Unnecessary put_user() in drm_addmap_ioctl().
+    ioctl->cmd check broken in drm_ioctl(); workaround.
+
+commit b43b0b2b32a31bcb81042659ffcc95b8975e42cf
+Author: Dave Airlie <airlied@ppcg5.localdomain>
+Date:   Sat Jul 21 22:11:41 2007 +1000
+
+    fix missing brace placement for IOC_IN
+
+commit f68ad6d1abdce7d3c11cc2e90745c0d1e565fe77
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jul 21 21:50:25 2007 +1000
+
+    fix drm no-compile due to BSD :-)
+
+commit 5b38e134163cc375e91424c4688cc9328c6e9082
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jul 19 17:11:11 2007 -0700
+
+    Replace DRM_IOCTL_ARGS with (dev, data, file_priv) and remove DRM_DEVICE.
+    
+    The data is now in kernel space, copied in/out as appropriate according to the
+    This results in DRM_COPY_{TO,FROM}_USER going away, and error paths to deal
+    with those failures.  This also means that XFree86 4.2.0 support for i810 DRM
+    is lost.
+
+commit c1119b1b092527fbb6950d0b5e51e076ddb00f29
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Jul 20 06:39:25 2007 -0700
+
+    Replace filp in ioctl arguments with drm_file *file_priv.
+    
+    As a fallout, replace filp storage with file_priv storage for "unique
+    identifier of a client" all over the DRM.  There is a 1:1 mapping, so this
+    should be a noop.  This could be a minor performance improvement, as everything
+    on Linux dereferenced filp to get file_priv anyway, while only the mmap ioctls
+    went the other direction.
+
+commit 35de4868361ce1fb515cf33f27e6be4c59b07f89
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Jul 20 06:42:18 2007 -0700
+
+    BSD: Replace symlink building with symlinks in git.
+
+commit e39286eb5eab8846a228863abf8f1b8b07a9e29d
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jul 19 17:00:17 2007 -0700
+
+    Remove DRM_ERR OS macro.
+    
+    This was used to make all ioctl handlers return -errno on linux and errno on
+    *BSD.  Instead, just return -errno in shared code, and flip sign on return from
+    shared code to *BSD code.
+
+commit 5dc9fd96d7bf48003db832f145ad8acb4bcb73b4
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Jul 20 12:55:51 2007 -0700
+
+    Fix linux spinlock macros after the last commit.
+
+commit ed82d5398a751cf755cf4168cbb79b181facc86f
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jul 20 11:31:01 2007 -0700
+
+    Clean up flush command generation in addFlush2D.
+
+commit 659209cb2d59c7b25df58d130d0649f8f899b693
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jul 20 11:29:16 2007 -0700
+
+    Clean up generation of begin commands in xgi_submit_cmdlist
+    
+    Generate the begin command once in a temporary buffer.  Then,
+    depending on whether the command is to be written directly to the
+    hardware or to a secondary buffer, copy to command to the correct place.
+
+commit 6bd848307485f678915913f282e2ea59ae3ca1a8
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jul 20 10:57:40 2007 -0700
+
+    Change handling of begin types slightly.
+    
+    Moved the getCurBatchBeginPort before its only caller.  Modified
+    function to return the command ID instead of the port offset.
+    Function also now assumes input begin type is value.
+    
+    Added code to ioctl handler to validate begin type.
+
+commit 9ccb8440f393a395941b211ee87d9addcfa6d69a
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Fri Jul 20 11:36:57 2007 +0200
+
+    Changed mode config spinlock to mutex
+
+commit 56665a42f470d5cf8cb4865558cb658dff15a9dd
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jul 19 19:09:24 2007 -0700
+
+    Delete unused variable in xgi_driver_load.
+
+commit 970674f4867d65bd16cf3585d46930b72a827cce
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jul 19 19:08:47 2007 -0700
+
+    Fix error handing related to xgi_cmdlist_initialize.
+    
+    xgi_cmdlist_initialize wasn't correctly checking for errors from
+    xgi_pcie_alloc.  Furthermore, xgi_bootstrap, the one caller of
+    xgi_cmdlist_initialize, wasn't check its return value.
+
+commit a33f5487296eacf503f5b27ba829f5fbdae8e63b
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jul 19 19:05:52 2007 -0700
+
+    Debug message and comment clean up in xgi_submit_cmdlist.
+
+commit 15245b670e5359a7dbf9151aa9f160e929e0b46b
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jul 19 11:38:56 2007 -0700
+
+    Rework xgi_(pcie|fb)_free_all to prevent deadlock.
+
+commit 2f53ce4af2f7db911d908ff382738f30be004e8b
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jul 19 11:05:13 2007 -0700
+
+    Move MMIO drm_addmap (and code that depends on it) to xgi_bootstrap.
+    
+    For reasons that I don't understand, the drm_addmap call would succeed
+    in xgi_driver_load, but writes to the map later would oops.  Moving it
+    to xgi_bootstrap fixes this problem.
+
+commit 5ba94c2ab8be350fee495e5cfe94afb8f663956a
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jul 19 10:29:18 2007 -0700
+
+    Initial pass at converting driver to DRM infrastructure.
+
+commit 43c9abdedc88807a40034513de842d6eeb8c3ed2
+Author: Jakob Bornecrantz <jakob@tungstengraphics.com>
+Date:   Thu Jul 19 16:58:23 2007 +0200
+
+    Fix unlocking of spinlock when we should not
+
+commit f4e1c1d05cfbd43ac429ab6dc78345ffa3599b7a
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jul 19 06:46:13 2007 -0700
+
+    FreeBSD warnings cleanup.
+
+commit 05204b9c8d021e019456a8dbd83c012e277c7aaf
+Merge: e544286 0c95d48
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jul 19 06:31:26 2007 -0700
+
+    Merge branch 'origin'
+
+commit e544286eae71a6b150af4d86096895c14e42c36e
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jul 19 06:17:58 2007 -0700
+
+    FreeBSD: Fix the recently added drawable add/remove/update code.
+
+commit ecf3fbe599cd72c495acf339ae24f3a9e01fdb36
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jul 19 06:17:04 2007 -0700
+
+    Add a test for drawable add, remove, and update.
+
+commit 50cb405f93da70054ede29e0c365f06352dc8fe5
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jul 19 06:02:20 2007 -0700
+
+    Fix the getclient test (Need this feature for future tests).
+
+commit d7cf298e540c631795868c52b044c7249bf45902
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jul 19 04:59:59 2007 -0700
+
+    Add some trivial regression tests, one of which fails.
+
+commit 51de9ec5e38426b13a1da0f78f3a0894dcb3e495
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Jul 19 03:36:57 2007 -0700
+
+    Add current BSD stuff to .gitignore.
+
+commit 0c95d489abd19efd2ba017e78a4b28cea0854e77
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Thu Jul 19 16:42:58 2007 +1000
+
+    nouveau/nv50: get non-default push buffer sizes working.
+
+commit 33a50412c21229610dbb75dee83f145e2f1ec128
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Jul 18 14:22:40 2007 -0700
+
+    Add dry-coded DRM drawable private information storage for FreeBSD.
+    
+    With this, all modules build again.
+
+commit af4cfa624a005f7105db89f6f076c41adbe44bd3
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Fri Jul 6 20:33:32 2007 +0300
+
+    nouveau: Make nouveau_wait_for_idle() read PTIMER.
+    
+    Following my nv28 kmmio dumps, nouveau_wait_for_idle() is modified to
+    read PTIMER and NV03_PMC_ENABLE. Also a timeout based on PTIMER value is
+    added, so wait_for_idle() cannot stall indefinitely (unless PTIMER is
+    halted). The timeout was selected as 1 giga-ticks, which for me is 1s.
+
+commit 696bee093f6f75dbb48699ff32bbebe2d3a1e307
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Fri Jul 6 19:34:15 2007 +0300
+
+    nouveau: Add read() method to Engine.timer.
+    
+    This is not called from anywhere, yet.
+
+commit 0c77f5abeadcbb89643740889cc865ba0ae66538
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Fri Jul 6 13:57:31 2007 +0300
+
+    nouveau: Add bitfield names for NSOURCE and NSTATUS.
+    
+    Name strings and pretty-printing in nouveau_graph_dump_trap_info().
+
+commit 14ecf8d6c2ccecbe9841ad4a7eb3b301685f2351
+Author: Pekka Paalanen <pq@iki.fi>
+Date:   Fri Jul 6 12:47:53 2007 +0300
+
+    nouveau: Replace 0x00400104 and 0x00400108 with names.
+    
+    NV03_PGRAPH_NSTATUS and NV03_PGRAPH_NSOURCE.
+    The prefix NV03 is chosen because nv10reg.h had no versioned prefix,
+    and the code using these registers does not check card_type.
+
+commit 1ff858fe3a6b632c879a9f99a67227db7df70b62
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Jul 18 10:40:03 2007 +0200
+
+    Fix via dmablit when blit queue is full.
+    Fix by Simon Farnsworth, Bugzilla Bug #11542
+    http://bugs.freedesktop.org/show_bug.cgi?id=11542
+
+commit a64b5d8d3763639fbb4098500ad5c86fb8590aa7
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jul 18 15:49:45 2007 +1000
+
+    fix some missing whitespace/tab
+
+commit 3a71e87742ce8686c2b3c85ebbc8fb7a72b4f6e0
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jul 18 09:46:16 2007 +1000
+
+    drm: idr stuff is upstream for 2.6.23
+
+commit 6ad1df217647d112a21c2e004d4e3d74c7bb0e0e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jul 18 09:42:06 2007 +1000
+
+    drm: remove drm_u64_t, replace with uint64_t everwhere
+    
+    This might break something, stdint.h inclusion in drm.h maybe required
+    but I'm not sure yet what platforms have it what ones don't.
+
+commit bff698d0edef90272247dfb90e454f7b98fd82dd
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jul 17 09:59:26 2007 +1000
+
+    drm_context: fix braino
+
+commit 8d60bf2f199d57ec45feaab836b31832b9bbabb9
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 16 22:15:41 2007 -0700
+
+    Add XP5 and XP10 PCI IDs.
+
+commit 7f98815d0027b1d4bd07b08e540106d5e994bcc5
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 16 22:15:01 2007 -0700
+
+    Make drm_sg_free callable in-kernel.
+
+commit bcba7ba981a88e27ad4d7e8ebcdbed7097cf1488
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 16 21:15:58 2007 -0700
+
+    Log message clean up in WriteRegDWord.  Remove unused inline functions.
+
+commit 5b08ab258f3e541334d2b64d38e15e1431080199
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 16 21:12:30 2007 -0700
+
+    Clean ups (primarilly log messages) in xgi_test_rwinkernel.
+
+commit 2b6ea465134e72fa6aa96df5e40fbc91b561ef00
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 16 21:11:22 2007 -0700
+
+    Eliminate unnecessary structures and defines.
+
+commit 875dd1e53852d231b60eb82bfed33c016f92f3b8
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Tue Jul 17 14:06:05 2007 +1000
+
+    nouveau: Destroy PGRAPH context table on PGRAPH takedown
+
+commit 658ff2daf3d2a080da2d859f522a627aef841637
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 16 20:58:43 2007 -0700
+
+    Eliminate several useless ioctls and associated cruft.
+    
+    The ioctlss XGI_ESC_DEVICE_INFO, XGI_ESC_MEM_COLLECT,
+    XGI_ESC_PCIE_CHECK, XGI_ESC_GET_SCREEN_INFO, XGI_ESC_PUT_SCREEN_INFO,
+    XGI_ESC_MMIO_INFO, and XGI_ESC_SAREA_INFO, are completely unnecessary.
+    The will be doubly useless when the driver is converted to the DRM
+    infrastructure.
+
+commit 4575d5b8f18fef8cd19e7884bf8dab5e8f71ec9e
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 16 20:56:11 2007 -0700
+
+    Massive log message clean up in xgi_submit_cmdlist.
+
+commit ec67c2def9af16bf9252d6742aec815b817f135a
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sun Jul 15 17:18:15 2007 +1000
+
+    nouveau: G8x PCIEGART
+    
+    Actually a NV04-NV50 ttm backend for both PCI and PCIEGART, but PCIGART
+    support for G8X using the current mm has been hacked on top of it.
+
+commit 70a8a60a3e81c18f9c6485102cb226c340c3cd73
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 16 10:56:43 2007 -0700
+
+    Correct errors in the usage of pci_map_page.
+    
+    With these changes the driver no longer instantly hard-locks a 6600LE
+    on a PowerPC G5.  I haven't tested any 3D apps yet.
+
+commit 3f04fe7890fe7728e7df37a6b65ad328a46699bf
+Author: Eric Anholt <eric@anholt.net>
+Date:   Mon Jul 16 01:53:06 2007 -0700
+
+    Fix FreeBSD build.
+
+commit 0be629a914129446b353881f7d92aae707137047
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 16 14:45:47 2007 +1000
+
+    drm/radeon/ttm: more VRAM fixes
+
+commit 23631fca09a9769d2391ebdec1f186cf33bf984e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 16 13:52:21 2007 +1000
+
+    drm: fixup old kernel compat code
+
+commit 0accdc1f69885c6145b6224d26ccd72002f2a72e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 16 13:50:04 2007 +1000
+
+    drm: fixup compat wrappers
+
+commit 535e3dec8c61474be55588d2b5dc87b0301435f8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 16 13:46:37 2007 +1000
+
+    drm: remove internal sman typedef
+
+commit 191c062933bb7a6f9dabf3fd639321e1dac88c50
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 16 13:45:39 2007 +1000
+
+    drm: remove drm_ref_t
+
+commit 24311d5d82b61a4729b15355088dd9c2898d1089
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 16 13:42:11 2007 +1000
+
+    drm: remove drm_buf_t
+
+commit be85ad0333b0c28129c2e4635f92780816308aa6
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 16 13:37:02 2007 +1000
+
+    drm: detypedef ttm/bo/fence code
+
+commit 6dce9e07352e14d2e03d26b8a64a40e111ecab2b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 16 12:48:44 2007 +1000
+
+    drm: remove hashtab/sman and object typedefs
+
+commit 21ee6fbfb8f2219a454458204afc9c5fcd89f9a8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 16 12:32:51 2007 +1000
+
+    drm: remove drmP.h internal typedefs
+
+commit 1a07256d601a94466b7905680f5b929bf3f2390a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 16 11:30:53 2007 +1000
+
+    drm: remove ttm userspace typedefs
+
+commit b95ac8b7b313ad3eadc9e8bb0ead155303b7fa92
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 16 11:22:15 2007 +1000
+
+    drm: detypedef drm.h and fixup all problems
+
+commit 4be9554fcdf27bce86d0d69068d284af2793b950
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 16 11:13:07 2007 +1000
+
+    drm: fix typedef in drm_os_linux.h
+
+commit f174f835ffac330bbd373d8ba5091205be28f327
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 16 10:13:58 2007 +1000
+
+    drm: remove typedefs in drm.h to their own section
+
+commit 2134193af6c29fcb83408b2878facd4b9cc4c4c8
+Merge: bc7d6c7 2c9e05c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 16 10:05:20 2007 +1000
+
+    Merge branch 'drm-ttm-cleanup-branch'
+
+commit bc7d6c76fab2ff4d2f11b6bd84ca8b8f124729fd
+Author: Patrice Mandin <patrice@manoir.racoon.city>
+Date:   Sat Jul 14 18:32:11 2007 +0200
+
+    nouveau: nv10 and nv11/15 are different
+
+commit aa6d9199fa7b0cbe04a936312db7be75bb53bdc8
+Author: Arthur Huillet <arthur.huillet@free.fr>
+Date:   Fri Jul 13 20:51:52 2007 +0200
+
+    applied patch from Ian Romanick fixing PCI DMA object creation code
+
+commit 00a5ab760b1d65ceea95e703d8ce8ecf8b63fbb3
+Merge: 5ae3ad4 3007b03
+Author: Arthur Huillet <arthur.huillet@free.fr>
+Date:   Fri Jul 13 16:03:25 2007 +0200
+
+    Merge commit 'public/master'
+
+commit 5ae3ad4f015aa072180a0c55255832be4e7557cf
+Author: Arthur Huillet <arthur.huillet@free.fr>
+Date:   Fri Jul 13 15:57:17 2007 +0200
+
+    now attempting to create PCI object only when there is a pci_heap
+
+commit 3007b03bdf608708a50b842d4291d3640c30f2c5
+Author: Arthur Huillet <arthur.huillet@free.fr>
+Date:   Fri Jul 13 15:57:17 2007 +0200
+
+    now attempting to create PCI object only when there is a pci_heap
+
+commit 0029713451af6f5f216079775ff77cae9b423c0e
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Jul 13 15:09:31 2007 +1000
+
+    nouveau: nuke internal typedefs, and drm_device_t use.
+
+commit 5522136b7f01402ae02cbe35180e3d80f850a6b3
+Merge: 76ca1e8 851c950
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jul 12 15:28:17 2007 -0700
+
+    Merge branch 'master' into xgi-0-0-2
+
+commit 851c950d988e5a47fa6add71427e5ef8d4dcf231
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Jul 13 02:18:59 2007 +1000
+
+    nouveau: unbreak AGP
+
+commit ead9cd64bd767a30235860e9cfca25d937784bee
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jul 12 14:26:03 2007 +1000
+
+    radeon: add VRAM support for radeon ttm
+    
+    This needs a lot of testing
+
+commit 5c6a23704afa9445a58585ea2b8686b054f4074a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jul 12 14:25:29 2007 +1000
+
+    Merge branch 'radeon-ttm' of git://people.freedesktop.org/~airlied/drm into radeon-ttm
+    
+    Conflicts:
+    
+    	linux-core/ati_pcigart.c
+    	linux-core/drmP.h
+    	linux-core/radeon_buffer.c
+
+commit af317f1cc7136dbf03b39ced64c42202703c5066
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Thu Jul 12 11:55:47 2007 +1000
+
+    nouveau: mem_alloc() returns offsets, not absolute addresses now.
+
+commit 522a0c868c79b48c5434f39faab1a02ca4425a90
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Thu Jul 12 11:39:45 2007 +1000
+
+    nouveau: nuke left over debug message
+
+commit 750371cb6ea9a64c9d4d4d3b9716c3c68d810d48
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Thu Jul 12 10:15:16 2007 +1000
+
+    nouveau: separate region_offset into map_handle and offset.
+
+commit 5fbdf9da8bda996c0a474d13fe69d260f12ffce7
+Author: Arthur Huillet <arthur.huillet@free.fr>
+Date:   Thu Jul 12 02:35:39 2007 +0200
+
+    fixed object creation code to not Oops on 64bits, worked around memalloc not working on 64bit for PCIGART
+
+commit b301a9051b3fd9ad3dce6bcf32b06da7953a8b91
+Author: Arthur Huillet <arthur.huillet@free.fr>
+Date:   Wed Jul 11 15:01:37 2007 +0200
+
+    NV50 will not attempt to use PCIGART now
+
+commit d26ae22c2b17e0f193334cefec7d141befcfa1ee
+Author: Arthur Huillet <arthur.huillet@free.fr>
+Date:   Wed Jul 11 14:56:27 2007 +0200
+
+    fixed bug that prevented PCIE cards from actually using PCIGART - NV50 will probably still have a problem
+
+commit 5ccadac9e3b1beb8ac0177c7a39862094fe3b6de
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Jul 11 14:22:59 2007 +1000
+
+    nouveau/nv50: G80 fixes.
+    
+    Again, no hardware, so no idea if it'll even work yet.  I understand how
+    the PRAMIN setup works now, un-hardcoding stuff will come "RealSoonNow(tm)".
+
+commit 13e1377044d581d692af77656e3bc32c9eb183f7
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Jul 11 12:38:48 2007 +1000
+
+    nouveau: Some checks on userspace object handles.
+
+commit 2c9e05cf4c6eb18c941321f764ed1b282a314ba9
+Merge: 9b9a127 694e1c5
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jul 11 11:23:41 2007 +1000
+
+    Merge branch 'master' into cleanup
+    
+    Conflicts:
+    
+    	libdrm/xf86drm.c
+    	linux-core/drm_bo.c
+    	linux-core/drm_fence.c
+
+commit 694e1c5c3f768436651ddf95e11ab5a89ccc8ffa
+Author: Arthur Huillet <arthur.huillet@free.fr>
+Date:   Wed Jul 11 02:35:10 2007 +0200
+
+    Added support for PCIGART for PCI(E) cards. Bumped DRM interface patchlevel.
+
+commit 04e4922c0c407a9f0cfe268f62130891e98fc682
+Author: Arthur Huillet <arthur.huillet@free.fr>
+Date:   Wed Jul 11 02:33:12 2007 +0200
+
+    Made drm_sg_alloc accessible from inside the DRM - drm_sg_alloc_ioctl is the ioctl wrapper
+
+commit 76ca1e858fb8e1a65ea49c0c62350d7ca91044a2
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 9 18:54:25 2007 -0700
+
+    Convert occurances of U32 to other types.
+    
+    Most occurances of U32 were converted to u32.  These are cases where
+    the data represents something that will be written to the hardware.
+    Other cases were converted to 'unsigned int'.
+    
+    U32 was the last type in xgi_types.h, so that file is removed.
+
+commit a9c49be6f8a0aa199a9dc0ffd0a9aa2b85cd796d
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 9 18:52:43 2007 -0700
+
+    Fix ioctl types.
+    
+    I had moved code from xgi_drv.h to xgi_drm.h before changing the ioctl
+    types for XGI_IOCTL_(FB|PCIE)_ALLOC.
+
+commit 5c481d0a4284ec7311a47fbeab1680d007769668
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 9 16:43:48 2007 -0700
+
+    Eliminiate fields in xgi_info that are duplicates of fields in pci_dev.
+
+commit 1f4e24b429789710f5d69fc78335f20c023569bb
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 9 16:33:14 2007 -0700
+
+    Move types shared with user mode to xgi_drm.h.
+
+commit 7268b65d5ce804713c12b8fadc42f9a086cdfe14
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 9 16:22:48 2007 -0700
+
+    Correct types that are shared with user mode.
+
+commit a3f56dc3d0620633c7719a01e6e578661d65edfc
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 9 16:07:27 2007 -0700
+
+    Adjust the types of the fields of xgi_aperture.
+
+commit 2f2d8b9688743ac6367bf13c3c023310a257ceb7
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon Jul 9 15:59:09 2007 -0700
+
+    Merge xgi_mem_req and xgi_mem_alloc into a single type.
+    
+    These two structures were used as the request and reply for certain
+    ioctls.  Having a different type for an ioctl's input and output is
+    just wierd.  In addition, each structure contained fields (e.g., pid)
+    that had no business being there.
+    
+    This change requires updates to user-space.
+
+commit 023f7d9c0064f912415c92a85c3a9d722191909f
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Jul 9 23:58:00 2007 +1000
+
+    nouveau: Allocate mappable VRAM for notifiers..
+
+commit 31e33813e8c1b085683e68524e680882368e59a9
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Jul 9 20:02:14 2007 +1000
+
+    nouveau: Don't be so strict on <NV50
+
+commit 3c58195ccd346cc61f98b9f89cf074edf6886723
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Jul 9 15:37:37 2007 +1000
+
+    nouveau: Avoid oops
+    
+    Turns out lastclose() gets called even if firstopen() has never been...
+
+commit c806bba4665bb369168ee0b453fa28e2e0bf2a5d
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Thu Jul 5 00:12:33 2007 +1000
+
+    nouveau/nv50: Initial channel/object support
+    
+    Should be OK on G84 for a single channel, multiple channels *almost* work.
+    
+    Untested on G80.
+
+commit 3324342e42b78aef8e90e11273776dd2b3b92074
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Jul 4 15:31:01 2007 +1000
+
+    nouveau: enable reporting for all PFIFO/PGRAPH irqs
+
+commit 163f8526123ffa38783fc911b5f7a19debce7f73
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Jul 2 19:31:18 2007 +1000
+
+    nouveau: rewrite gpu object code
+    
+    Allows multiple references to a single object, needed to support PCI(E)GART
+    scatter-gather DMA objects which would quickly fill PRAMIN if each channel
+    had its own.
+    
+    Handle per-channel private instmem areas.  This is needed to support NV50,
+    but might be something we want to do on earlier chipsets at some point?
+    
+    Everything that touches PRAMIN is a GPU object.
+
+commit 5b726b63906419ccb3de2e065f9bf7ae875ccdf3
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Jul 6 09:50:50 2007 +0200
+
+    radeon: Improve vblank counter.
+    
+    The frame counter seems to increase only at the end of vertical blank, so we
+    need to add 1 while in vertical blank.
+
+commit 86e75b7f7f64643c6ef2c0fef353b38753df8239
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jul 5 17:49:13 2007 -0700
+
+    Remove XGI_IOCTL_CPUID and associated cruft.
+
+commit 8b18276458e93263d5d554f779227a906592ac74
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jul 5 17:45:44 2007 -0700
+
+    Major clean up of xgi_ge_irq_handler
+    
+    Two large blocks of code were moved out of this function into separate
+    functions.  This brought some much needed sanity to the indentation.
+    Some dead varaibles were removed.
+
+commit 2695e8e209228dfc2e6a9b10bc118d0794602b37
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jul 5 17:18:12 2007 -0700
+
+    Convert weird rtdsc usage to get_cycles.
+    
+    I'm not convinced that get_cycles is the right approach here, but it's
+    better than the weird way that rtdsc was being used.
+
+commit d57b7f02d2e525e5600e5d77370d7ad2b4c9b265
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Jul 3 10:41:48 2007 -0400
+
+    Use idr_replace trick to eliminate struct drm_ctx_sarea_list.
+
+commit 1814a829eb65ee53a14fa9b53fc6f3a4196dcaa5
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Tue Jul 3 10:31:46 2007 -0400
+
+    Don't take dev->struct_mutex twice in drm_setsareactx.
+
+commit 91990946fa3f7e8e725af18d1f3a63e0c7892308
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Tue Jul 3 12:33:51 2007 +0200
+
+    One more spinlock initializer cleanup.
+
+commit ea832a8e555c9e1f90830b55cbd970d0eca0e2cf
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Tue Jul 3 12:15:15 2007 +0200
+
+    Simplification for previous commit.
+    
+    Dave Airlie pointed out on IRC that idr_replace lets us know if the ID hasn't
+    been allocated, so we don't need a special pointer value for allocated IDs that
+    don't have valid information yet.
+
+commit 8d96ba9805316b29e948d7594344feebb17042f7
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Tue Jul 3 11:41:44 2007 +0200
+
+    Restore pre-idr semantics for drawable information.
+    
+    There's a difference between a drawable ID not having valid drawable
+    information and not being allocated at all. Not making the distinction would
+    break i915 DRM swap scheduling with older X servers that don't push drawable
+    cliprect information to the DRM.
+
+commit c9d752ff4fb2b6eee2fef636193fc9ca29abba37
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Mon Jul 2 17:52:07 2007 -0400
+
+    Fix must-check warnings and implement a few error paths.
+
+commit b323ab52aa9ccbfb06dd723ece361a5242d067b0
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Thu Jun 28 14:45:26 2007 -0400
+
+    Drop drm_drawable_list and add drm_drawable_info directly to the idr.
+
+commit fc37781dd30b53815dd71ce576eb2147d23f0914
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jun 29 21:48:31 2007 -0700
+
+    Convert a few more U32 variables to more appropriate, generic types.
+
+commit 49ccec1b0845ea14ab2cfd2f53704fe26e38fbef
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jun 29 21:38:48 2007 -0700
+
+    Convert xgi_mem_location enum values to less generic names.
+
+commit 32584d94e6ef7c0b463794a40541eb8183c7fb02
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jun 29 21:35:27 2007 -0700
+
+    Convert open coded list iterators to either list_for_each_entry or list_for_each_entry_safe
+
+commit 4403540776c8ed3c2e28f26b6dacaab0b9e40e05
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jun 29 21:15:33 2007 -0700
+
+    Clean up xgi_pcie_heap_check
+    
+    The whole purpose of xgi_pcie_heap_check is to log information about
+    entries on the used_list.  If XGI_DEBUG is not set, it doesn't print
+    anything.  Therefore we can #ifdef the whole function body.
+    
+    Convert open-code list iteration to use list_for_each_entry.
+
+commit 4c4780bc8e5bf01b2b920c6b8de4ddbd0256c81f
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jun 29 21:05:16 2007 -0700
+
+    Stop-gap fix in xgi_submit_cmdlist
+    
+    Comment in the code explains it.  Basically, I put an if-statement
+    around a block of code to prevent a NULL pointer dereference that
+    should never happen in the first place.  Eventually, this will need to
+    come out.
+
+commit e206c4c59da0e81ed65796d543c311fc7e30b19a
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jun 29 21:00:50 2007 -0700
+
+    Convert some PCI-e GART related variable to generic types.
+    
+    A few of the PCI-e GART related fields in struct xgi_info were
+    hardcoded to u32.  None of them need to be.  Convert them to either
+    unsigned int or bool.
+
+commit 37733786582d04f072178949cc9e31225abf5577
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jun 29 20:49:21 2007 -0700
+
+    Delete unused arrays s_emptyBegin and s_flush2D.
+
+commit 406ded3816300f6b3e945c932c44350b22f43bd9
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jun 29 16:41:32 2007 -0700
+
+    Replace U(8|16) with u(8|16).
+
+commit ec7730e5ba6ac1d60f90af483b3966d863cb5400
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jun 29 16:37:39 2007 -0700
+
+    Eliminate unnecessary defines of TRUE and FALSE.
+
+commit 5da2a3c2d488983efed6f8433a304096e2bb75e8
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jun 29 16:37:01 2007 -0700
+
+    Replace BOOL with bool.
+
+commit ba3173fa39e236eee9ce9abb60f1151492378811
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jun 29 16:35:36 2007 -0700
+
+    Eliminate unused integer and float typedefs.
+
+commit 88328d4ef007c781874aafedfef59aae0d21a37c
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jun 29 15:27:38 2007 -0700
+
+    Eliminate structure typedefs
+    
+    Documentation/CodingStyle says that 'typedef struct foo foo_t' is
+    evil.  I tend to agree.  Elminate all uses of such construct.
+
+commit 70fd9351ed6c666def710fd61b542a7c975d9ac9
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Jun 29 21:04:17 2007 +0100
+
+    Move out the code from i915_dma_cleanup to unload to match
+    existing code.
+    
+    This needs verifying.
+
+commit adff58223f4568d084cf62d03d4ecfc3a6cec000
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Jun 29 20:58:16 2007 +0100
+
+    Bring back code from merge that was accidentally removed.
+
+commit 14c49df06bb0b1adc0fa2a9bd575c454d39c7cf0
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Jun 29 20:14:09 2007 +0100
+
+    merge fixes
+
+commit 8a78dead291ffdb5a8774419cdca369a1e27cad9
+Merge: e79e2a5 a27af4c
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Jun 29 20:09:44 2007 +0100
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/drm_drv.c
+    	linux-core/drm_fops.c
+    	linux-core/drm_objects.h
+    	linux-core/drm_stub.c
+    	shared-core/i915_dma.c
+
+commit 33b8476dfb0f9b5045103c3a9781ba82bcae4a9d
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jun 29 09:30:02 2007 -0700
+
+    Fix return type of xgi_find_pcie_block.
+    
+    This function used to return 'void *', which was then cast to
+    'xgi_pcie_block_t *' at the only caller.  I changed the return type to
+    'struct xgi_pcie_block_s *' and removed the explicit cast.
+
+commit a27af4c4a665864df09123f177ca7269e48f6171
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Jun 29 15:22:28 2007 +0200
+
+    Avoid hitting BUG() for kernel-only fence objects.
+
+commit 00f1a66f22d52c212bb9334a0103a4785af69bc1
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Jun 29 12:50:12 2007 +0200
+
+    Fence object reference / dereference cleanup.
+    
+    Buffer object dereference cleanup.
+    Add a struct drm_device member to fence objects:
+    This can simplify code, particularly in drivers.
+
+commit 475c1e67bacabb89c568c7482991451d223c53ae
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jun 28 23:40:36 2007 -0700
+
+    Remove unused type 'struct xgi_pcie_list_s' / xgi_pcie_list_t.
+
+commit 8fa24c53f5851a2d3ad2da31ee56a4fd5abbd543
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jun 28 22:32:11 2007 -0700
+
+    Minor clean up of variable declarations in xgi_find_pcie_virt.
+
+commit 9c85fb866dc7954092b7ffd0ca9f76eb5354ace8
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jun 28 22:26:39 2007 -0700
+
+    Clean up debug log messages in xgi_find_pcie_block.
+
+commit 11ffe4632a097e3d579d084634eeccc63348249b
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jun 28 22:20:13 2007 -0700
+
+    Convert comment header of xgi_find_pcie_virt to kernel doc format.
+
+commit e26ec51146e77eec2a45f61c9506e9800fc2fba2
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Jun 29 13:52:55 2007 +1000
+
+    nouveau: small RAMFC cleanups
+
+commit e79e2a58161d44754fd55507e155b7e12a09c4d2
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu Jun 28 21:25:13 2007 +0100
+
+    Fix type/flags usage problem to check for preferred modes.
+    
+    Add more debugging to help diagnose problems.
+
+commit 1c32fecd6d2286af075976167c4887b9096e8312
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Thu Jun 28 21:01:17 2007 +1000
+
+    nouveau: Hack around possible Xv blit adaptor breakage
+
+commit 2dd85772aa4e134730f294d77b4ff030a175a4ab
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Thu Jun 28 04:23:17 2007 +1000
+
+    nouveau/nv10: Fix earlier NV1x chips
+    
+    Can't use nv04 code for them, since an extra field was inserted into
+    RAMFC after DMA_PUT/GET.
+
+commit 68ecf61647e9ec16d59cc8f50550d11478eb3118
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Jun 25 15:42:55 2007 +1000
+
+    nouveau: never touch PRAMIN with NV_WRITE, cleanup RAMHT code a bit
+
+commit 18a6d1c9c380b6b19524f654d9173a79e19aa1df
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Jun 25 15:16:19 2007 +1000
+
+    nouveau: simplify PRAMIN access
+
+commit 38617b6a26d893bbd7b235019159e609f6cdd84b
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Jun 25 03:52:06 2007 +1000
+
+    nouveau: name some regs
+
+commit ce0d528d3ca78348a7c1ad7c402757824fb6cf95
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sun Jun 24 20:49:19 2007 +1000
+
+    nouveau/nv50: skeletal backend
+
+commit 695599f18d907bb277805581bbe208b0e083e7d9
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sun Jun 24 19:03:35 2007 +1000
+
+    nouveau: Nuke DMA_OBJECT_INIT ioctl (bumps interface to 0.0.7)
+    
+    For various reasons, this ioctl was a bad idea.
+    
+    At channel creation we now automatically create DMA objects covering
+    available VRAM and GART memory, where the client used to do this themselves.
+    
+    However, there is still a need to be able to create DMA objects pointing at
+    specific areas of memory (ie. notifiers).  Each channel is now allocated a
+    small amount of memory from which a client can suballocate things (such as
+    notifiers), and have a DMA object created which covers the suballocated area.
+    The NOTIFIER_ALLOC ioctl exposes this functionality.
+
+commit 4f2dd78ff3b6efeee97b72cca6bbfaef485a08d9
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Thu Jun 28 02:56:30 2007 +1000
+
+    nouveau/nv04: Set NV_PFIFO_CACHE1_PUSH1 correctly + small tweaks
+
+commit 9b9a127ed0fe9a6a8e2fde84739ccff6fa0bc5ac
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Jun 26 23:25:40 2007 +0200
+
+    More 64-bit padding.
+
+commit 8cee7dca95bc2114eb90640cf83ac87c29243683
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jun 26 13:46:36 2007 -0700
+
+    Clean up warnings about unused variables and functions.
+
+commit b9ef1467fed9e96c5e7bd453d01511f8ce98583c
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jun 26 13:39:01 2007 -0700
+
+    Clean up mixed declarations and code.
+
+commit 3547fbda63925217a5be24de5d5abec3b53d3fe1
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jun 26 13:29:28 2007 -0700
+
+    Revert over-zealous change from previous commit.
+
+commit 3a776fa01e61c1dc40a0a1803a80c98bf7e77164
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jun 26 13:26:10 2007 -0700
+
+    Add XGI driver to Makefiles.
+
+commit 47bf6239aaefb977cc17e421af273c3278eb127c
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jun 26 13:20:15 2007 -0700
+
+    Clean up compile-time kernel feature detection.
+
+commit 7a053306a9f8152462fda521e1a8322ac2bdf9fd
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jun 26 13:16:04 2007 -0700
+
+    linux/config.h is deprecated or gone.
+
+commit ec9e494eb99d409a7e1e97bb6c5f71e9bb5a4486
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jun 26 13:15:22 2007 -0700
+
+    Gut support for pre-2.6 kernels.
+
+commit 434657a2582362367ba2a94f827511252001368f
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jun 26 13:10:30 2007 -0700
+
+    dos2unix and Lindent
+
+commit 7af9d670371de868f0642148fe2d594bc9a7dea3
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jun 26 13:05:29 2007 -0700
+
+    Initial XP10 code drop from XGI.
+    
+    See attachment 10246 on https://bugs.freedesktop.org/show_bug.cgi?id=5921
+
+commit 5c27f8a70e6e3684d8d58661a9cc918a3514fd14
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jun 26 09:51:55 2007 -0700
+
+    Add support SiS based XGI chips to SiS DRM.
+
+commit 9f617522d9cb8cd33e588d12a13f427dbe5171c2
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Jun 25 01:57:57 2007 +1000
+
+    nouveau: NV49/NV4B PGRAPH setup from jb17bsome and stephan_2303
+
+commit 3dfc13e2da10e86051c7106feb5683542907acdc
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sun Jun 24 19:00:44 2007 +1000
+
+    nouveau: kill some dead code
+
+commit 5f05cd7086c54bccf1c2f0b003b78a08dc55472a
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sun Jun 24 19:00:26 2007 +1000
+
+    nouveau: NV04/NV10/NV20 PGRAPH engtab functions
+    
+    NV04/NV10 load_context()/save_context() are stubs.  I don't know enough about
+    how they work to implement them sanely.  The "old" context_switch() code
+    remains hooked up, so it shouldn't break anything.
+    
+    NV20 will probably break if load_context() works.  No inital context values
+    are filled in, so when the first channel is created PGRAPH will probably end
+    up having its state zeroed.  Some setup from nv20_graph_init() will probably
+    need to be moved to the per-channel context setup.
+
+commit 5d55b0655cb480b7d6ab4cf2467dac6dc6d8df25
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sun Jun 24 18:58:38 2007 +1000
+
+    nouveau: NV3X PGRAPH engtab functions
+
+commit 341bc7820749024e09275de6e689b10c2908689a
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sun Jun 24 18:58:14 2007 +1000
+
+    nouveau: NV1X/2X/3X PFIFO engtab functions
+    
+    Earlier NV1X chips use the NV04 code, see previous commits about NV10 RAMFC
+    entry size.
+
+commit 05d86d950a10b77ffaa708e9d89b2a87c11fed01
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sun Jun 24 18:57:09 2007 +1000
+
+    nouveau: NV04 PFIFO engtab functions
+
+commit acb710d1a59788a0205cd0daf0859864e683fbd2
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sun Jun 24 18:56:40 2007 +1000
+
+    nouveau: NV4X PGRAPH engtab functions
+
+commit f2e64d527699751d6b64698495ae1d48eeee6cf7
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sun Jun 24 18:56:01 2007 +1000
+
+    nouveau: NV4X PFIFO engtab functions
+
+commit 0afb3b518e1ece820b01f3eea64b25cff01c97bc
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sun Jun 24 18:55:23 2007 +1000
+
+    nouveau: split PFIFO/PGRAPH context creation
+
+commit 9dbf322d26642f9e671f144b34e7cd7d295e9b8e
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sun Jun 24 18:55:06 2007 +1000
+
+    nouveau: (mostly) hook up put_base again
+
+commit 24b71c318a00dfbb18b2bbf6652e3b781175c430
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sun Jun 24 18:54:51 2007 +1000
+
+    nouveau: prototype PFIFO/PGRAPH engtab API
+
+commit 5c7c07fd49b154623f9dfdab1fe1f2cda8508036
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Sun Jun 24 18:54:36 2007 +1000
+
+    nouveau: rename engtab functions
+
+commit 7f2a1cf2753c0c97b1290469a15322f7549f78ae
+Merge: d2d5302 97dcd7f
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Fri Jun 22 11:12:02 2007 -0700
+
+    Merge branch 'vblank-rework' into vblank
+
+commit 97dcd7fd25c18d5148619254229f8d94efb55b44
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Fri Jun 22 11:06:51 2007 -0700
+
+    more vblank rework
+      - use a timer for disabling vblank events to avoid enable/disable calls too
+        often
+      - make i915 work with pre-965 chips again (would like to structure this
+        better, but this hack works on my test system)
+
+commit 068ffc1e1bf5607f836839a1fc621a95547251e3
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Jun 22 11:55:26 2007 +0200
+
+    radeon: Acknowledge all interrupts we're interested in.
+    
+    Failure to do so was probably the root cause of fd.o bug 11287.
+
+commit d2d53024fb4003a6b86a3ea1ea33c76ac20bebc9
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Jun 22 11:45:23 2007 +0200
+
+    Fix vblank wait condition.
+    
+    Sync-to-vblank actually works again for me with radeon.
+
+commit 2738bca6f52e236a2d9a0e456a78b10442ededdd
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Jun 22 11:44:38 2007 +0200
+
+    Use drm_calloc instead of assigning 0.
+
+commit 6e2cd7c16331b07c395732d132a6a4cdc1fad481
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Jun 22 11:44:19 2007 +0200
+
+    drm_modeset_ctl_t fixes.
+    
+    s/u64/drm_u64_t/ to allow userspace code using drm.h to compile.
+    
+    Move 64 bit arg member to the beginning to avoid alignment issues with 32
+    bit userspace on 64 bit kernels.
+
+commit b8dd31487551ff83b63205a5cefbd06de7d4fbca
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Jun 22 11:42:54 2007 +0200
+
+    Remove mask parameter from radeon_acknowledge_irqs().
+    
+    Simply always acknowledge all interrupts we're interested in, to avoid hard
+    hangs when an unexpected interrupt is flagged.
+
+commit 24c09faec1c47260cd280221fa72fe18a12efef9
+Merge: 2d24455 afe8422
+Author: Jesse Barnes <jbarnes@jbarnes-mobile.amr.corp.intel.com>
+Date:   Thu Jun 21 15:26:34 2007 -0700
+
+    Merge branch 'vblank-rework' into vblank
+
+commit afe842297f7117cf80718de78ce706f6fd83584b
+Author: Jesse Barnes <jbarnes@jbarnes-mobile.amr.corp.intel.com>
+Date:   Thu Jun 21 15:23:20 2007 -0700
+
+    RADEON: fix race in vblank interrupt handling
+    It's possible that we disable vblank interrupts and clear the
+    corresponding flag in irq_enable_reg, but receive an interrupt at just
+    the wrong time, causing us to not ack it properly, nor report to the
+    core kernel that it was handled.  Fix that case by always handling
+    vblank interrupts, even if the irq_enable_reg field is clear.
+
+commit 40f6a696cb22ffa064f78198a7a241015d365967
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Thu Jun 21 14:35:11 2007 +0000
+
+    r300: Synchronized the register defines file; documentation changes.
+
+commit 213732af4381819113756d6d920794cf0dc30dd6
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Thu Jun 21 14:32:58 2007 +0000
+
+    r300: Allow writes to R300_VAP_PVS_WAITIDLE.
+
+commit 2d24455ed8b12df6d06d135cb70f02473d11f4b0
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Mon Jun 18 17:43:58 2007 -0700
+
+    Remove broken CRTC enable checks and incorrect user irq enable in set_pipe
+    routine.
+
+commit d8ed021d29951b17cfbda0ade968c73a52ac7ec7
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Mon Jun 18 13:08:21 2007 +0200
+
+    radeon: VBlank rework fixups.
+    
+    Fix range of frame counter registers.
+    
+    Use DRM_ERR() instead of Linux specific error codes in shared code.
+    
+    Remove duplicate register definitions and superfluous local variables.
+
+commit 215787e4297ed4f6364bcc98869a347fc4cad00d
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Mon Jun 18 08:42:46 2007 +0000
+
+    r300: Registers 0x2220-0x2230 are known as R300_VAP_CLIP_X_0-R300_VAP_CLIP_Y_1.
+
+commit 8038e7b60f62e51b7f134141fd58f334eec31a10
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Mon Jun 18 08:36:50 2007 +0000
+
+    r300: Synchronized the register defines file again.
+
+commit 638ebbab54a48004c2e1d9cc5498e1dec976911e
+Author: David Woodhouse <dwmw2@infradead.org>
+Date:   Mon Jun 18 12:45:20 2007 +1000
+
+    fix radeon setparam on 32/64 systems, harder.
+    
+        Commit 9b01bd5b284bbf519b726b39f1352023cb5e9e69 introduced a
+        compat_ioctl handler for RADEON_SETPARAM, the sole purpose of which was
+        to handle the fact that on i386, alignof(uint64_t)==4.
+    
+        Unfortunately, this handler was installed for _all_ 64-bit
+        architectures, instead of only x86_64 and ia64.  And thus it breaks
+        32-bit compatibility on every other arch, where 64-bit integers are
+        aligned to 8 bytes in 32-bit mode just the same as in 64-bit mode.
+    
+        Arnd has a cunning plan to use 'compat_u64' with appropriate alignment
+        attributes according to the 32-bit ABI, but for now let's just make the
+        compat_radeon_cp_setparam routine entirely disappear on 64-bit machines
+        whose 32-bit compat support isn't for i386.  It would be a no-op with
+        compat_u64 anyway.
+    
+        Signed-off-by: David Woodhouse <dwmw2@infradead.org>
+
+commit 741d1c80314de6f30bcc7eca7a7720b0aac3c56c
+Author: Jesse Barnes <jbarnes@jbarnes-mobile.amr.corp.intel.com>
+Date:   Fri Jun 15 17:06:46 2007 -0700
+
+    Remove broken crtc enable checks, radeon does it slightly differently
+    (this makes get_vblank_counter return an actual value).
+
+commit b6610363e373c13a2e7fdee8691756e1768bdd57
+Author: Jesse Barnes <jbarnes@jbarnes-mobile.amr.corp.intel.com>
+Date:   Fri Jun 15 11:21:57 2007 -0700
+
+    First cut at radeon support for the vblank rework.
+
+commit 3d5d41fa9823cf44138c8f4bc954bca80539d74e
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Jun 15 17:13:11 2007 +0200
+
+    i915: Fix handling of breadcrumb counter wraparounds.
+
+commit 0f5334be2bc6ceca971a7a6ab3ca1c23a707867c
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Jun 15 11:01:51 2007 +0200
+
+    Remove DRIVER_IRQ_VBL(2).
+    
+    If the driver doesn't support vertical blank interrupts, it won't call
+    drm_vblank_init(), and dev->num_crtcs will be 0.
+    
+    Also fix an off-by-one test against dev->num_crtcs.
+
+commit fbee089aca727c92e0aa5d7a2ae7a8c5cf9c3076
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Jun 15 10:49:16 2007 +0200
+
+    Make vblank waitqueue per CRTC.
+
+commit 84bea383538df83c049680497ba2179e50d07ca3
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Jun 15 10:35:52 2007 +0200
+
+    Fix i915 sequence mask.
+
+commit 3ee31a1f356df4b81e3ba226a416627fd3b70e07
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Jun 15 10:31:32 2007 +0200
+
+    Indentation fixes.
+
+commit d34b2c7b9e108766b1d67cd23b8f7ecc77835ac7
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Jun 15 10:21:31 2007 +0200
+
+    Fix refcounting / lock race.
+    
+    Reported by Steve Wilkins / Michel Dnzer.
+
+commit e1b8eabeee354822fc0a413dd097210b621eb73a
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Jun 14 11:52:38 2007 +0200
+
+    Locking fixes and instrumentation.
+
+commit 82e2c3304d3f1697537b73a2c888c8c6b1b6cdc8
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Jun 15 10:25:50 2007 +0200
+
+    Wake up vblank waitqueue in drm_handle_vblank().
+
+commit 914a810a82af6f82e69a94448570772f20a94953
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Jun 15 10:21:44 2007 +0200
+
+    i915: Fix tests for vblank interrupts being enabled on CRTC by X server.
+
+commit 7f95a06c61f585cbc4b5fefc833432178550fe31
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Jun 15 10:12:23 2007 +0200
+
+    Return current sequence number to userspace after blocking wait for vblank.
+
+commit 1000d88ddfcd0ae769125db37d4e78643a430caf
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Jun 15 10:10:33 2007 +0200
+
+    Fix memory leaks in vblank error paths.
+    
+    Also use drm_calloc instead of drm_alloc and memset, and use the size of the
+    struct instead of the size of the pointer for allocation...
+
+commit b06268294afb47e62949984d73905344dd160262
+Author: Jesse Barnes <jbarnes@jbarnes-mobile.amr.corp.intel.com>
+Date:   Thu Jun 14 11:32:31 2007 -0700
+
+    Comment new vblank routines and fixup several issues:
+      - use correct refcount variable in get/put routines
+      - extract counter update from drm_vblank_get
+      - make signal handling callback per-crtc
+      - update interrupt handling logic, drivers should use drm_handle_vblank
+      - move wakeup and counter update logic to new drm_handle_vblank routine
+      - fixup usage of get/put in light of counter update extraction
+      - fix longstanding bug in signal code, update pending counter only
+        *after* we're sure we'll setup signal handling
+
+commit 2407ce57de36470e767ebc1800cbbec74cab0ae4
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Jun 13 15:59:28 2007 +0200
+
+    Fix drmMMUnlock / drmMMLock return values.
+
+commit 62082ab3e63f6f474655da98b710e453b4124ed1
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Jun 13 15:38:59 2007 +0200
+
+    Make sure we read fence->signaled while spinlocked.
+
+commit 5156f1c897142171e78d0ea2c45a3aecb581fffa
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Jun 13 15:19:30 2007 +0200
+
+    Fix fence object deref race.
+
+commit 1a4b9294a29379ea6e9fd6fb315317f391232d4b
+Author: Jesse Barnes <jbarnes@jbarnes-mobile.amr.corp.intel.com>
+Date:   Tue Jun 12 16:29:09 2007 -0700
+
+    Remove unnecessary (and uncommented!) read barrier from the interrupt
+    path.  It doesn't appear to serve any useful purpose.
+
+commit ca47fa90b73d0eac73fb7d1ba712d81e180eae7d
+Author: Jesse Barnes <jesse.barnes@intel.com>
+Date:   Tue Jun 12 13:35:41 2007 -0700
+
+    Update vblank code:
+      - move pre/post modeset ioctl to core
+      - fixup i915 buffer swap
+      - fix outstanding signal count code
+      - create new core vblank init routine
+      - test (works with glxgears)
+      - simplify i915 interrupt handler
+
+commit db689c7b95613237cec904c3f6ee27e8c2bf7ce0
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue Jun 12 10:44:21 2007 -0700
+
+    Initial checkin of vblank rework.  Code attempts to reduce the number
+    of vblank interrupt in order to save power.
+
+commit f984b1b8d17f285dfacb593702178f1eb2fdb4ac
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Jun 12 12:30:33 2007 +0200
+
+    Fix some obvious bugs.
+
+commit b6b5df24b962c94433afe4d8665b5f145bfa1ad3
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Jun 12 12:21:38 2007 +0200
+
+    Try to make buffer object / fence object ioctl args 64-bit safe.
+    Introduce tile members for future tiled buffer support.
+    Allow user-space to explicitly define a fence-class.
+    Remove the implicit fence-class mechanism.
+    64-bit wide buffer object flag member.
+
+commit 280083d4a2a12a1ff6dc1b068553a4ae8960200c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Jun 10 15:40:10 2007 +1000
+
+    use krh's idr mods to remove lists from idr code
+
+commit 31815730732a5d2a446aa316a5b4d837766762e6
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Fri Jun 8 19:40:57 2007 +0000
+
+    r300: Added the CP maximum fetch size and ring rptr update variables.
+
+commit 7426da75382cce157b873c228c783115fd66589f
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jun 7 18:45:00 2007 +1000
+
+    oops must fix this properly at some point
+
+commit e22f428f5fa55400850951b32c6ed0e856bf836b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jun 7 18:40:41 2007 +1000
+
+    drm: fix radeon setparam alignment issues on 32/64-bit
+
+commit abf35cbdcf5743c73929ddbe67ed4cae69b32aeb
+Author: Dave Airlie <airlied@nx6125b.(none)>
+Date:   Thu Jun 7 15:36:04 2007 +1000
+
+    radeon: PCIGART memory is Can't map aperture as well there is one
+    
+    on the CPU.... with this my indirect buffers at least start to live..
+    (cherry picked from commit 699cd9fc6c3794856f7e602088c77d0dfc11a122)
+
+commit 39625f9621a56b4dde5d400615bba5217a75a24c
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Tue Jun 5 19:19:42 2007 +0000
+
+    r300: Small correction to the previous commit.
+
+commit 9e0bd88c61bda7979cdc0543deb0cb9de30587f7
+Author: Alex Deucher <alexdeucher@gamil.com>
+Date:   Tue Jun 5 19:05:49 2007 +0000
+
+    r300: Document more of the RADEON_RBBM_STATUS register.
+
+commit 109e2a10f260f3a5f78762bbedcaeb9b2ebde1c0
+Author: Wang Zhenyu <zhenyu.z.wang@intel.com>
+Date:   Tue Jun 5 11:15:29 2007 -0700
+
+    Add support for the G33, Q33, and Q35 chipsets.
+    
+    These require that the status page be referenced by a pointer in GTT, rather
+    than phsyical memory.  So, we have the X Server allocate that memory and tell
+    us the address, instead.
+
+commit 03ce98aa2814dfd473c70487861aece79007a571
+Author: Dave Airlie <airlied@nx6125b.(none)>
+Date:   Tue Jun 5 18:23:24 2007 +1000
+
+    set start to gart_vm_start at least
+
+commit 96705ce6644389722f1605571e0a0dfde5568b8f
+Author: Dave Airlie <airlied@nx6125b.(none)>
+Date:   Tue Jun 5 18:23:05 2007 +1000
+
+    add wbinvd calls
+
+commit 5bd0ca125ed687b2dc6896197c0c8ab2673897f8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jun 5 18:14:54 2007 +1000
+
+    remove include of linux ioctl32.h from drm drivers
+
+commit c9dbe0f2c2248ef8c3ba5718f77922d1c7429e6f
+Author: Dave Airlie <airlied@nx6125b.(none)>
+Date:   Tue Jun 5 12:38:43 2007 +1000
+
+    invalidate gart tlb on PCIE after table change
+
+commit f6e8023e03278731db38dcc0c429025f36817c65
+Author: Dave Airlie <airlied@nx6125b.(none)>
+Date:   Tue Jun 5 12:26:18 2007 +1000
+
+    take the lock earlier in ttmtest
+
+commit 4294dcc050c5d2685f633e8a52deb925d806be85
+Author: Dave Airlie <airlied@nx6125b.(none)>
+Date:   Tue Jun 5 12:26:06 2007 +1000
+
+    complete PCIE backend for ttm
+    
+    ttm test runs with it at least, needs to do more testing on it
+
+commit 234a9062009e48bf7b6c7239564ab95b3bcb06aa
+Author: Dave Airlie <airlied@nx6125b.(none)>
+Date:   Tue Jun 5 10:47:42 2007 +1000
+
+    WIP cleanup
+
+commit 77b9d9d16b1d1f1715722182d5893aa202f73074
+Author: Dave Airlie <airlied@nx6125b.(none)>
+Date:   Tue Jun 5 10:35:41 2007 +1000
+
+    cleanup pcigart ttm for new backend layout
+
+commit 07345af838a7443d29d12cb3fe91614e43c4fa81
+Merge: 704ca06 4327d7f
+Author: Dave Airlie <airlied@nx6125b.(none)>
+Date:   Tue Jun 5 10:09:11 2007 +1000
+
+    Merge branch 'origin' into radeon-ttm
+    
+    Conflicts:
+    
+    	shared-core/radeon_drv.h
+
+commit 4327d7f3142cdbf3f3f94426ae33e2d30b5a40c8
+Author: Maurice van der Pot <griffon26@kfk4ever.com>
+Date:   Mon Jun 4 10:49:30 2007 +1000
+
+    nouveau: fix RAMHT wrapping
+
+commit a05d4fecd3307aa2f2f27531e7ff0b1985ef5c56
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Jun 3 18:30:52 2007 +1000
+
+    radeon: refine irq acking for vbl on crtc 2
+
+commit a4cddc6596b30dfa781eb7803de5b60aca50f112
+Author: root <airlied@linux.ie>
+Date:   Sun Jun 3 18:12:28 2007 +1000
+
+    Revert "drm: add new drm_wait_on function to replace macro"
+    
+    This reverts commit 6e860d08d0f5b1e9a2d711aaf9fd6b982aa8039e.
+    
+    As I said not a good plan - this macro will have to stay for now,
+    trying to do the vbl code with the inline was a bit messy - may need specialised
+    drm wait on functions
+
+commit 8d95f4bd91fcc46b3e59767cb86b6c99bc8679c3
+Author: root <airlied@linux.ie>
+Date:   Sun Jun 3 18:11:44 2007 +1000
+
+    Revert "move i915 to new drm_wait_on function"
+    
+    This reverts commit feb68037784ac09e333a321d294fdb2d8c57a4c8.
+    
+    This was a bad idea, the macro is actually a bit harder to convert
+    to a static for the other use cases
+
+commit 4e9d215bdfe72588cbacdb17ab9b60a42a43aefb
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Jun 3 16:28:21 2007 +1000
+
+    radeon: add support for vblank on crtc2
+    
+    This add support for CRTC2 vblank on radeon similiar to the i915 support
+
+commit 638c8087deecdf489eb4f70e82590d1be0c8c942
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Jun 1 19:00:24 2007 +1000
+
+    drm: fixup initialisation of list heads and idr
+
+commit 704ca0638977f58742a8bff6aba9905fe862cfb3
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Fri Jun 1 18:12:45 2007 +1000
+
+    WIP more code for radeon
+
+commit 5c394b309de4325daae67fc766a0640b39658a64
+Author: Wang Zhenyu <zhenyu.z.wang@intel.com>
+Date:   Wed May 30 16:25:49 2007 +0800
+
+    i915: Add support for 945GME chip
+
+commit 3917f85c73c32105b59f5185a89fe136ed6962a1
+Author: Wang Zhenyu <zhenyu.z.wang@intel.com>
+Date:   Wed May 30 16:24:42 2007 +0800
+
+    i915: Add support for 965GME/GLE chip.
+
+commit b0c8d885ce645aee5027a75e4149ba4be265b55d
+Author: Jung-uk Kim <jkim@FreeBSD.org>
+Date:   Tue May 15 13:35:33 2007 -0700
+
+    Update a bunch of FreeBSD port code.
+    
+    Tested on r200/r300.  i915 updates still remain to be done.
+
+commit fdc293d40c2fdd184d89bd38257ade2437c4cbc1
+Author: Brian <brian.paul@tungstengraphics.com>
+Date:   Tue May 29 14:56:17 2007 -0600
+
+    reformatting, clean-ups
+
+commit ccd7b6e8ddeac936518f626d2326ae439931b2bf
+Author: Brian <brian.paul@tungstengraphics.com>
+Date:   Tue May 29 14:54:00 2007 -0600
+
+    Clean-ups and reformatting.
+    
+    Use 4-space indentation consistently.
+    Replace occurances of:
+    	if (cond) code;
+    with:
+    	if (cond)
+    		code;
+    to facilitate putting breakpoints on code.
+
+commit 056c2f249a61ba7078bae3d767a59f2be4c6556e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun May 27 08:44:38 2007 +1000
+
+    drm: move context handling code to use linux idr
+
+commit f64674743a49c242e4f24cbb7599c1c21c035a4f
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun May 27 07:26:52 2007 +1000
+
+    drm: convert drawable handling to use Linux idr
+    
+    This cleans this code up a lot and uses the generic Linux idr which is
+    designed for this.
+    
+    Signed-off-by: Dave Airlie <airlied@linux.ie>
+
+commit 2bb7703698bef1f599295126ca3834d37a8596c0
+Author: Thomas Gleixner <tglx@linutronix.de>
+Date:   Sat May 26 05:20:59 2007 +1000
+
+    drm: spinlock initializer cleanup
+
+commit 8e083c522e73f27af7e97e0d202f56f0323abe81
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Sat May 26 04:35:54 2007 +1000
+
+    drm: make sure the drawable code doesn't call malloc(0).
+    
+    Signed-off-by: Michel Dänzer <michel@tungstengraphics.com>
+    Signed-off-by: Dave Airlie <airlied@linux.ie>
+
+commit ad02c536dfaeaeb7ad025dfcfcb1a2a99aa5ad7e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat May 26 04:02:55 2007 +1000
+
+    radeon: add other IGP chipsets
+
+commit 58b2ed78329305d5760c6df55175f958477f89ae
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat May 26 03:48:08 2007 +1000
+
+    Revert "drm/ttm: cleanup mm_ioctl ioctls to be separate ioctls."
+    
+    This reverts commit 3fdef0dc2000308b16907b95f637c60acde80a74.
+    
+    ditto not on master yet
+
+commit 375f3f2884cd1437e9ec2608647face0c3cbef3a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat May 26 03:47:48 2007 +1000
+
+    Revert "drm/ttm: cleanup most of fence ioctl split out"
+    
+    This reverts commit 3dfc1400e9fc58c69292d7cf7c2e1653fa5e6991.
+    
+    this shouldn't have gone on master yet
+
+commit ce58e53a01e61818210ebf65623e35a3af20167b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue May 8 15:43:29 2007 +1000
+
+    whitespace fixups from kernel
+
+commit adee6f52e65ca67a9773fa23537c424fac9f0da8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue May 8 15:09:48 2007 +1000
+
+    ati_pcigart: cut to 80 chars
+
+commit 3dfc1400e9fc58c69292d7cf7c2e1653fa5e6991
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun May 6 11:35:11 2007 +1000
+
+    drm/ttm: cleanup most of fence ioctl split out
+
+commit 3fdef0dc2000308b16907b95f637c60acde80a74
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun May 6 11:17:30 2007 +1000
+
+    drm/ttm: cleanup mm_ioctl ioctls to be separate ioctls.
+    
+    This is the first bunch of ioctls
+
+commit 7b48f0022a24bc5f565ae64b450dda77dee616c1
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat May 26 04:26:24 2007 +1000
+
+    drm: cleanup use of Linux list handling macros
+    
+    This makes the drms use of the list handling macros a lot cleaner
+    and more along the lines of how they should be used.
+
+commit fa92e1f2ec396d2e772734f726a0958801b9fc99
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu May 24 18:41:44 2007 -0700
+
+    Suspend/resume shouldn't call drm_initial_config (seems to work ok for me now),
+    also we should fail if we can't enable the device at resume time.
+
+commit 462d5a0dfc80dfa02da3d24d30ad90ad0387f0a2
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue May 22 17:49:04 2007 -0700
+
+    Suspend/resume support (incomplete).
+
+commit e918d2b7814e2cf5345dba63031c402010b1d3e4
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue May 22 13:38:58 2007 -0700
+
+    Call preallocated space VRAM instead of PRIV0 to be more consistent with
+    other drivers.
+
+commit a4929b921e44dcd3cae8e384b9b7eabc51db28ff
+Merge: f894587 d42c1de
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Fri May 18 09:42:51 2007 -0700
+
+    Merge branch 'modesetting-101' of git+ssh://git.freedesktop.org/git/mesa/drm into origin/modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/drm_crtc.c - reconcile with locking changes
+
+commit f89458722173b364b8c3c27788b6c61889da554c
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Fri May 18 09:40:01 2007 -0700
+
+    Add locking.  The main lock is dev->mode_config.config_lock.  It should be
+    held across any operations that modify mode lists, crtc config, output
+    config, etc.  It should be taken at high level entry points (currently just
+    initial config and user IOCTL).
+    
+    Seems to work ok on my system, but needs more testing (with lockdep) and
+    review from some fresh eyes.
+
+commit d42c1de3fb05405820b03ec9bb12f0b9a7eb0a7b
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri May 18 14:16:27 2007 +0100
+
+    Change some printk's to DRM_DEBUG's
+
+commit 0c33a2cd2ec81478403d39b1b92aaa4431e7cf0a
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri May 18 14:16:10 2007 +0100
+
+    Move fbo creation to the specified fb driver which gives
+    it a chance to allocate the memory from whichever buffer it wants to.
+
+commit 3851600b3450697e20286b1937f3e51397f1965a
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri May 18 13:59:46 2007 +0100
+
+    Fix merge problem.
+
+commit 315cf14af814da60285adb95238181de430c6f68
+Merge: 95945bb ea98d7e
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri May 18 13:48:56 2007 +0100
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+    
+    Conflicts:
+    
+    	shared-core/i915_dma.c
+
+commit 95945bbf226610ba4f41381fd0436722082397ec
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu May 17 23:33:48 2007 +0100
+
+    Set crtcinfo on temporary mode
+
+commit f3beabedc36b7bc2d45ca9c7f64d2c54e291e32b
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu May 17 13:48:46 2007 -0700
+
+    Remove unused edid.h header from X.Org.
+
+commit c0479dad8e34a51efebfaa05b0d329aa7d2b95d1
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu May 17 19:32:46 2007 +0100
+
+    bring in change from drm_fb.c
+
+commit 07a5fbaa612a777de37b5dc0112f6f3f3f84c486
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu May 17 19:28:03 2007 +0100
+
+    Move destruction of crtc as intelfb_remove uses the crtc to locate the fb.
+
+commit b7bf317f42915dc4f5fde4a696e37985cea45104
+Merge: a18b4be fd63ea9
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu May 17 10:35:07 2007 -0700
+
+    Merge branch 'modesetting-101' of git+ssh://git.freedesktop.org/git/mesa/drm into origin/modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/drm_crtc.c
+    	linux-core/drm_fb.c
+    
+    Lots of changes to merge with alanh's latest stuff:
+      o fix use of fb->pitch now that it has the right value
+      o add new helper for finding the CRTC given an FB
+      o fix new fb_probe/fb_remove functions to take a CRTC
+      o fixup callers of new FB routines
+      o port drm_fb changes to intel_fb
+      o check for errors after creating fb buffer object
+      o go back to using cfb_imageblit since the accel stubs aren't ready
+
+commit fd63ea971322246734fca5977a800c3ef51cc3fe
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu May 17 17:00:11 2007 +0100
+
+    Grab the default mode if the preferred mode isn't available.
+    
+    Fix an overflow problem.
+
+commit a18b4befb9b76c4b2662ff6caa0e4f0975eb8e9c
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu May 17 09:00:06 2007 -0700
+
+    Fix FB pitch value (we had it wrong and were working around it in a few
+    places).
+    Add new FB hooks to the drm driver structure and make i915 use them for an
+    Intel specific FB driver.  This will allow acceleration and better handling
+    of the command stream.
+
+commit ea98d7e79657469545b865a353784d79fc8cff9d
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Thu May 17 17:35:14 2007 +0200
+
+    nouveau: don't build the module by default
+
+commit 2222bd767f9fc02d05ebd0f35a8ceeff2f032c94
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu May 17 13:19:56 2007 +0100
+
+    Fix build problem
+
+commit 5ce8aaae7251e60c078eda0a21894aae0e1d7a45
+Author: root <root@localhost.(none)>
+Date:   Thu May 17 12:46:36 2007 +0100
+
+    Large changes for fbdev support.
+    
+    Change from DIRECTCOLOR to TRUECOLOR, and enable
+    support for PSEUDOCOLOR. DIRECTCOLOR support needs more work.
+    
+    Add the ability to change the mode on the fbdev device.
+    
+    Support depth 8, 15, 16 and 24 (and 32).
+    
+    Add a /dev/fbX device per CRTC, but there's some code which
+    doesn't allocate the fbX device unless the output is actually
+    enabled. Read the code on this as it impacts the fbcon map flags.
+    
+    Pick CRTC's based on the available outputs. More work could
+    be done here to match modes, so cloning could be achieved on
+    outputs. This fits more inline with what the X code does.
+
+commit ca725bba8472d5d94bcb7414b510d7d3027cbb1c
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Sun May 13 16:18:54 2007 +0000
+
+    r300: Added my comments into r300_reg.h.
+
+commit c6ff0caaa3e8f61f7c19950913b1ce731f979ce3
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Sun May 13 07:53:40 2007 +0000
+
+    r300: Synchronized R300 register defines file.
+    
+    Just moved the indent control comments so that indent doesn't try to change
+    anything.
+
+commit e9b604ed3fd6b4e056920bd327646b3e0e9b3be8
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Sat May 12 15:35:39 2007 +0200
+
+    nouveau : nv10 graph move clipping value to per channel init
+
+commit 5d623935c0e4f5f283c961de186b78b30db12463
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Sat May 12 15:16:37 2007 +0200
+
+    nouveau : nv10 graph clipping values were forgoten in ddx to drm commit
+
+commit e4d163d81ad7ce46af43cf84485dc96c4cb22b1f
+Author: Keith Packard <keithp@neko.keithp.com>
+Date:   Mon May 7 09:07:48 2007 -0400
+
+    Allow vblank interrupts to remain disabled across VT switch.
+    
+    i915_driver_irq_postinstall was forcing vblank interrupts to pipe A when
+    called with vblank interrupts disabled. This caused vblank interrupts to be
+    accidentally re-enabled when VT switching the X server. Instead, start the
+    driver with vblank interrupts enabled on pipe A to support older X servers,
+    but then leave control over the state to the X server if it is able to do so.
+
+commit eba00df1203040905d38bf0ef449d25d6dbdb72c
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu May 10 13:16:05 2007 +0100
+
+    Just some minor cleanups.
+
+commit e0056c7eb4640fc4863a352997ba00e3142b3355
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Wed May 9 18:31:31 2007 +0000
+
+    r300: Synchronized R300 register defines file.
+
+commit a02b04514250bff19aaf90d1f9699b4ec4749343
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Wed May 9 15:22:09 2007 +0000
+
+    r300: Synchronized R300 register defines file.
+
+commit 59784116bf7d18cfbbb7236fbdd601476207b9dc
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Tue May 8 21:18:02 2007 +0200
+
+    nouveau : fix fifo context size for nv10
+
+commit b2a875ba8955cfbf3df2dc1ecb25915a252eef9f
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue May 8 18:25:15 2007 +1000
+
+    ttm: complete drm buffer object ioctl split
+    
+    retain the op operation for validate/fence operations
+
+commit ae677472af25786fe935309ff1ac287e1610c819
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue May 8 17:55:57 2007 +1000
+
+    drm/ttm: remove old fence ioctl
+
+commit 25c51f539f254937d116699e66f8c382d78e71d4
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue May 8 17:53:58 2007 +1000
+
+    drm/ttm: ioctl cleanup for buffer object - user side only
+    
+    This just cleans up the xf86drm.c to what I want and drm.h,
+    I need to fix up the kernel internals to suit these changes now.
+    
+    I've moved to using struct instead of typedefs for the bo and it doesn't look
+    that bad so I'll do the same thing for mm and fence..
+
+commit 963ed9910ab59af23c66f4a8fafb7879f5140d97
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue May 8 17:51:21 2007 +1000
+
+    libdrm: fix typo on ttm fence interface
+
+commit c4e2caec44c5c1837d676ff0f5ad0747b2e570a7
+Author: Brian <brian@yutani.localnet.net>
+Date:   Sun May 6 10:09:59 2007 -0600
+
+    s/OJBECTS/OBJECTS/
+
+commit 4e858f8811d057a86740b27e0c9af933d382ed0d
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Sun May 6 12:47:03 2007 +0000
+
+    r300: Synchronize the register file from Mesa.
+
+commit 87ec1fea6c1ac93b4ff02f8c06ed476c0081e2e5
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Sun May 6 12:35:16 2007 +0000
+
+    r300: Use the defined names for known registers.
+
+commit 6a62941ecaa7d2b8f14b30920856bfa52aee4775
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun May 6 11:35:11 2007 +1000
+
+    drm/ttm: cleanup most of fence ioctl split out
+
+commit ee8954cb53e4964a5565833b5a937f1cbcb60d44
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun May 6 11:17:30 2007 +1000
+
+    drm/ttm: cleanup mm_ioctl ioctls to be separate ioctls.
+    
+    This is the first bunch of ioctls
+
+commit c9cd2c768bd37adadb87476f55f95e7b2336bc6b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun May 6 10:50:10 2007 +1000
+
+    drm: remove unused define DRM_HAS_TTM
+
+commit 45e09ea3cf85b76c18fb92a593ca7c40681052a7
+Author: Jakob Bornecrantz <wallbraker@gmail.com>
+Date:   Sat May 5 16:08:27 2007 +0200
+
+    Cleaned up userspace interface for modesetting.
+
+commit cf7c90f7b4087764cdd5f6c73328b0cf9dcb0b78
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed May 2 17:13:32 2007 +0200
+
+    Fix buffer object list freeing.
+
+commit f06ad82ecdc2c84f913bb4d6d48132f27f02c3a9
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Tue May 1 17:03:55 2007 +0200
+
+    Fix userspace ABI breakage from 3c384a9ad5f964709a237cfe035ea5d6df2da5fa.
+
+commit 3a69e2484a4a392c8fc8542fc44f9c6552589c46
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue May 1 14:20:22 2007 +1000
+
+    cleanup usermodes on drm mode setting shutdown
+
+commit 89231953d108e74ee7b0eb99494ead1dd795d640
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue May 1 13:16:29 2007 +1000
+
+    Add support for user defined modes
+    
+    This allows userspace to specify modes and add them to the modesetting
+    system and attach modes to outputs
+
+commit 8e8e37515eafbd75b971f57f767ef01344361256
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue May 1 13:15:41 2007 +1000
+
+    fix unusued variable
+
+commit ca1cd3257c7c41821788ca45d45e51065f436803
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Sun Apr 29 12:17:57 2007 +0200
+
+    radeon: Don't mess up page flipping when a file descriptor is closed.
+    
+    There can still be other contexts that may use page flipping later on, so don't
+    just unilaterally 'clean it up', which could lead to the wrong page being
+    displayed, e.g. when running 3D apps with a GLX compositing manager such as
+    compiz using page flipping.
+
+commit feb68037784ac09e333a321d294fdb2d8c57a4c8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Apr 28 15:07:22 2007 +1000
+
+    move i915 to new drm_wait_on function
+
+commit 6e860d08d0f5b1e9a2d711aaf9fd6b982aa8039e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Apr 28 15:05:20 2007 +1000
+
+    drm: add new drm_wait_on function to replace macro
+
+commit e9b3acd25733517420f7b9fea01cfd529d909348
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Apr 28 15:04:49 2007 +1000
+
+    remove register usage
+
+commit 9f9c19065cecde16aa2994b6f777336a6e5f3409
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Apr 28 14:49:27 2007 +1000
+
+    remove DRM_GETSAREA and replace with drm_getsarea function
+
+commit e88934274ab80119d6dd139e3d780c3cdea7e9e5
+Author: George Sapountzis <gsap7@yahoo.gr>
+Date:   Thu Apr 26 14:16:51 2007 +0300
+
+    Revert "bug 7092 : add pci ids for mach64 in Dell poweredge 4200"
+    
+    This reverts commit 255f3e6f76dfd267a14765dd1293229184298d89.
+    
+    Rage IIc does not have a vertex setup engine.
+
+commit 3a2c9f46212328a44533a45523d2a9f9b72a15da
+Author: George Sapountzis <gsap7@yahoo.gr>
+Date:   Thu Apr 26 14:16:28 2007 +0300
+
+    linux: minor indent.
+
+commit 942d9be296df38aa69987845a08d3d607b85f83e
+Author: George Sapountzis <gsap7@yahoo.gr>
+Date:   Thu Apr 26 14:16:13 2007 +0300
+
+    freebsd: remove stray apperance of IN_MODULE.
+    
+    The xserver no longer uses the libc-wrapper.
+
+commit b69b42634619076d4163ae144f0154880d1928cd
+Author: George Sapountzis <gsap7@yahoo.gr>
+Date:   Thu Apr 26 14:15:55 2007 +0300
+
+    libdrm: remove HAVE_XORG_CONFIG_H and XFree86LOADER ifdef's.
+    
+    We no longer import libdrm in the xserver.
+
+commit 2a6f555053bd404e7e5721c40990da2d9db53d19
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 26 17:54:06 2007 +1000
+
+    update create_lk_drm.sh script
+
+commit afc029e935a8f4667aff786c51818712487d185d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 26 16:25:43 2007 +1000
+
+    whitespace cleanup
+
+commit e5c1f1caa2a6b8c63aa6d0f8a70372eaf72f1840
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 26 16:22:28 2007 +1000
+
+    remove some whitespace violation
+
+commit 4b72759b307f046d71c08d9008b7467e0b3bb0ba
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 26 16:22:11 2007 +1000
+
+    drm: nopfn warning on 64-bit
+
+commit 71d44cda52f239b543cb1fad93ef35adc3093d38
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu Apr 26 16:09:24 2007 +1000
+
+    drm/ttm: allow drm_buffer_object_create to be used in-kernel
+
+commit 3c384a9ad5f964709a237cfe035ea5d6df2da5fa
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Wed Apr 11 12:51:52 2007 -0700
+
+    Add new buffer object type for kernel allocations that don't initially have a user mapping.
+    (cherry picked from commit 2e21779992bd5026d8ec4dea52466377dbe5a0ed)
+
+commit b589b846e73bfe6235cd702bb8ae89701c85eaab
+Merge: 34be91f 5c8561a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 26 15:56:21 2007 +1000
+
+    Merge branch 'origin' into modesetting-101
+
+commit 34be91fe4e9f0ad73b7c4354aea0c8ce10f45f68
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 26 14:50:00 2007 +1000
+
+    i915: fix vblank pipe setup
+
+commit 5c8561aae22138880673503d930af7f1b361d071
+Author: Brian <brian@yutani.localnet.net>
+Date:   Wed Apr 25 14:52:29 2007 -0600
+
+    More detailed instructions, tips.
+
+commit 61477d60c466b4aac395057a285c1d238a83ce1c
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Mon Apr 23 22:37:01 2007 +0200
+
+    nouveau: fix wacky pci id
+
+commit ceb44021ad7755721acc3c0307c54009b666442e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Apr 23 11:42:29 2007 +1000
+
+    drm: make mode numbers no change by comparing probed modes
+    
+    The mode list sets all the output modes to UNVERIFIED, then probes a new list,
+    If a mode is on the new list and not on the old, it adds it to the old,
+    if a mode is on the new list and old, it just updates the status to the new
+    mode status.
+    If a mode is on the old list and not on the new, prune invalid modes should
+    remove all UNVERIFIED modes
+
+commit 0f3c5148f02bd98411095fdc8059207fa17b4a7d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Apr 23 09:10:46 2007 +1000
+
+    fixup vrefresh reporting, it should now be *1000 in userspace
+
+commit 97b5599982c76915b0750c6ef0a270639b02a6f2
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Fri Apr 20 18:00:44 2007 -0700
+
+    Oops, edid data should just be a char *, as edid.h is private to edid.c
+    (we can just recombine them now).
+
+commit eb892fb09dc2e5206f2461e8b258495c7cef904a
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Fri Apr 20 17:59:30 2007 -0700
+
+    Add a monitor information structure separate from the EDID data for tracking
+    monitor limits, etc.
+
+commit a21ff375c697fc7560c16d0f88335a6db2c9c37a
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Fri Apr 20 17:03:50 2007 -0700
+
+    Document drm_modes.c functions.
+
+commit 9ca4932054a5bde5dda500ea346ad101bb5c80a0
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Fri Apr 20 16:32:58 2007 -0700
+
+    Add a mode name generation wrapper to make name format changes easier.
+
+commit 2d1de1fc6b9ab3524a1247f56ddeea7238c04ea3
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Fri Apr 20 18:06:31 2007 -0400
+
+    Initialize rwlock using rwlock_init to appease lockdep validator.
+
+commit af3ffcd822e562b02fe0671e7e88d9c5a6225658
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Fri Apr 20 18:06:31 2007 -0400
+
+    Initialize rwlock using rwlock_init to appease lockdep validator.
+
+commit 6238ebee21f800cec6c77b6bf90d7916ca945931
+Author: Kristian Høgsberg <krh@redhat.com>
+Date:   Fri Apr 20 16:52:04 2007 -0400
+
+    Clean up and return if no outputs are found.
+
+commit a8a8108e459977ec8b334e517abd67e1b264337e
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Apr 19 23:25:14 2007 +0200
+
+    Avoid a fence timeout problem when a signal is pending.
+
+commit 1ce9c092314ddf005cdadc6937e36d4dc59788ce
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Apr 20 15:49:31 2007 +0200
+
+    Fix via compile error
+    (Reported by Benno Schulenberg.)
+
+commit 8d893e49ec35905a3718c565ec56c21d76dc745c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 19 09:43:46 2007 +1000
+
+    backout SDVO control bus check and comment why this is a bad idea
+
+commit 5587961cfeff86d8368ff03867a1f0667e4a64d4
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Wed Apr 18 11:49:42 2007 -0700
+
+    Document main drm_crtc.c functions, and rename drm_crtc_mode_create to
+    drm_mode_create to be consistent with the other functions.  Also document
+    where we need locking fixes and what the locks are for.
+
+commit 2df2c70e20caa3d6d1a1ac12da6fe3cc0689d51f
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Apr 18 16:33:28 2007 +0200
+
+    Simplify the ttm backend interface and the agp ttm backend.
+
+commit dfc02547ff5f35bfa5cffd6a0dcb56402db59f33
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Apr 18 14:18:56 2007 +0100
+
+    Shouldn't free the mode here. It's done later on.
+
+commit b642ced0830d4e91785ba94677abe637c7cb3791
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Apr 18 13:52:46 2007 +0100
+
+    Fix return status
+
+commit 0207b51acce0382b2e3cf55ed7dbbe02e48c73b2
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Apr 18 12:19:16 2007 +0100
+
+    Fix build problem
+
+commit 87b46bd436074572b3a62e2fb7ec85a1db8df892
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Apr 18 12:10:06 2007 +0100
+
+    free the duplicated mode.
+
+commit 191594ebd5fbe3ac3615247c4e2cd50e1b099635
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Apr 18 12:07:55 2007 +0100
+
+    When no valid EDID modes are available, we bail.
+    
+    This snippet adds a standard 640x480 @ 60Hz mode when
+    that occurs, so we can continue with a basic mode.
+    
+    Should we do this here though ???
+
+commit ef2bce3a16428feb89f447e528bdea00c1066b8b
+Merge: 51e867c 20b2949
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Apr 18 11:55:09 2007 +0100
+
+    Merge remote branch 'origin/modesetting-101' into modesetting-101
+
+commit 51e867c57880c85c87e187af0a667e9b99413206
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Apr 18 11:53:25 2007 +0100
+
+    Support the RGB outputs of SDVO cards, which are essentially
+    VGA outs.
+    
+    The drm_initial_config path has specific handling code to name
+    match for VGA, TMDS or LVDS. This is pretty restrictive and should
+    probably be dealt with to be more generic.
+
+commit ea8bcb466bca82081816ca3d83a420f09a62870c
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Apr 18 11:47:21 2007 +0100
+
+    Check status after SDVO command for sdvo_set_control_bus_switch
+
+commit dc03e07f236ea5716d271155dcbbc54a218732c6
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Apr 18 11:46:04 2007 +0100
+
+    Move SDVO PENDING check to read_response so all SDVO commands
+    benefit from the spin loop.
+
+commit 20b2949e3738bc900407d6aeddc6338f05b0b169
+Author: Dave Airlie <airlied@airlied2.(none)>
+Date:   Wed Apr 18 14:55:43 2007 +1000
+
+    make sure TMDS gets a crtc
+
+commit e46e028bd21552331ca4db409c2b45e54491ced6
+Merge: c71c44b 5a96d59
+Author: Dave Airlie <airlied@airlied2.(none)>
+Date:   Wed Apr 18 14:11:49 2007 +1000
+
+    Merge branch 'origin' into modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/drm_bo.c
+    
+    Merge in changes from master from Thomas fixiing TTM problems
+
+commit c71c44bb9288e0bf1b319ec19a2e25f4467d9583
+Merge: 4f0841a d20aaf4
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue Apr 17 18:20:05 2007 -0700
+
+    Merge branch 'modesetting-101' of git+ssh://git.freedesktop.org/git/mesa/drm into origin/modesetting-101
+
+commit 4f0841a31cbed315a3e891557eadc55cab0dfd23
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue Apr 17 18:03:14 2007 -0700
+
+    Just use drm_output_destroy to cleanup LVDS failures.  It'll call our cleanup
+    routine, which will take care of freeing our dev_priv and i2c ddc bus.
+
+commit d20aaf485893ed11dd0d68daf63ccadd77b02213
+Author: Dave Airlie <airlied@airlied2.(none)>
+Date:   Wed Apr 18 10:41:39 2007 +1000
+
+    don't crash if no desired mode
+
+commit 2352ec9bfab20761cc898ea40db2a7c6d53e81f3
+Author: Dave Airlie <airlied@airlied2.(none)>
+Date:   Wed Apr 18 10:39:58 2007 +1000
+
+    backout alanh's broken commit
+
+commit 7c9e19ba55dcdf212845253648194115639fe7b6
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Fri Apr 13 16:43:55 2007 +1000
+
+    clean up ring buffer and TTM in i915_driver_unload
+    
+    I've commented out the framebuffer for now
+
+commit 73b031df613b58c4462a65818b88200bed0a97de
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue Apr 17 17:30:46 2007 -0700
+
+    Add framebuffer bo freeing to drm_mode_config_cleanup (seems like the best
+    place for now).
+
+commit a45fa264f2b60185ae797f85d2084d57de49bbca
+Author: Jakob Bornecrantz <wallbraker@gmail.com>
+Date:   Tue Apr 17 22:27:46 2007 +0200
+
+    Lvds now power up backlight on commit
+    
+    Now saves previous power level in prepare and sets
+    that power level in commit, should power level
+    be 0 it will set maximum level.
+
+commit 1c7f895fa6531b16e7e9fd4568d4f6a50ca5711e
+Merge: 4e4d9cb b729b91
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue Apr 17 10:14:18 2007 -0700
+
+    Merge branch 'modesetting-101' of git+ssh://git.freedesktop.org/git/mesa/drm into origin/modesetting-101
+    
+    Conflicts:
+    
+    	shared-core/i915_init.c - reconcile with airlied's new code
+
+commit 4e4d9cbeb3f52b605e46aad8ae1a947ca236079f
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue Apr 17 10:00:37 2007 -0700
+
+    Move initial framebuffer allocation and configuration to drm_initial_config,
+    remove i915_driver_load fb related stuff.  Add a small helper for setting up
+    outputs.
+
+commit eeb5de059401361871e34e29c456a1feebac0b1e
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue Apr 17 09:59:21 2007 -0700
+
+    Cleanup whitespace, rename macro argument.
+
+commit 5e6c34539694c58cd7e9dd60541fc6e2bde1a79d
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue Apr 17 09:57:08 2007 -0700
+
+    Add prototypes for drm_bo_init_mm and drm_buffer_object_create for use by
+    in-kernel code.
+
+commit b729b919baed250313caf3f0bbd4044e084de8bf
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Apr 17 16:11:00 2007 +0100
+
+    Fix a register read that was swapped SDVOB/SDVOC
+    
+    Check for the PENDING message when reading the attached
+    displays. Ensures the command has completed before continuing.
+    
+    (probably need to check PENDING in other SDVO calls too)
+
+commit ecd9801c3cf08082b4aaa7e23f1f94a5e1d47a75
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Apr 17 16:09:40 2007 +0100
+
+    Fix SDVO outputs
+
+commit 32b5616cc681e404f671b4bc3b030ee24b753d4a
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Apr 17 16:08:26 2007 +0100
+
+    Correct PCI ID for i845
+
+commit 5a96d59ce9d9ad5816e2d0e195afa9902445f594
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Apr 17 14:15:37 2007 +0200
+
+    Don't always free up memory space when we unpin buffers.
+
+commit 5432cc4abf672ed3adb10fd5d61a6a5716089a98
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Apr 17 10:53:19 2007 +0200
+
+    Fix buffer object reference problems.
+    (Reported by Dave Airlie).
+
+commit 1a5e647f63f083788a7fe43c2367d2e022c48588
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Apr 17 18:18:42 2007 +1000
+
+    I don't think this dec is necessary and my stuff all works without ..
+    with it everything falls over
+
+commit 56ef1ab8acc0c68b66c4f781107b605f9dd79657
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Apr 17 18:18:25 2007 +1000
+
+    add some missing export symbols
+
+commit 79aa1d54746f33c33ffbf98fb96ccbf88c3cb390
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Apr 17 18:16:38 2007 +1000
+
+    another large overhaul of interactions with userspace...
+    
+    We need to keep a list of user created fbs to nuke on master exit.
+    We also need to use the bo properly.
+
+commit e805ca959dbef85ac7b508639a64832a7995703a
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Apr 17 08:58:23 2007 +0200
+
+    via: Make sure we flush write-combining using a follow-up read.
+
+commit e91ceff6c98661bfae5db008e024b71a8a0f5129
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Apr 17 08:46:45 2007 +0200
+
+    Add a code comment.
+
+commit cd5769c3b563048357535b24dc40783775adb227
+Author: Jakob Bornecrantz <wallbraker@gmail.com>
+Date:   Mon Apr 16 20:54:24 2007 +0200
+
+    Fix offset should from pci device address
+
+commit e6e4946c82ab6f63143df7f49f38fa56f7e8980a
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Apr 16 16:23:05 2007 +0200
+
+    Require the hardware lock for buffer creation
+    (since that implies a validate).
+    Fix drm_bo_wait_unfenced error messages and codes.
+    Fix some return codes from libdrm.
+
+commit 2aa183db1ff0fb6044d24eae51854ff128da9a0f
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Sat Apr 14 15:35:38 2007 -0700
+
+    Use drm_mem_reg_ioremap to map buffer object.
+
+commit 65619cab276ba1f00014f9701b8347e2b834abe4
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Sat Apr 14 15:35:21 2007 -0700
+
+    Fix PRIV0 memory initialization (mm_init takes pages, not bytes), align fb
+    allocation correctly, and use drm_mem_reg_iomap to map ring buffer object.
+
+commit c4e944182db3002101c330453ebb3f454637743e
+Author: Jakob Bornecrantz <wallbraker@gmail.com>
+Date:   Fri Apr 13 02:23:42 2007 +0200
+
+    Added debug messages so we know which output we are dealing with
+
+commit cc471a361fc7058df4fb8d15d9c9a8b5cdd3dd77
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Fri Apr 13 14:33:52 2007 +1000
+
+    i915/drm: clean up a lot of the i915/drm startup/teardown sequences
+    
+    When the kernel driver is loaded it sets up a lot of stuff..
+    it tears down the same stuff on unload.
+    
+    This add a new map type called DRM_DRIVER which means the driver will clean the mapping up
+    and fix up the map cleaner
+
+commit 27598bacfd8e086832753a8b931f0fce18989f8d
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Fri Apr 13 14:31:10 2007 +1000
+
+    export drm_bo_driver_finish symbol
+
+commit a890d596fc22a3dca9d390f96f0f739cf90de5e1
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Fri Apr 13 14:30:44 2007 +1000
+
+    revert LVDS destroy - this oops on sysfs on sdvo init of i2c bus
+
+commit 9f0f6509f5278b5d46a282acf40e7b69790892a6
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu Apr 12 18:30:36 2007 -0700
+
+    Move driver load call to after AGP init, in case the load routine needs AGP stuff.
+
+commit 79b7a588bb685459d51527e7ac6877696fe392a3
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu Apr 12 14:57:07 2007 -0700
+
+    Oops, forgot to push the msleep() in the hotplug test.  Wouldn't want to
+    spin in the kernel for a whole second w/o it...
+
+commit 9a39cb9b9a51516abcaf795fa6e38cbeb22d7db9
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu Apr 12 12:43:47 2007 -0700
+
+    Use crtc_from_pipe call in intel_lvds.c and add get_mode panel mode detection.  Also fix up error case for when LVDS mode can't be determined.  Leave placeholder code in place for BIOS mode probing and platform quirks.
+
+commit 6b229c1e59e8d070e1822030f8f0c1d61140508d
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu Apr 12 12:41:56 2007 -0700
+
+    Add new function for getting a CRTC pointer given a pipe number.
+
+commit 9e5d61d5b8c052b4dc126b155dca1f0d2e4e5ad9
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu Apr 12 12:40:51 2007 -0700
+
+    Fix 945+ hotplug detection, remove some unused variables.
+
+commit fb3c82f1d8362a0b7d64cb3bce75be8c72328e1c
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu Apr 12 11:50:57 2007 -0700
+
+    Don't need a NULL check prior to calling kfree.
+
+commit e183a091ff44e5b03ec521696830c45b2ce9ce87
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu Apr 12 11:40:12 2007 -0700
+
+    Initialize the hw lock waitqueue so we don't hang in drm_lastclose.
+
+commit 2160e267ff3e1a503ab7666b60ffe21f4a90b803
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu Apr 12 09:01:53 2007 -0700
+
+    Don't use drm_setup, do SAREA allocation and mapping directly instead.
+
+commit c2fce380c26d72f2d7971a4d08076da33c41f5ae
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu Apr 12 08:57:58 2007 -0700
+
+    Move i2c init back to where it belongs and add i2c unregistration in *_destroy.
+
+commit 258e1cf70345198209e6d49a428efc3de8ce8238
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu Apr 12 08:56:34 2007 -0700
+
+    Whitespace cleanup
+
+commit e7b97f552390319d817595da8accefbe56199346
+Merge: f2e3d79 cf01689
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu Apr 12 08:55:51 2007 -0700
+
+    Merge branch 'modesetting-101' of git+ssh://git.freedesktop.org/git/mesa/drm into origin/modesetting-101
+
+commit f2e3d790ac05b2792e795f47fee32fe896a096cc
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Thu Apr 12 08:53:03 2007 -0700
+
+    Revert "Export drm_setup for use by new driver init code.", we don't really want to use this function
+    
+    This reverts commit e114b981bc291049fa6996d487334a408acc1ce2.
+
+commit cf016891435a0aa74dc4909ed4125c7ed906b7d1
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu Apr 12 15:12:00 2007 +0100
+
+    Use drm_framebuffer instead of drm_crtc for fb & fbt
+
+commit a85440c8a6cac3de4b0e50805fa30cdce40e311b
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu Apr 12 15:11:38 2007 +0100
+
+    Remove extraneous drm_crtc.h include
+
+commit 9420ab4b419458605c678d179de6c80de23b8ee1
+Merge: 9b7211d b1f0fd6
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu Apr 12 15:10:08 2007 +0100
+
+    Merge remote branch 'origin/modesetting-101' into modesetting-101
+
+commit e8bd9fdf31bf3db91431b69ce1fc8d419148c838
+Merge: 0430a80 b1f0fd6
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Wed Apr 11 20:41:54 2007 -0700
+
+    Merge branch 'modesetting-101' of git+ssh://git.freedesktop.org/git/mesa/drm into origin/modesetting-101
+
+commit 0430a80fc7861a3397a3f2649dfeb9eff14359a5
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Wed Apr 11 20:41:27 2007 -0700
+
+    Remove debug statement about buffer objects
+
+commit b1f0fd6dfbd1495aa08c6358e936582eeca042c8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 12 12:11:58 2007 +1000
+
+    use FB everywhere
+
+commit 1bba3cb3b37ca9bc302d83377c1e9d5441653d0d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 12 11:55:10 2007 +1000
+
+    cleanup framebuffers on drm unload
+
+commit fb6c5aacb9955248300e0c62f68a5a65b40e15e1
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 12 11:54:49 2007 +1000
+
+    only initialise modes when fbcon or fbset asks for it
+
+commit b49b3ba4c1aad0d3f34f06013f2ffa67fc8d82c9
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 12 11:43:13 2007 +1000
+
+    set bracing style like Linux
+
+commit a5cf4cc369fcc2cf7b84bbaef1e458250ecb91ee
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 12 11:28:55 2007 +1000
+
+    fix unbalanced lock and make sure mode list has modes so lvds code doesn't crash
+
+commit 981f8156de0c5ec6387f659fbcac031d663d943c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 12 08:54:31 2007 +1000
+
+    allow framebuffer changes on the crtc setup
+
+commit a81558d8b3ee17fbf46e32b10732e22fcd997858
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 12 08:45:40 2007 +1000
+
+    add getfb ioctl
+
+commit 9d7160c43a7475b9d2ab06c5c353acb9456efa12
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Wed Apr 11 12:52:57 2007 -0700
+
+    Use new kernel buffer object type and cleanup agp probing.
+
+commit 2e21779992bd5026d8ec4dea52466377dbe5a0ed
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Wed Apr 11 12:51:52 2007 -0700
+
+    Add new buffer object type for kernel allocations that don't initially have a user mapping.
+
+commit 8dd75bd601f5fbf9793afc7b869a278050aa17d5
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Wed Apr 11 11:47:58 2007 -0700
+
+    Add aperture size and preallocation probing (from intelfb), cleanup load code to be more general.
+
+commit 63d4d40463b04f1277470ccf5cc96dafd81e8687
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Wed Apr 11 11:46:37 2007 -0700
+
+    Fix i2c unregistration, cleanup panel_fixed_mode assignment.
+
+commit 425da42e95606fec19cc87fad9329d48f93dfe6b
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Wed Apr 11 11:44:54 2007 -0700
+
+    Whitespace cleanups.
+
+commit c731b68091aa7284ee3a89c8a7ea3fdabac45a54
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Wed Apr 11 11:42:00 2007 -0700
+
+    Fix EDID pixel clock calculation.
+
+commit cc7faa4de80a68d5a7a484046b9b42de961cdbef
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Wed Apr 11 07:21:24 2007 -0700
+
+    fix modeset cleanup for LVDS and reenable it in i915.
+
+commit dd00aa5851ca7c5590ae0b0825dd84c027cfd420
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Wed Apr 11 07:08:48 2007 -0700
+
+    export vblank routine for use by intel_display.c and intel_sdvo.c.
+
+commit f35db6690625ccd01fb61dc766e6380a9c14c331
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Wed Apr 11 07:08:29 2007 -0700
+
+    Fixup DDC probing.  We only have one DDC bus so we have to use it only
+    on demand, and unregister when we're done.
+
+commit 78598fdaa8b23a199880a63b79f17cfd7f14cb0f
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Wed Apr 11 07:07:54 2007 -0700
+
+    Various changes for in-kernel modesetting:
+      - allow drm_buffer_object_create to be called w/o dev_mapping
+      - fixup i915 init code to allocate memory, fb and set modes right
+      - pass fb to drm_initial_config for setup
+      - change some debug output to make it easier to spot
+      - fixup lvds code to use DDC probing correctly
+
+commit 7e48d47fb51cc0f1a38a99acfe591821a45d7081
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Wed Apr 11 17:35:00 2007 +1000
+
+    line_length calculation was incorrect.. I now can get fbcon to run
+
+commit 0392badd84ec833ddd9e2b187844d246d860bbf7
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Wed Apr 11 17:25:37 2007 +1000
+
+    oops for 32 pitch.. hey I can see stuff on fbcon now.. it looks like text.. just a bit garbled
+
+commit 1147fefed8d1154482c9cc9a9785e6871cd6e6a1
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Wed Apr 11 17:13:57 2007 +1000
+
+    fixup framebuffer depth
+
+commit a6cc6a778f8b2f86300a8ce87441d044fd67f930
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Wed Apr 11 17:13:45 2007 +1000
+
+    add support for setting a framebuffer depth
+
+commit c582eaac194411f52a2c0527ffa093b5a422d7b9
+Author: Dave Airlie <airlied@airlied2.(none)>
+Date:   Wed Apr 11 16:34:40 2007 +1000
+
+    add copyright statement
+
+commit 32f6a58db216f23a7c71ca9c7eda56aaa8293078
+Author: Dave Airlie <airlied@airlied2.(none)>
+Date:   Wed Apr 11 16:33:03 2007 +1000
+
+    add initial drm_fb framebuffer
+    
+    So far I can load fbcon, once I use my miniglx to add a framebuffer.
+    fbcon doesn't show anything on screen but baby steps and all that.
+
+commit add7a928ad1819df17d5764d06fb81985b285d08
+Author: Dave Airlie <airlied@airlied2.(none)>
+Date:   Wed Apr 11 14:43:02 2007 +1000
+
+    comment out unworkable code
+
+commit 3dd5dc5728620cadec24ee5db323a20c3bb48bf0
+Author: Dave Airlie <airlied@airlied2.(none)>
+Date:   Wed Apr 11 14:34:43 2007 +1000
+
+    only init at driver load
+
+commit 9d12da5917ec57605a2c4cd81c1753145f7e229c
+Author: Dave Airlie <airlied@airlied2.(none)>
+Date:   Wed Apr 11 14:34:22 2007 +1000
+
+    only bo finish at driver unload
+
+commit b329f91502a20cc6def44b7bea6cbc8b016edd5e
+Author: Dave Airlie <airlied@airlied2.(none)>
+Date:   Wed Apr 11 14:04:18 2007 +1000
+
+    use the baseaddr at least
+
+commit 7e58276c76ff2297fdf9ba295d696338377d6e14
+Author: root <root@airlied2.(none)>
+Date:   Wed Apr 11 13:40:50 2007 +1000
+
+    Revert "Remove some delays from Intel i2c code, we'll need a more comprehensive fix"
+    
+    This reverts commit c0336989884e75bcd05284257e884754bb5f85b6.
+    
+    this break SDVO
+
+commit 44be9c9d5950d3b2ba4d5527189abec8dac0686f
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Wed Apr 11 13:19:30 2007 +1000
+
+    add an fb count + id get to the get resources code path
+
+commit 3e994a56be1bfc633e49434c9e4a3e3262070248
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Wed Apr 11 13:18:49 2007 +1000
+
+    use fb pitch and fix up some whitespace
+
+commit f50eec752c8754595ba99f0ec7a7c8138316a819
+Merge: 44a8761 b62ffb8
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue Apr 10 17:58:30 2007 -0700
+
+    Merge branch 'modesetting-101' of git+ssh://git.freedesktop.org/git/mesa/drm into origin/modesetting-101
+
+commit b62ffb8e91dafbe46b4daa5be13a867b149b0170
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Wed Apr 11 09:56:09 2007 +1000
+
+    fixup calculation to make sdvo work
+
+commit 9b7211dd6793dc62d11ad1ae980b22fa2d61f9dd
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Tue Apr 10 23:19:29 2007 +0200
+
+    nouveau: nv10 per channel init from ddx
+
+commit 44a8761302888080f1cb6596d4573d88c1746da4
+Merge: e114b98 50672ad
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue Apr 10 10:45:55 2007 -0700
+
+    Merge branch 'modesetting-101' of git+ssh://git.freedesktop.org/git/mesa/drm into origin/modesetting-101
+    
+    Conflicts:
+    
+    	linux-core/drm_crtc.c - trivial merge
+    	linux-core/drm_crtc.h - trivial merge
+    	linux-core/intel_display.c - crtc_config -> mode_config
+    	shared-core/i915_dma.c - accommodate new init code in i915_init.c
+
+commit e114b981bc291049fa6996d487334a408acc1ce2
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue Apr 10 10:31:58 2007 -0700
+
+    Export drm_setup for use by new driver init code.
+
+commit b59285d738b1a832b12d9258bd6f1db8f7e61f08
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue Apr 10 10:31:10 2007 -0700
+
+    Move i915 init code to new file, i915_init.c, and create a new high level
+    init routine that runs at driver load time.
+
+commit 5130918e2531b9a8f6f6b65cdfce81f4f0904329
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue Apr 10 09:51:17 2007 -0700
+
+    Add save/restore state for LVDS code, along with a few other LVDS related
+    items to i915 private structure.
+
+commit 8785679f893ef9257c589a70113ac731edba0194
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue Apr 10 09:49:02 2007 -0700
+
+    Remove some debug #if 0 codes and add a reminder to check locking around
+    output enumeration stuff.
+
+commit c0336989884e75bcd05284257e884754bb5f85b6
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue Apr 10 09:48:20 2007 -0700
+
+    Remove some delays from Intel i2c code, we'll need a more comprehensive fix
+    in the Linux i2c layer to make DDC reliable on old monitors.
+
+commit 183cbd92dd016f8935f9b58ef9345fde1391173e
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Tue Apr 10 09:47:37 2007 -0700
+
+    Finish bringing in LVDS code, re-add to Makefile.  Needed other changes too:
+      - move EDID structures to drm_edid.h
+      - add EDID info structure to drm_output
+      - add a few routines to intel_display for getting current mode info
+      - add some prototypes to intel_drv.h and drm_crtc.h
+
+commit 50672adb3142abca743535a8e60c360ef47b2a08
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Tue Apr 10 16:49:36 2007 +1000
+
+    add sdvo debugging output
+
+commit b9c7fa55e2c6685c4c533613ab14f305f033c353
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Tue Apr 10 16:32:17 2007 +1000
+
+    fixup sarea writes for set pipe base and dpms
+
+commit 23a66fd506e71fdfde906d1679fb07c0df8bec4c
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Tue Apr 10 16:26:07 2007 +1000
+
+    fixup true/false in intel_sdvo.c
+
+commit f1476e4e5cefd4aa8c487b4e651a26056110e2f0
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Tue Apr 10 16:25:52 2007 +1000
+
+    re-tab and fixup the i915GM get core clock function to actually work
+
+commit 1e39dc43230ba1827eedc29ab422464281ec3e1b
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Tue Apr 10 16:25:31 2007 +1000
+
+    export output name to userspace
+
+commit 40bd6dcd86d554ca426deccd4fbada693c4be8a6
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Tue Apr 10 15:20:50 2007 +1000
+
+    set the base address of the CRTC correctly
+
+commit 65f465ed5ad3caf773658bb2832785c963b987f6
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Tue Apr 10 14:49:49 2007 +1000
+
+    fixup numerous issues with adding framebuffer support
+    
+    This still isn't perfect but it fixes a few oopses and cleans up
+    some of the tabs and bugs in the original fb limit code
+
+commit c446bf50e3ae730f272c6842f4ad04d523bd40c3
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Mon Apr 9 20:46:38 2007 -0700
+
+    Slam in most of X.Org's i830_lvds (not quite done yet so removed from Makefile.kernel too).
+
+commit eb9bdc27879d1aa307b234bbdb0f81494dcf7095
+Author: David Airlie <airlied@asimov.stargames.com.au>
+Date:   Tue Apr 10 11:51:31 2007 +1000
+
+    mode: fixup problems with framebuffer add function
+
+commit ed0ebd9d3da2e5c4e8053b6e7a7d2898b184f857
+Author: Dave Airlie <airlied@airlied2.(none)>
+Date:   Tue Apr 10 18:56:02 2007 +1000
+
+    make crtc_config be named mode_config
+    
+    X.org calls this crtc_config but this is a bad name and will confuse ppl later
+    (and me now :-)
+
+commit b50bda002b824efb24e18e8d514ff0ca763c15b9
+Author: Jakob Bornecrantz <wallbraker@gmail.com>
+Date:   Tue Apr 10 18:44:47 2007 +1000
+
+    add addfb/rmfb ioctls
+    
+    Originally from Jakob, cleaned up by airlied.
+
+commit 059b5d90770e32ba3d6d9a62acf74b352de7f421
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Mon Apr 9 23:23:40 2007 +0000
+
+    rs480: Renamed some unknown registers. See dri-devel list.
+
+commit 7e2b1a6cf55579c6f8b1fd56a97e9f41e34b88fc
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Mon Apr 9 08:52:53 2007 -0700
+
+    Fix refresh calculation (mistakenly removed 1000 factor needed for integer calulations, fixed mode printout debugging routine instead).
+
+commit 2d7f9f59c3ae9dbaa516ee45ae26b32825e7bf3e
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Apr 9 23:20:26 2007 +1000
+
+    nouveau: NV46 support
+
+commit 29f8fe80469a161c89c1a690ae2b62b3c21e4794
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Apr 9 22:00:34 2007 +1000
+
+    radeon: bump version for IGPGART support
+
+commit a70f8e0ab265cc4a26ed2f9e92ab0618bd920a93
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Apr 9 21:52:59 2007 +1000
+
+    radeon: add support for reverse engineered xpress200m
+    
+    The IGPGART setup code was traced using mmio-trace on fglrx by myself
+    and Phillip Ezolt <phillipezolt@gmail.com> on dri-devel.
+    
+    This code doesn't let the 3D driver work properly as the card has no
+    vertex shader support.
+    
+    Thanks to Matthew Garrett + Ubuntu for providing me some hardware to do this
+    work on.
+
+commit ab7ee9c1af3bd844653a83b5160773db671bbcad
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Sat Apr 7 19:26:55 2007 -0700
+
+    remove a printk to make things less verbose
+
+commit 2430d0c3157ef20a3319a4f93dc44b28d0189868
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Sat Apr 7 19:25:25 2007 -0700
+
+    just codingstyle cleanups
+
+commit 491ed9e4c27da6b1b5a6a6921039a7bf3a98c290
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Sat Apr 7 19:24:53 2007 -0700
+
+    document drm_mode_duplicate and fix vrefresh calculation (off by 1000 error)
+
+commit 13d4ea90c09fa834eb6eecaa082780aace78dac7
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Sat Apr 7 19:24:09 2007 -0700
+
+    various cleanups to EDID code:
+      - pull in FB DDC code (we'll have to rewrite it anyway it appears)
+      - add comments
+      - note a few FIXMEs
+      - make it less quiet, and more informative when it actually does print
+
+commit a35ba455b27b72f1ee3e1136ca6659f672ada4fa
+Author: Jesse Barnes <jbarnes@hobbes.virtuousgeek.org>
+Date:   Sat Apr 7 19:22:39 2007 -0700
+
+    make drmP.h include drm_crtc.h for CRTC related stuff.
+    fixup drm_crtc.c so it matches VGA and other outputs properly.
+    make drm_crtc.c less verbose.
+    add function declarations in drm_crtc.h for other files.
+
+commit b25558bb7377f6df6d457b50067a1d245f7911fd
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Apr 7 07:21:05 2007 +1000
+
+    fixup install target, not sure what I was smokin...
+
+commit 46257c51c1e402cf04007f01a90cb423b141f89e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Apr 1 16:30:52 2007 +1000
+
+    i915: use breadcrumb macro everywhere
+
+commit 1c9ba24c2f37ca78965f8aa57ece02ef5bdb9b06
+Author: Eric Anholt <eric@anholt.net>
+Date:   Thu Apr 5 11:34:11 2007 -0700
+
+    Add required permission notices for code copied from X.Org source.
+
+commit 78034c06dfc0cd79cc47c2daa119ca3ee2a4fed4
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Apr 6 03:24:39 2007 +1000
+
+    nouveau: make a note about a bit that breaks some cards
+
+commit 38f52402a8b7126f0c1ceccf7c1843b1a5247ef6
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Apr 6 03:03:59 2007 +1000
+
+    nouveau: Power up all card units by default on startup.
+
+commit 50ee722e018a5f17f886286e3d9eebe93f3cecaa
+Merge: 6f3534a 652bbb7
+Author: Jesse Barnes <jbarnes@jbarnes-mobile.amr.corp.intel.com>
+Date:   Thu Apr 5 09:27:12 2007 -0700
+
+    Merge branch 'modesetting-101' of git+ssh://git.freedesktop.org/git/mesa/drm into modesetting-101
+
+commit 6f3534a13abb0c8afb157511d0871dbc35bc403d
+Author: Jesse Barnes <jbarnes@jbarnes-mobile.amr.corp.intel.com>
+Date:   Thu Apr 5 09:21:31 2007 -0700
+
+    Add copyrights before I forget
+
+commit 652bbb77f6c9efb7e0a67cc868dfda42b00fc5fb
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 5 20:20:33 2007 +1000
+
+    add back compat for bool
+
+commit b4094864f188a1346cc3b51bcb457beeacefbf82
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 5 18:01:02 2007 +1000
+
+    checkpoint commit: implement SetCrtc so modes can in theory be set from user
+    
+    This hooks up the userspace mode set it "seems" to work.
+
+commit 7bb112fecadc6fe42e5828b861600691071ccd91
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 5 17:06:42 2007 +1000
+
+    checkpoint commit: added getresources, crtc and output
+    
+    This adds the user interfaces from Jakob and hooks them up for 3 ioctls
+    GetResources, GetCrtc and GetOutput.
+    
+    I've made the ids for everything fbs, crtcs, outputs and modes go via idr as
+    per krh's suggestion on irc as it make the code nice and consistent.
+
+commit 5bffbd6e275efffbb649c20c528a11412ccf99cd
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 5 13:34:50 2007 +1000
+
+    initial userspace interface to get modes
+
+commit 52f9028c84baea81230dc673b756552e8e90aecd
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 5 11:21:06 2007 +1000
+
+    Initial import of modesetting for intel driver in DRM
+
+commit 8fe8793a0fdf4e6082a0f0b0fc4650f171737356
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 5 11:20:23 2007 +1000
+
+    borrow edid.h from fb directory
+
+commit 9c793716591c141d7bb1796f5dc6473c45d9545c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 5 11:18:00 2007 +1000
+
+    add an install target to the drm modules makefile
+
+commit 29ac7b1fe364a4be1db7e22d2b400bef04fc240d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Apr 3 21:20:00 2007 +1000
+
+    radeon: add setup for PCIE GART ttm
+
+commit e835820e2359952bd42a66137c6b7ab243a5a541
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Apr 3 19:04:48 2007 +1000
+
+    add initial PCIE GART framework for TTM
+
+commit c4968279218cf246323e38bbbd44ce2774871fde
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Apr 3 10:54:23 2007 +0200
+
+    Fix user object reference when caller is not object creator.
+    (Reported by Dave Airlie).
+
+commit 38d18acb8f3617d79735f71564d9f49e608461ec
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Apr 3 10:24:06 2007 +0200
+
+    Add a fence flush event to each fence-signaled check when lazy-waiting
+    
+    to make sure we don't lose any sequence numbers if, for some reason,
+    they don't generate an IRQ.
+
+commit 139e4bbc73c65d6e1d7fc831ae15c8b28f92e821
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Apr 3 10:21:41 2007 +0200
+
+    Make sure we ack irqs before we read a breadcrumb so that
+    
+    breadcrumb updates that occur _AFTER_ we've read the breadcrumb really
+    generates a new IRQ.
+
+commit 7743af94492681f5aaf7cfdef78d695a6db7cbd0
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Mar 30 14:14:26 2007 +0200
+
+    Evicted no-move buffers can get lost if they end up in another
+    
+    memory type than local.
+
+commit d85e243259259d7702db0d344ae1ff7d26598227
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Mar 30 12:23:22 2007 +0200
+
+    Fix an oops when trying to clean a not yet initialized memory type.
+
+commit 72d457fc1973a61f906a42d049c1c160cc7dee4e
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Mar 29 21:33:41 2007 +0200
+
+    Make sure CMA (Can't map aperture) pages are mapped uncached.
+    
+    (Should really make this write-combined using PATs, at some point).
+
+commit 5395a92d40337aa3de424f87fb38cb5a0ca45bcf
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Mon Apr 2 19:45:10 2007 +0000
+
+    r300: Synchronize the register header file again.
+    
+    It's a good idea to keep these synchronized; even though the DRM doesn't use all
+    the defines, maintaining two different copies is prone to errors when the diff
+    gets bigger.
+
+commit cbbdbd5e653860bcae165c8abd16006d4425e3de
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Sun Apr 1 14:31:41 2007 +0200
+
+    nouveau: fix usage of PGRAPH_CTX_CONTROL on nv20+
+    
+    http://gitweb.freedesktop.org/?p=mesa/drm.git;a=commitdiff;h=17985f07d68322519919a7f629a6d2d9bf3916ed could have broken some nvxx_graph code : it rename NV03_PGRAPH_CTX_CONTROL to NV10_PGRAPH_CTX_CONTROL, but forgot to update it in nvxx_graph file.
+    
+    Also when migrating init stuff in http://gitweb.freedesktop.org/?p=mesa/drm.git;a=commitdiff;h=674cefd4fe4b537a20a10edcb4ec5df55facca8e, NV04_PGRAPH_CTX_CONTROL is used everywhere but the old ddx code use NV_PGRAPH_CTX_CONTROL_NV04 or NV_PGRAPH_CTX_CONTROL.
+
+commit 25cedcf76fae45f8a1a63ccb6b4bc5746b7d1587
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Sun Apr 1 14:21:29 2007 +0200
+
+    nouveau : nv10 ctx switch fix
+    restoring NV10_PGRAPH_CTX_SWITCH1 now works
+
+commit bdc5a8b62ef2f59e05f69da2150212c0243f6efb
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Apr 1 19:09:00 2007 +1000
+
+    radeon: enable buffer manager
+
+commit b1f0b2d960a8f488332652677073ab95ce72cd3f
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Apr 1 18:24:23 2007 +1000
+
+    radeon: de-static irq function, fixup fence/buffer
+
+commit be5bf1346e49d5c2e0080913fd55e6898a8744cf
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Apr 1 16:48:38 2007 +1000
+
+    copy over some files and reorg radeon to add ttm fencing not working yet
+
+commit 223061e0846a95d4a3dba84b36afb2cef313bae9
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Sun Apr 1 00:44:11 2007 +0200
+
+    nouveau : set the correct PGRAPH_CTX_CONTROL register
+    
+    "5a072f32        (Stephane Marchesin     2007-02-03 04:57:06 +0100" broke nv10 ctx switch by setting wrong PGRAPH_CTX_CONTROL reg
+
+commit ddb1715e06f6b5ab81ed0bc6667104bb9e7fcdee
+Merge: cd4c821 406a894
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Mar 30 12:56:34 2007 -0700
+
+    Merge branch 'crestline-qa', adding support for the 965GM chipset.
+
+commit cd4c82176f3f429e722ca3fac2abf231af479780
+Merge: 5d69640 3f70518
+Author: Eric Anholt <eric@anholt.net>
+Date:   Fri Mar 30 12:56:08 2007 -0700
+
+    Merge branch 'origin'
+
+commit 3f70518f0bcf36a1e2c82db962324dbdee106f67
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Mar 29 09:25:04 2007 +1000
+
+    drm/bo: avoid oops if the memory manager for this type isn't initialised
+
+commit bdabc8f9986bf4e190f8e4a24466dec551b08006
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Thu Mar 29 00:54:18 2007 +0200
+
+    nouveau: fix nv04 context switches.
+
+commit 81b811da376fed5363f25e82e5285455df3e8157
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Mar 27 18:01:31 2007 +1000
+
+    drm/i915: set the bo up at firstopen time not after DMA init
+    
+    This is required to use TTM to allocate the ring buffer.
+
+commit 72a1190f6d9acea5fb789bec706c842604954049
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Mar 27 17:59:30 2007 +1000
+
+    drm/ttm: make sure dev_mapping is set-up for the first opener of the drm
+    
+    This was causing an oops in my miniglx code to try and use a TTM-only setup.
+
+commit 406a894e529267177e6161c1713f2aa2293e7734
+Merge: ddc87d3 674cefd
+Author: Nian Wu <nian.wu@intel.com>
+Date:   Tue Mar 27 12:53:13 2007 +0800
+
+    Merge git://proxy01.pd.intel.com:9419/git/mesa/drm into crestline
+
+commit 674cefd4fe4b537a20a10edcb4ec5df55facca8e
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Mon Mar 26 19:43:48 2007 +1000
+
+    nouveau: move card initialisation into the drm
+    
+    The PGRAPH init for the various cards will need cleaning up at some point,
+    a lot of the values written there are per-context state left over from the
+    all the hardcoding done in the ddx.
+    
+    It's possible some cards get broken by this commit, let me know.
+    Tested on: NV5, NV18, NV28, NV35, NV40, NV4E
+
+commit ddc87d302526347f670e8b61e227c0eb05c15cde
+Merge: e7cd5a1 5ad43f4
+Author: Nian Wu <nian.wu@intel.com>
+Date:   Sun Mar 25 17:00:36 2007 +0800
+
+    Merge git://proxy01.pd.intel.com:9419/git/mesa/drm into crestline
+
+commit 5d69640a6ad15522fa37c3b232eb34acef955892
+Author: Eric Anholt <eric@anholt.net>
+Date:   Sat Mar 24 09:39:09 2007 -0700
+
+    Catch up to new interrupt API, and retire FreeBSD 4.x support here.
+
+commit 5ad43f46759ff1eb473c9101e7de0d46a4ed8177
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Mar 24 17:58:27 2007 +1100
+
+    vm: cleanup drm_vm.c along lines of cleanups queued for kernel
+
+commit e7cd5a1e2df29c1a06b74439faf750c6c5bb8e4a
+Merge: 0467ad4 4988fa4
+Author: Nian Wu <nian.wu@intel.com>
+Date:   Fri Mar 23 17:00:41 2007 +0800
+
+    Merge git://proxy01.pd.intel.com:9419/git/mesa/drm into crestline
+
+commit 4988fa48869098b18a3b60884550614818d60445
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Mar 23 14:45:00 2007 +1100
+
+    nouveau: rework nouveau_fifo_alloc() so the drm can create internal FIFOs
+
+commit 8d918b0b63b3142d92204253bfc954ed12aa98ed
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Mar 23 14:56:39 2007 +1100
+
+    cleanup more whitespace from ttm merge
+
+commit 39795501a8d4d5286fd21d36f8b7258f70fec989
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Mar 23 14:56:28 2007 +1100
+
+    drm: remove second spinlock init for tasklet lock
+
+commit 2bb9de96d5b58961ec2ff2e49e1e7260c8befa48
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Fri Mar 23 13:45:29 2007 +1100
+
+    nouveau: remove unused cruft
+
+commit 0467ad41188031073cbbad1139a916e2439af2f1
+Merge: fe4cc50 e222254
+Author: Nian Wu <nian.wu@intel.com>
+Date:   Wed Mar 21 17:00:43 2007 +0800
+
+    Merge git://proxy01.pd.intel.com:9419/git/mesa/drm into crestline
+
+commit e22225416a12c2beab7a5bcb866d214ee212cbc4
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Mar 21 17:57:47 2007 +1100
+
+    nouveau: support multiple channels per client (breaks drm interface)
+
+commit fe4cc50983bdaf51bf29ef041f65e0007f547844
+Merge: 8398b99 209870a
+Author: Nian Wu <nian.wu@intel.com>
+Date:   Tue Mar 20 13:11:02 2007 +0800
+
+    Merge git://proxy01.pd.intel.com:9419/git/mesa/drm into crestline
+
+commit 209870a88262a4a27b36e5cc97f3b1e7021dbefd
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Mar 20 10:13:58 2007 +1100
+
+    rename badly named define
+
+commit ef71b6230b50b81c1169d63f44d397ef0b77f94d
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Mar 19 11:40:52 2007 +0000
+
+    remove i830 reference
+
+commit cbe31d0dc7ead9e690faf8b68c481a39f0f01195
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Mar 19 11:40:05 2007 +0000
+
+    Remove old i830 kernel driver.
+
+commit 8398b99d8d146278adc13d6093811e53cd42c88a
+Merge: df73975 1e77e52
+Author: Nian Wu <nian.wu@intel.com>
+Date:   Mon Mar 19 17:00:31 2007 +0800
+
+    Merge git://proxy01.pd.intel.com:9419/git/mesa/drm into crestline
+
+commit 1e77e52755c9bb94c9230778845e6701b4d82b3a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Mar 19 09:20:04 2007 +1100
+
+    more return values fixup
+
+commit 46fac1708242756d280128888bda7218fb224603
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Mar 19 09:12:08 2007 +1100
+
+    fixup return values in drm ioctl
+
+commit 26aba875e1094dcb3ba88ac4c41e943ef46df2c8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Mar 19 08:56:24 2007 +1100
+
+    more whitespace issues
+
+commit c991f8e049d8f39cbbb74afb81097affdc110a29
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Mar 19 08:46:39 2007 +1100
+
+    cleanup ioctl expansion code
+
+commit a2e3bae8e23398b1db25ea79cf1086a1fa735946
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Mar 19 08:46:25 2007 +1100
+
+    oops missing else
+
+commit bbb6fc9307c42891120faeaca5c57cf7884866ad
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Mar 19 08:36:01 2007 +1100
+
+    make drm fops const from kernel
+
+commit 483f6a113d21b90821d091c4dae413703f9907e5
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Mar 19 08:32:25 2007 +1100
+
+    use ARRAY_SIZE
+
+commit 2d7ecb84221278a9b6a0328fb2f9a63ea6b8e2e2
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Mar 19 08:29:07 2007 +1100
+
+    more tab/space conversion
+
+commit 2463b03cb4d89cfcc5f2af6d6f09b28a491cb971
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Mar 19 08:23:43 2007 +1100
+
+    whitespace cleanup pending a kernel merge
+
+commit 6c4428d40c7531a28aa405e3db407461d20a0110
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Mar 19 08:09:21 2007 +1100
+
+    clean up more of inline functions agp_remap/drm_lookup_map
+
+commit 27197d7836b913976f6b75005d1c0c926774825a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Mar 18 21:45:07 2007 +1100
+
+    deinline agp_remap along lines of kernel
+
+commit c4808e206bcc5b3d3c0baa2e6e5130e67b78152b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Mar 18 21:42:48 2007 +1100
+
+    remove drm_lookup_map unused now
+
+commit df73975980e926e350bf36bf4bc8a07220f66164
+Merge: 80d0018 93f66af
+Author: Nian Wu <nian.wu@intel.com>
+Date:   Wed Mar 14 17:00:27 2007 +0800
+
+    Merge git://proxy01.pd.intel.com:9419/git/mesa/drm into crestline
+
+commit 93f66af76a18357f7e3bfcb52c241962287c5caa
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Tue Mar 13 14:48:01 2007 +0000
+
+    r300: Renamed the CACHE_CTLSTAT values to include UNKNOWN in the name; not
+    enough information is known about them to be sure as to what the values mean.
+
+commit 80d0018bc078d489f509152673c838be3c471854
+Merge: ab75d50 a90c285
+Author: Nian Wu <nian.wu@intel.com>
+Date:   Tue Mar 13 17:00:31 2007 +0800
+
+    Merge git://proxy01.pd.intel.com:9419/git/mesa/drm into crestline
+
+commit a90c2854a7a71953e03d36b1ff7db3e9c2babb99
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Tue Mar 13 06:25:04 2007 +0000
+
+    Add defines for the values written to R300_RB3D_ZCACHE_CTLSTAT.
+    
+    Note that just like the values written to R300_RB3D_DSTCACHE_CTLSTAT these
+    values are really unknown; ideally more reverse engineering should be done to
+    determine what these values mean and when they should be set.
+
+commit 90f8c691a57a79a6a9652b7d2a01c59acc127b3f
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Tue Mar 13 14:51:55 2007 +1100
+
+    nouveau: make sure cmdbuf object gets destroyed
+
+commit 1775202cf96c51018bf369b1b4d08023d622513c
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Tue Mar 13 14:18:03 2007 +1100
+
+    nouveau: associate all created objects with a channel + cleanups
+
+commit 7e2bbe295424adfcd455a4c4b42dd0342087615e
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Tue Mar 13 13:43:14 2007 +1100
+
+    nouveau: s/fifo/channel/
+
+commit 462a6ea4caadae0c68f6fe3e0343950ced2095cb
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Tue Mar 13 01:19:56 2007 +0000
+
+    Corrected values written to R300_RB3D_DSTCACHE_CTLSTAT to either
+    R300_RB3D_DSTCACHE_02 or R300_RB3D_DSTCACHE_0A, rather than hexadecimal values.
+
+commit 5667396e05723afc5a626e1ba0384e29a240dea3
+Author: Oliver McFadden <z3ro.geek@gmail.com>
+Date:   Tue Mar 13 00:50:05 2007 +0000
+
+    Guess another unknown register used for R300 pacification.
+
+commit ab75d50d6ca72615259e4fa857effeb6192c28a9
+Merge: b369724 0cd5c65
+Author: Nian Wu <nian.wu@intel.com>
+Date:   Mon Mar 12 09:03:40 2007 +0800
+
+    Merge git://proxy01.pd.intel.com:9419/git/mesa/drm into crestline
+
+commit 0cd5c650d1bb36e0ba6b40abd1da1459d1a767f0
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Sun Mar 11 14:02:40 2007 +0100
+
+    nouveau: PUT,GET, not 2xPUT
+
+commit b36972407747154abc0c5f2cdcf3b8ddbba4ff2e
+Merge: 0a85c9f 6ffe94f
+Author: Nian Wu <nian.wu@intel.com>
+Date:   Wed Mar 7 16:01:50 2007 -0500
+
+    Merge git://proxy01.pd.intel.com:9419/git/mesa/drm into crestline
+
+commit 6ffe94f008db22f959d4d397861b7439cb5404ba
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Mar 7 09:19:57 2007 +0100
+
+    Add via CX700.
+
+commit 0a85c9fa02608426a9a97f1d26e37c301330926b
+Merge: 6c48b8e 188a93c
+Author: Nian Wu <nian.wu@intel.com>
+Date:   Mon Mar 5 09:01:45 2007 -0500
+
+    Merge git://proxy01.pd.intel.com:9419/git/mesa/drm into crestline
+
+commit 188a93c9dfde31de4d86733fa46b50487d3a4ac0
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Mar 4 19:10:46 2007 +1100
+
+    radeon: make PCI GART aperture size variable, but making table size variable
+    
+    This is precursor to getting a TTM backend for this stuff, and also
+    allows the PCI table to be allocated at fb 0
+
+commit c9178c3d01f6f38a33f9624c620d290cb9036964
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Mar 4 18:13:34 2007 +1100
+
+    ati: make pcigart code able to handle variable size PCI GART aperture
+    
+    This code doesn't enable a variable aperture it just modifies the codebase
+    to allow me fix it up later
+
+commit 6c48b8e7ffd0af4d49855d7175e822f4af1f526f
+Merge: 0bbbb46 72caa48
+Author: Nian Wu <nian.wu@intel.com>
+Date:   Thu Mar 1 09:02:09 2007 -0500
+
+    Merge git://proxy01.pd.intel.com:9419/git/mesa/drm into crestline
+
+commit 0bbbb46650667c84a50f1a675a7a910d6ef7df4b
+Merge: 7c3aeaf 6a51da7
+Author: Nian Wu <nian.wu@intel.com>
+Date:   Wed Feb 28 09:00:12 2007 -0500
+
+    Merge git://proxy01.pd.intel.com:9419/git/mesa/drm into crestline
+
+commit 72caa48c82e4334d3292185dbadf758d2dd14c16
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Feb 28 15:14:08 2007 +1100
+
+    nouveau: intrusive drm interface changes
+    
+    graphics objects:
+    	- No longer takes flags/dmaobj parameters, requires some major changes
+    	  to the ddx to setup the object through the FIFO.  This change is
+    	  likely to cause breakages on some cards (tested on NV05,NV28,NV35,
+    	  NV40 and NV4E).
+    dma objects:
+    	- now takes a "class" parameter, not really used yet but we may need
+    	  it at some point.
+    	- parameters are checked, so clients can't randomly create DMA objects
+    	  pointing at whatever they feel like.
+    misc:
+    	- Added FB_SIZE/AGP_SIZE getparams
+    	- Read PFIFO_INTR in PFIFO irq handler, not PMC_INTR
+    	- Dump PGRAPH trap info on PGRAPH_INTR_NOTIFY if NSOURCE isn't
+    	  NOTIFICATION_PENDING.
+
+commit 7c3aeafe756f823e2cd6352ed1788aeec0000b95
+Merge: df2fc3e 80468e7
+Author: Nian Wu <nian@tinderbox.sh.intel.com>
+Date:   Tue Feb 27 14:42:26 2007 -0500
+
+    Merge git://proxy01.pd.intel.com:9419/git/mesa/drm into crestline
+
+commit 6a51da7325163151678c27dcbf51595092773d7a
+Author: Jay Estabrook <Jay.Estabrook@hp.com>
+Date:   Tue Feb 27 08:55:08 2007 +0000
+
+    Fix Alpha domain/bus issue
+
+commit 80468e75323a4353e29f010b61ee657851f8508c
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Feb 26 18:17:54 2007 +0100
+
+    Fix build for 2.6.21-rc1.
+    The vm subsystem of 2.6.21 is fully compatible with the buffer object
+    vm code.
+
+commit df2fc3ec62d6799a3266cfb18b1279a126892f44
+Merge: 80095ff 9d8ba2d
+Author: Nian Wu <nian@graphics.(none)>
+Date:   Sun Feb 25 17:06:13 2007 -0800
+
+    Merge git://proxy01.pd.intel.com:9419/git/mesa/drm into crestline
+
+commit 9d8ba2d0d479f53b996c0a0e366acfee52daab3b
+Author: Jakob Bornecrantz <wallbraker@gmail.com>
+Date:   Sun Feb 25 10:48:26 2007 +1100
+
+    drm: remove unnecessary NULL checks, and fix some indents..
+
+commit 2b7a9afa0977d4a8b21db3d436cec66e5a45764d
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Feb 22 17:04:20 2007 +0100
+
+    Some fencing cleanup.
+
+commit a253de2fcfa11abadd4697a9d89137adf3f35f78
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Feb 18 17:59:40 2007 +1100
+
+    drm: remove last usage of VM_OFFSET
+
+commit 6d8ed5aedda27ec238aac3d69fb9dfadc82bfa9a
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Feb 16 20:25:26 2007 +0100
+
+    Leftover files from previous commit.
+
+commit e0f53e59be4b96ed6eb28bd2df9f6a9d789d1734
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Feb 16 20:22:24 2007 +0100
+
+    Simple fence object sample driver for via, based on idling the GPU.
+    Buffer object driver for via.
+    Some changes to buffer object driver callbacks.
+    Improve fence flushing.
+
+commit 7766378d97323de375687285f2e125008b79045d
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Feb 15 12:10:33 2007 +0100
+
+    Initial support for fence object classes.
+    
+    (Fence objects belonging to different command submission mechanisms).
+
+commit 7803977aa9c3ca6360e6c22e77415cf17151cb9e
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Thu Feb 15 09:26:16 2007 +0100
+
+    Fix build against older kernels.
+
+commit a78f70faade8950ebb11ac8334c8c551f8e32b35
+Merge: 35eb12d 1345076
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Feb 14 15:33:40 2007 +0100
+
+    Merge branch 'ttm-vram-0-1-branch'
+
+commit 35eb12d8bf91e7a3b0702385fa47b648194803c4
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Feb 14 15:32:08 2007 +0100
+
+    Fix multiple spinlock unlocking
+
+commit 1345076c8f93936563cd5c15588b1d76d87969d3
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Feb 14 14:10:10 2007 +0100
+
+    Rename drm_ttm.h to drm_objects.h
+    Fix up some header incompatibilities in drm_fence.c caused by the previous
+    commit.
+
+commit 8ffc1844b083e36266ebc4d1a47f6e8fe619fd05
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Feb 14 14:05:40 2007 +0100
+
+    Move fence- and buffer-object related header stuff to drm_ttm.h
+
+commit 5c9a7b0f9499b94856916facd110059223d243dc
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Feb 14 13:31:35 2007 +0100
+
+    Remove an intel-specific hack and replace it with a fence driver callback.
+
+commit 04760563b88c8e94f3ae448710d1ab8b350c2e5f
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Feb 14 12:39:02 2007 +0100
+
+    Set the drm bus map type for each buffer object memory type.
+
+commit 7bcb62b45d18ab7b48ad3cb5d13aec3bc577678e
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Feb 14 10:49:37 2007 +0100
+
+    Rework buffer object vm code to use nopfn() for kernels >= 2.6.19.
+
+commit f524870184b29885c6207af21fcb45c47fbaa576
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Wed Feb 14 00:08:55 2007 +0100
+
+    nouveau: fix the build on big endian (thanks CyberFoxx)
+
+commit 59af900e4f62370457117b0659e3f28f89949499
+Author: B. Rathmann <koala_br@users.sourceforge.net>
+Date:   Wed Feb 14 00:07:31 2007 +0100
+
+    nouveau: fix memory initialization with multiple cards.
+
+commit 6b289db05496c5cc89c29817be16cb107a522722
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Feb 13 20:46:56 2007 +0100
+
+    Remove debug printout.
+
+commit e1460426b885ab656e3cda3fd3841d64260434c5
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Feb 11 20:33:57 2007 +0100
+
+    Bugzilla Bug #9457
+    
+    Add refcounting of user waiters to the DRM hardware lock, so that we can use the
+    DRM_LOCK_CONT flag more conservatively.
+    
+    Also add a kernel waiter refcount that if nonzero transfers the lock for the kernel context,
+    when it is released. This is useful when waiting for idle and can be used
+    for very simple fence object driver implementations for the new memory manager.
+    
+    It also resolves the AIGLX startup deadlock for the sis and the via drivers.
+    i810, i830 still require that the hardware lock is really taken so the deadlock remains
+    for those two. I'm not sure about ffb. Anyone familiar with that code?
+
+commit 9efdae317ce01cea95f75855b175243ae858fde4
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Feb 13 20:05:32 2007 +0100
+
+    More bugfixes.
+    Fixed memory, pinned buffers and unmappable memory now seems
+    fully functional.
+
+commit 80095ffe01efe79983c2124ecc99ce979d7ac6a9
+Author: Wang Zhenyu <zhenyu.z.wang@intel.com>
+Date:   Tue Feb 13 16:20:45 2007 +0800
+
+    i915: Add 965GM pci id update
+
+commit 2a2d72623306de01e620485169721c790167d2b1
+Merge: 3234b29 5bd13c5
+Author: Wang Zhenyu <zhenyu.z.wang@intel.com>
+Date:   Tue Feb 13 16:18:15 2007 +0800
+
+    Merge branch 'master' into crestline
+
+commit 3234b290585235e3ce7db99dfeb1714ccc1f6697
+Author: Wang Zhenyu <zhenyu.z.wang@intel.com>
+Date:   Tue Feb 13 16:17:38 2007 +0800
+
+    Revert "Add Intel 965GM chipset support"
+    
+    This would be updated with external pci id file change.
+
+commit 5bd13c5e15a14d34356f2363c55b1d4c7ca3269a
+Author: Adam Jackson <ajax@benzedrine.nwnk.net>
+Date:   Mon Feb 12 15:45:51 2007 -0500
+
+    Fix some outdated URLs, remove others.
+
+commit abc14ddfb5ad85bf2a5094597d829e6614e6c359
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Feb 12 21:40:42 2007 +0100
+
+    Update flags and comments.
+
+commit 398913dc0e632c71e3095a7d50dae911aed18884
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Feb 12 20:34:50 2007 +0100
+
+    Lindent.
+
+commit b0c5339ed69c6ff08b7817f870e895aae2ef04c7
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Feb 12 20:32:03 2007 +0100
+
+    More bugfixes.
+
+commit f02f83ee08a2bb87700544a9b67f475532e84af4
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Feb 12 17:47:57 2007 +0100
+
+    Cleanup and fix support for pinned buffers.
+
+commit 130c39be3cf9a5fd742aa6b00d0383e96bbbd7b7
+Author: Aapo Tahkola <aapo@aapo-desktop.(none)>
+Date:   Sun Feb 11 10:24:14 2007 +0200
+
+    Sync r300_reg.h from mesa driver. #10210
+
+commit 6a60b47d12b94d8c0a0feb00f165048be51153dd
+Author: Maarten Maathuis <madman2003@gmail.com>
+Date:   Sun Mar 11 12:13:58 2007 +1100
+
+    replace instance of SA_SHIRQ with IRQF_SHARED
+    
+    backwards compat added by airlied
+
+commit caf0c481a6b998fc5e4a78d6b95f9f390c0ecc28
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Sat Mar 10 17:13:54 2007 +0100
+
+    Bump version patchlevel so it can be tested for new functionality.
+
+commit 4f795a05f1f987491d85d5b9bdbf280451c7ed20
+Merge: 1b3a6d4 d734992
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Sat Mar 10 00:11:10 2007 +0100
+
+    Merge branch 'i915-pageflip'
+
+commit d734992e6a8a5757dc360ab6a5e7c80ebc03b1cd
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Mar 9 23:34:11 2007 +0100
+
+    i915: Only wait for pending flips before asynchronous flips again.
+
+commit 0741064df4b913189d26a184a7c5dcc7827152be
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Mar 9 16:39:13 2007 +0100
+
+    i915: Do not wait for pending flips on both pipes at the same time.
+    
+    The MI_WAIT_FOR_EVENT instruction does not support waiting for several events
+    at once, so this should fix the lockups with page flipping when both pipes are
+    enabled.
+
+commit 1b3a6d47751018c75e4333ee3ab8ba21dbd55bdd
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Mar 7 21:17:45 2007 +1100
+
+    nouveau: remove a hack that's not needed since the last interface change.
+
+commit 5bd0e52dbacb9f492433cbfa1e66c73faf67dcd5
+Author: Ben Skeggs <skeggsb@gmail.com>
+Date:   Wed Mar 7 21:00:55 2007 +1100
+
+    nouveau: ack PFIFO interrupts at PFIFO, not PMC.
+
+commit a33859184aa852777a50ea83f9dfa013f63f806f
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Feb 28 17:48:56 2007 +0100
+
+    i915: Eliminate dev_priv->current_page.
+    
+    Always use dev_priv->sarea_priv->pf_current_page directly. This allows clients
+    to modify it as well while they hold the HW lock, e.g. in order to sync pages
+    between pipes.
+
+commit 074e10b384c893a256fcf964676562792fdf93c8
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Feb 28 15:57:08 2007 +0100
+
+    i915: Only clean up page flipping when the last client goes away, not any one.
+
+commit 1cdc1b6fbabffc0dd4d3c1f8405d9372a45480a2
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Feb 28 15:23:19 2007 +0100
+
+    i915: Don't emit waits for pending flips before emitting synchronous flips.
+    
+    The assumption is that synchronous flips are not isolated usually, and waiting
+    for all of them could result in stalling the pipeline for long periods of time.
+    
+    Also use i915_emit_mi_flush() instead of an old-fashioned way to achieve the
+    same effect.
+
+commit fd0fed3f1e10d7ff1205a485621767b650c6f5ff
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Feb 28 12:33:56 2007 +0100
+
+    i915: Fix test for synchronous flip affecting both pipes.
+
+commit 1a0d890a42bee78177ad45d5e5956d2c3c4fcdc7
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Thu Feb 22 17:21:18 2007 +0100
+
+    i915: Add support for scheduled buffer swaps to be done as flips.
+    
+    Unfortunately, emitting asynchronous flips during vertical blank results in
+    tearing. So we have to wait for the previous vertical blank and emit a
+    synchronous flip.
+
+commit 5a40c043ccf965b1c3c74c80828090d2bc4438d4
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Thu Feb 22 17:19:30 2007 +0100
+
+    Add DRM_VBLANK_FLIP.
+    
+    Used to request that a scheduled buffer swap be done as a flip instead of a
+    blit.
+
+commit 6f89584e136211d7c4c69d88005f0e70393274f8
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Mon Feb 19 12:27:54 2007 +0100
+
+    i915: Improved page flipping support, including triple buffering.
+    
+    Pages are tracked independently on each pipe.
+    
+    Bump the minor version for 3D clients to know page flipping is usable, and
+    bump driver date.
+
+commit 34aa3393d04da1201815143c92a5bef83bf0d585
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Feb 2 17:28:43 2007 +0100
+
+    i915: Page flipping enhancements.
+    
+    Leave it to the client to wait for the flip to complete when necessary,
+    but wait for a previous flip to complete before emitting another one. This
+    should help avoid unnecessary stalling of the ring due to pending flips.
+    
+    Call i915_do_cleanup_pageflip() unconditionally in preclose.
+
+commit 078e4307266bcfdc7d4be1a70df65d35dda4d0d3
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Feb 2 17:23:42 2007 +0100
+
+    i915: Unify breadcrumb emission.
+
+commit 85ee2a8d044cd4d8de4894a794151af9471648e3
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sat Feb 10 12:06:36 2007 +0100
+
+    Various bugfixes.
+
+commit 53aee3122a1821b8ca24ed2bc5c1940cb0f2ff8e
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Feb 9 16:36:53 2007 +0100
+
+    I915 accelerated blit copy functional.
+    Fixed - to System memory copies are implemented by
+    flipping in a cache-coherent TTM,
+    blitting to it, and then flipping it out.
+
+commit 57df3980724d3da446c4576b3fadcd89c5da414e
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Feb 9 12:43:18 2007 +0100
+
+    Reinstate some LRU handling.
+
+commit d32b21e016c371b8676f42da5fc3aeded039a6c8
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Feb 9 00:11:53 2007 +0100
+
+    Remove some code that should have gone in
+    commit 6a49d9a8abd9f168211017c2d585d0d64e89c530
+
+commit 99acdaee482fc8a2fc6718317e2f546401e93739
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Feb 9 00:07:29 2007 +0100
+
+    Fix copyright statements.
+
+commit 6a49d9a8abd9f168211017c2d585d0d64e89c530
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Feb 9 00:02:02 2007 +0100
+
+    Fix evict_mutex locking range.
+    Implement unmappable buffers. (fault moves them to mappable when needed).
+    Various bugfixes.
+
+commit b2bcbf874b0f26ca0c490fb0453bef64ce6d9dd7
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Feb 8 21:28:33 2007 +0100
+
+    Add an accelerated buffer copy cleanup helper.
+    Export helper functions and make some important buffer-object functions non-static.
+    Add an i915 accelerated blit buffer move for pci memory buffers.
+
+commit a0ed808d05a7965366e329a6e8f4e538350b9c23
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Feb 8 19:06:39 2007 +0100
+
+    Don't create a ttm just to copy from.
+
+commit bf8f46d4c64eb5b66814223f7e5ddb8d8e7a555e
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Feb 8 18:59:02 2007 +0100
+
+    Fix mm_block leak.
+    Some other minor fixes.
+
+commit e4b2da440699f581a8779ea8cb9e99e4c903e6a7
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Feb 8 16:21:38 2007 +0100
+
+    A minor function interface change and some memcpy bugfixing.
+    
+    Hooray!! it sort of works with a fixed AGP area as faked VRAM.
+
+commit 1257907fa9a24de7aa95485e1b3ab509fdc4d4e6
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Feb 8 13:29:08 2007 +0100
+
+    Simplify external ttm page allocation.
+    Implement a memcpy fallback for copying between buffers.
+
+commit 09984ad77bdeca0e9d87b1fe2be1489205fda297
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Feb 8 11:55:24 2007 +0100
+
+    Update memory compatibility tests.
+    Now only pinned buffers are broken.
+
+commit 898aca1a66d5e685a01944f92d572641b7980c85
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Jan 23 08:34:25 2007 +0800
+
+    Warning fix: correct type of i915_mmio argument.
+
+commit ef9a9d3cd1fb6f7def03ddea69af3db8502d8eb9
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Jan 23 08:19:43 2007 +0800
+
+    Define __iomem for systems without it.
+
+commit 8918748058bc1aff64298855cde09512e2128367
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Jan 23 08:05:36 2007 +0800
+
+    Add chip family flags to i915 driver, and fix a missing '"' in mach64 ID list.
+
+commit c1fbd8a56653b91af57a408bbcf20a760a2bd8c8
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Feb 7 17:25:13 2007 +0100
+
+    Checkpoint commit.
+    Flag handling and memory type selection cleanup.
+    glxgears won't start.
+
+commit af24465b2eddfcc5296edc830ea5ed86065a4abd
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Feb 7 12:52:23 2007 +0100
+
+    Fix a stray unlock_kernel() in drm_vm.c
+    Add a file for memory move helpers, drm_bo_move.c
+    Implement generic memory move.
+    Cached, no_move and unmapped memory temporarily broken.
+
+commit 71b9e876f99db219fcbf4e3ab977b64b068cc2b4
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Feb 6 16:59:45 2007 +0100
+
+    Simplify pci map vs no pci map choice.
+
+commit 40ce53dfde11f84d7bf8db5db93fb73715b2e96e
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Feb 6 15:56:43 2007 +0100
+
+    Implement a drm_mem_reg_t substructure in the buffer object type.
+
+commit 609e3b037526021d20c7cc18b7fed1152206dc68
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Feb 6 14:20:33 2007 +0100
+
+    Implement a policy for selecting memory types.
+
+commit 17985f07d68322519919a7f629a6d2d9bf3916ed
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Tue Feb 6 01:17:32 2007 +0100
+
+    nouveau: more work on the nv04 context switch code.
+
+commit 2d962332dea5ed328ae45c6ef7298ea15216b635
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Mon Feb 5 16:13:32 2007 +0100
+
+    i915: Add copy-blit operation.
+
+commit 8c663b4e56b45d377a5a0fed4318a129fc1233fa
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Sat Feb 3 06:13:27 2007 +0100
+
+    nouveau: and of course, I was missing the last nv04 piece.
+
+commit ebf22aed9aa56e8ba00b5d3d1d2ca4600e5f1ec5
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Sat Feb 3 06:02:12 2007 +0100
+
+    nouveau: add missing nv04_graph.c symlink.
+
+commit 0c13657c33f282233b9f4bb397acb99c4cd65919
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Sat Feb 3 06:00:29 2007 +0100
+
+    nouveau: plugin the nv04 graph init function.
+
+commit 7ab9e7f36f5fb58652f915a0839a167c6206743a
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Sat Feb 3 05:56:42 2007 +0100
+
+    nouveau: cleanup the nv04 pgraph save/restore mechanism.
+
+commit d69902db3b1f82dd35f5bbb3327bdf836961850c
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Sat Feb 3 05:25:36 2007 +0100
+
+    nouveau: fix nv04 graph routines for new register names.
+
+commit 5a072f32c8f941d1ef301811881e8c89c8d8a5f1
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Sat Feb 3 04:57:06 2007 +0100
+
+    nouveau: rename registers to their proper names.
+
+commit e64dbef911cd739ba5c4d26493dfef6766ff83fd
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Mon Jan 29 04:03:59 2007 +0100
+
+    nouveau: add NV04 registers required for PGRAPH context switching.
+
+commit 55f7859a256814e3843790d88b275150f6161a26
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Fri Feb 2 23:01:03 2007 +0100
+
+    nouveau: nv ctx switch opps the size of array was wrong
+
+commit 63cf3b3da7ee039c98c793d31ea1aa586a069c43
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Fri Feb 2 20:08:33 2007 +0100
+
+    nouveau: nv10 ctx switch, some regs are nv17+ only
+
+commit 63f2abd721c40f1cddae555c79b4ab4c55aae006
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Feb 2 19:49:11 2007 +0100
+
+    Make also later kernels work with buffer object vm
+    and clean up some function names.
+
+commit c269d560e4d71448cfc9c2ea51eee3d5feafaad4
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Feb 2 14:47:44 2007 +0100
+
+    Make vm handle buffer objects instead of ttm objects.
+    Remove ttm objects.
+    Make vm aware of PCI memory type buffer objects.
+    (Only works for pre 2.6.16 kernels for now).
+
+commit 8c17edf23c04371e513b29ad14eca0d2bf32b812
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Thu Jan 18 10:34:59 2007 +0100
+
+    Make git ignore generated config.h.in.
+
+commit 6c04185857694b2293046b7ea1d4515404a740c3
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Feb 2 09:15:44 2007 +0100
+
+    via: Try to improve command-buffer chaining.
+    
+    Bump driver date and patchlevel.
+
+commit 70bba11bc7bbf0cfb028521c1b6676ed0962c317
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Feb 2 09:20:16 2007 +0100
+
+    Disable AGP DMA for chips with the new 3D engine.
+
+commit 77a6d8ae938e14051da3039414b64ff060746de6
+Author: Wang Zhenyu <zhenyu.z.wang@intel.com>
+Date:   Fri Feb 2 09:52:37 2007 +0800
+
+    Add Intel 965GM chipset support
+
+commit 9907b32c6790f6e9dad42cdce60e3b1b457233e5
+Author: Wang Zhenyu <zhenyu.z.wang@intel.com>
+Date:   Fri Feb 2 09:51:38 2007 +0800
+
+    Revert origin crestline pci id patch
+
+commit dd733dea3856e7ddbba7c4c3928ccaba909b4535
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Feb 1 13:19:05 2007 +0100
+
+    Fix missing ttm_open_vma call from previous commit.
+    Honour the ttm backend cant-use-aperture flag.
+
+commit 9677c5ecc6b97ef75b3141b671fb5cfbbf8a3fa8
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Feb 1 10:53:07 2007 +0100
+
+    Prepare for removal of the ttm_object type.
+
+commit 333c6af47a906461678b5a8b2af415936d30babc
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Feb 1 00:38:57 2007 +0100
+
+    Protect drm_mmap against disappearing maps.
+    
+    The map lists and hash tables are protected using dev->struct_mutex,
+    but drm_mmap strangely never locked this mutex.
+
+commit 3024f23c6551e219b0236041a8205bf1bc60ed94
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Jan 31 14:50:57 2007 +0100
+
+    memory manager: Make device driver aware of different memory types.
+    
+    Memory types are either fixed (on-card or pre-bound AGP) or not fixed
+    (dynamically bound) to an aperture. They also carry information about:
+    
+    1) Whether they can be mapped cached.
+    2) Whether they are at all mappable.
+    3) Whether they need an ioremap to be accessible from kernel space.
+    
+    In this way VRAM memory and, for example, pre-bound AGP appear
+    identical to the memory manager.
+    
+    This also makes support for unmappable VRAM simple to implement.
+
+commit 07fabc3fd8f00006e6117081f5183a826a6d2bbb
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Jan 31 11:41:44 2007 +0100
+
+    Make the utility runnable also for normal users.
+
+commit 36d50687dd88e0e42cf2adfd8ff81a160765e12a
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Jan 31 11:03:53 2007 +0100
+
+    Fix an error-path oops.
+
+commit d399fcf46f3b9eab0eb37aefc8e593f8a711d1ef
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Jan 30 16:20:23 2007 +0100
+
+    Add a buffer object transfer function.
+    Creates a placeholder for the old buffer contents
+    when it is transfered to / from static memory like VRAM.
+
+commit 0932269656825397b4b9e1bfdfc75254f544c96f
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Jan 30 14:42:27 2007 +0100
+
+    Indent according to xorg rules.
+
+commit 2bc925430b522eda596499561eba6fb61278ae8c
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Jan 30 14:41:02 2007 +0100
+
+    Add license header.
+
+commit 9968a21be11a3d64dac9daab768a11d729cdd77c
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Jan 30 14:38:49 2007 +0100
+
+    Add some relevant tests for the new buffer object interface.
+
+commit c01fe2cdd4a86f37c1a9bce344b41b6432dbe427
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Jan 30 12:56:51 2007 +0100
+
+    Add the ttmtest test utility.
+
+commit 9bbdc0fb10101586fb2bbddeb700e3241a993b1f
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Jan 30 12:33:46 2007 +0100
+
+    Clean up buffer object destruction somewhat.
+
+commit 9a654e71bda3530f6d18d115729af27cc15033de
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Jan 29 13:36:17 2007 +0100
+
+    Use pre-defined list_splice function.
+
+commit 45418bb1b1a0fac38f0dda7e29022bfb4cae3d03
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Jan 29 13:19:20 2007 +0100
+
+    s/buf/bo/ for consistency.
+
+commit 1e4c7d69f5b55f5299e5b0c220e4af1dfb21f69d
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Jan 29 13:11:55 2007 +0100
+
+    Some cleanup. A buffer object should only have one active memory type.
+
+commit ee4ac5c897faa499ad24c148b4f065bc770b529d
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Sun Jan 28 23:48:33 2007 +1100
+
+    nouveau: determine chipset type at startup, instead of every time we use it.
+
+commit c744bfde2de1713f0c15a185538a003d64c52d80
+Author: Matthieu Castet <castet.matthieu@free.fr>
+Date:   Fri Jan 26 21:57:44 2007 +0100
+
+    make works ctx switch on nv10.
+
+commit 9c03ca81e75c1c0749b719bb62ae56b99c9ff2ae
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Fri Jan 26 21:05:59 2007 +0100
+
+    nouveau: oops, wrong indexing in nv17 regs
+
+commit 5534c90ff39bf2bd41daca024d5b19889e78b1a0
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Fri Jan 26 19:54:35 2007 +0100
+
+    nouveau: read gpu type once
+
+commit 05d3ed472e6ab5cfa7741e523bdb3992591ecc7e
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Fri Jan 26 19:25:49 2007 +0100
+
+    nouveau: only save/restore nv17 regs on nv17,18 hw
+
+commit e7ba15a00369d85d3abeb42d95fe76dc40a544a8
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Fri Jan 26 19:24:34 2007 +0100
+
+    nouveau: add extra pgraph registers
+
+commit d4c9f135b56eee826f0d5eaf41f2088a861da590
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Fri Jan 26 18:10:31 2007 +0100
+
+    nouveau: add some nv10 pgraph defines
+
+commit 6d9ef1a960a76410e816425d8a53fb96cf2b871d
+Author: Patrice Mandin <pmandin@caramail.com>
+Date:   Thu Jan 25 23:06:48 2007 +0100
+
+    nouveau: simplify and fix BIG_ENDIAN flags
+
+commit 3886b7e62925a6eb7ca05e3ab23f3d4781439d06
+Merge: 9f5cda4 90ae39d
+Author: Nian Wu <nian.wu@intel.com>
+Date:   Thu Jan 25 13:30:46 2007 -0800
+
+    Merge branch 'master' into crestline
+
+commit 582637641abbadc75795ac7e0671e1a5e3b41880
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Jan 25 14:26:58 2007 +0100
+
+    Remove a scary error printed when we were leaking memory caches.
+    
+    We don't use memory caches anymore...
+    
+    Fix memory accounting initialization to only use low or DMA32 memory.
+
+commit 90ae39d2f07058dd128d2fb19ffad712ee75c9a0
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Thu Jan 25 11:11:01 2007 +1100
+
+    nouveau: nv4c default context
+
+commit aa7266385e0af26b9225f7dba0643867ac4e231a
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Thu Jan 25 08:16:23 2007 +1100
+
+    nouveau: always print nsource/nstatus regs on PGRAPH errors
+
+commit 7d4e6b1445d4c734f1dd6070ffa041c42e649e91
+Author: Zou Nan hai <nanhai.zou@intel.com>
+Date:   Wed Jan 24 16:33:21 2007 +0800
+
+    vblank interrupt fix
+
+commit 19ba0749384994662e0d6167c70cc6fbd78eb0ff
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Fri Jan 19 15:41:51 2007 +1100
+
+    nouveau: fix getparam from 32-bit client on 64-bit kernel
+
+commit 4291df69bd03f71cbbe91b7b1ad82b580e1d362a
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Sun Jan 14 10:42:58 2007 +1100
+
+    nouveau: re-add 6150 Go pciid (0x0244)
+
+commit a40de938fa5cf98f01d569e39fe3931d545c357a
+Author: Jeremy Kolb <jkolb@brandeis.edu>
+Date:   Thu Jan 18 21:39:36 2007 -0500
+
+    nouveau: cleanup nv30_graph.c
+
+commit ab72a7714e4e9b87cc93887d1978f1c533255566
+Author: Jeremy Kolb <jkolb@brandeis.edu>
+Date:   Thu Jan 18 21:39:09 2007 -0500
+
+    nouveau: Remove write to CTX_SIZE. This gives us proper nv3x PGRAPH switching.
+
+commit bd0418cb01232d7529ecb0f515aa9b6d6804a3ac
+Author: Dave Jones <davej@redhat.com>
+Date:   Thu Jan 18 01:28:49 2007 -0500
+
+    add missing quadro id
+
+commit 78a4f5c1bc37cbc581191f47b8b19250bfb86c1e
+Author: Jeremy Kolb <jkolb@brandeis.edu>
+Date:   Wed Jan 17 08:46:59 2007 -0500
+
+    nouveau: Try to get nv35 pgraph switching working. Doesn't quite yet.
+    
+    Hook into nv20 pgraph switching functions (they're identical for nv3x).
+    Actually call nv30_pgraph_context_init so the ctx_table is allocated.
+    
+    Thanks to Carlos Martin for the help.
+
+commit 9f5cda44dbf5b8f3c7cc00b8a58eee2690a864e6
+Merge: 6ac742d fdbc34f
+Author: Xiang, Haihao <haihao.xiang@intel.com>
+Date:   Tue Jan 16 09:49:20 2007 +0800
+
+    Merge branch 'master' into crestline
+
+commit fdbc34fab03eba8d257e14c6d557ffed5fa32c2d
+Author: Matthieu Castet <mat@mat-pc.(none)>
+Date:   Sun Jan 14 20:04:20 2007 +0100
+
+    nouveau: opps nv20 ctx ramin size was wrong
+
+commit 06cd15559525cd023fe347fcb8e918c6418b938e
+Author: Matthieu Castet <mat@mat-pc.(none)>
+Date:   Sat Jan 13 23:30:43 2007 +0100
+
+    nouveau: opps restored the wrong channel
+
+commit f04347f371c6c9c3a47550c6b7d26b7bd5629c85
+Author: Matthieu Castet <mat@mat-pc.(none)>
+Date:   Sat Jan 13 23:19:41 2007 +0100
+
+    nouveau: nv20 graph ctx switch.
+    
+    Untested...
+
+commit cd5f543b2f3d6dd4c45f676c6fb9848b4d8a1c33
+Author: Matthieu Castet <mat@mat-pc.(none)>
+Date:   Sat Jan 13 21:43:47 2007 +0100
+
+    nouveau: first step to make graph ctx works
+    
+    It is still not working, but now we could use some 3D commands
+    without needed to run nvidia blob before.
+
+commit 4ae64a1b583be3ef13338e8029e7e9efe21f2c2f
+Author: Matthieu Castet <mat@mat-pc.(none)>
+Date:   Sat Jan 13 21:41:33 2007 +0100
+
+    nouveau: add and indent pgraph regs
+
+commit 1967aa82cfc18c422360ef544b66e316d98f53a1
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Sat Jan 13 12:32:45 2007 +0100
+
+    nouveau: Oops, fix the nv04 RAMFC_DMA_FETCH value.
+
+commit 69a98d89d5204ec224703bddc3582bb854716a20
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jan 13 08:43:15 2007 +1100
+
+    nouveau: add missing symlink
+
+commit 1bad7e0d02ff82227c34b853e06ca25a80193347
+Author: Matthieu Castet <mat@mat-pc.(none)>
+Date:   Fri Jan 12 20:30:14 2007 +0100
+
+    nouveau : remove useless init : we clear RAMIN before
+
+commit 9d3deddc4a8f12b9493858a529570e77f8362ad1
+Author: Haihao Xiang <haihao.xiang@intel.com>
+Date:   Fri Jan 12 11:24:14 2007 -0800
+
+    Delay for a usec while spinning waiting for ring buffer space.
+    
+    This means the loop will wait up to ~10ms for ring buffer space to become
+    available, rather than just however long it takes to check the space 10000
+    times.  This matches other drivers' behavior when waiting for ring buffer/fifo
+    space.
+
+commit 4297a83b48664b2b6a6dc0a72a4d11b043f34778
+Author: Jeremy Kolb <jkolb@brandeis.edu>
+Date:   Fri Jan 12 00:13:05 2007 -0500
+
+    nouveau: get nv30 context switching to work.
+    
+    * Pulled in some registers from nv10reg.h.  Needed for context switching.
+    * Filled in nv30 graphics context (based on nv40_graph.c).
+    * Figure out nv30 context table, set up on context creation.  Allows the cards automatic switching to work.
+
+commit 8ff026723cf170034173052a58c650c8c1f28c0b
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Thu Jan 11 09:02:07 2007 +0100
+
+    radeon: Fix u32 overflows when determining AGP base address in card space.
+    
+    The overflows could lead to the AGP aperture overlapping the framebuffer area
+    in the card's address space when the latter is located at the very end of the
+    32 bit address space, which would result in a freeze on X server startup,
+    probably because the card read commands from the framebuffer instead of from
+    AGP.
+    
+    See http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=392915 .
+
+commit 125f3ff36796c8d28c29e960247fdd42d4cd877c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jan 10 15:19:47 2007 +1100
+
+    Revert "nouveau: Fill in context_init for nv10-nv3x."
+    
+    This reverts ac076cb9aff976e8fae567cfa82a898bfc2712e8 commit.
+    
+    Well it didn't do anything interesting...
+
+commit ac076cb9aff976e8fae567cfa82a898bfc2712e8
+Author: Jeremy Kolb jkolb@brandeis.edu <jkolb@brandeis.edu>
+Date:   Tue Jan 9 23:12:37 2007 -0500
+
+    nouveau: Fill in context_init for nv10-nv3x.
+    
+    Fill in the context with the values from PFIFO_CACH1. This should work from nv10 through the nv30 series.
+
+commit ec12209c763d0ea258b3e1e567bf097f9e918265
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Wed Jan 10 04:42:09 2007 +0100
+
+    nouveau: Don't use DRIVER_USE_MTRR, we already setup our own mtrr over vram.
+
+commit f6ba3b2603c58b9f5624fd4a97511b2913ec7866
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jan 9 15:51:29 2007 +1100
+
+    ttm: make ttm alloc/free into alloc_pages/free_pages
+    
+    Add a vmalloc flag to the page flags
+
+commit a70aedd5fc78a162aeb681d47a75edcc831ed3f3
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jan 9 13:38:36 2007 +1100
+
+    novueau: try resource 3 if resource 2 is 0 length
+    
+    This happens on my NV43 PPC
+
+commit deba42ef32da0c2d0977cdeb639420e1ac1b7f2b
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Mon Jan 8 20:55:57 2007 +0100
+
+    nouveau: fix nv4a context size.
+
+commit 22821cf01d6509b7c074e42ae0ef9567e48e97d2
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 8 22:26:35 2007 +1100
+
+    add export symbol for memory manager
+
+commit 6ac742d95dfd717ae730035da34624682c652b7b
+Author: Keith Packard <keithp@neko.keithp.com>
+Date:   Sun Jan 7 23:05:39 2007 -0800
+
+    Align whitespace with master
+
+commit c5aaf7648df82665851c9e67f5509b427ca34c8e
+Merge: 63c0f39 d0080d7
+Author: Keith Packard <keithp@neko.keithp.com>
+Date:   Sun Jan 7 22:37:40 2007 -0800
+
+    Merge branch 'master' into crestline
+    
+    Conflicts:
+    
+    	shared-core/i915_drm.h
+    
+    Whitespace change only
+
+commit d0080d71b9f3df0d4f743324b7e8f1ce580bdcaf
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Mon Jan 8 05:02:40 2007 +0100
+
+    nouveau: nv4a context support.
+
+commit 6eaa1272b4159a547d6da21f14cbcc5b5d0f600c
+Merge: 1f0f7d7 5bf60c9
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Mon Jan 8 03:50:34 2007 +0100
+
+    Merge branch 'master' of git+ssh://marcheu@git.freedesktop.org/git/mesa/drm
+
+commit 5bf60c9d6c2e04a65085a0a332de24b06043fcb8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 8 13:09:12 2007 +1100
+
+    i830: complete fix for i830 maps
+
+commit 26bf6d9b5b5be19973f6da4f5ed292c7f83de099
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Mon Jan 8 12:50:44 2007 +1100
+
+    nouveau: oops
+
+commit 128d87a3dd26b1c633dac3fe0f0d5e9190f11d53
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Mon Jan 8 12:47:22 2007 +1100
+
+    nouveau: nv43 context stuff
+
+commit b147c3926352e4dcb9dbf53b8b12baae8ce34254
+Author: Christoph Hellwig <hch@infradead.org>
+Date:   Mon Jan 8 10:55:49 2007 +1100
+
+    drm: remove drm_follow_page, and drm_ioremap and ioremapfree
+    
+    This comes from the Re: [patch] paravirt: isolate module ops on lkml
+    It needs some testing, please report any regressions caused.
+    
+    Signed-off-by: Dave Airlie <airlied@linux.ie>
+
+commit fe5770b89e57c669a946dea86a58b17387bf9cf4
+Author: Dave Airlie <airlied@i855davea.australia.shufflemaster.com>
+Date:   Mon Jan 8 22:27:11 2007 +1100
+
+    fixup i810/i830 to use drm_core_ioremap instead of drm_ioremap
+
+commit 1f0f7d7a180af088d6c79d55da04402f0eff0416
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Mon Jan 8 00:11:39 2007 +0100
+
+    nouveau: fix a stupid bug from me.
+
+commit faa46122993bc5970b3d67933bd81d863a3c4762
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Mon Jan 8 00:37:39 2007 +1100
+
+    nouveau: avoid allocating vram that's used as instance memory.
+
+commit cd3711455e7e5e69448b4805bddc2adcd480c6d5
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Sun Jan 7 23:56:45 2007 +1100
+
+    nouveau: map pci resource 2 on >=nv40
+
+commit 31daf669624c35bdf686aaeea7d7844d0cb5141a
+Author: Keith Packard <keithp@mandolin.keithp.com>
+Date:   Sat Jan 6 17:40:50 2007 -0800
+
+    Revert i915 drm driver name to i915; miniglx doesn't work otherwise
+    
+    Yes, this driver supports the new memory manager, that is indicated by the
+    version number being >= 1.7.
+
+commit 2851c9f5c6c6847151d011d68ec00897ac9d9634
+Author: Wang Zhenyu <zhenyu.z.wang@intel.com>
+Date:   Mon Dec 4 15:48:04 2006 +0800
+
+    Bump i915 minor for ARB_OC ioctl
+
+commit f7180349fde6947e229ecde17215c2984e6e883b
+Author: Zou Nan hai <nanhai.zou@intel.com>
+Date:   Mon Dec 4 15:48:04 2006 +0800
+
+    i915: ARB_Occlusion_query(MMIO ioctl) support.
+    
+    This adds a new ioctl for passing counter information from the chip back to
+    applications, these counters include the data needed to perform OC.
+
+commit 1f1714cf3dd24ea4109722ea2b47bcf4725f27ea
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Sat Jan 6 18:05:21 2007 +1100
+
+    nouveau: get c51 doing glxgears without the binary driver's help.
+
+commit dbb0d979cc6c4e1f444cdbbf6dc3571c3818ea39
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Sat Jan 6 17:50:00 2007 +1100
+
+    nouveau: Use PMC_BOOT_0 to determine which ctx_voodoo to load.
+
+commit 528ab8ce4038397c043b05a46f95c666a985f7a3
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Fri Jan 5 20:59:45 2007 +0100
+
+    nouveau: oops, we don't need OS_HAS_MTRR actually.
+
+commit d99c7c27e2df1a7093f3d2f5c7d196f58bfe1647
+Merge: 025f281 0f95ddc
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Fri Jan 5 20:50:46 2007 +0100
+
+    Merge branch 'master' of git+ssh://marcheu@git.freedesktop.org/git/mesa/drm
+
+commit 025f281bbfe81960e8c60234f5eafd37cbe2d881
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Fri Jan 5 20:49:34 2007 +0100
+
+    nouveau: Add an mtrr over the whole FB
+
+commit 0f95ddc42892abdbc1f111b6b105f2ef4ed2b05f
+Merge: 9d167f1 f80659b
+Author: Matthieu Castet <mat@mat-pc.(none)>
+Date:   Fri Jan 5 19:41:12 2007 +0100
+
+    Merge branch 'master' of git+ssh://matc@git.freedesktop.org/git/mesa/drm/
+
+commit 9d167f1f4bc89b784248d22bc95dfc15a72d0244
+Author: Matthieu Castet <mat@mat-pc.(none)>
+Date:   Fri Jan 5 19:40:11 2007 +0100
+
+    Add basic pgraph context for nv10.
+    It only fake a context switch : pgraph state are not save/restored.
+
+commit f80659bc2967dbed4aed0d44a550bb4a9e4569b5
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Fri Jan 5 19:37:06 2007 +0100
+
+    Cleanup the nv04 fifo code a bit.
+
+commit 4fe2858f53c6ea542cd81961ebdad118acfc8f32
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Tue Jan 2 10:05:48 2007 +0100
+
+    i915: Fix a DRM_ERROR that should be DRM_DEBUG.
+    
+    It would clutter up the kernel output in a situation which is legitimate before
+    X.org 7.2 and handled correctly by the 3D driver.
+
+commit 176b62991ad59e9a03a8416db8945d5e37ab0406
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Tue Jan 2 10:03:56 2007 +0100
+
+    Make git ignore Emacs style backup files and cscope files.
+
+commit 972074b5d618575d9291de50ffe12f2f4ca01a20
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Tue Jan 2 10:02:44 2007 +0100
+
+    linux-core: Make git ignore generated module symbol version files.
+
+commit 91855bb2540bbb824d4d5d437f3eb2d5d06c11ba
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Jan 2 16:35:00 2007 +1100
+
+    nouveau: oops, forgot to free RAMIN..
+
+commit 861017e6d50f5724c179717f995322c498ee15db
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Jan 2 15:56:10 2007 +1100
+
+    nouveau: Hookup nv40_graph_init.
+    
+    Now I can get 3D + working grctx switching on my NV40 without
+    the binary driver initialising the card first.  However, this
+    change also breaks 3D on my C51 even *with* the binary driver's
+    help.  So, it's likely that the weird voodoo is card-specific.
+
+commit 41da9fd2e59b2af295c8f345586030e5a70d7a83
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Jan 2 15:08:04 2007 +1100
+
+    nouveau: Hook up grctx code for NV4x.
+    
+    This is enough to get grctx switching going on my NV40 and C51 after
+    the binary driver has initialised the card first.
+    
+    Bumping the drm patchlevel because the ddx needs some modifications to
+    have NV4x work at all with these changes.
+
+commit 0e0d954584ba95656663efa3daf6e191e521040b
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Jan 2 14:52:43 2007 +1100
+
+    nouveau: Add nv40-specific PGRAPH code, not hooked up yet.
+
+commit 2c3bc69ba2b60e4f89b93332fa8da758170b2285
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Jan 2 14:41:34 2007 +1100
+
+    nouveau: Only clobber PFIFO if no channels are already alloc'd
+    
+    With this change the GPU is responsible for doing the channel switch
+    itself.  This is needed for the upcoming NV4x PGRAPH context work as
+    we don't yet know enough to manually swap PGRAPH contexts.
+
+commit 2dcbf6a59918761cffb27e027b1235c551ed03dd
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 1 11:30:38 2007 +1100
+
+    make build against 2.6.20 hopefully
+
+commit 87faf62fae711c8337793abaf0f529f2660245db
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 1 11:22:35 2007 +1100
+
+    fixup permission along line of kernel
+
+commit a16a8a47cdb04e29f5d8ed05403f21714f7aaf9d
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Dec 28 22:17:08 2006 +0100
+
+    Add some new via chipsets.
+    Disable 3D functionality and AGP DMA for chipsets with the DX9 3D engine.
+
+commit 7859bd61d3d5b5dd69ce978adeae91eaa1e533aa
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Dec 27 19:46:46 2006 +0100
+
+    Leftover from previous commit.
+
+commit 2980ec22a165bc71add7464e28a2e56b5c971d20
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Dec 27 19:38:33 2006 +0100
+
+    Allow for non-power-of-two texture pitch alignment.
+
+commit 975136d6e5adc6b6a03719499cf39fbd3f67dc90
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Dec 27 15:32:09 2006 +0100
+
+    Proper allocation of AGP pages for ttms.
+
+commit c38ede06670b47620bbce33c5a4affd063769475
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Wed Dec 27 01:58:57 2006 +1100
+
+    nouveau: return the *actual* type of memory alloc'd to userspace
+
+commit 9e019df75764a7ce79266ceb058307336ddf00ef
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Dec 26 23:30:26 2006 +1100
+
+    nouveau: Alloc cmdbuf for each channel individually
+
+commit 72cb361c5cbf4f0aeae25312369087b8a234bc5a
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Dec 21 12:05:49 2006 +0100
+
+    Bug #9120.
+    Require at least agpgart version 0.102 for the AGP TTM backend.
+    This should hopefully avoid crashes when the wrong agpgart
+    driver is installed.
+
+commit ae5822561370b34808603820a063fc6e8b17dbe2
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Dec 21 10:40:25 2006 +0100
+
+    Improve memory manager accounting printout formatting.
+
+commit a467d248293f9384092ab39a9214fbf725d21927
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Dec 21 10:32:13 2006 +0100
+
+    Fix buggy aligned allocations.
+
+commit b7586ab539e5f8d16b473543ab829d0a4441f87c
+Author: Ben Skeggs <darktama@iinet.com.au>
+Date:   Thu Dec 21 17:43:48 2006 +1100
+
+    nouveau: save/restore endianness flag on FIFO switch
+    
+    This makes my G5 survive glxinfo and nouveau_demo - airlied
+
+commit 9acd4a13f2355e8f550669702a5c6db16cc14b0f
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Dec 20 19:33:50 2006 +0100
+
+    Remove the stupid root_node field from the core memory manager.
+
+commit 672593f611df484af89e425ff5f1ea0ea074f2bb
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Dec 20 14:40:36 2006 +0100
+
+    Replace vmalloc_32.
+    
+    The vmalloc_32 function together with the memset to clear
+    the new pages are replaced with a vmalloc_user.
+    
+    A pre-2.6.18 compat vmalloc_user is added.
+    
+    Please replace any breakage on machines with > 1GB of memory.
+
+commit 3b47b27558915a3a28591209e324b977e09d7c03
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Dec 20 13:04:21 2006 +0100
+
+    Some via PCI posting flushes.
+
+commit e5c4a26a29a9af301cb8b0aebbba84e70f995b83
+Merge: 3b7508d dc1b68a
+Author: Dave Airlie <airlied@optimus.localdomain>
+Date:   Wed Dec 20 10:30:16 2006 +1100
+
+    Merge branch 'nouveau-1'
+
+commit dc1b68aacbfc8d53d78f7388e0e52da1747a1f71
+Author: Dave Airlie <airlied@optimus.localdomain>
+Date:   Wed Dec 20 10:29:43 2006 +1100
+
+    fixup symlinks via Makefile
+
+commit 744f9ac9c74f1571b54e08f9eaaaff22dd3230c8
+Author: Dave Airlie <airlied@optimus.localdomain>
+Date:   Wed Dec 20 10:28:55 2006 +1100
+
+    add nouveau symlinks via git
+
+commit 3b7508d1bf2c78f19d882beffa6d8b4f58bd19a8
+Author: Dave Airlie <airlied@optimus.localdomain>
+Date:   Wed Dec 20 10:22:43 2006 +1100
+
+    remove unused via/sis files from lk build
+
+commit 3b8e6ccd2573a027aa30c10d08253de1756540c2
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Dec 19 23:45:59 2006 +0100
+
+    Security fix. Zero pages before they are handed to user space.
+    
+    TTM pages were not cleared when allocated and handed to user space.
+    Sensitive information may leak.
+
+commit 72b5d1507a7e9c18fc0141c13819ea01c0813924
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Dec 19 23:23:17 2006 +0100
+
+    Security fix. Zero pages before they are handed to user space.
+    
+    Shared memory areas were not cleared when they are allocated and
+    handed to user space. Sensitive information may leak.
+
+commit 81251bf78f06dc26e26c3edb09639850371fe540
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Dec 19 23:14:11 2006 +0100
+
+    Reclaim buffers locked fixup.
+    
+    Avoid calling reclaim_buffers_locked if we don't have a
+    hardware lock.
+    
+    Improve reclaim_buffers_locked deadlock error formatting.
+
+commit 737c73d1a081823f5c95a6fd68173b56a304eae5
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Dec 19 22:10:34 2006 +1100
+
+    add kcalloc compat for before 2.6.10
+
+commit bc4c83573111361e9817d6a7414bd84f73ca7cce
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Dec 19 21:51:30 2006 +1100
+
+    remove do munmap 4 args
+
+commit 7458909beae274198ca2a29b510a808ce2feca0a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Dec 19 21:48:18 2006 +1100
+
+    fixup i915 return values from kernel
+
+commit 98799f862e58e02ef07f0d0db0863e7c91c7e5b0
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Dec 19 21:48:06 2006 +1100
+
+    fixup i915 defines in create script
+
+commit 6333bfdb58b300494b2ec6f7b5a3ea5b392a210a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Dec 19 21:37:50 2006 +1100
+
+    fixup inclusion of agp.h
+
+commit aa07b2ab0e1c8a24fb1694ca3b13eb9ea4618fbe
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Dec 19 21:33:47 2006 +1100
+
+    remove drm pci from 2.5 days
+
+commit ff4b5ccdb4ef985c29e3f0d36e1c5094d02733e2
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Dec 19 21:30:27 2006 +1100
+
+    remove legacy taskqueue code
+
+commit 86ff2aeb9bfea357d5748b3587ab224e813b37b6
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Dec 19 20:29:03 2006 +1100
+
+    drm: remove all 2.4 support for drm development tree.
+    
+    Bye bye 2.4 you served us well..
+
+commit 656c3a3737180d507bec352d56fbd9ef8b8a4feb
+Author: Dave Airlie <airlied@optimus.localdomain>
+Date:   Tue Dec 19 18:27:20 2006 +1100
+
+    [SPARC]: Respect vm_page_prot in io_remap_page_range().
+    
+        Make sure the callers do a pgprot_noncached() on
+        vma->vm_page_prot.
+    
+        Pointed out by Hugh Dickens.
+    
+    Signed-off-by: David S. Miller <davem@davemloft.net>
+
+commit 0ab48b0841de138f4a428a6d32d3e4d3e552db53
+Author: Dave Airlie <airlied@optimus.localdomain>
+Date:   Tue Dec 19 18:24:44 2006 +1100
+
+    [PATCH] mm: incorrect VM_FAULT_OOM returns from drivers
+    
+        Some drivers are returning OOM when it is not in response to a memory
+        shortage.
+    
+    Signed-off-by: Nick Piggin <npiggin@suse.de>
+
+commit 303307d25484f3f7179e6967697d28369a73dca9
+Author: Dave Airlie <airlied@optimus.localdomain>
+Date:   Tue Dec 19 18:03:20 2006 +1100
+
+    fix irq args compatiblity with pre 2.6.19
+
+commit 1a3316f667963fca2f9a3bffcbee39cb01bf5f09
+Author: Dave Airlie <airlied@optimus.localdomain>
+Date:   Tue Dec 19 17:57:16 2006 +1100
+
+    use unifdef to clean up some code
+
+commit 07635f26a9310d2a4f0f65c5e773e6cfa92346bc
+Author: Dave Airlie <airlied@optimus.localdomain>
+Date:   Tue Dec 19 17:57:01 2006 +1100
+
+    fix comment in r128
+
+commit c52dea9a7d9ea978307441842b02c09c97720467
+Author: Dave Airlie <airlied@optimus.localdomain>
+Date:   Tue Dec 19 17:46:10 2006 +1100
+
+    fix some sizes in sis_drv.h
+
+commit 2253e334cc6f8cf7dff6dbe398dd9ecbbcb4c5fe
+Author: Dave Airlie <airlied@optimus.localdomain>
+Date:   Tue Dec 19 17:42:45 2006 +1100
+
+    make sizeof match the copy struct
+
+commit 8cc82c50332d62d1c58bbc4f184b1ab4ecfa9efc
+Author: Dave Airlie <airlied@optimus.localdomain>
+Date:   Tue Dec 19 17:22:04 2006 +1100
+
+    remove inline from large function
+
+commit 13659357adeae90dbeb1b3284f08667f6edd4cad
+Author: Dave Airlie <airlied@optimus.localdomain>
+Date:   Tue Dec 19 17:03:42 2006 +1100
+
+    make a savage function static from kernel
+
+commit 6c8712ba8a3c3c2c2fd9dd1ff5ab71e30ecdf50a
+Author: Dave Airlie <airlied@optimus.localdomain>
+Date:   Tue Dec 19 16:58:48 2006 +1100
+
+    use spin_lock_init in via dmablit
+
+commit cb280ad3c0b048fe5b024439af70e9fcc8d04269
+Author: Dave Airlie <airlied@optimus.localdomain>
+Date:   Tue Dec 19 16:58:27 2006 +1100
+
+    fix missing DRM_ERR from kernel
+
+commit 696f2bfbd1b6da73893bce082308a43878e6ab75
+Author: Dave Airlie <airlied@optimus.localdomain>
+Date:   Tue Dec 19 16:44:57 2006 +1100
+
+    Revert "drm: ioremap balanced with iounmap for drivers/char/drm"
+    
+    This reverts cc22cd8bde39f3e4be8ca9f726a773b0270ebdbc commit.
+    
+    I put this patch incorrectly in .. will fix now
+
+commit cc22cd8bde39f3e4be8ca9f726a773b0270ebdbc
+Author: Dave Airlie <airlied@optimus.localdomain>
+Date:   Tue Dec 19 16:39:13 2006 +1100
+
+    drm: ioremap balanced with iounmap for drivers/char/drm
+    
+    ioremap must be balanced by an iounmap and failing to do so can result
+    in a memory leak.
+    
+    Tested (compilation only) to make sure the files are compiling without
+    any warning/error due to new changes
+    
+    Signed-off-by: Amol Lad <amol@verismonetworks.com>
+    Signed-off-by: Dave Airlie <airlied@linux.ie>
+
+commit b3c88d31e1e83458c6125a02b80f2e57ebcf750d
+Author: Michael Buesch <mb@bu3sch.de>
+Date:   Fri Dec 15 14:24:24 2006 +0100
+
+    drm/linux-core: drmP.h compilation fix
+    
+    I need the following patch to fix compilation of
+    latest drm/linux-core on my ppc64 machine.
+    
+    /home/mb/develop/git/drm/linux-core/savage_bci.c: In function ‘savage_driver_firstopen’:
+    /home/mb/develop/git/drm/linux-core/savage_bci.c:587: error: ‘DRM_MTRR_WC’ undeclared (first use in this function)
+    /home/mb/develop/git/drm/linux-core/savage_bci.c:587: error: (Each undeclared identifier is reported only once
+    /home/mb/develop/git/drm/linux-core/savage_bci.c:587: error: for each function it appears in.)
+    /home/mb/develop/git/drm/linux-core/savage_bci.c: In function ‘savage_driver_lastclose’:
+    /home/mb/develop/git/drm/linux-core/savage_bci.c:664: error: ‘DRM_MTRR_WC’ undeclared (first use in this function)
+    
+    I looked at in-kernel drmP.h and it actually
+    has the same fix in it.
+    
+    Signed-off-by: Michael Buesch <mb@bu3sch.de>
+
+commit 38ed67196f4ba891568c5ff66e67ced341696eb9
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Dec 15 12:37:24 2006 +0100
+
+    Remove the memory caches for fence objects and memory manager nodes,
+    since the support for memory caches has gone from 2.6.20.
+
+commit aefc7a34431a8f1540b261e23d8b8d05d824b60a
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Thu Dec 14 19:31:56 2006 +0100
+
+    Unify radeon offset checking.
+    
+    Replace r300_check_offset() with generic radeon_check_offset(), which doesn't
+    reject valid offsets when the framebuffer area is at the very end of the card's
+    32 bit address space. Make radeon_check_and_fixup_offset() use
+    radeon_check_offset() as well.
+    
+    This fixes https://bugs.freedesktop.org/show_bug.cgi?id=7697 .
+
+commit 1a40f3318c2660b83f64f7ed189d0f1692644ee4
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Dec 12 00:11:42 2006 +1100
+
+    Port remaining NV4 RAMIN access from the ddx into the drm.
+    
+    Should fix lockups seen on NV4 cards.
+
+commit 30acb90a6077798b1e0c4927273067500905d6d1
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Sun Dec 3 10:02:54 2006 +0100
+
+    Merge the pciid work.
+    Add getparams for AGP and FB physical adresses.
+    Fix the MEM_ALLOC issue properly.
+    Fix context switches for nv44.
+    Change the DRM version to 0.0.1.
+
+commit 74a92bbf6ea9b9766a2b827f22605559791569b8
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Dec 1 11:00:32 2006 +0100
+
+    Core build fix for BSD.
+
+commit a97bb85c2a6852e37ed560e6cbe1242e5f68ad8d
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Dec 1 10:46:21 2006 +0100
+
+    Unshare drm_drawable.c again for now.
+    
+    The current version didn't build on BSD, where the new functionality isn't used
+    yet anyway. Whoever changes that will hopefully be able to make the OSes share
+    this file as well.
+
+commit 4a0e61d91013f88ca9555a280e2363bed14aec02
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Sat Oct 21 16:14:20 2006 +0200
+
+    Track linux-core symlinks in git.
+
+commit 80d75cf6950acf1a00a031ceb6511b26dcc9b056
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Thu Nov 30 10:31:42 2006 +1100
+
+    Use nouveau_mem.c to allocate RAMIN.
+
+commit b1a9a769711d83af8ab4c7ba4eec52a05a351533
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Thu Nov 30 08:35:42 2006 +1100
+
+    Wrap access to objects in RAMIN.
+    
+    This will make it easier to support extra RAMIN in vram at a later point.
+
+commit f48a7685bd7a241001cec89acd8cce6cdefa941e
+Author: Matthieu Castet <mat@mat-pc.(none)>
+Date:   Tue Nov 28 21:32:03 2006 +0100
+
+    For nv10, bit 16 of RAMFC need to be set for 64 bytes fifo context.
+    When cleaning a fifo, we shouldn't assume everybody use nv40 ;)
+    Fill DMA_SUBROUTINE fill correct value.
+
+commit ddcb994c3eac97e153922e2a4c71384404f68597
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Thu Oct 26 13:15:30 2006 +0200
+
+    i915_vblank_tasklet: Try harder to avoid tearing.
+    
+    Previously, if there were several buffer swaps scheduled for the same vertical
+    blank, all but the first blit emitted stood a chance of exhibiting tearing. In
+    order to avoid this, split the blits along slices of each output top to bottom.
+
+commit 63c0f3946056d044b7c5688fa5cb670782212c77
+Author: root <root@cr-znh.(none)>
+Date:   Mon Nov 27 15:55:32 2006 +0800
+
+    ARB_Occlusion_query(MMIO ioctl) support
+    
+    Zou Nan hai
+
+commit 0a364be289c27c81a1d157c94291bdf60b43299e
+Merge: 5e7f584 adf71cb
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Tue Nov 21 23:32:58 2006 +0100
+
+    Merge branch 'nouveau-1' of git+ssh://marcheu@git.freedesktop.org/git/mesa/drm into nouveau-1
+
+commit adf71cb29b72b7d199f737b7b00eb7e80939ea4b
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Nov 21 11:41:46 2006 +1100
+
+    Don't spam dmesg if PMC_INTSTAT is 0
+
+commit 9ac7a8b0b4c0431b605c3f8d0b4a696903010c51
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Sat Nov 18 10:09:29 2006 +1100
+
+    Only return FIFO number if the FIFO is marked as in use..
+
+commit e9194dd1b068666dd94e73d95dc3cd031a89a6b7
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Sat Nov 18 10:03:45 2006 +1100
+
+    Check some return vals, fixes a couple of oopses.
+
+commit 18bba3fa29187bb5122ed057989203dc05bc46aa
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Fri Nov 17 08:05:23 2006 +1100
+
+    Dump some useful info when a PGRAPH error occurs.
+    
+    The "channel" detect doesn't work on my nv40, but the rest
+    seems to produce sane info.
+
+commit 5e7f58474dbc766632a71c3eb556e24ead6c6afc
+Merge: 5a0cdf7 2fd812f
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Thu Nov 16 14:47:52 2006 +0100
+
+    Merge branch 'nouveau-1' of git+ssh://marcheu@git.freedesktop.org/git/mesa/drm into nouveau-1
+
+commit 2fd812f8ef8adb09fd8d17cab869f9fc8b047d75
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Nov 14 09:00:31 2006 +1100
+
+    Completely untested NV10/20/30 FIFO context switching changes.
+
+commit 7002082944a69e1d11b0146b1176fd4293581dcd
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Nov 14 08:11:49 2006 +1100
+
+    Restructure initialisation a bit.
+    
+     - Do important card init in firstopen
+     - Give each channel it's own cmdbuf dma object
+     - Move RAMHT config state to the same place as RAMRO/RAMFC
+     - Make sure instance mem for objects is *after* RAM{FC,HT,RO}
+
+commit 35bf8fb5cf8ab4d4e055cdef26531d86dbf822dc
+Merge: 9ef4bbc 1123ab0
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Nov 14 04:52:08 2006 +1100
+
+    Merge branch 'nouveau-1' of git+ssh://git.freedesktop.org/git/mesa/drm into nouveau-1
+
+commit 9ef4bbc66c1b055b4450ea9354945d784751cef7
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Nov 14 04:51:13 2006 +1100
+
+    Hack around yet another "X restart borkage without nouveau.ko reload" problem.
+    
+    On X init, PFIFO and PGRAPH are reset to defaults.  This causes the GPU to
+    loose the configuration done by the drm.  Perhaps a CARD_INIT ioctl a proper
+    solution to having this problem again in the future..
+
+commit 5a0cdf7db34fc679160a58b257afc9e9b216907e
+Merge: 1123ab0 d51e1bb
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Sat Nov 11 01:57:05 2006 +0100
+
+    Merge branch 'master' of git+ssh://marcheu@git.freedesktop.org/git/mesa/drm into nouveau-1
+
+commit 14e3f2711e90fe9a9c315d96abd4c7681539936a
+Merge: e2ea721 d51e1bb
+Author: Nian Wu <nian.wu@intel.com>
+Date:   Thu Nov 9 21:21:17 2006 -0800
+
+    Merge branch 'master' into crestline
+    
+    Conflicts:
+    
+    	shared-core/i915_dma.c
+
+commit 1123ab089075af3141c794696ec394fa46b4353f
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Fri Nov 10 02:18:38 2006 +0100
+
+    Fix memory detection on TNT2 M64/TNT2 vanta.
+
+commit d51e1bb56ca2f7858cdeac6f61a7b747c1e15b1e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 9 08:55:58 2006 +1100
+
+    libdrm: add drmOpenOnce + drmCloseOnce to libdrm
+
+commit 79038751ffe47ed1ce82766e027d98fd2f0e2c6a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Nov 8 15:08:09 2006 +1100
+
+    libdrm: add support for server side functionality in libdrm
+    
+    This adds APIs to allow the X server to use libdrm from the system
+    rather than its own in-built copy.
+
+commit 584acab6d6103552711bd6b5596ee4ccad305bc2
+Author: Eric Anholt <eric@anholt.net>
+Date:   Tue Nov 7 09:36:40 2006 -0800
+
+    Add drm_u64_t typedef on non-linux to fix libdrm build.
+
+commit f7affda35bb0c47fbc973725e05847669e215d46
+Author: Dave Airlie <airlied@ppcg5.localdomain>
+Date:   Mon Nov 6 11:44:36 2006 +1100
+
+    drm: fixup page alignment on SAREA map on ppc64
+
+commit 2dd3c039fdbe86db4043abcc69babf768edb3ab8
+Author: Dave Airlie <airlied@ppcg5.localdomain>
+Date:   Mon Nov 6 11:42:15 2006 +1100
+
+    fixup fifo size so it is page aligned
+
+commit 5e55594061b24521551c45838fbe6c3df57050d1
+Author: Dave Airlie <airlied@ppcg5.localdomain>
+Date:   Mon Nov 6 11:41:51 2006 +1100
+
+    use a uint64_t for this not a pointer
+
+commit 1e90b7ee8cefff59b70e285557aa7920dea77e81
+Merge: 0c34d0f 7b6cd95
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Nov 6 08:03:18 2006 +1100
+
+    Merge branch 'master' into nouveau-1
+    
+    Conflicts:
+    
+    	linux-core/Makefile.kernel
+
+commit 0c34d0f31a691bb649ed69f19e93fc1a723aa1d4
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Mon Nov 6 05:46:03 2006 +1100
+
+    Leave the bottom 64kb of RAMIN untouched.
+    
+    The binary driver will screw up either it's init or shutdown, leaving the
+    screen(s) in an unusable state without this.  Something important in there?
+
+commit 94ab96c4d8203c236c6a5a8d8a6a761ccf808662
+Author: Dave Airlie <airlied@ppcg5.localdomain>
+Date:   Sun Nov 5 20:38:44 2006 +1100
+
+    nouveau: add compat ioc32 support
+
+commit 665c8385c7865dcc4f92b9c212d6e2b35d7fa9f0
+Author: Dave Airlie <airlied@ppcg5.localdomain>
+Date:   Sun Nov 5 19:46:53 2006 +1100
+
+    add powerpc mmio swapper to NV_READ/WRITE macros
+
+commit 1e118aeb39076a103c6581640b04a9b7e2a8209a
+Author: Dave Airlie <airlied@ppcg5.localdomain>
+Date:   Sun Nov 5 19:46:30 2006 +1100
+
+    remove config.h
+
+commit 06639801ce1d515f790739a70b051498c8615288
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Sat Nov 4 20:39:59 2006 +0100
+
+    Add some getparams.
+
+commit 3ea0500be1ab7a058c90be35b5d8d2be26692f6a
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Sat Nov 4 16:56:10 2006 +0100
+
+    Move the context object creation flag handling to the drm.
+
+commit 7b6cd95bb6c41653aed78952da0a461bd4791413
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Oct 31 10:01:53 2006 +0000
+
+    Fix bug #8839 - a comment
+
+commit 4b04c0cc45f7a89c757ce442e4f2742b9d3aa293
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Oct 30 11:18:44 2006 +0100
+
+    Bugzilla Bug #8819
+    Build fixes for powerpc.
+    Reported by Katerina Barone-Adesi
+
+commit 56563c22d658b6dcb7926fd41513618cd46c31a6
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Oct 29 15:39:11 2006 +0100
+
+    Minor bugfix, indentation and removal of unnused variables.
+
+commit decacb2e6415029fe87a3680c8f967483ba05281
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Oct 27 13:08:31 2006 +0200
+
+    Reserve the new IOCTLs also for *bsd.
+    Bump libdrm version number to 2.2.0
+
+commit f6d5fecdd20b9fd9e8744d8f43fa276b73a1da78
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Oct 27 11:28:37 2006 +0200
+
+    Last minute changes to support multi-page size buffer offset alignments.
+    This will come in very handy for tiled buffers on intel hardware.
+    Also add some padding to interface structures to allow future binary backwards
+    compatible changes.
+
+commit e09544a2d3f44e96d01ed2bdcb4a4eb8eec26225
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Oct 26 21:20:34 2006 +0200
+
+    New mm function names. Update header.
+
+commit 47dbfc4e4a3e8ce2ec468bc3874f74f7e2b13476
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Oct 26 21:17:43 2006 +0200
+
+    Add improved alignment functionality to the core memory manager.
+    This makes an allocated block actually align itself and returns any
+    wasted space to the manager.
+    
+    Also add some functions to grow and shrink the managed area.
+    This will be used in the future to manage the buffer object swap cache.
+
+commit b4fba1679b6156e3ca6f053b44cae0b003febe7f
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Oct 26 21:14:23 2006 +0200
+
+    Add a one-page hole in the file offset space between buffers.
+
+commit 7ea059ae076c50f2012dee2ccbb8d41745705383
+Merge: 9ed4656 a8909a0
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sat Oct 21 14:20:28 2006 +0200
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm
+
+commit 9ed4656799043f24f4d64615ebb8128bedc99799
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sat Oct 21 14:17:51 2006 +0200
+
+    The CPU cache must be flushed _before_ we start modifying the kernel map ptes,
+    otherwise data will be missing, which becomes apparent when the kernel evicts
+    batch buffers which are likely to be written into in the evicted state,
+    and then rebound to the AGP aperture.
+    This means we cannot rely on the AGP module to flush the
+    cache for us.
+
+commit a8909a0ebcc21ad6b92b93ffe87878ece4b56506
+Author: Tilman Sauerbeck <tilman@code-monkey.de>
+Date:   Fri Oct 20 17:05:07 2006 +0200
+
+    Bug #1746: Set dev_priv_size for the MGA driver.
+
+commit 9321592149c031694c459bb05e7a31d1197fe5cb
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Oct 20 15:07:21 2006 +0200
+
+    We apparently need this global cache flush anyway.
+
+commit 3624e43282b0c6aad32829f116fd8f7bce66fbb6
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Oct 20 15:06:31 2006 +0200
+
+    Bug #8707, 2.6.19-rc compatibility for memory manager code.
+
+commit d70347bfc07bb5e34e36684b95560df37d669db4
+Merge: 5de4665 561e23a
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Oct 19 17:07:26 2006 +0200
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm
+
+commit 5de4665747c441b2a8e82b020cc386f2d974499d
+Merge: e22b04f e8ba62d
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Oct 19 17:00:03 2006 +0200
+
+    Importing fixes from drm-ttm-0-2-branch
+
+commit e8ba62db722eb0b915377269d7e1c3a039928669
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Oct 19 16:58:00 2006 +0200
+
+    Make sure delayed delete list is empty on lastclose.
+    Fix some refcounting errors.
+    Fix some error messages.
+
+commit e22b04f807b9869c8c89b6316214517f5da13322
+Merge: 11aaa35 e172945
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Oct 18 17:33:19 2006 +0200
+
+    Merging drm-ttm-0-2-branch
+    
+    Conflicts:
+    
+    	linux-core/drmP.h
+    	linux-core/drm_drv.c
+    	linux-core/drm_irq.c
+    	linux-core/drm_stub.c
+    	shared-core/drm.h
+    	shared-core/i915_drv.h
+    	shared-core/i915_irq.c
+
+commit 11aaa358a0f56afb64df44c737ec331d90118537
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Oct 18 17:18:23 2006 +0200
+
+    Remove stray softlink.
+
+commit e172945d668f1de1243ac2ae91ab77f3b2bda40a
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Oct 18 16:54:17 2006 +0200
+
+    Avoid driver-specific AGP user-populated types, since we don't know what AGP
+    driver we're on.
+    Avoid global cache flushes before inserting pages.
+    In general, they are never mapped, and not accessed through the kernel map, so
+    a cache flush should not be necessary. The exception is pages that are bound
+    cached. We might need a cache flush for those.
+
+commit 25fe4a80490bba709099f0401535d2f96ac7729c
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Oct 17 20:04:41 2006 +0200
+
+    Remove some debugging messages.
+
+commit c34faf224b959bf61e4c3eb29c66a12edbd31841
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Oct 17 20:03:26 2006 +0200
+
+    Remove max number of locked pages check and call, since
+    that is now handled by the memory accounting.
+
+commit 89b944179856fadf8667587eff142129c2c6b826
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Oct 17 19:57:06 2006 +0200
+
+    Lindent.
+
+commit f22f89e6b3c970a29197d3a53c170fb7d0340cbe
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Oct 17 19:52:34 2006 +0200
+
+    Add vma list memory usage to memory accounting.
+    Use byte unit for /proc printout of memory usage for small sizes to be
+    able to detect memory allocation bugs more easily.
+
+commit d515936ea7f98f6aaa9217699796beadef9d664b
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Oct 17 19:40:57 2006 +0200
+
+    Add memory usage accounting to avoid DOS problems.
+
+commit b5cf0d635c81d2c99510ce5e3f67f4aa593cd6d7
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Wed Oct 18 02:37:19 2006 +1100
+
+    Remove hack which delays activation of a additional channel.  The previously active channel's state is saved to RAMFC before PFIFO gets clobbered.
+
+commit 725984364bd899c2dee1ca9b44f56fc70ccba3ad
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Wed Oct 18 01:07:48 2006 +1100
+
+    Oops, we have more than 4 subchannels..
+
+commit 5443dbe35f182b9286a96d24d29037d5cb625e3d
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Oct 17 16:00:25 2006 +0200
+
+    Implement mm_lock and mm_unlock functions.
+    The mm_lock function is used when leaving vt. It evicts _all_ buffers.
+    Buffers with the DRM_BO_NO_MOVE attribute set will be guaranteed to
+    get the same offset when / if they are rebound.
+
+commit 55de3f763f0de66b99f1afde9872f0072a84a9e3
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Oct 17 23:44:05 2006 +1100
+
+    Useful output on a FIFO error interrupt.
+
+commit 07059f427819755e13b051e1422c6e8671c70f92
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Oct 17 23:08:03 2006 +1100
+
+    typo
+
+commit db5c671e86c3db8c99ce5a4954632248e6f849aa
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Oct 17 11:28:48 2006 +0200
+
+    Remove the memory manager parameter from the put_block function, as this
+    makes the client code a lot cleaner. Prepare buffer manager for lock and
+    unlock calls.
+
+commit 5881ce1b91034fbdf81dda37a23215cfc1310cdf
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Oct 17 11:05:37 2006 +0200
+
+    Extend generality for more memory types.
+    Fix up init and destruction code.
+
+commit 561e23a7c2f06b382613d3e2ae8d23104d0949aa
+Author: Michael Karcher <freedesktop-bugzilla@mkarcher.dialup.fu-berlin.de>
+Date:   Mon Oct 16 22:06:58 2006 -0400
+
+    dev->agp_buffer_map is not initialized for AGP DMA on savages
+    bug 8662
+
+commit 4b43ee63f90c93701c9f1cdf7fefd1816b316d33
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Oct 17 12:33:49 2006 +1100
+
+    NV40: *Now* fifo ctx switching works for me..
+    Ok, I lied before.. it was a fluke it worked and required magic to repeat it..
+    It actually helps to fill in RAMFC entries in the correct place.
+    
+    The code also clears RAMIN entirely instead of just the hash-table.
+
+commit 98e718d48fcd166accf1af3c017c34e331ab09cb
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Oct 17 07:29:31 2006 +1100
+
+    NV40: FIFO context switching now WorksForMe(tm)
+
+commit 1943f39d8ce27c799f928bab172e521f4d540166
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Oct 17 06:37:40 2006 +1100
+
+    Setup NV40 RAMFC (in wrong location.. but anyway), rearrange the RAMFC setup code a bit.
+
+commit 95486bbde05ae51975c4d51fd194111788edee9a
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Tue Oct 17 06:12:18 2006 +1100
+
+    Some info on NV40's RAMFC
+
+commit 5b2a60f550090a41c13483ceaaa1a84d3a9257f8
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Oct 16 14:22:27 2006 +0200
+
+    Change Intel AGP memory type numbers.
+
+commit 93fee5cf222ad6d97e0dcb85e13a8d8b84dba81f
+Merge: 2c5b91a a9f57a2
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Sun Oct 15 00:12:13 2006 +0200
+
+    Merge branch 'master' of git://anongit.freedesktop.org/git/mesa/drm into nouveau-1
+
+commit 2c5b91aecf3d21684ffca758c034cd9a8ed2155d
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Sat Oct 14 16:36:11 2006 +0200
+
+    Again more work on context switches. They work, sometimes. And when they do they seem to screw up the PGRAPH state.
+
+commit 1bab514c0a1a535c19d53e3d39e3b351db3ab7a4
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Oct 14 23:38:20 2006 +1000
+
+    remove config.h from build no longer exists kbuild does it
+
+commit 3a0cd7c7e221f625585675490f626de8677a9dc7
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Sat Oct 14 01:21:31 2006 +0200
+
+    Add the missing breaks.
+
+commit b509abe413f74bd08f6415dec8147bd07e78a84b
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Fri Oct 13 22:35:22 2006 +0200
+
+    Fix the fifo context size on nv10, nv20 and nv30.
+
+commit 4988074794531939ec0cb0ad183633b59e9ccff4
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Sat Oct 14 06:57:49 2006 +1100
+
+    Fix some randomness in activating a second channel on NV40 (odd GET/PUT vals).  Ch 1 GET now advances, but no ctx_switch.
+
+commit a9c6c3f21d90257db94536f202b3a1f03896b2f7
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Thu Oct 12 21:18:55 2006 +0200
+
+    Oops.
+
+commit 7ef44b2b8dd1745f5b228e6161ebd989844c3088
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Thu Oct 12 17:31:49 2006 +0200
+
+    Still more work on the context switching code.
+
+commit 540c64c378daafaad1c3f63faf5af81f39388665
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Oct 12 16:10:47 2006 +0200
+
+    Bugfixes.
+
+commit 10150df02b7062b9975661ccd82b475cd23c8839
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Oct 12 12:09:16 2006 +0200
+
+    Simplify the AGP backend interface somewhat.
+    
+    Fix buffer bound caching policy changing, Allow
+    on-the-fly changing of caching policy on bound buffers if the hardware
+    supports it.
+    
+    Allow drivers to use driver-specific AGP memory types for TTM AGP pages.
+    Will make AGP drivers much easier to migrate.
+
+commit a749d9d5b49ea0e402848bd6024e5c44826e784f
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Thu Oct 12 01:08:15 2006 +0200
+
+    More work on the context switch code. Still doesn't work. I'm mostly convinced it's an initialization issue.
+
+commit 30703893674b3da5b862dee2acd6efca13424398
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Oct 11 22:21:01 2006 +0200
+
+    Compatibility code for 2.6.15-2.6.18. It is ugly but a little comfort is that
+    it will go away in the mainstream kernel.
+    Some bugfixes, mainly in error paths.
+
+commit f2db76e2f206d2017f710eaddc4b33add4498898
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Oct 11 13:40:35 2006 +0200
+
+    Big update:
+    Adapt for new functions in the 2.6.19 kernel.
+    Remove the ability to have multiple regions in one TTM.
+       This simplifies a lot of code.
+    Remove the ability to access TTMs from user space.
+       We don't need it anymore without ttm regions.
+    Don't change caching policy for evicted buffers. Instead change it only
+       when the buffer is accessed by the CPU (on the first page fault).
+       This tremendously speeds up eviction rates.
+    Current code is safe for kernels <= 2.6.14.
+    Should also be OK with 2.6.19 and above.
+
+commit dd473411f889cc16af255437d2a61c616bcee695
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Wed Oct 11 00:28:15 2006 +0200
+
+    Context switching work.
+    Added preliminary support for context switches (triggers the interrupts, but hangs after the switch ; something's not quite right yet).
+    Removed the PFIFO_REINIT ioctl. I hope it's that a good idea...
+    Requires the upcoming commit to the DDX.
+
+commit c58574c60505a699e19e1ed59e1b441be2594e53
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Oct 10 10:37:26 2006 +0200
+
+    Use a nopage-based approach to fault in pfns.
+
+commit a9f57a2b9c5897cbf568bf75342204b780566de0
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Tue Oct 10 02:24:19 2006 +0200
+
+    only allow specific type-3 packets to pass the verifier instead of all for r100/r200 as others might be unsafe (r300 already does this), and add checking for these we need but aren't safe. Check the RADEON_CP_INDX_BUFFER packet on both r200 and r300 as it isn't safe neither.
+
+commit cee659afb56e7ac443402ac791144f391721061e
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Oct 3 12:08:07 2006 +0200
+
+    Get rid of all ugly PTE hacks.
+
+commit c9e3aa961eb90265ec024ff57013786e4d47d0e7
+Author: George Sapountzis <gsap7@yahoo.gr>
+Date:   Mon Oct 2 06:13:38 2006 +0300
+
+    Bug 6242: [mach64] Use private DMA buffers, part #4.
+    
+    mach64_state.c: convert the DRM_MACH64_BLIT ioctl to submit a pointer to
+    user-space memory rather than a DMA buffer index, similar to DRM_MACH64_VERTEX.
+    
+    This change allows the DDX to map the DMA buffers read-only and eliminate a
+    security problem where a client can alter the contents of the DMA buffer after
+    submission to the DRM.
+    
+    This change also affects the DRI/DRM interface. Performace-wise, it basically
+    affects PCI mode where I get a ~12% speedup for some Mesa demos I tested.
+    This is mainly due to eliminating an ioctl for allocating the DMA buffer.
+    
+    mach64_dma.c: move the responsibility for allocating memory for the DMA ring
+    in PCI mode to the DDX.
+    
+    This change affects the DDX/DRM interface and unifies a couple of PCI/AGP code
+    paths for ring memory in the DRM.
+    
+    Bump the mach64 DRM version major and date.
+
+commit f3deef730d52c94ce21ada7e4ceb63aa28a8601b
+Author: George Sapountzis <gsap7@yahoo.gr>
+Date:   Mon Oct 2 05:46:42 2006 +0300
+
+    Bug 6242: [mach64] Use private DMA buffers, part #3.
+    
+    Add DRM_PCI_BUFFER_RO flag for mapping PCI DMA buffer read-only. An additional
+    flag is needed, since PCI DMA buffers do not have an associated map.
+
+commit 25760c30d4aedb370423d0bb03c014cab47b5d4f
+Author: George Sapountzis <gsap7@yahoo.gr>
+Date:   Mon Aug 28 05:44:37 2006 +0300
+
+    Bug 6242: [mach64] Use private DMA buffers, part #2.
+    
+    Factor out from mach64_dma_dispatch_vertex() the code to reclaim an unsed
+    buffer, in preperation for using it in mach64_dma_dispatch_blit() also.
+
+commit eea150e776657faca7d5b76aca75a33dc74fbc9d
+Author: George Sapountzis <gsap7@yahoo.gr>
+Date:   Sun Jul 16 02:15:02 2006 +0300
+
+    Bug 6242: [mach64] Use private DMA buffers, part #1.
+    
+    Factor out from mach64_freelist_get() the code to reclaim a completed buffer,
+    this is to improve readability for me.
+
+commit d1b31a228b72b8dd8e588f0a0cc8eeabc3845f70
+Author: George Sapountzis <gsap7@yahoo.gr>
+Date:   Sun Jul 16 01:02:06 2006 +0300
+
+    Bug 6209: [mach64] AGP DMA buffers not mapped correctly.
+    
+    Map the DMA buffers from the same linear address as the vertex bufs. If
+    dev->agp_buffer_token is not set, mach64 drm maps the DMA buffers from
+    linear address 0x0.
+
+commit 16be6ba63a41f03e98a741464d3b51eefb277373
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Mon Oct 2 15:33:19 2006 +0200
+
+    Fix type of second argument to spin_lock_irqsave().
+    (cherry picked from f6238cf6244b32bd84e3d2819963d7f5473867c8 commit)
+
+commit f6238cf6244b32bd84e3d2819963d7f5473867c8
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Mon Oct 2 15:33:19 2006 +0200
+
+    Fix type of second argument to spin_lock_irqsave().
+
+commit eacedf41a65f135722e7bee6f1a66a803619237f
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Oct 2 15:06:35 2006 +0200
+
+    Make the user_token 44-bit for TTMs, and have them occupy a unique file space
+    starting at 0x00100000000. This will hopefully allow us to use
+    unmap_mapping_range(). Note that user-space will need
+    64-bit file offset support.
+
+commit a31046b8734f12ed22127ef5f6ca4fc33df72ec1
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Oct 2 14:03:15 2006 +0200
+
+    Add a buffer object manager for TTM maps.
+
+commit d85b99435f0ea7a17b3b7be31b53c00632c07177
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Oct 2 13:49:43 2006 +0200
+
+    Allow for 44 bit user-tokens (or drm_file offsets)
+
+commit 418b81c65c55601d4e414b351db5b8d76db8a109
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Oct 2 13:37:54 2006 +0200
+
+    Add a comment to previos commit.
+
+commit c6be27401fbc12ec72bac13d07e3cc93bd63732a
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Oct 2 13:34:30 2006 +0200
+
+    Trap and be verbose about a deadlock that occurs with AIGLX and drivers that
+    use drm_reclaim_buffers_locked().
+
+commit 58a23d193f7d25d23c76a58c192c814a415a843b
+Author: Felix Kühling <fxkuehl@gmx.de>
+Date:   Mon Oct 2 10:50:40 2006 +0200
+
+    drm_rmdraw: Declare id and idx as signed so testing for < 0 works as intended.
+    (cherry picked from d58389968124191a546a14b42ef84edc224be23d commit)
+
+commit 3a16e615cabfed18b1891a732e7243ef41dc0ad0
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Mon Oct 2 11:04:42 2006 +0200
+
+    Make locked tasklet handling more robust.
+    
+    Initialize the spinlock unconditionally when struct drm_device is filled in,
+    and return early in drm_locked_tasklet() if the driver doesn't support IRQs.
+
+commit d58389968124191a546a14b42ef84edc224be23d
+Author: Felix Kühling <fxkuehl@gmx.de>
+Date:   Mon Oct 2 10:50:40 2006 +0200
+
+    drm_rmdraw: Declare id and idx as signed so testing for < 0 works as intended.
+
+commit 8e908eaf50d5331ee875fefbf793dbe07d99786a
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Sep 29 14:21:51 2006 +0200
+
+    Bump driver date.
+
+commit 17a640419a447083470880f1266e14063cd5acd0
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Sep 29 10:27:29 2006 +0200
+
+    i915: Only schedule vblank tasklet if there are scheduled swaps pending.
+    
+    This fixes issues on X server startup with versions of xf86-video-intel that
+    enable the IRQ before they have a context ID.
+    (cherry picked from 7af93dd9849442270ec89cb4bbeef5bfd4f9e424 commit)
+
+commit 48367fdfe677adada52ad61d850e2980e1070632
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Thu Sep 28 19:13:59 2006 +0200
+
+    i915: Only initialize IRQ fields in postinstall, not the PIPE_SET ioctl.
+    
+    Some other minor changes in preparation for actually disabling user interrupts.
+
+commit 3620a3ec85033d3d1d1a44ec32492fb2ef20fd8a
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Thu Sep 28 19:05:58 2006 +0200
+
+    i915: Bump minor again to differentiate from vsync changes.
+
+commit 390184df92915d232cab90469937de875ee65b91
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Sep 27 18:22:10 2006 +0200
+
+    i915: Avoid mis-counting vblank interrupts when they're only enabled for pipe A.
+    
+    It looks like 'after a while', I915REG_INT_IDENTITY_R for some reason always has
+    VSYNC_PIPEB_FLAG set in the interrupt handler, even though pipe B is disabled.
+    So we only increase dev->vbl_received if the corresponding bit is also set in
+    dev->vblank_pipe.
+    (cherry picked from 881ba569929ceafd42e3c86228b0172099083d1d commit)
+
+commit c0bff9f9cd08066df7f3bccd77d4d4dd4edb4163
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Mon Sep 18 12:15:38 2006 +0200
+
+    i915: Bump minor for swap scheduling ioctl and secondary vblank support.
+    
+    (cherry picked from 2627131e5d0c8cd5e3f0db06451c2e7ae7569b1b commit)
+
+commit 0a7d9edcfb427724f0cad5ff6d0a4493d266b4e8
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Sep 13 08:59:35 2006 +0200
+
+    i915_vblank_swap: Add support for DRM_VBLANK_NEXTONMISS.
+    
+    (cherry picked from 0356fe260dcf80f6d2d20e3384f2a1f4ee7f5b30 commit)
+
+commit c47ebd970783873164578126fa5481a166cd837e
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Sep 1 11:48:07 2006 +0200
+
+    Only return EBUSY after we've established we need to schedule a new swap.
+    
+    (cherry picked from 50a0284a61d4415c0ebdb02decee76ef3115007a commit)
+
+commit cef0f243251103be81c914d5b83ee3401c2a9c34
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Sep 1 11:35:31 2006 +0200
+
+    Core vsync: Don't clobber target sequence number when scheduling signal.
+    
+    It looks like this would have caused signals to always get sent on the next
+    vertical blank, regardless of the sequence number.
+    (cherry picked from cf6b2c5299e9be3542d4deddfd05d5811f11d2ef commit)
+
+commit ed82172378666d35ca60e6094fdecb59511a135f
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Sep 1 11:27:14 2006 +0200
+
+    Core vsync: Add flag DRM_VBLANK_NEXTONMISS.
+    
+    When this flag is set and the target sequence is missed, wait for the next
+    vertical blank instead of returning immediately.
+    (cherry picked from 89e323e4900af84cc33219ad24eb0b435a039d23 commit)
+
+commit c4c47a7eacf8e8cb96b2fb63164e28f0db7353ad
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Sep 1 11:24:38 2006 +0200
+
+    Fix 'sequence has passed' condition in i915_vblank_swap().
+    
+    (cherry picked from 7f09f957d9a61ac107f8fd29128d7899a3e8a228 commit)
+
+commit f9aa4f5973d6098b95e92f606dc1967c627897db
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Thu Aug 31 18:33:04 2006 +0200
+
+    Add SAREA fileds for determining which pipe to sync window buffer swaps to.
+    
+    (cherry picked from c2bdb76814755c9ac6e66a8815f23af0fe4f3a91 commit)
+
+commit 316e73676861c0e019d52ec7bf7b7b1451eaed97
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Thu Aug 31 18:32:08 2006 +0200
+
+    Add definition of DRM_VBLANK_SECONDARY.
+    
+    (cherry picked from 84b38b63f05e04ade8b1ddfb770047fd86de0d64 commit)
+
+commit 4a3d270862f6dbc52ca3e16ba66fdb24667b2aa2
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Thu Aug 31 18:30:55 2006 +0200
+
+    Make handling of dev_priv->vblank_pipe more robust.
+    
+    Initialize it to default value if it hasn't been set by the X server yet.
+    
+    In i915_vblank_pipe_set(), only update dev_priv->vblank_pipe and call
+    i915_enable_interrupt() if the argument passed from userspace is valid to avoid
+    corrupting dev_priv->vblank_pipe on invalid arguments.
+    (cherry picked from 87c57cba1a70221fc570b253bf3b24682ef6b894 commit)
+
+commit 1f3493f65ba0959e401191c648f57501216eeb0a
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Aug 30 19:33:28 2006 +0200
+
+    DRM_I915_VBLANK_SWAP ioctl: Take drm_vblank_seq_type_t instead of pipe number.
+    
+    Handle relative as well as absolute target sequence numbers.
+    
+    Return error if target sequence has already passed, so userspace can deal with
+    this situation as it sees fit.
+    
+    On success, return the sequence number of the vertical blank when the buffer
+    swap is expected to take place.
+    
+    Also add DRM_IOCTL_I915_VBLANK_SWAP definition for userspace code that may want
+    to use ioctl() instead of drmCommandWriteRead().
+    (cherry picked from d5a0f107511e128658e2d5e15bd7e6215c507f29 commit)
+
+commit 00531cecad3cf9a1ec230f7f33535d153b9d9bd0
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Aug 30 19:24:04 2006 +0200
+
+    Change first valid DRM drawable ID to be 1 instead of 0.
+    
+    This makes it easier for userspace to know when it needs to allocate an ID.
+    
+    Also free drawable information memory when it's no longer needed.
+    (cherry picked from df7551ef7334d728ec0371423661bb403d3e270a commit)
+
+commit 7d487602a31dd886037417db088b6e643ed86918
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Mon Aug 28 18:19:58 2006 +0200
+
+    Add copyright notice.
+    
+    (cherry picked from d04751facea36cb888c7510b126658fdbc4277d5 commit)
+
+commit da75d59cd65764c6076ab9b96ad8195ed71ed80b
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Aug 25 19:01:05 2006 +0200
+
+    i915: Add ioctl for scheduling buffer swaps at vertical blanks.
+    
+    This uses the core facility to schedule a driver callback that will be called
+    ASAP after the given vertical blank interrupt with the HW lock held.
+    (cherry picked from 257771fa290b62d4d2ad896843cf3a207978d0bb commit)
+
+commit d7389a9758944ab0d241d3c1108adfeeec9eee76
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Aug 25 18:55:55 2006 +0200
+
+    Locking and memory management fixes.
+    
+    (cherry picked from 23d2833aaa37a33b9ddcf06cc796f59befc0d360 commit)
+
+commit ca3a1b5ec4a417785238fb7c0cb4c3570dbcb31a
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Aug 25 18:55:06 2006 +0200
+
+    Drop tasklet locked driver callback when uninstalling IRQ.
+    
+    (cherry picked from b9f3009160d8bd1a26a77d6f1616f1679c7b969d commit)
+
+commit f93e4822694b066427f70c23216b78f92edb1bff
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Aug 23 19:00:26 2006 +0200
+
+    Export drm_get_drawable_info symbol from core.
+    
+    (cherry picked from 43f8675534c7e95efbc92eaf2c8cc43aef95f125 commit)
+
+commit 67e88e5628d02cd94561e31fd68e02b6bde66e6f
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Aug 23 16:05:47 2006 +0200
+
+    Hook up DRM_IOCTL_UPDATE_DRAW ioctl.
+    
+    (cherry picked from 98a89504589427a76c3f5cfa2266962a1a212672 commit)
+
+commit baa26c5faa3d5903569d1c94ad93b843d6979ba5
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Aug 23 16:04:41 2006 +0200
+
+    Only reallocate cliprect memory if the number of cliprects changes.
+    
+    Also improve diagnostic output.
+    (cherry picked from af48be1096221d551319c67a9e782b50ef58fefd commit)
+
+commit 9810ec2737de6aa81e764225f580e4ea39de437a
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Tue Aug 22 16:40:07 2006 +0200
+
+    Add support for tracking drawable information to core
+    
+    Actually make the existing ioctls for adding and removing drawables do
+    something useful, and add another ioctl for the X server to update drawable
+    information. The only kind of drawable information tracked so far is cliprects.
+    (cherry picked from 29598e5253ff5c085ccf63580fd24b84db848424 commit)
+
+commit a7b8c8d523d7f726b8fb74cb37f807d2316cf5dd
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Aug 16 15:47:22 2006 +0200
+
+    Add support for interrupt triggered driver callback with lock held to DRM core.
+    
+    (cherry picked from d817cc1f30060fcc4a85a05b2de8a2a1687421b5 commit)
+
+commit 596d7e998403f565a796c431dbbcaf9e0c49908b
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Aug 11 18:06:46 2006 +0200
+
+    Add support for secondary vertical blank interrupt to i915 driver.
+    
+    When the vertical blank interrupt is enabled for both pipes, pipe A is
+    considered primary and pipe B secondary. When it's only enabled for one pipe,
+    it's always considered primary for backwards compatibility.
+    (cherry picked from 0c7d7f43610f705e8536a949cf2407efaa5ec217 commit)
+
+commit 2735f9e2908b786586d18f6384371b991bdce430
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Aug 11 17:57:59 2006 +0200
+
+    Add support for secondary vertical blank interrupt to DRM core.
+    
+    (cherry picked from ab351505f36a6c66405ea7604378268848340a42 commit)
+
+commit ae96e264198323916ee58e293468c9b924feca75
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Sep 29 11:46:45 2006 +0200
+
+    Add a new buffer flag.
+    Fix up some comments.
+
+commit 3802f9adbf9a7e3d5c356f74b0c1ee966476fb97
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Sep 29 11:15:59 2006 +0200
+
+    Fix buffer manager takedown error.
+    Prepare for the possibility to evict all buffers from vram / agp.
+    This will be used by the X server when, for example, switching vts.
+
+commit 7af93dd9849442270ec89cb4bbeef5bfd4f9e424
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Sep 29 10:27:29 2006 +0200
+
+    i915: Only schedule vblank tasklet if there are scheduled swaps pending.
+    
+    This fixes issues on X server startup with versions of xf86-video-intel that
+    enable the IRQ before they have a context ID.
+
+commit 881ba569929ceafd42e3c86228b0172099083d1d
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Sep 27 18:22:10 2006 +0200
+
+    i915: Avoid mis-counting vblank interrupts when they're only enabled for pipe A.
+    
+    It looks like 'after a while', I915REG_INT_IDENTITY_R for some reason always has
+    VSYNC_PIPEB_FLAG set in the interrupt handler, even though pipe B is disabled.
+    So we only increase dev->vbl_received if the corresponding bit is also set in
+    dev->vblank_pipe.
+
+commit 2627131e5d0c8cd5e3f0db06451c2e7ae7569b1b
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Mon Sep 18 12:15:38 2006 +0200
+
+    i915: Bump minor for swap scheduling ioctl and secondary vblank support.
+
+commit 0356fe260dcf80f6d2d20e3384f2a1f4ee7f5b30
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Sep 13 08:59:35 2006 +0200
+
+    i915_vblank_swap: Add support for DRM_VBLANK_NEXTONMISS.
+
+commit 50a0284a61d4415c0ebdb02decee76ef3115007a
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Sep 1 11:48:07 2006 +0200
+
+    Only return EBUSY after we've established we need to schedule a new swap.
+
+commit cf6b2c5299e9be3542d4deddfd05d5811f11d2ef
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Sep 1 11:35:31 2006 +0200
+
+    Core vsync: Don't clobber target sequence number when scheduling signal.
+    
+    It looks like this would have caused signals to always get sent on the next
+    vertical blank, regardless of the sequence number.
+
+commit 89e323e4900af84cc33219ad24eb0b435a039d23
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Sep 1 11:27:14 2006 +0200
+
+    Core vsync: Add flag DRM_VBLANK_NEXTONMISS.
+    
+    When this flag is set and the target sequence is missed, wait for the next
+    vertical blank instead of returning immediately.
+
+commit 7f09f957d9a61ac107f8fd29128d7899a3e8a228
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Sep 1 11:24:38 2006 +0200
+
+    Fix 'sequence has passed' condition in i915_vblank_swap().
+
+commit c2bdb76814755c9ac6e66a8815f23af0fe4f3a91
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Thu Aug 31 18:33:04 2006 +0200
+
+    Add SAREA fileds for determining which pipe to sync window buffer swaps to.
+
+commit 84b38b63f05e04ade8b1ddfb770047fd86de0d64
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Thu Aug 31 18:32:08 2006 +0200
+
+    Add definition of DRM_VBLANK_SECONDARY.
+
+commit 87c57cba1a70221fc570b253bf3b24682ef6b894
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Thu Aug 31 18:30:55 2006 +0200
+
+    Make handling of dev_priv->vblank_pipe more robust.
+    
+    Initialize it to default value if it hasn't been set by the X server yet.
+    
+    In i915_vblank_pipe_set(), only update dev_priv->vblank_pipe and call
+    i915_enable_interrupt() if the argument passed from userspace is valid to avoid
+    corrupting dev_priv->vblank_pipe on invalid arguments.
+
+commit d5a0f107511e128658e2d5e15bd7e6215c507f29
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Aug 30 19:33:28 2006 +0200
+
+    DRM_I915_VBLANK_SWAP ioctl: Take drm_vblank_seq_type_t instead of pipe number.
+    
+    Handle relative as well as absolute target sequence numbers.
+    
+    Return error if target sequence has already passed, so userspace can deal with
+    this situation as it sees fit.
+    
+    On success, return the sequence number of the vertical blank when the buffer
+    swap is expected to take place.
+    
+    Also add DRM_IOCTL_I915_VBLANK_SWAP definition for userspace code that may want
+    to use ioctl() instead of drmCommandWriteRead().
+
+commit df7551ef7334d728ec0371423661bb403d3e270a
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Aug 30 19:24:04 2006 +0200
+
+    Change first valid DRM drawable ID to be 1 instead of 0.
+    
+    This makes it easier for userspace to know when it needs to allocate an ID.
+    
+    Also free drawable information memory when it's no longer needed.
+
+commit d04751facea36cb888c7510b126658fdbc4277d5
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Mon Aug 28 18:19:58 2006 +0200
+
+    Add copyright notice.
+
+commit 257771fa290b62d4d2ad896843cf3a207978d0bb
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Aug 25 19:01:05 2006 +0200
+
+    i915: Add ioctl for scheduling buffer swaps at vertical blanks.
+    
+    This uses the core facility to schedule a driver callback that will be called
+    ASAP after the given vertical blank interrupt with the HW lock held.
+
+commit 23d2833aaa37a33b9ddcf06cc796f59befc0d360
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Aug 25 18:55:55 2006 +0200
+
+    Locking and memory management fixes.
+
+commit b9f3009160d8bd1a26a77d6f1616f1679c7b969d
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Aug 25 18:55:06 2006 +0200
+
+    Drop tasklet locked driver callback when uninstalling IRQ.
+
+commit 43f8675534c7e95efbc92eaf2c8cc43aef95f125
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Aug 23 19:00:26 2006 +0200
+
+    Export drm_get_drawable_info symbol from core.
+
+commit 98a89504589427a76c3f5cfa2266962a1a212672
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Aug 23 16:05:47 2006 +0200
+
+    Hook up DRM_IOCTL_UPDATE_DRAW ioctl.
+
+commit af48be1096221d551319c67a9e782b50ef58fefd
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Aug 23 16:04:41 2006 +0200
+
+    Only reallocate cliprect memory if the number of cliprects changes.
+    
+    Also improve diagnostic output.
+
+commit 29598e5253ff5c085ccf63580fd24b84db848424
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Tue Aug 22 16:40:07 2006 +0200
+
+    Add support for tracking drawable information to core
+    
+    Actually make the existing ioctls for adding and removing drawables do
+    something useful, and add another ioctl for the X server to update drawable
+    information. The only kind of drawable information tracked so far is cliprects.
+
+commit d817cc1f30060fcc4a85a05b2de8a2a1687421b5
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Aug 16 15:47:22 2006 +0200
+
+    Add support for interrupt triggered driver callback with lock held to DRM core.
+
+commit 0c7d7f43610f705e8536a949cf2407efaa5ec217
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Aug 11 18:06:46 2006 +0200
+
+    Add support for secondary vertical blank interrupt to i915 driver.
+    
+    When the vertical blank interrupt is enabled for both pipes, pipe A is
+    considered primary and pipe B secondary. When it's only enabled for one pipe,
+    it's always considered primary for backwards compatibility.
+
+commit ab351505f36a6c66405ea7604378268848340a42
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Aug 11 17:57:59 2006 +0200
+
+    Add support for secondary vertical blank interrupt to DRM core.
+
+commit b15bc8a0bad43c68dd1bbff27e7a7bd54e9e6938
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Sep 28 12:19:54 2006 +0200
+
+    Libdrm version bump and naming.
+
+commit c52fafa6288b4e6ecfce27151969749113a41f0b
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Sep 28 11:33:03 2006 +0200
+
+    Don't enable fence / buffer objects on non-linux systems.
+    Bump driver minor and date.
+
+commit 1c6f0ea43c47603c2265248ce8a91698c8982f3c
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Sep 27 19:11:27 2006 +0200
+
+    Activate error message that was never hit since it was masked
+    by drm_lock_transfer.
+    Ifdef out drm_lock_transfer. I see no use for it currently. Should be removed.
+
+commit f2c03ecae627df77db25391fe85fcd8a2a4bdc0c
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Sep 27 19:07:55 2006 +0200
+
+    Fix racy buffer object destruction.
+
+commit c97149b45be9d0e9385d4c6721aa70dad68a1aa1
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Sep 27 09:31:39 2006 +0200
+
+    Fix tt fixed size that slipped through in previous commit.
+
+commit 235f6fc650e9974211843b9196a903963dae0211
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Sep 27 09:27:31 2006 +0200
+
+    Adapt to architecture-specific hooks for gatt pages.
+
+commit bd8ca12b7baff778d5bb7b4ad1d38d16b60a4d5a
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Sep 26 16:00:22 2006 +0200
+
+    Silence valgrind.
+
+commit 26528627a6cea7f92a949e89e5db6e17ef9560c2
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Sep 26 14:40:11 2006 +0200
+
+    Remove the call to drm_lock_transfer, since it is not used anymore.
+    Fix up drm_lock_free to retain the last locking context information.
+
+commit 711f077b7423c1a436d703885c6d18a2ad2940aa
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Sep 26 14:36:53 2006 +0200
+
+    Allow for a driver to overload the ttm backend object methods.
+
+commit 273eb7833d69db2d72430d5c96c21cebd05c206e
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Sep 25 11:51:08 2006 +0200
+
+    Add /proc filesystem buffer / fence object accounting.
+    Check for NULL pointer in the i915 flush handler.
+    Remove i915_sync_flush declaration.
+
+commit a02155a0d92d3933d42a3655db261446bfe72b44
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Sep 22 09:25:36 2006 +0200
+
+    Fix proc formatting broken by last commit.
+    GPU lockup error reporting.
+
+commit 62f6ea225615392098dedee47d4ccdd69e126a43
+Author: Felix Kuhling <fxkuehl@gmx.de>
+Date:   Fri Sep 22 03:46:54 2006 +1000
+
+    bug 5942: add stubs for drm_mtrr_add/del for non-MTRR configured linux
+
+commit 255f3e6f76dfd267a14765dd1293229184298d89
+Author: Anish Mistry <mistry.7@osu.edu>
+Date:   Fri Sep 22 03:43:34 2006 +1000
+
+    bug 7092 : add pci ids for mach64 in Dell poweredge 4200
+
+commit 1f71b8d7a456fe3ec4bfc2fed70b7420cdd0d55a
+Author: Roland Scheidegger <zak@ZakTower.(none)>
+Date:   Wed Sep 20 19:44:57 2006 +0200
+
+    do a TCL state flush before accessing VAP_CNTL to prevent lockups on r200 when enabling/disabling vertex programs
+
+commit fa511a3ff5150d932fd963594d1ef67a94bb8b1f
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Sep 20 16:31:15 2006 +0200
+
+    Allow for 64-bit map handles of ttms and buffer objects.
+
+commit aac918e7c72a46a1b0f2329380e2d6b4196d04e4
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Sep 18 21:50:00 2006 +0200
+
+    Fence handler fix
+
+commit ca1b15d645c74e20f638f5a09981bcf02f58caee
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Sep 18 20:43:31 2006 +0200
+
+    Alternative implementation of page table zeroing using zap page_range.
+    (Disabled for now)
+    Fix bo_wait_idle bug.
+    Remove stray debug message.
+
+commit c4fad4c96168a3dfabaa8a7e97758fefd014c8a7
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Sep 18 16:02:33 2006 +0200
+
+    More verbose error reporting in some cases.
+    Add a buffer object waitIdle user-space function.
+    Fix some names and minor glitches.
+
+commit ef98a8e20dad8ae7e38f397d63c13bd24105ce53
+Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
+Date:   Mon Sep 18 21:22:12 2006 +1000
+
+    drm: put domain number back to 0, domain support is seriously fubar..
+
+commit 22382bd8c540231641bfc75d778a50ddf1463783
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Sun Sep 17 13:00:27 2006 +1000
+
+    Add pciid for GeForce Go 6150 (0x0244).
+
+commit 6ba9127753eff7615ba553fbc567aec98ecf8104
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Fri Sep 15 16:37:47 2006 +0200
+
+    Use register writes instead of BITBLT_MULTI packets for buffer swap blits.
+    
+    This takes up two more ring buffer entries per rectangle blitted but makes sure
+    the blit is performed top to bottom, reducing the likelyhood of tearing.
+
+commit f613022ceef1814cb734bb3375f01962fd3bcf10
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Sep 15 16:47:09 2006 +0200
+
+    Allow a "native type" to be associated with a fence sequence.
+    In the intel case, we can associate a flush with a sequence.
+
+commit 49fbeb339c232804866cd548d6023fe559597353
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Sep 15 11:18:35 2006 +0200
+
+    Some bugfixes.
+    Change the fence object interface somewhat to allow some more flexibility.
+    Make list IOCTLS really restartable.
+    Try to avoid busy-waits in the kernel using immediate return to user-space with an -EAGAIN.
+
+commit 7223b4e264a64df2df70715d8777f2ccaa883d5e
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Sep 14 16:42:00 2006 +0200
+
+    Simplify ttm alloc and free.
+
+commit 682c6ed0293771b093452597540118f47fda1adf
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Sep 14 12:17:38 2006 +0200
+
+    Remove the use of reserved pages, and use locked pages instead.
+    Update compatibility for latest linux versions.
+
+commit 9adc9584a7e0b61b16a943720bef31a71faeaef4
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Sep 12 17:39:44 2006 +0200
+
+    Fix some debug messages.
+
+commit 861b26578cd5e497fb506ad5952fa62bd03ea201
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Sep 12 16:28:34 2006 +0200
+
+    Use lazy fence wait when possible even for RW fences. Saves some CPU.
+    Lindent.
+
+commit 191e284709ee792a32124e96e43d5876406b93dc
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Sep 12 12:01:00 2006 +0200
+
+    More bugfixes.
+    Disable the i915 IRQ turnoff for now since it seems to be causing problems.
+
+commit 3cc64a943a7240c73c92ab103ba0502b9ec07fee
+Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
+Date:   Tue Sep 12 06:13:14 2006 +1000
+
+    drm: use radeon specific names for radeon flags
+
+commit aa80e2f48f291aa41524dfb53023499c91473705
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Sat Sep 9 07:35:55 2006 +1000
+
+    Add copyright notices while I still remember..
+
+commit 99acb7936660843090ea8a9f22d2d50d9433e0de
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Sep 8 17:24:38 2006 +0200
+
+    Various bugfixes.
+
+commit 0ef29768ca909421539c3d8f65bb8e94912fa597
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Thu Sep 7 23:59:19 2006 +1000
+
+    Fix second start of X server without module reload beforehand, and a couple of other fixes.
+    
+    - Mark the correct RAMIN slots as free (oops)
+    - Remove a VRAM alloc that shouldn't have been there (oops)
+    - Move HT init out of firstopen() and into dma_init()
+    - Setup PFIFO_RAM{HT,FC,RO} in pfifo_init()
+
+commit dddacd7a3a4bd0c453b346cee70d1d36a401e539
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Sep 6 23:26:50 2006 -0700
+
+    Use the DRM_INIT_WAITQUEUE argument (needed on Linux) to avoid a warning.
+
+commit 55057660f035a03078910d678e5fd9b0cb0b795a
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Sep 6 23:25:14 2006 -0700
+
+    Put the PCI device/vendor id in the drm_device_t.
+    
+    This helps us unbreak FreeBSD DRM from the 965 changes.
+
+commit d5726761858b1ff0fd6e6ee92ec1648fbb958a53
+Author: Eric Anholt <eric@anholt.net>
+Date:   Wed Sep 6 23:08:29 2006 -0700
+
+    Add a typedef for u64.
+
+commit d89c623f8e739815ea952adc77cfe5c0f7204407
+Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
+Date:   Thu Sep 7 00:35:17 2006 +0200
+
+    Remove a 64 bit div.
+
+commit e2ea72187e470c2c13adbd3fba4177bd4a0ecc37
+Author: Wang Zhenyu <zhenyu.z.wang@intel.com>
+Date:   Wed Sep 6 22:57:17 2006 +0800
+
+    Adding pci id for Crestline
+
+commit e3f54ecdd9d266607afd7d8b62960b2154b63e9d
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Sep 5 19:36:45 2006 +0200
+
+    Multithreaded application note.
+
+commit 604215396847a7964fd7d68aa89d4f778b3bf22b
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Sep 5 18:00:25 2006 +0200
+
+    Fence all unfenced buffers function.
+
+commit 034fc31292edaa25779a938ab3e92ef34697eaf9
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Sep 5 14:23:18 2006 +0200
+
+    i915: Only turn on user IRQs when they are needed.
+
+commit 8c613a8363963330fbf701186f654007d6208bba
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Sep 5 11:00:52 2006 +0200
+
+    Fix memory cache initialization.
+
+commit f88c32fd4cb93fe8b9dfa543a26d74733d0cd8ef
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Sep 4 22:05:21 2006 +0200
+
+    Libdrm function headers. Some renaming.
+
+commit 550f51b4bf9920718aab2c611b15de3020537f92
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Sep 4 21:50:12 2006 +0200
+
+    Buffer object wait IOCTL operation.
+    Remove option to wait for fence / buffers and block signals.
+
+commit a6b8e3eaf49044e135a0b9288192525f301458d5
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Sep 4 16:57:20 2006 +0200
+
+    Make memory caches global so that they can be used with
+    multiple heads.
+
+commit b119966ae65c9ee74096cf0b246bf7703cb58ec4
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Sun Sep 3 06:36:06 2006 +1000
+
+    Allow cmdbuf location(AGP,VRAM) and size to be configured.
+
+commit 97291a6ad05848b05af69e52453d93db1e96473b
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Sat Sep 2 22:25:26 2006 +1000
+
+    Use DMA_IN_MEMORY for DMA objects.  This is needed for a DDX change that will
+    be committed soon after this.  Without the change, MEMFORMAT_DMA_OUT appears
+    to have no effect.
+
+commit a96b61fdc4fc3df50c91ca489f45f12cdad74f69
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Sep 1 18:11:34 2006 +0200
+
+    Lindent drm_bo.c
+
+commit 405b5d9ca8cc9f6c5c7bb764c684bf74ba7660c6
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Sep 1 18:11:05 2006 +0200
+
+    Flag bit pattern bugfixes. Remove some error messages.
+
+commit ef8e618cf30ab7dcbe8c7211e0c2508c5520a669
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Sep 1 16:38:06 2006 +0200
+
+    Export buffer info on map and validate ioctls.
+    Add an info ioctl operation.
+
+commit 11f51a9a877d1231551e8c6482a6f70daf380cdd
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Sep 1 15:41:55 2006 +0200
+
+    Bugfixes,
+    Memory allocation optimizations.
+    Buffer manager takedown.
+
+commit 4edb95d6e0a00a9a8885603cab2c99e3c6daa705
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Sep 1 11:23:21 2006 +0200
+
+    Various bugfixes.
+
+commit 44f6d08988a77a640bea40d09cb61eec7566a5ce
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Aug 31 21:42:29 2006 +0200
+
+    Validation and fencing.
+
+commit 03c137c5f8d44c374406efe19c01105fcf34d583
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Aug 31 15:36:40 2006 +0200
+
+    Remove the buffer manager mutex. Use dev->struct_mutex instead.
+    Add a function to free buffers on hold for destruction if their
+      fence object has expired.
+    Add a timer to periodically call that function when there are
+      buffers pending deletion.
+
+commit ec8c79b79de6544cc09b5a2c85213a5f30e0d906
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Thu Aug 31 14:10:13 2006 +0200
+
+    More mapping synchronization.
+    libdrm validate and fencing functions.
+
+commit ed9de124cc88cee398b7013de6b822bfaa3f397e
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Aug 30 21:31:38 2006 +0200
+
+    Lindenting drm_bo.c and drm_ttm.c
+
+commit 914a77a15aae07cc305cc5da5ad6c7a639cbc121
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Aug 30 21:30:47 2006 +0200
+
+    Buffer object binding.
+    Some code reordering.
+
+commit 611662ab287c279a95ae33442325626e0191e2c5
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Aug 30 20:23:40 2006 +0200
+
+    Buffer eviction.
+    Reworked map refcounting so that any process waiting on buffer object unmap
+    will allow in other processes to unmap the buffer object.
+
+commit d39055174b5a487f0d848e1af4c3459fb4261bf1
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Aug 30 17:40:07 2006 +0200
+
+    Remove the buffer object hint field and use it only
+    as an argument.
+    Validate stub.
+
+commit ff95ea5536d70f9bc8eac12f2c97dae71fb97066
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Aug 30 15:11:50 2006 +0200
+
+    Add missing map flags.
+
+commit 14a835be616183e733a2d6a7dcc697b8a6f46caf
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Aug 30 15:08:40 2006 +0200
+
+    Buffer object mapping and mapping synchronization for multiple clients.
+
+commit e47a4fda2ef7aada45b7799ad20e8012102dc12e
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Aug 30 13:04:08 2006 +0200
+
+    Memory manager init and takedown.
+
+commit 033bda07e9a4eab5058fb919b375deb57b08b5be
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Aug 30 09:57:35 2006 +0200
+
+    Buffer object reply fill in.
+    Lindent of drm_bo.c drm_ttm.c
+
+commit 24dddc27549f2b8cf837305ee84dd1ca97df98e7
+Author: Ben Skeggs <darktama@iinet.net.au>
+Date:   Wed Aug 30 16:55:02 2006 +1000
+
+    Add stub {get,set}param ioctls.
+
+commit de144ba23c1245cf021a63cc739c7c9903568272
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Aug 29 21:57:37 2006 +0200
+
+    Part of buffer object libdrm interface.
+
+commit 23f01c9fe8e6170459fe46ad5fc9757bbe967d96
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Aug 29 18:40:08 2006 +0200
+
+    Checkpoint commit. Buffer object flags and IOCTL argument list.
+
+commit 0dedfc2cd03f50b435476e56637b333d345fddbd
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Aug 29 14:52:02 2006 +0200
+
+    Checkpoint ttm addition to buffer objects.
+
+commit 279e8d26c6cf7347aa9cb6d50d025a41dff9a5be
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Aug 29 10:45:34 2006 +0200
+
+    64-bit IOCTL integer (Michel Dnzer & Brian Paul)
+
+commit 205740647060bc3bdec2b4402a666eb1015932ff
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Aug 28 17:51:53 2006 +0200
+
+    Buffer object creation.
+
+commit 0d67356de4e0c9e0d068ea9c16cf33df4fd13776
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Aug 28 16:36:37 2006 +0200
+
+    Proper TTM dereferencing
+    Initial buffer object creation.
+
+commit 3cfab681b3c82c7951f1cc337d2021a6f0d08b1e
+Merge: 8892838 9b984b3
+Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
+Date:   Tue Aug 29 00:01:19 2006 +1000
+
+    Merge branch 'master' into nouveau-1
+
+commit 05536a64785223ee8c57556300a14ba9c89837ae
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Aug 28 13:51:39 2006 +0200
+
+    Buffer object idle and mapping synchronization.
+
+commit 480ea65ee4b02fa21d1ddf3bea09ac23085618cc
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Aug 28 10:58:21 2006 +0200
+
+    Checkpoint buffer object IOCTL stub.
+
+commit e181f594a4a75790ce1d2a8e907f9fcc5e88b419
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Aug 28 09:49:09 2006 +0200
+
+    Add a 64-bit drm unsigned type for 64-bit clean IOCTLS.
+    Conversion functions in drmP.h and xf86drm.c.
+
+commit 4ddabd15620e6e4638a6a37a3a2b5bced626fcf9
+Merge: 886d3b3 9b984b3
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Aug 28 09:28:10 2006 +0200
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into drm-ttm-0-2-branch
+    
+    Conflicts:
+    
+    	linux-core/drmP.h
+
+commit 9b984b34e99f694e10251e15bc2ec1bc844dcca4
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 19 17:59:18 2006 +1000
+
+    drm: lots of small cleanups and whitespace issues fixed up
+    
+    remove a mach64 warning, align a lot of things from linux kernel
+
+commit 60ddaaf2e07b57997bcbaef0576005b52130bd24
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 19 16:56:03 2006 +1000
+
+    add static function, and remove bad attributions
+
+commit 3586ecd060d9468eba73c203c5e9de965fe904fb
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 19 16:55:30 2006 +1000
+
+    fix const pointer warnings with file_operations
+
+commit 205c573e449b38d759273f6a51eb8c1131585ece
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 19 16:55:00 2006 +1000
+
+    remove local copies of pci domain/bus/slot/num
+
+commit b4feb2c04efdcf31d094b03ea32327a06d9dcdd2
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 19 16:43:16 2006 +1000
+
+    remove some DRM_ARRAY_SIZE from linux core code
+
+commit 3a91e1a5fbfbca4654cca0ef41dc016fd8be80dd
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 19 16:36:26 2006 +1000
+
+    fixup some of the comments in drm_context.c
+
+commit 27c72b67eceec7517c34d2ca456c7474a353d6e6
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 19 16:31:34 2006 +1000
+
+    drm: i810_dma.c: fix pointer arithmetic for 64-bit target
+    
+    First warning result from open-coded PTR_ERR,
+    the rest is caused by code like this:
+    
+    *(u32 *) ((u32) buf_priv->kernel_virtual + used)
+    
+    I've also fixed a missing PTR_ERR in i830_dma.c
+    
+    From: Denis Vlasenko <vda.linux@googlemail.com>
+    Signed-off-by: Dave Airlie <airlied@linux.ie>
+
+commit 886d3b3061cdf53f5a353cbaac843f63104d2658
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Aug 27 22:01:33 2006 +0200
+
+    Bugfixes.
+
+commit 928bdc6c1c9cd1e60f0b070533768aaca56c84d8
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Aug 27 21:21:06 2006 +0200
+
+    Initialize i915 saved flush flags.
+
+commit b4b7b997605f88f3ffdcb0cc7cd1271e0cb24073
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Aug 27 21:16:13 2006 +0200
+
+    Remove the ioctl multiplexing, and instead allow for generic
+    drm ioctls 0x80 - 0xFF.
+
+commit ac26b51503dfedf422d6ae49518adcf41dff1af3
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Aug 27 19:45:38 2006 +0200
+
+    Have TTM create and reference ioctl call return the actual TTM size.
+
+commit 4fa58aa15242333a635cb590762c6e6312945745
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Aug 27 19:07:38 2006 +0200
+
+    Add TTM map handle on reference.
+
+commit 65e7274008446d2059b7fd7cd6d7b1d6b04da0ce
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Sun Aug 27 19:03:20 2006 +0200
+
+    ttm create / destroy / ref / unref ioctl.
+
+commit 88928380c87e60d22a0a9698c468036f180f0761
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Aug 27 08:59:50 2006 +1000
+
+    add pci ids for nouveau
+
+commit fef9b30a2b437c0103c33443566604027529b91d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Aug 27 08:55:02 2006 +1000
+
+    initial import of nouveau code from nouveau CVS
+
+commit b99e332236ca5fcc11e8d7c89566bbf3bcf959ee
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Sat Aug 26 12:21:11 2006 +0200
+
+    Bug #7595: Avoid u32 overflows in radeon_check_and_fixup_offset().
+    
+    The overflows could cause valid offsets to get rejected under some
+    circumstances, e.g. when the framebuffer resides at the very end of the card's
+    address space.
+
+commit c488e25ceb421c6f84f110d786d9814ac4dba1b2
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Aug 25 20:03:39 2006 +0200
+
+    More ioctl stubs.
+    Buffer object locking order documentation.
+
+commit 35c8ce6c2945ff09dc52dbc2a7382798ba64c1da
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Aug 25 19:03:42 2006 +0200
+
+    ttm and buffer objects ioctl stubs.
+
+commit 1d3cf107d20cb11ad07667622785ef8341ab9c2a
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Aug 25 18:14:22 2006 +0200
+
+    Module protection map access is moving into mainline kernels.
+    Update drm_compat accordingly.
+    (Reported by Dave Airlie)
+
+commit 4c03030b12bae28dad50d69bd271de632c43ff13
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Fri Aug 25 18:05:35 2006 +0200
+
+    Checkpoint commit
+    Buffer object code.
+
+commit ea5709997329a6c425261dcc454cf7dd97a81167
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Aug 23 13:49:13 2006 +0200
+
+    Fix previous commit: Only fall back to hashed handles
+    when there is a duplicate handle error. Not for other errors.
+
+commit 8fa43d4b2ff4137bab743bfaf6282aa327f16830
+Merge: e201511 459b234
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Aug 23 13:31:45 2006 +0200
+
+    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into drm-ttm-0-2-branch
+
+commit 459b234d79daaa8a003da9ea48775a5587d5ba2a
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Aug 23 11:31:10 2006 +0200
+
+    Allow multiple addMaps with the same 32-bit map offset.
+    (Reported by Dave Airlie)
+
+commit 8dfe917cb26bbeddda0e1b52060d8dce188468f3
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Aug 23 11:21:33 2006 +0200
+
+    Fix hashtab implementation leaking illegal error codes to user space.
+    (Reported by Dave Airlie)
+
+commit e201511a0fbeb177a9ecd7f77d177fc88c1616fb
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Aug 22 11:57:08 2006 +0200
+
+    More ttm cleanups.
+
+commit ca4e34e532e818921f7b2d36fc6886874b7f7924
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Aug 22 11:19:53 2006 +0200
+
+    ttm code cleanup.
+    Fix the sleep-in-page-table-spinlock bug discovered by Dave Airlie
+
+commit a6535c8db4614376ce8ecb7d889b92db066a96cc
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Aug 22 10:44:09 2006 +0200
+
+    Add a fence object class field for future use (For example VSYNC fence objects)
+
+commit 7058d06317e17253d874bf4df7b09d0d52a5fd74
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Aug 22 10:24:48 2006 +0200
+
+    Initial i915 buffer object driver
+
+commit b81ca5e031b2fbd9c5c401057c72f5857f7f5a3a
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Aug 22 10:09:57 2006 +0200
+
+    AGP backends for TTM.
+
+commit 700bf80ca9fadf2c1404c220addebd92d9ad799d
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Tue Aug 22 09:47:33 2006 +0200
+
+    Bring in stripped TTM functionality.
+
+commit 8d5b7c77f9b31aa9bcf81536d39769f4f3feeb63
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Aug 21 21:37:43 2006 +0200
+
+    Allow longer sequence lifetimes.
+
+commit e089de33e8efd87b30d59c571b9ab9aa302b23e1
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Aug 21 21:36:00 2006 +0200
+
+    i915 fence object driver implementing 2 fence object types:
+    0x00 EXE fence. Signals when command stream interpreter has reached the point
+    where the fence was emitted.
+    0x01 FLUSH fence. Signals when command stream interpreter has reached the point
+    where the fence was emitted, and all previous drawing operations have been
+    completed and flushed.
+    Implements busy wait (for fastest response time / high CPU) and
+    lazy wait (User interrupt or timer driven).
+
+commit 6571f74a4906ae4f5f92916d64cc2cce3c8e0043
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Aug 21 21:12:29 2006 +0200
+
+    Remove some accidently included TTM code.
+
+commit 657bacc3953e8e51a0a15bd872e9818c9dbcbc10
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Aug 21 21:04:36 2006 +0200
+
+    Add missing fence type define.
+    Add drm_fence.o to Makefile
+
+commit 166da9355d95affe427a6cff3525df60e80a99df
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Aug 21 21:02:08 2006 +0200
+
+    User / Kernel space fence objects (device-independent part).
+
+commit 1c787f0d396c309131d5f34939598d657ee2459f
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Aug 21 20:38:57 2006 +0200
+
+    Backwards compatibility code for ttms.
+
+commit 42c2cfcf7d5730a2961d425228e042f533b312fa
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Aug 21 20:30:19 2006 +0200
+
+    Generic DRM support base-class support for user-space objects, like
+    fence objects and buffer objects:
+    Refcounting,
+    Inter-process sharing,
+    Synchronization
+    Destruction.
+
+commit 11f9e404fb66927146de30227fa05c5485aa1726
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Aug 21 17:02:44 2006 +0200
+
+    Avoid using vmalloc for small hash tables.
+
+commit 0afb877a37a33e8493628ddc267fb00650fd1840
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 19 17:59:18 2006 +1000
+
+    drm: lots of small cleanups and whitespace issues fixed up
+    
+    remove a mach64 warning, align a lot of things from linux kernel
+
+commit 78634c14a8f92fbbc404442ce6d7b170e6a6e561
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 19 16:56:03 2006 +1000
+
+    add static function, and remove bad attributions
+
+commit d90a55fe3488020967a4d1b1699ef1f42d50b422
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 19 16:55:30 2006 +1000
+
+    fix const pointer warnings with file_operations
+
+commit 3a681bb4c12ee1042eb31ec565a3eb2ecccddd3d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 19 16:55:00 2006 +1000
+
+    remove local copies of pci domain/bus/slot/num
+
+commit cc71393559b94ba491059822d7cad388460a0ddf
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 19 16:43:16 2006 +1000
+
+    remove some DRM_ARRAY_SIZE from linux core code
+
+commit 4b38f72672c53ed64f016241dcb5d770894657b8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 19 16:36:26 2006 +1000
+
+    fixup some of the comments in drm_context.c
+
+commit f89a576aece919f2f9bd42b7d36a5df62cb0d68e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 19 16:31:34 2006 +1000
+
+    drm: i810_dma.c: fix pointer arithmetic for 64-bit target
+    
+    First warning result from open-coded PTR_ERR,
+    the rest is caused by code like this:
+    
+    *(u32 *) ((u32) buf_priv->kernel_virtual + used)
+    
+    I've also fixed a missing PTR_ERR in i830_dma.c
+    
+    From: Denis Vlasenko <vda.linux@googlemail.com>
+    Signed-off-by: Dave Airlie <airlied@linux.ie>
+
+commit 0316f93d51abc52b816e936e0ece304ac47799c3
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Wed Aug 16 16:36:56 2006 +0200
+
+    Remove hash tables on DRM exit.
+
+commit 4daa024918d461ab8d173631fa5187dc50253b67
+Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
+Date:   Mon Aug 14 17:11:14 2006 +0200
+
+    Avoid kernel oops in some error paths calling drm_lastclose().
+
+commit 0d60cd0036c6bc5383cdc1dad719950afd68cbbf
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Aug 14 11:52:34 2006 +1000
+
+    remove all TRUE instances as well
+
+commit 18a48a9267826a3c81e87a5fa9bba79ea0cd295c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Aug 14 11:49:52 2006 +1000
+
+    remove all TRUE/FALSE no need for this in the drm, use 0 or 1
+
+commit 7a46d4139982cc82559ccf9a1bc09a52bdf12223
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Aug 10 14:38:50 2006 +1000
+
+    i965 code and Linux coding style < 0
+    
+    smack my whitespace up.
+
+commit 5340a7022766f3437fcaf9d8d4d83944befc2fa2
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Aug 10 14:32:18 2006 +1000
+
+    cleanup some whitespace issue and move compat code to compat header
+
+commit df7378d7fa9d048aea6911a3fe4973050003401b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Aug 10 14:31:56 2006 +1000
+
+    clean up script to create an lk drm directory
+
+commit 28069ff10f288d06eb15ce0425def3625157187f
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Aug 10 14:31:22 2006 +1000
+
+    drm: ati_pcigart cleanup
+    
+    use NULL instead of 0, cleanup some whitespace
+
+commit 48cb9aceed782a4e9c557f30429e65f845dd777d
+Author: Alan Hourihane <alanh@tungstengraphics.com>
+Date:   Tue Aug 8 15:05:54 2006 -0700
+
+    Add support for Intel i965G chipsets.
+    
+    This is a patch prepared by Guangdeng Liao based off of Tungsten Graphics's
+    final code drop.
+
+commit e524028630013bb0f436bcdca0396289745843cf
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Aug 7 21:34:40 2006 +1000
+
+    drm: whitespace cleanup in new files
+
+commit 4b3ea90bc4ceeae440c64e0af8b59cf77ea7b622
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Aug 7 21:00:13 2006 +1000
+
+    drm: remove extra whitespace from drm_mm.c
+
+commit 248d1a32a2462904bcaf040320b490570b4b0be6
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Aug 7 20:56:38 2006 +1000
+
+    drm: fixup whitespace and style for Linux kernel import
+
+commit 35066b51efeb0d2ae9b4ba7fba066f80f798539d
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Jul 26 18:21:32 2006 +0200
+
+    Revert "Make sure busmastering gets disabled on module unload."
+    
+    This reverts af7b89d7246efbed7d05c38fcaa6a13c4b89db90 commit. It causes an oops
+    on X server shutdown here, and for the reporter of bug #7629 as well.
+
+commit 645453ce11f819c4e9dd9be95ce9d621dc7d466b
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Jul 26 18:14:20 2006 +0200
+
+    Bug #7629: Fix for CHIP_IS_AGP getting 'restored' with non-AGP cards
+    
+    Commit 2a47f6bfecea5dabcbf79d5e1aaf271f50070b89 caused the CHIP_IS_AGP flag to
+    get 'restored' with PCI(e) cards. I can't think of a way to fix this without
+    introducing a (otherwise redundant) CHIP_IS_PCI flag.
+
+commit 09c901e4bdf2bd18110f963ef3759f6759f15317
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 24 11:09:41 2006 +1000
+
+    remove incorrect exit marking on cleanup pci as this is called from other paths
+
+commit 5cfbd5dbab4fe9668771377cb22da04c6103459e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 24 10:51:27 2006 +1000
+
+    switch drm to use Linux mutexes instead of semaphore.
+    
+    I hope the fallback compat code works if not shout at me.
+
+commit 6677e2a10b820a5ccfd375cc627b8e41453a71da
+Author: Adam Jackson <ajax@theobromine.nwnk.net>
+Date:   Wed Jul 19 16:19:25 2006 -0400
+
+    Delete the pre-core DRM code with extreme prejudice.
+
+commit af7b89d7246efbed7d05c38fcaa6a13c4b89db90
+Author: Adam Jackson <ajax@theobromine.nwnk.net>
+Date:   Wed Jul 19 15:35:31 2006 -0400
+
+    Make sure busmastering gets disabled on module unload.
+
+commit d5e0f8bdaf8769642950b8219f0e80f6b523817d
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Jul 19 19:18:32 2006 +0200
+
+    Use RADEON_RB3D_DSTCACHE_CTLSTAT instead of RADEON_RB2D_DSTCACHE_CTLSTAT.
+    
+    The latter seems to be a read-only mirror of the former.
+
+commit 2a47f6bfecea5dabcbf79d5e1aaf271f50070b89
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Jul 19 19:16:26 2006 +0200
+
+    Make sure CHIP_IS_AGP flag is set when not overriding to PCI mode.
+    
+    This allows using AGP after overriding to PCI mode in a previous session
+    without reloading the DRM.
+
+commit c91748e702af1c59d88a4b6c2afb20a781dc6660
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Jul 19 19:13:00 2006 +0200
+
+    When writeback isn't used, actually disable it in the hardware.
+    
+    Not doing this might waste bus bandwidth or even cause memory corruption or
+    system crashes on systems that check bus transfers. No such incident has been
+    reported though.
+
+commit e337eadcec9c1e2cf885167c076ab2407bd6c090
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Jul 19 19:07:06 2006 +0200
+
+    Implement RADEON_PARAM_SCRATCH_OFFSET getparam.
+    
+    When this succeeds, userspace can read the scratch register contents from the
+    mapped writeback page directly.
+
+commit 7dea64677b62418b14d34c41399cdb8bf8b817cd
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Jul 19 19:01:33 2006 +0200
+
+    Some debug output when the getparam ioctl is called with an unknown parameter.
+
+commit b9243ce3d5ed6bd70851a132871387d4d2e886bc
+Author: Michel Dänzer <michel@tungstengraphics.com>
+Date:   Wed Jul 19 18:31:43 2006 +0200
+
+    .cvsignore -> .gitignore
+    
+    Sort the merged file, remove the redundant explicit .ko lines and add
+    some generated symlinks.
+
+commit 126673d62afad6da84e833daa644a352d88a5e37
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Tue Jul 11 14:37:37 2006 +0000
+
+    Keep hashed user tokens, with the following changes:
+    32-bit physical device addresses are mapped directly to user-tokens. No
+        duplicate maps are allowed, and the addresses are assumed to be outside
+        of the range 0x10000000 through 0x30000000. The user-token is identical
+        to the 32-bit physical start-address of the map.
+    64-bit physical device addressed are mapped to user-tokens in the range
+    0x10000000 to 0x30000000 with page-size increments. The user_token should
+        not be interpreted as an address.
+    Other map types, like upcoming TTM maps are mapped to user-tokens in the
+        range
+    0x10000000 to 0x30000000 with page-size increments. The user_token should
+        not be interpreted as an address.
+    This keeps compatibility with buggy drivers, while still implementing a
+        hashed map lookup. The SiS and via device driver major bumps are
+        reverted.
+
+commit a392349691ec2aa3f83d8a9fc4a485e4dbef4bbe
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Mon Jul 10 13:00:21 2006 +0000
+
+    Change drm Map handles to be arbitrary 32-bit hash tokens in the range
+        0x10000000 to 0x90000000 in PAGE_SIZE increments.
+    Implement hashed map lookups.
+    This potentially breaks both 2D and 3D drivers. If so, the corresponding
+    2D and 3D driver should be fixed, and it's corresponding drm device driver
+        should have its major bumped as soon as possible.
+    Bump sis and via drm device driver majors.
+    The SiS and Unichrome 3D drivers are fixed in Mesa CVS HEAD and
+        mesa_6_4_branch.
+
+commit c21a7b763ad31c3473ba2c9a1a01bb729bc13bb5
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Wed Jul 5 15:52:35 2006 +0000
+
+    SiS 315 Awareness.
+
+commit 264f60ded4921e00f83198fa48e82037f26e818c
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Wed Jul 5 14:39:22 2006 +0000
+
+    Add missing semaphore release.
+
+commit 56b073385213d187535fbbd24adaf9ebeb7c752f
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Tue Jun 27 21:04:50 2006 +0000
+
+    Disable building static libraries. Bump to 2.0.2 for header updates.
+
+commit aafedbf7c57903949e74fc7123a1f1fc1e94ea47
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Jun 23 16:29:39 2006 +0000
+
+    Fix compilation problem on 2.6.9 kernels (bug #6211)
+
+commit da143d0606e321e48037d39e0c82355a4695328a
+Author: Keith Packard <keithp@keithp.com>
+Date:   Thu Jun 22 21:34:44 2006 +0000
+
+    Remove spurious debug messages from i915 vblank config paths
+
+commit f8891ef802e3417c4ecda08d597e081485d75060
+Author: Keith Packard <keithp@keithp.com>
+Date:   Wed Jun 21 00:15:10 2006 +0000
+
+    i915: Save vblank pipe configuration to restore on resume
+
+commit 83f256e60e44d83304df44cead6617212fe437b4
+Author: Keith Packard <keithp@keithp.com>
+Date:   Mon Jun 19 20:15:53 2006 +0000
+
+    Add i915 ioctls to configure pipes for vblank interrupt.
+    i915 vblanks can be generated from either pipe a or b, however a disabled
+        pipe generates no interrupts. This change allows the X server to select
+        which pipe generates vblank interrupts.
+
+commit 58b63ee5ccc1427a6835ef5112fe556faa9e1be3
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Mon Jun 19 09:12:50 2006 +0000
+
+    Fix buffer cleanup on close. Move memory manager reset from final_context
+        to lastclose.
+
+commit 96f272884d6caf7940c9bc3c95dcac75b0a8cd3f
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Mon Jun 19 09:01:31 2006 +0000
+
+    via: Bump version number and date.
+
+commit 0203edaa21451c2840d3c4116fb0bdbec82cb0fe
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Fri Jun 16 15:20:20 2006 +0000
+
+    via: Return the requested size instead of the correct size of the allocated
+        regions. The 2D driver and XvMC lib has problems when the returned size
+        is not the same as the allocated size.
+
+commit ca1a77683d523dc1d2268531b19ea23b3e1ae4f0
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Thu Jun 15 18:37:05 2006 +0000
+
+    via:
+    -Remove out of memory error message.
+    -Move sman cleanup from final_context to lastclose.
+    -Add the P4VM800PRO (?) PCI ID.
+
+commit 6c7faf5814547169dec2b865abf1f63b83aaeb05
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Tue Jun 6 17:52:03 2006 +0000
+
+    s/list_entry/drm_hash_entry/ for "drm_hash_item"s.
+
+commit 1a9e5bae109b476f9ee34975242c8938aaac4146
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Tue Jun 6 17:46:17 2006 +0000
+
+    Fix drm_remove_magic potential memory leak / corruption. Move drm
+        authentication token hashing to new generic hash table implementation.
+
+commit 6bacb180cef00573fc41a1e79bdd5b89d6f1c1f5
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Tue Jun 6 14:19:00 2006 +0000
+
+    Merge in the drm-sman-branch
+
+commit 838b03f7aad579bcb593c06e44ade02a0583d3ce
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Sun May 28 16:20:29 2006 +0000
+
+    file via_mm.c was initially added on branch drm-sman-branch.
+
+commit 7fbfb53c00c3acd5965badf1e62e8a4bb836ee22
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Sun May 28 16:20:29 2006 +0000
+
+    file drm_sman.h was initially added on branch drm-sman-branch.
+
+commit 09872c9ab3bb597c37a83edd3bf365db46e6d507
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Sun May 28 16:20:29 2006 +0000
+
+    file sis_mm.c was initially added on branch drm-sman-branch.
+
+commit 36160c80604a4c10c70877afb5be98210096636e
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Sun May 28 16:20:29 2006 +0000
+
+    file drm_sman.c was initially added on branch drm-sman-branch.
+
+commit 31a80d39e52097a599e77b3e52bac70da8315308
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Fri May 26 19:33:02 2006 +0000
+
+    file drm_hashtab.h was initially added on branch drm-ttm-branch.
+
+commit f4e6e4499c1b7a26de2bbf36568f75315faec212
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Wed May 24 18:36:24 2006 +0000
+
+    Add support for r200 vertex programs (R200_EMIT_VAP_PVS_CNTL, and new
+        packet type for making it possible to address whole tcl vector space
+        and have a larger count)
+
+commit 9e0320a0ad926202f1598698ad9bc728949ba0e7
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Sat May 20 09:20:05 2006 +0000
+
+    add forgotten register define for previous commit
+
+commit e1b627c17e31bb659fe8aeffeaa2e301d5e2a88c
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Sat May 20 09:08:18 2006 +0000
+
+    Do a tcl state flush before accessing tcl vector space. This fixes some
+        more problems with flickering (bug #6637). drm may not be appropriate
+        place for this, since doing that flush there might both be overkill and
+        insufficient in some cases. However, it's hard to figure out when that
+        flush is needed, so this has to suffice. There does not seem to be a
+        performance penalty associated with it.
+
+commit 79e596917290807f11ba6f529abc30b7c6336e52
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri May 19 04:11:22 2006 +0000
+
+    rip out unneeded back compat code
+
+commit b1a64b8136b3dafb843d9b677becfdb5f2ac1eb8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu May 18 07:32:37 2006 +0000
+
+    add consts to radeon microcode.
+    From: tilman
+
+commit bdd381a7cea814d12d3207a67503cc1a5e353bed
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 17 06:07:57 2006 +0000
+
+    Set entry->virtual for sg maps, fixing ATI PCI/PCIE GART support.
+    PR: kern/97056 Submitted by: Stanislav Sedov <ssedov@mbsd.msk.ru>
+
+commit dcfcf1a84d400f9c1ade36a233f0a18131115921
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 17 05:44:39 2006 +0000
+
+    Add the bits for vblank support on FreeBSD, which most importantly avoids
+        chasing a NULL pointer at the first 3d app invocation.
+
+commit 7ea4a88fa30d9608b09dc0052b20e54301db547a
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 17 05:41:48 2006 +0000
+
+    Add the workaround that's in the kernel to suppress GCC's warning about
+        refusal to inline functions that (in some cases, at least) aren't that
+        large.
+
+commit d365f031292d0f50755a3049c410443b1075fff5
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Apr 23 09:05:05 2006 +0000
+
+    fixup GFP_COMP for older kernels and get_page/put_page for newer
+
+commit 30a5787d3671fba89d14efb638695c2dd61adf03
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Apr 23 08:07:57 2006 +0000
+
+    Fix from Benh for ppc r300 scratch
+
+commit 4a49e6c3668dd281f70a13fb382fac93452758e2
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Thu Apr 20 14:26:59 2006 +0000
+
+    check for __FreeBSD_kernel__ (bug 3810)
+
+commit 1327222f9b5521c2d98f7550eb335b68e2af3aea
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Apr 18 06:12:22 2006 +0000
+
+    Err, use "ifndef" rather than "if !", to avoid compiler warning.
+
+commit 2abd1f270bccfdda6e87021000ba88e07f54c181
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Apr 18 06:08:17 2006 +0000
+
+    Reorder the DRM_*_AGP enum to match linux's numbers (oops). Fixes i915
+        attachment. Make our mga_drv.c use them, while I'm here.
+    Submitted by: Jonathan Fosburgh <jonathan@fosburgh.org>
+
+commit 40b70e324430e36f10d6229793acf66d9104aff7
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Apr 18 05:57:28 2006 +0000
+
+    Use __LP64__ instead of checking the linux-specific BITS_PER_LONG.
+
+commit 63c4d0257616c799d4f0bb84be3f17dbaf867495
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Apr 9 20:10:32 2006 +0000
+
+    Revert a change that accidentally went in with whitespace changes from
+        Linux, which broke on FreeBSD. DRM_COPY_*_IOCTL checks for the size
+        parameter matching the ioctl's command size there, since the copin/out
+        happened earlier.
+
+commit 6cb366b5a83996fc7f4ceb6b4af1a89473407866
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Apr 8 09:45:43 2006 +0000
+
+    Compile fixes for FreeBSD.
+
+commit 299aad03c2148bb3e9efdb29b89e70b712a2e055
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Apr 5 08:34:24 2006 +0000
+
+    coverity bugfix from the kernel
+
+commit 4f53bf35454422db7cdd8db52b95016a9ec0dd2e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Apr 5 01:23:57 2006 +0000
+
+    remove stupid init and exit flags..
+
+commit ac5bd25208d2f636edb45b71de11decdde781862
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Apr 3 08:06:51 2006 +0000
+
+    make add context non master...
+
+commit 985738f203f06aa630feaf4ef15b794ea50d3ee9
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Mar 25 07:16:14 2006 +0000
+
+    radeon fix up the PCI ids for new memory map like the kernel one.. not
+        perfect but should be very safe... align some other kernel bits i810
+        align with kernel
+
+commit 9c92b55953836589184f72f5a0c509f72af94786
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Mon Mar 20 21:40:54 2006 +0000
+
+    Bump driver date to reflect airlied's last fix.
+
+commit 6bb92ab086c7e21fe90b835f20e6ba493e988cf6
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Mar 19 07:53:46 2006 +0000
+
+    fix issue in mga from kernel
+
+commit 8c8f937b3de12185e3c0041726a9f6fd5f3d21ff
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Mar 19 07:52:53 2006 +0000
+
+    make some functions static in via driver
+
+commit 38376c7fa66234107ab6d69b828eb4ca8a3ad0ea
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Fri Mar 17 01:35:34 2006 +0000
+
+    Add missing pci ids for new radeons (most but not all are pcie, r420,
+        rv380, rv410), with the exception of the rs400 igps. Hopefully they no
+        longer lock up with new ddx, but no guarantees... (bug #5413)
+
+commit 14d1219442c679c754fcc4e27460610ae219951a
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Wed Mar 15 01:02:54 2006 +0000
+
+    Avoid walking off the end of the hash table. (Coverity report #465)
+
+commit ea40d3dd41cb3c562caf404fead9fdaa0b97565c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Mar 8 23:01:32 2006 +0000
+
+    Fix bug I reintroduced
+
+commit ef835973b2f26410f9c9d3abed3b3f4828a716c1
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Mar 8 06:03:45 2006 +0000
+
+    fix some use before NULL check
+
+commit 4436ab86d8c0e1177bbec276c605d133e7c82ff0
+Author: Aapo Tahkola <aet@rasterburn.org>
+Date:   Tue Mar 7 01:08:35 2006 +0000
+
+    ia64 support for r300_scratch. (not tested)
+
+commit b3fdf9bb7acd023060e0dba07d3b439c3b64faef
+Author: Aapo Tahkola <aet@rasterburn.org>
+Date:   Mon Mar 6 20:08:50 2006 +0000
+
+    Add general-purpose packet for manipulating scratch registers (r300)
+
+commit 02f76f41b12e1465db4e4a48c0b81977a8bd3d8d
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Wed Mar 1 22:22:25 2006 +0000
+
+    file xf86mm.c was initially added on branch drm-ttm-branch.
+
+commit 0f13b3e1b1765b150ffe42b759355687b040210e
+Author: Thomas Hellstrom <thomas@tungstengraphics.com>
+Date:   Wed Mar 1 22:22:25 2006 +0000
+
+    file xf86mm.h was initially added on branch drm-ttm-branch.
+
+commit 06e8bd2a0d668487f4124cde16629610f8f557ff
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Sat Feb 25 09:51:15 2006 +0000
+
+    Add all radeon pci ids known by ddx, but only r350/rv350 and below (new
+        chips may be problematic). Leave the existing entries for new chips in
+        though. Remove ids not known by ddx (secondary ids, non-existant,...).
+        Correct some entries (name/family). Make the radeon family enum look
+        more alike the ddx/dri versions. See #5413
+
+commit 9c0634bbadca0216749a336e587fd51b12307637
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Feb 21 11:10:05 2006 +0000
+
+    set dma pages reserved
+
+commit abd3904bf0c5bcbf2f2ec117a3d2216dd5f830ef
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Feb 21 10:28:47 2006 +0000
+
+    use coherent memory for PCI allocations with COMP flag
+
+commit 22e41ef08338ae6dd59acbe6d4d8e50d83672816
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Mon Feb 20 23:09:00 2006 +0000
+
+    Formatting cleanup, dead code removal. Remove N() namespacing macro,
+        useless. Remove SIGIO handling functions as they're server-only and
+        properly belong in libdri.
+
+commit 0a211db23c0d7e22946aa25f22e9aeab6783b617
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Feb 19 12:08:14 2006 +0000
+
+    experimental PCI DMA fixes use proper Linux interfaces
+
+commit 4c1c05ad96bd174d82ab94da7a0645bc448442f6
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Feb 19 12:06:27 2006 +0000
+
+    missed a piece of benh patch
+
+commit a25667894a8b8cab1dc8a48994cd9a61ecaba152
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Feb 18 05:43:19 2006 +0000
+
+    make some functions static from the kernel
+
+commit d75fa645ed03ee0e2ffddc629b050626ddde5776
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Feb 18 05:30:03 2006 +0000
+
+    fix brace placement
+
+commit b2523e7aa103d7d0451ae460d4ab5c7556eebf8e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Feb 18 04:18:45 2006 +0000
+
+    always enable and set master on pci device
+
+commit eb5666b089ac0defe9a8ae3d218c9d4a098f683b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Feb 18 04:13:36 2006 +0000
+
+    clear i915 interrupts sources on server exit
+
+commit 7c18b2565ed3fc1952356967a1e057d86df6484a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Feb 18 03:21:29 2006 +0000
+
+    add proper checking for bitblt multi
+
+commit 9fad101da95bfd37987b797020f71fe306c6f876
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Feb 18 03:04:30 2006 +0000
+
+    add benh's memory management patch
+
+commit 08fafc424a6266fa5e3d6ba755dea22e384e9683
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Feb 18 03:01:38 2006 +0000
+
+    fix build wrong function call
+
+commit 4791dc885619b1a6460c1fcf48f648945feea4d3
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Feb 18 02:53:36 2006 +0000
+
+    major realigment of DRM CVS with kernel code, makes integration much easier
+
+commit 585f34c3e533cafd687beba161d6d0379b52bb47
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Feb 18 02:38:07 2006 +0000
+
+    fix card unload
+
+commit ff9ecc09f98a345078554bac2992f96adde9038f
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Feb 18 02:34:53 2006 +0000
+
+    Fixup test for memory at end of memory space
+
+commit 659e9a091d3ea61d291d6e2f0fbfb20e685dbcbf
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Fri Feb 17 17:25:41 2006 +0000
+
+    via: Change via_drm.h versioning scheme after lenghty discussion on
+        unichrome-users.
+
+commit 75bf1c268fc56352631ddb10f8bedb5c9b2c8105
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Fri Feb 17 16:54:37 2006 +0000
+
+    file i915_ttm.c was initially added on branch drm-ttm-branch.
+
+commit 292d4a5b28af80f24f0db0e85c93f8067ed47b26
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Feb 9 23:14:16 2006 +0000
+
+    Update the hardware breadcrumb in the sarea on irq reception so that
+        clients can avoid an ioctl waiting on fences that have already been
+        received. Would be even better if the hardware did the update itself.
+
+commit f99fc2c12d3cb36706700fb70ff5301f956d1cb8
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Wed Feb 1 12:58:38 2006 +0000
+
+    file drm_mm.c was initially added on branch drm-ttm-branch.
+
+commit 07e1126bde7c4a9e9737894748822f98e914922f
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu Jan 26 12:14:09 2006 +0000
+
+    add missing name, desc, date, major, minor and patchlevel entries
+
+commit 1f0da9dacaa8a98958f9922729c0cf597a561399
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Jan 24 21:24:53 2006 +0000
+
+    fix an error message typo Unkown -> Unknown
+
+commit f19c9eecd115f5535b62a37a8ab79a2b3f73c5b0
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Jan 24 21:18:41 2006 +0000
+
+    other part of revert
+
+commit 788750fc8cb2647d616aad75b3255d497b356f36
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Jan 24 21:16:54 2006 +0000
+
+    put back some of Dave's code related to vblank support - accidentally
+        reverted.
+
+commit 3e8918adc8ba9405e9f496d50a3f4060b31d1dfb
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Tue Jan 24 14:08:05 2006 +0000
+
+    file Makefile.am was initially added on branch drm-ttm-branch.
+
+commit 8a9ecf45fa9be2879c4b0c08c8407a538d1be147
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Tue Jan 24 11:20:05 2006 +0000
+
+    file drm_hashtab.c was initially added on branch drm-ttm-branch.
+
+commit 270cffbe43955033a54dd54695ca1108194e087e
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Jan 23 10:05:22 2006 +0000
+
+    Fix CMDBUFFER path, add heap destroy and flesh out sarea for rotation
+        (Tungsten Graphics)
+
+commit 9a01593f1aeda40abc5815b70fff9f909702501c
+Author: Aapo Tahkola <aet@rasterburn.org>
+Date:   Fri Jan 20 21:45:28 2006 +0000
+
+    Add support for texture cache flushes (R300_TX_CNTL)
+
+commit 534bfb3742459af8d9a30579d8f9b6ab18b475d0
+Author: Aapo Tahkola <aet@rasterburn.org>
+Date:   Fri Jan 20 21:30:07 2006 +0000
+
+    Sync from r300_reg.h from Mesa.
+
+commit e9732865b7c05f2930a0c8b1751aad7929a2f3a7
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu Jan 19 14:14:06 2006 +0000
+
+    add Intel i945GM support
+
+commit d394c9fa082407591586856afbaeb0833f5a7534
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Thu Jan 12 19:08:16 2006 +0000
+
+    via: direction bug in get_user_pages call in via_dmablit.c fixed. Bumped
+        minor since this causes the via DDX to fail with vlc video player.
+
+commit 2e0c281d1aabdf5b775a2f7de804d2f34a500124
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Fri Jan 6 11:57:40 2006 +0000
+
+    via: Version via_drm.h Alter the drm_via_dmablit_t IOCTL arg.
+
+commit a019c10c303bb1b2741a1da5b582ae45977085a5
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Fri Jan 6 11:52:01 2006 +0000
+
+    via: Last commit really required a bump of minor. Fix.
+
+commit 661004544c004090edfbb8541850303b4780b8b4
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Fri Jan 6 11:19:06 2006 +0000
+
+    via: Combine PCI DMA transfers with stride==width (Idea from Luc
+        Verhaegen). A somewhat saner PCI DMA transfer size check. Fix some
+        typos. Bump patchlevel.
+
+commit 3f23f9b99db5d62fac6ab0f1e61f32f23ba5021b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 2 09:17:41 2006 +0000
+
+    nothing from VIA or S3 in this
+
+commit 2a9dbb2895c4ba78a6e7553fc0fb385f981b3d27
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 2 05:55:31 2006 +0000
+
+    make max minor more rational
+
+commit 92150972e5472cdf039c875dae4afee6613ee915
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 2 05:54:10 2006 +0000
+
+    use drm_cards_limit instead of cards_limit
+
+commit 781d96c61fdcc5bafe65053878d351100bf130e1
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 2 05:52:17 2006 +0000
+
+    use common read/write routines
+
+commit 8fef6fe4f02838447edbf6e99fd16df31a486772
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 2 05:43:04 2006 +0000
+
+    sparse cleanups
+
+commit bbcba83ef70013ea2e5daad86142d1fdc84939e4
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 2 05:39:19 2006 +0000
+
+    The radeon DRM wasn't passing sparse checking in the kernel, this fixes it
+        by adding a new kernel internal cmd buffer type, that has no userspace
+        members, and passes it around.
+
+commit dcbcc60864fbe592a949a1c250e1494e73504724
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 2 05:38:03 2006 +0000
+
+    align spacing with kernel
+
+commit 1ad5dfc369a4202d51fc471cd0050b299d1fab8b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 2 05:22:50 2006 +0000
+
+    whitespace cleanup/aligment with kernel
+
+commit b2be72c44468f67e37e434a1e30b811963274f9c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 2 03:44:23 2006 +0000
+
+    some fixes from linux kernel
+
+commit fb91c500bfee9777421be5706e0a3b3e5049d6de
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 2 03:32:03 2006 +0000
+
+    complete fix for historic attribution
+
+commit 1d86c36655f3c5821e62a24d4a320b5bc0e1be64
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 2 03:30:57 2006 +0000
+
+    complete fix for attribution
+
+commit 42cd50fa905aea4fcdbab9ce39a54551a9a1baa9
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 2 03:25:49 2006 +0000
+
+    Realign via driver with changes in Linux kernel (mainly whitespace)
+
+commit 26462b9aa47179e724e78f0b3b1c86fd07f61d8d
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Dec 31 11:48:12 2005 +0000
+
+    Initialize sv.drm_dd_minor to "don't care" along with dd_major, to appease
+        valgrind.
+
+commit 7f2c7f9977d3e62c594d47ca8a5d7fefac2fc4de
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Dec 30 02:17:05 2005 +0000
+
+    Merge patch from jhb to catch up with FreeBSD-current vgapci master device
+        changes.
+
+commit 780e90e4a265532cf96c887267b80c691f016996
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Dec 29 00:17:51 2005 +0000
+
+    add radeon card type get param so userspace can avoid walking PCI
+
+commit b14d15ac41c0af5093e37a47124f0995e10c3016
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Dec 28 23:49:59 2005 +0000
+
+    Add vblank support to i915 DRM..
+
+commit 4c988520a851ed42c1dd9e9f7cda2e79f5a23fc7
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Dec 28 22:36:51 2005 +0000
+
+    step back one reported bugs against that patch
+
+commit 274fdf482ba5b33167213f76e6c17943ddf51985
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Dec 16 08:02:17 2005 +0000
+
+    fix radeon memory mapping from Ben Herrenschmidt
+
+commit e7b0176584bc116faadcb59b7086a99e24651eb6
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Dec 16 07:59:13 2005 +0000
+
+    Lindent some via files
+
+commit 2911edaed70b164c5886ee4f71df769c5e02e0c0
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Dec 5 10:53:06 2005 +0000
+
+    Remove driver.device_is_agp code duplicated in drm_device_find_capability,
+        when it really wanted to live in drm_device_is_agp.
+
+commit 0b4fdc81d15c1ff8acfe6fcdfcdd58a13fb3696e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Dec 5 01:11:20 2005 +0000
+
+    add texrect support for r300
+
+commit be16e93537d746365a43479de3a997af7969bb84
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Dec 4 01:24:23 2005 +0000
+
+    Fix from SuSE for issue with context creation failure
+
+commit f5a9f27bf6c831f244bc27f82ed49f35d832178e
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Dec 2 23:55:21 2005 +0000
+
+    Add RV410 X700PRO PCI ID
+    Submitted by: Adam K Kirchhoff <adamk@voicenet.com>
+
+commit 20fcbae5ac86b2d10b23253245f5e88b78d2c76f
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Dec 2 23:41:47 2005 +0000
+
+    Finish the last bits necessary to get the i915 DRM port working on FreeBSD
+    Submitted by: Alexey Popov <llp@iteranet.com>
+
+commit 422002dc8434061729b1558ac846648041c46ab3
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Dec 2 08:47:04 2005 +0000
+
+    FreeBSD PR kern/85479: Restore the enabling of debugging by default by the
+        DRM_DEBUG kernel option. It remains controlled by hw.dri.*.debug no
+        matter what.
+
+commit 7d735a8c9fde5fe4401067791926bdae16473587
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Wed Nov 30 18:44:54 2005 +0000
+
+    Bump package and DSO numbers to 2.0 to reflect 32/64 ABI change
+
+commit f28dddb5515cb1c16f8c29e025195ea29d9f01d4
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Wed Nov 30 03:51:46 2005 +0000
+
+    Resync from Xorg head: conditional include of xorg-config.h
+
+commit ea08b613bdc496b0e1aa3b723f8462d2c40ed8e5
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Wed Nov 30 02:55:14 2005 +0000
+
+    Resync from Xorg head (Bug #3815, GNU/kFreeBSD hack)
+
+commit b3189730e7b0e574a28bd4947c407457cec4f7c8
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Tue Nov 29 21:10:59 2005 +0000
+
+    Add TODO based on my email from a while ago
+
+commit 6941b375e86542d669366a45553ec536f9d98e48
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Tue Nov 29 20:03:38 2005 +0000
+
+    Remove redundant #ifdef stanza
+
+commit 48198970ce449165fe1c7294108ca3afc775563d
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Tue Nov 29 20:02:34 2005 +0000
+
+    Error checking for drmStrdup (Tilman Sauerbeck)
+
+commit 7ede209ce0cbbc65f79d02e2cc43cfcb3abb6e99
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Nov 29 09:50:47 2005 +0000
+
+    fixup xf86drm.c for new headers
+
+commit 0db80529d540fabd148275f8f9c999615153edbe
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Nov 29 09:46:27 2005 +0000
+
+    Fix from Hugh Dickins for consistent mapping
+
+commit 645e2d411d4cb79db307351169413004d8b5a2ea
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Nov 29 09:19:20 2005 +0000
+
+    fixes from Egbert for 64bit
+
+commit c6344e8df5a6f2010c691bcd8aed0241a3426585
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Nov 28 23:10:41 2005 +0000
+
+    Assert an MIT copyright on sis_drm.h, since one was lacking and I created
+        that particular file. Its contents have changed a good bit since the
+        original sis code, and the original sis code didn't care much about
+        attribution since it routinely disclaims Precision Insight/VA Linux
+        from responsibility. Also, adjust formatting around license headers
+        (have a comment open immediately before the "Copyright" line, not as a
+        runon of any previous comments) for automatic processing into FreeBSD,
+        where /*- is used to signal the beginning of license headers for
+        automatic compilation of license lists.
+
+commit ec0ef9a78d0205ff771fe05d78d7a67462abbfd2
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Mon Nov 28 22:18:12 2005 +0000
+
+    remove xf86drmCompat.*, unused since about XFree86 4.2.
+
+commit 1835dff04a69509c0ea5fdb94abe0eaa61e7ab5a
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Nov 28 21:15:46 2005 +0000
+
+    Fix AGP support guessing: Implement the same bridge checking in the MGA
+        driver as Linux uses, and actually use the driver's device_is_agp if
+        available (hopefully fixing i915).
+
+commit 0472ac5d117908a4ef612722960411c58e824999
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Mon Nov 28 17:33:01 2005 +0000
+
+    fix mem leak in HashHash() (bug 5171)
+
+commit a5747964ec29ece7cccb981330e073748f2fd447
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Wed Nov 16 10:55:53 2005 +0000
+
+    Fixed long standing 64-bit bug in via memory manager. Bumped via date and
+        patchlevel.
+
+commit c8261e3d2486050dcd76fb769f6806982260df96
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Tue Nov 15 11:20:47 2005 +0000
+
+    Loosen via dmablit alignment checks somewhat. Adapt stride check to maximum
+        sceen size for EXA.
+
+commit c575b7e19ec83e663af91b431ac8c0a9e16a3a5d
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Nov 15 09:22:09 2005 +0000
+
+    Fix compiling and reenable build of i915 driver.
+
+commit 19c5c56779250e5615a88e3581dc3bd89598b9be
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Nov 15 04:37:51 2005 +0000
+
+    Fix Savage DRI without ShadowStatus NO by allowing the shadow area to be
+        mapped.
+
+commit b5d71f63cdced53a8b492c3269e966088b8a3b45
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Nov 11 12:23:18 2005 +0000
+
+    enable i915 32/64 bit ioctls
+
+commit 224ebd2c8d5916bdc782a60542ac04b86320a624
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Nov 11 10:56:31 2005 +0000
+
+    RV200 < R200
+
+commit eff1b8fbdf7a4251998a75a93069c56f7fc1fd78
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Nov 11 10:52:23 2005 +0000
+
+    i810 should be fine with i810.. no idea what this crack is ..
+
+commit 97528041dfaa26b95c1ff8c86e66f7071d5eb9f7
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Nov 11 10:02:10 2005 +0000
+
+    fix up radeon whitespace
+
+commit cc1a4dd856a00a041d9321ca2dd6f996f90cfdd8
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Nov 11 09:36:58 2005 +0000
+
+    Fix breakage from the move of driver ioctl externs to header files.
+
+commit cd4a9ad8e2d7667ea5eff9f1f54c0aca68d40a9e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Nov 11 09:21:05 2005 +0000
+
+    whitespace align with kernel
+
+commit 3eb577c7c52b560cc3fa9dcf5d5a02b8b3edcef7
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Nov 11 09:20:34 2005 +0000
+
+    mixing breaks in r128 driver.. fixed in kernel
+
+commit 59924b2f409ac2e6d48c0903f858d208d30097e6
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Nov 11 09:10:06 2005 +0000
+
+    copy correct Kconfig
+
+commit a204d5acb224eec2a9abcac73fb48f20819ea593
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Nov 11 09:09:03 2005 +0000
+
+    realign whitespace with kernel
+
+commit cec83bf6d3fc42a83705e72b02dda0a3001ecaca
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Nov 11 09:07:08 2005 +0000
+
+    remove extra spaces
+
+commit 36356df3cbca8e7e703afadf91046214d7755a07
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Nov 11 08:59:57 2005 +0000
+
+    A bunch of create_proc_dir_entry() calls creating directories had crept in
+        since the last sweep; converted to proc_mkdir().
+    From: Al Viro (via kernel)
+
+commit ea07fefcbf6a07048bde6e25af6b891d51bd6f9e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Nov 11 08:42:36 2005 +0000
+
+    convert to use __set_current_state, align some header includes
+
+commit 33fbf8b7e2a75237d9d8f4faa71d1776f8a6bbc3
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Nov 11 08:07:11 2005 +0000
+
+    whitespace align closer with kernel
+
+commit 9a91674d453fab1fbddc6225f5aa4f7ff7484f91
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Nov 11 07:45:46 2005 +0000
+
+    cleanup ioctl/max_ioctl to use header file for extern symbols
+
+commit b84daa8f326c1120728bb912cdf6a80524b0a8fa
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 10 10:14:48 2005 +0000
+
+    Fix cpu_to_le32 same as kernel not sure it is correct for ppc
+
+commit fb22dfbfc1cf04bc5f54603a88c244ec018bced6
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 10 10:13:25 2005 +0000
+
+    cleanup / whitespace align with kernel
+
+commit 6481a2e4cda67732ce7c6fe30aa4dc50d3cc7ed0
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Nov 8 21:40:03 2005 +0000
+
+    Correct a LOR issue on FreeBSD by allocating temporary space and doing a
+        single DRM_COPY_FROM_USER rather than DRM_VERIFYAREA_READ followed by
+        tons of DRM_COPY_FROM_USER_UNCHECKED. I don't like the look of the
+        temporary space allocation, but I like the simplification in the rest
+        of the file. Tested with glxgears, tuxracer, and q3 on a savage4.
+
+commit c7af46cf7d464ff89c64ab864fcd2af51d462812
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Nov 8 21:36:54 2005 +0000
+
+    Correct another LOR issue with resource allocation. This leaves the
+        drm_get_resource_* resource allocation a little racy, but they're
+        getting called at either X Server startup or driver load, so it's
+        serialized anyway.
+
+commit a10d8178e32528e0fd8a7afa24e71a35b1c0582d
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Nov 8 20:25:00 2005 +0000
+
+    Initial port of savage to FreeBSD for the AGP and !ShadowStatus case. Adds
+        drm_mtrr_{add,del} for handling the MTRR setup. Still has a LOR issue
+        with DRM_VERIFYAREA_READ/DRM_COPY_FROM_USER_UNCHECKED in savage_bci.c
+        -- this won't work with the fine-grained locking in use, and just doing
+        a single copyin to a temporary will probably work fine. Also note that
+        the module leaks approximately 4 kb on unload.
+
+commit 2c6308fe54c10075379cb00506d5519e0ced1076
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Nov 8 09:02:02 2005 +0000
+
+    Correct a LOR on FreeBSD by allocating a temporary buffer and doing a
+        single COPY_FROM_USER into it, rather than VERIFYAREA followed by many
+        COPY_FROM_USER_UNCHECKEDs.
+
+commit 4b2235d2e089a512b26ecd66ae42ea279fbb1df2
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Nov 8 06:11:55 2005 +0000
+
+    Correct a LOR related to the PCI resource allocations by simply moving the
+        uninit to unload time rather than lastclose.
+
+commit 71f9b7357cb3d4ea7bb5b396840de3985bc13ad4
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Nov 8 05:29:26 2005 +0000
+
+    Fix FreeBSD DRM for latest MGA changes to agp support, which cleans things
+        up a good bit, I think. Also, remove the agp_uninit() function which
+        has lain around as a noop for years now. The FreeBSD DRM is now all
+        compiling, with the exception of via. One known sleeping-with-lock-held
+        issue remains.
+
+commit 1a256df4804e4e987f81226a5d8e0573363607ee
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Nov 8 02:38:01 2005 +0000
+
+    Catch FreeBSD up to the pcie gart changes. Required minor modification to
+        radeon_cp.c to use a drm_local_map_t-type mapping (drm_core_ioremap
+        rather than drm_ioremap), which contains private device mapping
+        information on BSD. I also changed the ati_pcigart interface to use
+        "void *" for pointers to kva rather than "unsigned long". While PCIGART
+        support appears to be broken on FreeBSD currently, I think this is not
+        new, and BusType PCI remains working on my r100 in Linux.
+
+commit 145b23b55220bdfc6639d3279ad96310faa650a3
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Nov 8 01:12:08 2005 +0000
+
+    Correct a recursion on non-recursive mutex in drm_addmap from radeon's
+        firstopen, by making drm_addmap require the drm device lock to be held.
+        Also, make matching of kernel maps match linux by requiring shm matches
+        to have the contains_lock flag set if the offset doesn't match.
+
+commit 3fce085e13d6559adaed98420c35a1313636cff5
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Nov 7 13:17:41 2005 +0000
+
+    Fix bug #4908 for now. Alternative is highlighted in this bug report as the
+        better future direction.
+
+commit 900a7e4c364d86a10dcce535f0533dac7a7a97aa
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Nov 6 06:32:25 2005 +0000
+
+    Re-disable the via driver while it's broken on BSD.
+
+commit 39615ec06e8ca9280b4feefc42e008c9795541bd
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Nov 3 00:38:25 2005 +0000
+
+    Converts the remaining drm_agp_foo functions to be a drm_agp_foo and
+        drm_agp_foo_ioctl pair. Modifies the MGA DRM to use the drm_agp_foo
+        functions instead of the drm_foo_agp functions. The drm_foo_agp
+        functions are no longer exported by drm.ko.
+    Ensures that dma->seg_count and dma->page_count are properly set in
+        drm_addbufs_{agp,sg,fb}. drm_addbufs_pci was already correct.
+    Ensures that mga_do_agp_dma_bootstrap correctly sets agp_buffer_token.
+    At this point PCI DMA is still broken.
+    Xorg bug: #4797 Reviewed by: Dave Airlie, Eric Anholt Signed-off-by: Ian
+        Romanick <idr@us.ibm.com>
+
+commit 10ec05793f9b0ca47ce0a07aa445f8799d2ceba1
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Mon Oct 31 17:48:11 2005 +0000
+
+    Bump to 1.0.5 for new via header
+
+commit bcbf5ff797f061e84223556bdcf5f6a045516355
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Oct 23 04:07:50 2005 +0000
+
+    we don't use this stuff anymore .. remove 1k buffer from driver ..
+
+commit b63b771285a91e85c2dc7daf77191c423fb4d2a5
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Sat Oct 22 15:12:05 2005 +0000
+
+    via: Sync via_drm.h with 3D driver. Bump via patchlevel and date.
+
+commit 79f30e79ec5b05b2052988e3e6edba8624e3d1c5
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Sat Oct 22 05:50:22 2005 +0000
+
+    Bug #328: Silence read-from-uninitialized warnings in DRM_CAS on Alpha.
+        (David Dawes)
+
+commit 00d4957d62607873c2bf0c506fab4ff6c384b414
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Oct 21 08:59:56 2005 +0000
+
+    Don't set MTRR's for intel hardware
+
+commit 6cd0282f6440fac661dd92a6e96e4fd82e4489b4
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Oct 20 22:41:26 2005 +0000
+
+    fix G550 cards
+
+commit 419fc9930b5145e61c5b77c6e8f76c40af62fbc4
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Thu Oct 20 17:55:02 2005 +0000
+
+    Bump to 1.0.4.
+
+commit d74376779f0b421478072fa7657d4f31a5e16c12
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Thu Oct 20 17:53:02 2005 +0000
+
+    Remove the remaining references to Xlib. libdrm is totally independent now.
+
+commit ea83db57e3625d54ee206561803a966d074d8296
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Thu Oct 20 17:51:57 2005 +0000
+
+    via and r300 still need installed reg headers.
+
+commit cf8ce0888acf34afb5705faf1b6cb8d2f2945402
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Thu Oct 20 17:37:32 2005 +0000
+
+    via: PCI DMA bugfixes and DOS due to too many mapped pages checks.
+
+commit b3631ba02cc55e0f4a4212d7075de62689bd1f43
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Thu Oct 20 17:32:31 2005 +0000
+
+    Remove bogus Xlib dependency.
+
+commit 763d726c439537ad3f8b1b668cf55b799a6f36db
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Oct 20 02:35:08 2005 +0000
+
+    dma access also needs some work
+
+commit 727e88c4f4e55be435e47759bb3b1e75fc42d43d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Oct 20 01:54:38 2005 +0000
+
+    the old init path needs to set WAGP_ENABLE by default
+
+commit 4b3ee6c50ed8b9382d3f253669470a5c82e8f0bc
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Oct 14 05:01:19 2005 +0000
+
+    Doig a full clean up from mga_do_dma_bootstrap when
+        mga_do_agp_dma_bootstrap fails causes problems if
+        mga_do_pci_dma_bootstrap succeeds. This commit makes it possible to do
+        a "minimal" clean up instead. I'm still trying to figure out what is
+        causing the failures in mga_do_agp_dma_bootstrap...
+    Signed-off-by: Ian Romanick <idr@us.ibm.com>
+
+commit 1505e316afc68da0167c1d2db1a862ac580c65f1
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Oct 14 01:25:38 2005 +0000
+
+    Fixed a cut-and-paste bug that could cause an oops in mga_do_cleanup_dma
+        when mga_do_init_dma fails. Still trying to determine why
+        mga_do_init_dma is failing.
+    Signed-off-by: Ian Romanick <idr@us.ibm.com>
+
+commit 725e329cb2aa93812e3e622a6cf2c92c0fffde9d
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Thu Oct 13 21:03:31 2005 +0000
+
+    Better pkgconfig-fu: -ldrm in Libs:
+
+commit 0a24095cd6dff3f4934c87feb34cee4f0350c07d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Oct 13 11:21:31 2005 +0000
+
+    Add X300 RV370
+
+commit 308b40ea094d89660c25bf1dc16d70f5d3cc66c2
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Oct 11 17:34:49 2005 +0000
+
+    The Linux 2.6.9 (and earlier) fops structure does not contain a
+        .compat_ioctl field. This change makes the DRM build on those kernels.
+    Signed-off-by: Ian Romanick <idr@us.ibm.com>
+
+commit 62a467303408286deef97b288ec286e21dda3761
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Thu Oct 6 23:31:29 2005 +0000
+
+    Skeleton nv drm driver, to enable DMA in EXA. (Lars Knoll, minor updates by
+        me)
+
+commit 908ad0ed96c6d1be567bff7332ec38d6b4b8db0a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Oct 6 23:08:58 2005 +0000
+
+    remove version not used anymore
+
+commit ace8b912fbeaae9195892762a375f0ae1fbf558f
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Sep 30 09:09:03 2005 +0000
+
+    fix header this is now a c file
+
+commit 483dc9bb9298588ccd3521c8f95a8032939fbd08
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Sep 30 07:10:16 2005 +0000
+
+    now I've lindented kernel it might be useful again
+
+commit f42cdc8dcb4ae85c15580dd0bc2a07495d8f049e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Sep 30 06:41:10 2005 +0000
+
+    Add support to turn writeback off via radeon module option
+
+commit 6ff57e2d7cd0b9b513070f72ffd894e8d6f57149
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Sep 30 06:35:09 2005 +0000
+
+    fix pci overriding from userspace
+
+commit 856bdf0f673510c33a23b4c4d4fff91d95eb149e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Sep 30 03:39:02 2005 +0000
+
+    fixup bens fix so it works..
+
+commit 68b4ad3cce6e184549988d48e85985507c8dc5ed
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Sep 30 03:14:18 2005 +0000
+
+    Add Bens fix for radeon maps on ppc
+
+commit 9d24d951f7894aacf589892b5a6848d9961339b1
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Sun Sep 25 14:38:07 2005 +0000
+
+    via: fix stray error printout message.
+
+commit 903e5701ffbc613373f3ad3c3b7e14d493ec9dbe
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Sun Sep 25 12:54:12 2005 +0000
+
+    Add the via PCI DMA blit code.
+
+commit d4dec1db808095f42b6fd776b2582c6f27bebb9a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Sep 25 08:54:31 2005 +0000
+
+    hopefully fix server recycling on PCIE
+
+commit c1b7df95be1194efcfd0d9ffd63da1ce27272565
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Sep 25 05:19:06 2005 +0000
+
+    add __ATTR
+
+commit 3a0230ef9c933e07246e65a542681fc9549514f8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Sep 25 03:09:51 2005 +0000
+
+    use linux kernel macros don't make our own
+
+commit cd16d9685678dbb7e3d1442e62357d0b5bb98008
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Sep 18 09:31:06 2005 +0000
+
+    remove pci_find_class use for alpha
+
+commit f5c81b262020200d4b7970d12b6c202ae0f8faee
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Sep 17 04:16:51 2005 +0000
+
+    compat for pci_pretty_name
+
+commit acb6abcc6d862224f3e91ede82909c099efdfb1f
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Sep 12 06:21:24 2005 +0000
+
+    update autogen from xserver tree
+
+commit 4b2a94db46dc4814e03d14e25ab0aed41e28a375
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Sep 12 05:35:51 2005 +0000
+
+    Fix the spelling of DRM_AUTH so that the bsd core stuff builds again. Next
+        up is pcigart.
+
+commit f1276d3b4338bdfd2173bb76e931334da6075784
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Sep 12 04:37:52 2005 +0000
+
+    add some pci express chips
+
+commit ba8f4fb778e88dfa275e35f0d2e01e4ca99e65bd
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Sep 12 04:35:31 2005 +0000
+
+    make PCI Express work on 64-bit machines, thanks to Alex Deucher (agd5f)
+
+commit 3f6fcbc6766e3032bfb0421675169cc2e732e399
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Sep 11 09:58:19 2005 +0000
+
+    back out change as gart is now in framebuffer for PCIE
+
+commit 5565a00916122bb131ce89a2ca8f7f81ddc9387c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Sep 11 08:51:23 2005 +0000
+
+    Add GART in FB support for ati pcigart, and PCIE support for r300
+
+commit 29326c1a8990ffb512a891d8deecf4cd4046915c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Sep 11 07:08:46 2005 +0000
+
+    fix makefile bug
+
+commit 53c8037786a64eede00a8944ccaa42768609b66b
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Fri Sep 9 22:35:49 2005 +0000
+
+    Add support for GL_ATI_fragment_shader, new packets R200_EMIT_PP_AFS_0/1,
+        R200_EMIT_PP_TXCTLALL_0-5 (replaces R200_EMIT_PP_TXFILTER_0-5, 2 more
+        regs) and R200_EMIT_ATF_TFACTOR (replaces R200_EMIT_TFACTOR_0 (8 consts
+        instead of 6)
+
+commit c8b5a9f8cc3f55faf135be70e7ff0f7f062ca408
+Author: Vladimir Dergachev <volodya@mindspring.com>
+Date:   Fri Sep 9 12:53:44 2005 +0000
+
+    Add another R300 PCI id. Submitted by: Daniel Estévez
+
+commit 0d346a07a87ef7bf6b77adda7c776e2ac5849266
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Sep 3 03:27:14 2005 +0000
+
+    convert ioctl flags to use flags instead of separate ints
+
+commit 80ed93c7bf9f8c8d42cbcc26e82020cfcd92fb77
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Sep 3 02:21:22 2005 +0000
+
+    check is the map containing the lock
+
+commit 22ec8ebb17d959486e4a865b17115e609eb688ee
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Aug 26 23:27:19 2005 +0000
+
+    - Don't try to allocate mappings of less than a PAGE_SIZE in MGA DMA code.
+    - Comment out the "is this mapping/bufs in allocated AGP" bits in BSD
+        because they break mga (which uses AGP allocation that doesn't track
+        entries). It's not a security issue when we still have the related
+        ioctls marked root-only.
+    - Apply some power-of-two alignment restrictions to hopefully avoid some
+        panicing in bad cases of drm_pci_alloc() on FreeBSD.
+    - Add verbosity to some error handling that I found useful while debugging.
+
+commit c425ad1a34439d019edd589c32a7161d01b4d822
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Aug 26 20:56:11 2005 +0000
+
+    Previously, drm_get_resource_start() and drm_get_resource_len() would
+        allocate the resource RF_ACTIVE, pull out the appropriate value, and
+        return it. However, allocating large framebuffers RF_ACTIVE would run
+        the system out of KVA, and this also left open the possibility of the
+        resource getting moved after getting the offset. Instead, when either
+        of these are called, allocate the resource if it isn't allocated
+        already (non-RF_ACTIVE) and store it in the DRM device, to be cleaned
+        up on lastclose.
+
+commit 5105f9ea59179c7129d3bf97734eb37e26ec68b0
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Aug 26 19:07:03 2005 +0000
+
+    Fix a lack of parenthesis in macro usage that showed up with INVARIANTS
+        turned on, i.e. in a kernel build.
+
+commit 55bea952b326b88f2fa6502321f605f96ee9be66
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Aug 26 00:16:01 2005 +0000
+
+    [1] Fix BSD DRM for the nonroot changes. [2] Don't attempt to acquire the
+        DMA lock in a non-DMA driver, as it will be uninitialized.
+    Submitted by: [1] jkim (minor changes by me)
+
+commit 9942cad1f6078c24bb69a126795635b2f34d65b5
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Aug 25 23:11:28 2005 +0000
+
+    Add missing .cvsignore files for autotoolery.
+
+commit 7d5130d8fb24538e555689fb8e98f767406e0a2c
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Aug 25 02:59:21 2005 +0000
+
+    Include appropriate CFLAGS to find X headers, needed to build libdrm.
+
+commit 5a52e533e1f42072b91544fdbca785ed2c9ad76b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Aug 23 04:10:50 2005 +0000
+
+    add options for x86_64 and amd will small letters
+
+commit 1163975f090725a0f2cddb313cc23d7e424f766f
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Aug 22 09:52:18 2005 +0000
+
+    remove the README in the linux-2.6 directory
+
+commit 01e4364a8fec6cb2c11de4e5cb7def10b58348ae
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Aug 22 09:50:12 2005 +0000
+
+    remove i915_pm code as it causes too many issues with current software
+        suspend, and the DDX driver re-inits the board successfully anyway.
+
+commit 54947504ac70e135a38f303420b7b66eed8c23a3
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Aug 21 11:07:03 2005 +0000
+
+    allocating the PCIE table from GFP_DMA seems to stop it NMI'ing
+
+commit e2dc70593f0d12cecac747c9044c6fb130ad6af8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Aug 21 03:04:32 2005 +0000
+
+    We don't need to install all the internal headers files only drm.h and
+        *_drm.h have user space interfaces
+
+commit 5c4ce6d93c93032dad7f5a60f8b7867980d3f7f5
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 20 07:38:11 2005 +0000
+
+    add x86_64 to the list as well
+
+commit d12768f79ac2dbf9e31a32107f6e5379cb9484e4
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 20 07:33:07 2005 +0000
+
+    remove checks that make ppc64 not work properly... also fix ppc64 check..
+        we should be safe doing this..
+
+commit 2e9bd9ac18e17e91bec4e3b777503a53a3faf952
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Aug 20 07:12:45 2005 +0000
+
+    add powerpc64 to the list of archs that this test doesn't make sense on
+
+commit 017174085f162484277b2f798d35d3436a26e005
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Sat Aug 20 03:32:09 2005 +0000
+
+    Fix silly install issue by moving the header install rules for shared-core
+        into shared-core/Makefile.am. Bump to 1.0.3.
+
+commit 1abd165f5bd627a6eebf333135d5a1b5a32d7aa3
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Fri Aug 19 20:14:10 2005 +0000
+
+    Add r300_reg.h. Bump to 1.0.2.
+
+commit 8ac2fcb193c79ea8b2bd4d99b595d56f557c15f3
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Aug 17 22:59:00 2005 +0000
+
+    add agp buffer token
+
+commit 7779659390afc5608655e617aa3f2c88b7e071c5
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Aug 17 10:48:38 2005 +0000
+
+    revert reversion of a part of a patch from Jon, that I did last night while
+        checking things in in my sleep
+
+commit 279e7c113ced4f2f4dcc14801aa3084698a417bd
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Aug 17 00:14:18 2005 +0000
+
+    commit toggle switch to make Linux drm_handle_t unsigned int
+
+commit 91c9c847299a1f27c92f8663902fcee72a65f9e4
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Aug 16 17:20:18 2005 +0000
+
+    Remove the long-stale BSD non-core bits.
+    Prodded by: CVS breakage resulting in complaints about this directory.
+
+commit 7af0186f4ccef285c2158770781ebfc3a26ddd66
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Aug 16 12:51:57 2005 +0000
+
+    add Egberts 32/64 bit patch (its in kernel already...)
+
+commit 8c21b783c3e38aa2c2d16e11ec01cf695f8e7f8a
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Aug 15 18:07:12 2005 +0000
+
+    Port the VIA DRM to FreeBSD. Original patch by Jake, with some cleanup by
+        me to match other drivers and avoid ifdeffing. The linux via_drv.c will
+        be moved from shared-core to linux-core soon by repocopy.
+    Submitted by: Jake Burkholder <jake@FreeBSD.org> Tested by: unichrome
+
+commit 4f5961eeeee806a2d6e08e159c56262d4f060cba
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Sun Aug 14 09:52:09 2005 +0000
+
+    VIA bugvixes by Joris van Rantwijk Initial commit.
+
+commit 4050f5066a706bda74ed93ab858bbc9fc0b1477b
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Aug 12 17:18:08 2005 +0000
+
+    Fix build after linux-side checkin of master/root-only split. Still only
+        cares about root on the BSD side, but should be secure.
+
+commit cdf49e57329803709fe26cbc103c318bc9292ddb
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Fri Aug 12 14:19:33 2005 +0000
+
+    Reverting the previous via security-fix commit, since the assumption of
+        contexts registered with the callers filp was wrong.
+
+commit 4931d785ed0bf9f75200ed530c4061efe2d24a63
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Thu Aug 11 13:05:12 2005 +0000
+
+    Missing symbol export from previous via context check commit.
+
+commit d5e8ab13ff5399531eb1927dcd4535aeeed18c94
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Wed Aug 10 19:46:46 2005 +0000
+
+    Security fix on via: Checking that the specified context belongs to the
+        caller on fb / agp memory alloc and free. Otherwise malicious clients
+        can register allocations on other clients or free memory used by other
+        clients which will lead to severe memory manager inconsistensies.
+
+commit 0d81954b0e4430428eddc00c6097e614e51ba0b1
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Tue Aug 9 01:40:45 2005 +0000
+
+    Make sure savage has 3rd ioctl parameter
+
+commit 3a61e9f96ce50101f05a5ca2cb0e34b2aa001b55
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Aug 7 05:37:25 2005 +0000
+
+    make some functions static in the savage drm driver
+
+commit 1cbe97eea1a7ffcbf19767e83dce09da56c454f6
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Aug 7 05:32:06 2005 +0000
+
+    fix ioctl in r128 drm direction from Egbert Eich.
+
+commit fcdb53867df4937a55e4a771328fa5a9388aee44
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Aug 7 04:38:11 2005 +0000
+
+    remove bus address
+
+commit 99c3f88c69e5a9ac7cddd0bb24e8be3415616656
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Aug 5 13:04:21 2005 +0000
+
+    Fix bug in return to userspace resctx code
+    From: Egbert Eich <eich@suse.de>
+
+commit c789ea1521ac9e935f2a1c6c043619d89bae9c16
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Aug 5 03:50:23 2005 +0000
+
+    Rename the driver hooks in the DRM to something a little more
+        understandable: preinit -> load postinit -> (removed) presetup ->
+        firstopen postsetup -> (removed) open_helper -> open prerelease ->
+        preclose free_filp_priv -> postclose pretakedown -> lastclose
+        postcleanup -> unload release -> reclaim_buffers_locked version ->
+        (removed)
+    postinit and version were replaced with generic code in the Linux DRM
+        (drivers now set their version numbers and description in the driver
+        structure, like on BSD). postsetup wasn't used at all. Fixes the savage
+        hooks for initializing and tearing down mappings at the right times.
+        Testing involved at least starting X, running glxgears, killing
+        glxgears, exiting X, and repeating.
+    Tested on: FreeBSD (g200, g400, r200, r128) Linux (r200, savage4)
+
+commit 143622a987745ca2084f7a188e9993ffd5f28fe3
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Aug 4 14:48:43 2005 +0000
+
+    Implement permanent sarea maps
+
+commit 28e123eb3af21b1ea73bdc2176220bb669118e09
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Aug 4 14:39:25 2005 +0000
+
+    Tighten up AGP security. Verify that all uses of AGP are done inside
+        buffers that have been allocated from AGP. This includes some new
+        capable(CAP_SYS_ADMIN) checks, these functions are also protected by
+        the root requirement on the IOCTL macros.
+
+commit bb9502ab01e7258c021f161b3caac8a508979dd8
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Aug 4 13:59:48 2005 +0000
+
+    Mark some radeon init variables deprecated. These used to be passed in but
+        the driver already knew their correct value. For example the physical
+        address of the framebuffer and registers.
+
+commit ea2c7a895d6456c83ee8489e1db7ae5a800f0abf
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Aug 4 13:15:27 2005 +0000
+
+    Split the control of master vs root priv. Everything is still marked as
+        needing root.
+
+commit 3ffd0c188bc35263f0b53345a0a4a261f4ae1b71
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Aug 4 07:46:11 2005 +0000
+
+    Whitespace fixups.
+
+commit b0da5df90a76e4e79c356fdbc90211a8e21f095c
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Aug 4 07:42:01 2005 +0000
+
+    Fix the MGA driver on BSD by passing in the proper chipset flags to the
+        driver's preinit routine, and by using DRM_COPY_TO_USER_IOCTL when
+        copying out to an ioctl's data pointer. Pulled from the latest version
+        of my drm-hook-rename.diff and only compile-tested after that.
+
+commit 49bbb6d86178890a03040d618a8c9c76c96d3d3f
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Aug 4 07:31:21 2005 +0000
+
+    Add a debugging error message from testing new MGA code on BSD.
+
+commit 40515fc93c479599f32485630b4063422106358f
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Mon Aug 1 20:36:58 2005 +0000
+
+    version bump
+
+commit 8b4691ee13cc30893f694103e8a90c33655e5cf1
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Mon Aug 1 20:31:35 2005 +0000
+
+    Fix the pkgconfig info. (Donnie Berkholz)
+
+commit 1cc1f49825e7fc157f8cfecfb4c5168056f5f738
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Jul 28 01:44:17 2005 +0000
+
+    Fix issues with buffer aging when more than one dma buffer is discarded in
+        a cmdbuf, which could lead to hangs.
+    Submitted by: Aapo Tahkola
+
+commit 942545721f9bf14941f7e2ed81c79c4f0709749a
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Jul 27 20:20:30 2005 +0000
+
+    Correct a couple of descriptions of files in comments (were just
+        copy'n'pasted).
+    Submitted by: jkim
+
+commit fccd351c8f17f69dd4ce986f0a626b42bbcb4ef0
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Jul 27 20:19:29 2005 +0000
+
+    Link in the savage files from shared-core.
+    Submitted by: jkim
+
+commit 096e0349eaa56f1941edddf10ab3915b785d8281
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Wed Jul 27 18:19:11 2005 +0000
+
+    fix driver date and drm minor version for r300 support
+
+commit ab59dd285c4ccdec92adadfcb869fc83edd96e86
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Jul 20 21:17:47 2005 +0000
+
+    Add latest r300 support from r300.sf.net CVS. Patch submitted by volodya,
+        with BSD fix from jkim and the r300_reg.h license from Nicolai Haehnle.
+        Big thanks to everyone involved!
+
+commit 026e12ea937865748d54d3b8a7a3b77ccc4e3efb
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Jul 19 20:59:57 2005 +0000
+
+    Add .cvsignore file.
+
+commit d3d3184fe4b2fa72ed55813bd7eac72659f2375e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jul 16 03:11:53 2005 +0000
+
+    revert last change due to me bring up too early
+
+commit 9803eb179c8edd8d62b038f550c63a4aa589615e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jul 16 02:07:14 2005 +0000
+
+    up the version
+
+commit d6d67dbf92d64a4c662dcad52d720883da9d5e19
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jul 16 02:03:03 2005 +0000
+
+    Egbert noticed this issue, but changing the IOW to IOWR mess up
+        compatiblity with userspace..
+
+commit 567113788c030b367a28ea9253fbf34beef2789e
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Fri Jul 15 21:22:51 2005 +0000
+
+    VIA: Fix sparse warnings (Alexey Dobriyan)
+
+commit 5a5478de7ab4ee2eef0308d8b4ce5c53222cd55e
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Wed Jul 13 00:13:12 2005 +0000
+
+    distcheck fixes
+
+commit 7130662aa0c476a56a4a053c6dda19bc3a91060a
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Mon Jul 11 18:27:39 2005 +0000
+
+    IRQ must be assigned and enabled or this will hang
+
+commit 07d23f9c60f9358f064eab7d944f3b28484b51ef
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Sun Jul 10 22:42:42 2005 +0000
+
+    autoconfiscate libdrm
+
+commit 04fea060023a539c6c6766ec184b59f32c97d474
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sun Jul 3 18:07:03 2005 +0000
+
+    Simplify the sysfs code
+
+commit d41af11ee30413f90064cfffb5687be92a28021c
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sun Jul 3 17:16:12 2005 +0000
+
+    Add sysfs attribute dri_library_name on Linux. code in share-core/via_drv.c
+        is ok to be shared, it will be passive on BSD.
+
+commit e2ba08d28335b43515ccbefcc21052ed0d5a7e47
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Jun 30 16:00:35 2005 +0000
+
+    release can happen before dev->ctxlist is allocated
+
+commit 1b4ce02506afa65494956468afb0eb7f93b74fbc
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Wed Jun 29 23:20:30 2005 +0000
+
+    Remove the AGP requirement from Makefile and Kconfig for MGA. Remove the
+        AGP requirement from Kconfig for SIS. There never was a requirement in
+        Makefile, and Eric Anholt confirms that the Makefile was correct.
+
+commit eeaeefca54b2f8299fbe8f99b5ca71e695430ba7
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Jun 29 13:19:47 2005 +0000
+
+    add remaining calls
+
+commit fc83d76e5a5ce2700d2b95aa177d3eec57dc1bec
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Jun 29 13:13:22 2005 +0000
+
+    add i915_ioc32.c
+
+commit 6496c5d1e74532d8208774653a3a2a477d7fc50c
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Jun 29 13:00:29 2005 +0000
+
+    silence warning
+
+commit 6975571c3b740e3a3813058a856fc6bd8b7fbd14
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jun 29 12:02:18 2005 +0000
+
+    fix some warnings from cross compiler
+
+commit 62b55eb433a211c565367b8ae717666e0acaf8fe
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jun 29 11:56:42 2005 +0000
+
+    make r128/mga compile properly on sparc cross-compiler
+
+commit 2b427bee9bb4de9dba6ab96b68c66d22144669a5
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Jun 29 11:36:37 2005 +0000
+
+    Move to linux specific directory
+
+commit 964c57e71f641da854636c3f9549ef8cc2f5a143
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jun 29 11:22:39 2005 +0000
+
+    add mga and r128 32/64 bits
+    This is Egberts code, ported to Pauls framework by me..
+
+commit ae7d8d8a85a4465fe641d28a7f5d8d64146f8d97
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jun 29 03:06:47 2005 +0000
+
+    these don't need reclaim buffers their release functions handle it
+
+commit 2ce5ddec833195bc17c8ed062ce622460ffe0d6a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jun 29 02:57:18 2005 +0000
+
+    Bug in conversion from old DRM to core DRM....
+
+commit c798a382f1e11a0fd60a78924db0663f8e988a1b
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Jun 29 02:54:19 2005 +0000
+
+    Get the BSD DRM compiling again after MGA and mapping changes. Note that
+        i915 has been disabled for the moment, rather than working around
+        linux-specific code in the shared dir.
+
+commit 5d96c74ff1fe9b2d37e22dbea9882791aae389bf
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Jun 28 20:58:34 2005 +0000
+
+    - Remove drm_initmap and replace its usage with drm_addmap. This reduces
+        code duplication, and it also hands you the map pointer so you don't
+        need to re-find it.
+    - Remove the permanent maps flag. Instead, for register and framebuffer
+        maps, we always check whether there's already a map of that type and
+        offset around. Move the Radeon map initialization into presetup (first
+        open) so it happens again after every takedown.
+    - Remove the split cleanup of maps between driver takedown (last close) and
+        cleanup (module unload). Instead, always tear down maps on takedown,
+        and drivers can recreate them on first open.
+    - Make MGA always use addmap, instead of allocating consistent memory in
+        the PCI case and then faking up a map for it, which accomplished nearly
+        the same thing, in a different order. Note that the maps are exposed to
+        the user again: we may want to expose a flag to avoid this, but it's
+        not a security concern, and saves us a lot of code.
+    - Remove rmmaps in the MGA driver. Since the function is only called during
+        takedown anyway, we can let them die a natural death.
+    - Make removal of maps happen in one function, which is called by both
+        drm_takedown and drm_rmmap_ioctl.
+    Reviewed by: idr (previous revision) Tested on: mga (old/new/pci dma),
+        radeon, savage
+
+commit 6397722f1990856a9ee268cadd65d78b44b24835
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jun 28 13:02:20 2005 +0000
+
+    add compat code from Paul Mackerras
+
+commit 827806f697855c65a8c9821ad410467c48e25d35
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jun 28 12:52:41 2005 +0000
+
+    Add compat to Makefile
+
+commit 170bf94a367935046d72f7d2a21872bb88543a04
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jun 28 12:50:15 2005 +0000
+
+    Add drm and radeon 32/64-bit compat code from Paul Mackerras
+
+commit b6b270a2607088997a0ec74cb1d618f140a382f7
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Jun 28 08:03:33 2005 +0000
+
+    Given that BenH says using the sysdev approach for DRM is bogus, I'll yank
+        the code for it, rather than introducing something that isn't going to
+        work 100% of the time.
+
+commit 75ba453365380851d3297a9d553302021af923b2
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Jun 28 07:34:49 2005 +0000
+
+    Comment out the .resume function as without programming their dependent
+        registers things tend to lock up in certain situations.
+    The BIOS repost will fix things up.
+
+commit e2d76b0642d88c4f47ace52ee5eb3163c4e478d5
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Jun 27 15:17:12 2005 +0000
+
+    Reverse the pm_message_t patch for now, it appears that the 2.6.12 release
+        didn't have it.
+
+commit 1a6780348c9e61833ca240ce6fb80aaa6e75fb92
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Jun 27 12:39:02 2005 +0000
+
+    Check for 2.6.12 suspend/resume changes (pm_message_t)
+
+commit fa24ccccf4beeef41d8de23a345408b7b047ae3f
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Jun 27 11:41:40 2005 +0000
+
+    Check dev_priv
+
+commit d6af2016635ced096812030547a930433e9382eb
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Jun 27 11:39:44 2005 +0000
+
+    Save state of registers for suspend/resume.
+
+commit afdabdabf588267c8c8d4f1378a8e9824d58d2d0
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sun Jun 26 13:31:15 2005 +0000
+
+    removed dev->sysdev_registered
+
+commit 9deb276a0680a79540f05c1547a9d703e9c08190
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Jun 24 22:48:16 2005 +0000
+
+    Ref count the sysdev class to support multiple DRM cards
+
+commit 2b845f25c5c3a36ed6e49b9145e38a4738ce2572
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Jun 24 21:50:40 2005 +0000
+
+    Make sysdev class only register when fbdev detected
+
+commit 5b0e93de32e9da390702df13d95ab63274294233
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Jun 24 19:31:06 2005 +0000
+
+    More err path clean up for drm_pm Add mandatory sysdev shutdown function
+
+commit fe42d43a63d95243fa911f88bb01c383d5e6716e
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Jun 24 09:28:50 2005 +0000
+
+    Fix the sysdev approach for power management.
+    We need to use the container_of() call to access our device private.
+
+commit cdc50eba6ac666447a93471fb2db25959f9c2775
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Jun 24 08:56:12 2005 +0000
+
+    Fix suspend problem when i915 private hasn't been initialized yet.
+
+commit 7586a655fc7d8e89a4fe37ec7926f4fbc13f358d
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Jun 23 05:29:16 2005 +0000
+
+    Fix drm_memory_debug.c to compile, doesn't seem to be working Clean up
+        error return path in drm_stub.c
+
+commit 4152605ea174291f469c0c8a6fc433fd90194e71
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Wed Jun 22 05:49:56 2005 +0000
+
+    Get the power management hooks into the right place so that everything gets
+        freed correctly.
+
+commit 9fb77e869f530f3c9679dd63db07514e2f45efc7
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Tue Jun 21 02:20:02 2005 +0000
+
+    Change initialization of savage register access to _DRM_READ_ONLY. Flags of
+        zero does not mean no privs, instead it grants write access
+        _DRM_READ_ONLY only applies to non-root users. Problem is only in CVS,
+        initmaps are not in the kernel yet.
+
+commit 298b6fcedbc3a521c2218404a96de0754dbb4f02
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Mon Jun 20 15:40:48 2005 +0000
+
+    Change initialization of radeon register access to _DRM_READ_ONLY. Flags of
+        zero does not mean no privs, instead it grants write access
+        _DRM_READ_ONLY only applies to non-root users. Problem is only in CVS,
+        initmaps are not in the kernel yet.
+
+commit ae2264d3c9a4938b1202c4301587c7214c2c4293
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sun Jun 19 04:15:58 2005 +0000
+
+    Remove I2C support from radeon driver. Same support is available from
+        radeonfb.
+
+commit 71df0eed3476d4430a59ce21ca641ac8eecf54e2
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Jun 17 09:09:17 2005 +0000
+
+    fix up drm_alloc_agp to take a dev arg and not pass crappy agpgart around
+
+commit 0569fe7a528e5e0753d9f72807a8f4310c6c9782
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Jun 17 04:47:30 2005 +0000
+
+    Fix 810/830 build
+
+commit 53e950b344d84a98fda4cff6d03b90651a625f18
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu Jun 16 19:58:00 2005 +0000
+
+    Force AGP always for Intel chipsets.
+    Fixes bug #3552
+
+commit 1567753415d420c626ae145457539bfee1414df8
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Wed Jun 15 17:47:33 2005 +0000
+
+    Re-sync (and correct!) shared/mga_drm.h with shared-core/mga_drm.h.
+
+commit 72cfc797b51e59ecf8a2787c6a176838241cc94b
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jun 14 22:34:11 2005 +0000
+
+    Adds support for PCI cards to MGA DRM
+    This patch adds serveral new ioctls and a new query to get_param query to
+        support PCI MGA cards.
+    Two ioctls were added to implement interrupt based waiting. With this
+        change, the client-side driver no longer needs to map the primary DMA
+        region or the MMIO region. Previously, end-of-frame waiting was done by
+        busy waiting in the client-side driver until one of the MMIO registers
+        (the current DMA pointer) matched a pointer to the end of primary DMA
+        space. By using interrupts, the busy waiting and the extra mappings are
+        removed.
+    A third ioctl was added to bootstrap DMA. This ioctl, which is used by the
+        X-server, moves a *LOT* of code from the X-server into the kernel. This
+        allows the kernel to do whatever needs to be done to setup DMA buffers.
+        The entire process and the locations of the buffers are hidden from
+        user-mode.
+    Additionally, a get_param query was added to differentiate between G4x0
+        cards and G550 cards. A gap was left in the numbering sequence so that,
+        if needed, G450 cards could be distinguished from G400 cards. According
+        to Ville Syrjälä, the G4x0 cards and the G550 cards handle
+        anisotropic filtering differently. This seems the most compatible way
+        to let the client-side driver know which card it's own. Doing this very
+        small change now eliminates the need to bump the DRM minor version
+        twice.
+    http://marc.theaimsgroup.com/?l=dri-devel&m=106625815319773&w=2
+    A number of ioctl handlers in linux-core were also modified so that they
+        could be called in-kernel. In these cases, the in-kernel callable
+        version kept the existing name (e.g., drm_agp_acquire) and the ioctl
+        handler added _ioctl to the name (e.g., drm_agp_acquire_ioctl).
+    This patch also replaces the drm_agp_do_release function with
+        drm_agp_release. drm_agp_release (drm_core_agp_release in the previous
+        patch) is very similar to drm_agp_do_release, and I saw no reason to
+        have both.
+    This commit *breaks the build* on BSD. Eric said that he would make the
+        required updates to the BSD side soon.
+    Xorg bug: 3259 Reviewed by: Eric Anholt
+
+commit 3585bdf7d81a92c729bb5bcbc7cfca6048d640ce
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jun 11 10:08:39 2005 +0000
+
+    fix up drm.h for C++ include as this can be included in user programs
+
+commit f4aa8ab715cdb2382609f51dda4d832de417894a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Jun 10 01:21:23 2005 +0000
+
+    add dragonfly #define from Xorg CVS
+
+commit 28759fd872842c41f38edaf77a140a798609dd20
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jun 9 21:24:34 2005 +0000
+
+    Synchronize with the shared-core version.
+
+commit dfc650bd80da28b430b65cd26a1bf418074e2086
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Thu Jun 9 21:18:56 2005 +0000
+
+    Completely re-initialize DMA settings
+    There were two problems. First, the 'warp' and 'primary' pointers weren't
+        cleared, so mga_do_cleanup_dma, which gets called multiple times, would
+        try to ioremapfree them multiple times. This resulted in the new error
+        messages to syslog. The second problem was the, since the dev_private
+        structure isn't reallocated and cleaned out in mga_do_init_dma, when
+        the server is reloaded idle-waits would wait for impossible values.
+    I have given this patch some more riggorous testing. This includes:
+    - Load module, start server, run GL app, stop server, unload module.
+    - Load module, start server, run GL app, stop server, unload module, reload
+        module, restart server, run GL app.
+    - Load module, start server, run GL app, stop server, restart server, run
+        GL app, stop server, unload module.
+    In all three cases, everything worked as expected. Please let me know if
+        there are any further regressions with this patch.
+    Xorg bug: 3408 Reported by: Chris Rankin
+
+commit 1252890ff1d62544a250560f0c2985454bf888b5
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Jun 9 13:22:12 2005 +0000
+
+    drm_mem_init should be done at core load, not driver init
+
+commit 9f2f010763170890c69e1d2f9dd1f550db0400b1
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jun 6 11:35:43 2005 +0000
+
+    fix some issues with radeon interrupt handling
+    From: Dave Airlie + Benjamin Herrenschmidt
+
+commit 246c617c87a5407f0bb8375e217443fc38aee405
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Jun 6 09:18:44 2005 +0000
+
+    Fix copyrights
+
+commit 751765dba5b15f431a12308e09237d895c65e471
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Jun 6 06:45:41 2005 +0000
+
+    Add a few more bits of Tonnerre's NetBSD port (Still need to deal with the
+        device attachment).
+
+commit 805a07714f05833a1ed4e4a01f8086fafd46e849
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jun 4 06:18:11 2005 +0000
+
+    misc cleanup patch from Adrian Bunk
+
+commit 83cb1504498ad2ca327bc8341bc21ed6cdb54756
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jun 4 06:14:58 2005 +0000
+
+    Remove warnings about code mixed with declerations..
+
+commit 1d678a518ee97fef3a3f9816cddf199ad7e37509
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jun 3 22:53:32 2005 +0000
+
+    Minor clean-ups. The drm_mga_fullscreen_t stuff has been dead for a looong
+        time. Remove it and an out-dated comment.
+
+commit 8e7c130ef71b6300a99f6404d23e7ff8646066be
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Jun 3 22:45:21 2005 +0000
+
+    Move the deallocation of dev_private. Since dev_private is allocated when
+        the driver is loaded and is always expected to be around, it should
+        only be deallocated when the driver is unloaded.
+    Xorg bug: #3408 Reported by: Chris Rankin
+
+commit 9cad6fb4e043ba6140d4c61f09ca0cf0ba8d18c0
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat May 28 20:36:22 2005 +0000
+
+    Bugzilla #3217: Create a new __drm_pci_free which is used internally in
+        linux-core to free pci memory without freeing the structure. Linux-core
+        internals often create pci dma handle structures on the stack due to
+        the lack of a drm_local_map_t to store them in properly. Fix the
+        original drm_pci_free to actually free the dma handle structure instead
+        of leaking it.
+    Signed-off-by: Sergey Vlasov <vsu@altlinux.ru>
+
+commit d7756397d695e5573647258f8412e9ecfb2645d4
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat May 28 20:25:04 2005 +0000
+
+    Bugzilla #3217: The size field in the new dma handle structure was
+        uninitialized, and its use in drm_pci_free later resulted in panics.
+    Signed-off-by: Sergey Vlasov <vsu@altlinux.ru>
+
+commit 54fbf85125ef231f77b333d9e72cbc56b5bc012d
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Sat May 28 00:08:53 2005 +0000
+
+    Actually check for drm_fb_loaded before trying to initialize the sysdev
+        approach.
+
+commit 45f1db8db9d1280dff51cdfb680bff2754195483
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Sat May 28 00:00:08 2005 +0000
+
+    Re-implement the power management.
+    There's two choices when fb is or isn't loaded as we treat ourselves as a
+        PCI driver in the latter case.
+    If we are a PCI driver, then register the suspend/resume functions
+        directly. If not, then we register as a sysdev and pick up the
+        suspend/resume actions and pump them down into a generic *power
+        function.
+    It'll be nice when this little mess is sorted out with regard to being a
+        real PCI driver ;-/
+
+commit 4a84416c458027462ee6112a5fa442415597f6c2
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri May 27 23:42:11 2005 +0000
+
+    Modify drm_driver::device_is_agp to return a tri-state value to indicate
+        that a device absolutely is, absolutely is not, or may or may not be
+        AGP. Modify the i915 DRM to use this to force all i9x5 devices to be
+        "AGP" (even the PCI-e devices).
+    Reported by: Lukas Hejtmanek
+
+commit c9abd2fec509c271339d1ca3addd95df884df80a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri May 27 07:23:44 2005 +0000
+
+    add radeon registers from VHA code these are the "unknown" registers
+
+commit e1fd79b31e130e9e4bafcab914491973147b7f86
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Mon May 23 20:56:54 2005 +0000
+
+    VIA:
+    64-bit fixes. Bumped driver date and patchlevel.
+
+commit 955791f0645d4b61bd20d817c532dda3a40aaddd
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Sun May 22 04:36:33 2005 +0000
+
+    Refactor the routines for "calculating" the size of the WARP microcode. The
+        two routines (one for G200 and one for G400) were replaced with static
+        const variables and a single function that returns the correct size.
+        The code to generate an error if the allocated WARP region is too small
+        was refactored from mga_warp_install_{g200,g400}_microcode to
+        mga_wrap_install_microcode.
+    mga_warp_microcode_size is global to the MGA DRM because it will soon be
+        used by code in another file.
+
+commit 75cb43ccd73dd2c8c196d209862b8a3ea4e433cb
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Sat May 21 02:31:08 2005 +0000
+
+    Forgot to bump the patchlevel and driver date on last commit.
+
+commit a686be5bc8c5d8a260513b680f322e3b790aadf7
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Sat May 21 02:27:51 2005 +0000
+
+    Change the MGA initialization and cleanup a bit. The dev_private structure
+        is now allocated (and partially filled in) by the new
+        mga_driver_preinit function.
+    This allows the driver to detect the type of card (i.e., G200 class vs.
+        G400 class) on its own. The chipset value passed to mga_dma_init is now
+        ignored. This same technique is used by the radeon DRM.
+    As a result of this, mga_driver_pretakedown was converted to
+        mga_driver_postcleanup. This routine gets called in some other places
+        than might be expected, and it sets the dev_private pointer to NULL.
+        That little gem took over an hour to track down. :(
+
+commit fced784140c7b347ea9d3091a8bc0c06c1a760f7
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri May 20 00:17:40 2005 +0000
+
+    Refactor common, boilerplate ioctl code from drm_addbufs_* functions into
+        drm_addbufs. This makes the code more like the BSD code, and makes the
+        drm_addbufs_* functions callable in-kernel.
+    Reviewed by: Dave Airlie
+
+commit 4ca48cb4d8341b699ffffc8ccd8d70006733936a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed May 18 06:35:16 2005 +0000
+
+    Add i945G pci ids to drm
+    From: Christopher Allen Wing <wingc@engin.umich.edu> Signed-off-by: Dave
+        Airlie <airlied@linux.ie>
+
+commit 6d4b9a830bb5678460621b652e914cbcb16d8c4c
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Tue May 17 02:08:02 2005 +0000
+
+    Savage doesn't require AGP any more. Enable build even without CONFIG_AGP.
+
+commit e051cd19c00ed28997ff6fece0d1d4308b171229
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Mon May 16 17:37:10 2005 +0000
+
+    Added device_is_agp callback to drm_driver. This function is called by the
+        platform-specific drm_device_is_agp function. Added implementation of
+        this function the the Linux-specific portion of the MGA driver to
+        detect PCI G450 cards. Added code to the Linux-specific portion of the
+        generic DRM layer to not initialize AGP infrastructure if the card is
+        not AGP (this matches what already existed in BSD).
+    Bumped the driver date and the driver patch-level for MGA.
+    This mostly fixes bugzilla #3248. The BSD side still needs an
+        implementation of mga_driver_device_is_agp.
+
+commit bd72c6990f22381af61f62bffe70619f726d5923
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun May 15 10:19:21 2005 +0000
+
+    wrap config.h include with defined for KERNEL
+
+commit e0fc400b681cb6b04ba0769c58f279a2aa4326a5
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Sun May 8 20:33:04 2005 +0000
+
+    VIA: Fix for oops when AGP ring-buffer initialization is called and there
+        is no AGP memory acquired.
+
+commit 6aae7bd5b061c6a8130787ba3ea5aa07c744eda9
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Apr 26 15:27:58 2005 +0000
+
+    Convert NOMAN to the new preferred spelling NO_MAN to quiet warnings.
+
+commit 2fcf66a02fb0f6f31c0d02026c8c7a4d36b45f58
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Apr 26 06:03:39 2005 +0000
+
+    Clean up some const qualifier cast warnings.
+
+commit ec111d70fee0647c4c68a02c723d4a3729c93b56
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Apr 26 05:19:11 2005 +0000
+
+    Convert BSD code to mostly use bus_dma, the dma abstraction for dealing
+        with IOMMUs and such. There is one usage of the forbidden vtophys()
+        left in drm_scatter.c which will be fixed up soon. This required a KPI
+        change for drm_pci_alloc/free() to return/use a drm_dma_handle_t that
+        keeps track of os-specific bits, rather than just passing around the
+        vaddr/busaddr/size.
+    Submitted by: Tonnerre Lombard (partially) Tested on: FreeBSD: Rage128
+        AGP/PCI Linux: Savage4 AGP/PCI
+
+commit 31a06d0baca9e378a773ca8bd350860546dd8a79
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Apr 26 05:11:20 2005 +0000
+
+    Use msleep instead of tsleep to drop the DRM device lock and avoid a
+        sleep-with- mutex held. This probably ought to be an os-independent
+        sleep function ala DRM_USLEEP.
+
+commit be9e67a927ed9583380107b2fb9ddf3bd8a5f128
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Apr 24 19:09:09 2005 +0000
+
+    Fix a panic on startup with non-initmapping drivers by assigning the
+        drm_ioremap return value to the map handle again.
+    Submitted by: Tor Egge, tegge at freebsd dot org
+
+commit 699d4ad53a62e46344b672365dda0be4001edd99
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Wed Apr 20 18:50:49 2005 +0000
+
+    A fix for a locking bug which is triggered when a client tries to lock with
+        flag DMA_QUIESCENT (typically the X server), but gets interrupted by a
+        signal. The locking IOCTL should then return an error, but if
+        DMA_QUIESCENT succeeds it returns 0, and the client falsely thinks it
+        has the lock. In addition The client waits for DMA_QUISCENT and
+        possibly DMA_READY without having the lock.
+
+commit 2b8dc25dc549533f1567093fb7dffc06d6f55268
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Wed Apr 20 10:16:52 2005 +0000
+
+    VIA: Interrupt handler bugfixes. Bumped patchlevel to 2.6.2.
+
+commit b0c461c8e374d7e92e5013a03fc6096595a74700
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Apr 19 00:31:16 2005 +0000
+
+    Revert last commit, it affect via things
+
+commit a08343e3e053d5ab27398013781f489cdf7f60de
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Mon Apr 18 08:26:00 2005 +0000
+
+    VIA:
+    1) Security fix: Stopped possible MMIO access to PCI DMA area for the
+        unichrome Pro.
+    2) Fixed an odd cpu usage problem by padding small AGP DMA submissions.
+        Bumped patchlevel.
+
+commit 10ddbc8c8c9e540cf4802cab36d0c46f0aa0b6d8
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Apr 16 03:02:52 2005 +0000
+
+    Use /*- to begin license blocks in BSD code to reduce diffs against FreeBSD
+        CVS.
+
+commit 926298e8220b43158c433c75ffca74909a33c42b
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Apr 13 04:20:08 2005 +0000
+
+    Fix build on FreeBSD-current, thanks to jhb@.
+
+commit a0454aba714ba0314b85faad2801f7b047fa3b02
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Apr 4 04:08:29 2005 +0000
+
+    mirror changes made in main tree.. just happened to be doing this myself
+
+commit cb5f6c22b5a0190c845029a772a2eb2a3faa5d1c
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Tue Mar 29 09:48:12 2005 +0000
+
+    Missing file via_video.c commited.
+
+commit 0a5e02c7b5fbbc7a7cc3654f5820d0dd50381de9
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Tue Mar 29 01:47:38 2005 +0000
+
+    Add skeletal imagine driver (but don't build it yet).
+
+commit 532ccb98b5f2946f574a747b90c39edbe783f888
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Mon Mar 28 21:21:42 2005 +0000
+
+    Via updates:
+    New PCI command parser. Moved from via_dma.c to via_verifier.c so functions
+        with similar functionality are close to eachother.
+    Moved video related functions to via_video.c, which might be extended in
+        the future, as new video functionality is added.
+    New device-specific generic IRQ IOCTL, similar to the general VBLANK IOCTL,
+        but with support for multiple device IRQ sources and functionality.
+    Support for Unichrome Pro PM800/CN400 video DMA commands in verifier and
+        PCI parser.
+    Support for Unichrome Pro PM800/CN400 HQV IRQs in the new generic IRQ
+        IOCTL.
+    Bumped minor. New version 2.6.0.
+
+commit c6161eff86b250f3113791edcc162dc97322c401
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Mar 27 07:05:28 2005 +0000
+
+    Description: Rather than use custom code in DRM_WAIT_ON() to do exactly
+        what wait_event_interruptible_timeout() does, use the function and just
+        change the return values appropriately.
+    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
+
+commit 385f927692beb395ae3866538b2b0f8f8e436eba
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Mar 27 06:58:12 2005 +0000
+
+    Some ia64 platforms may not support write combining on all type of memory,
+        so we need to consult the EFI memory map before we try to set the write
+        combine attribute of a page. This patch will try to map a page write
+        combined if it's not an AGP page and the EFI memory map says it's ok,
+        otherwise it falls back to a regular, uncached mapping. Can someone
+        please apply this to the drm tree?
+    From: Jesse Barnes
+
+commit 459ef4862978800f3dbff76af134593350cad6aa
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Mar 25 13:44:47 2005 +0000
+
+    Don't know who set the i915GM PCI ID incorrectly but it should be 0x2592
+
+commit 9182891b26f1847664f4a797db12c63ec065df7a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Mar 25 13:16:38 2005 +0000
+
+    From Xorg CVS realign the i915_drv.h
+    From: Tungsten Graphics Signed-off-by: Dave Airlie <airlied@linux.ie>
+
+commit 20dce568dced6cb38a9bab850b45989e86b0f1e6
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Mar 25 13:06:53 2005 +0000
+
+    use linux-core for 2.6 not this stuff..
+
+commit 956a701544d22c7885e53678531448cd04aba5f5
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Mar 25 09:48:34 2005 +0000
+
+    fix up AGP multi-head support for kernel 2.6.12
+
+commit 2ad83874287622875f6979da3cd505d18b697704
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Mar 25 09:47:36 2005 +0000
+
+    verify_area is deprecated, replaced by access_ok. Seems I missed this one
+        when I did the big overall conversion.
+    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
+
+commit ca04fbc7bad746b5f323a36407b4d99a3a2afd02
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Mar 25 09:05:10 2005 +0000
+
+    fix bug with XFree86 4.3 on core drm
+    Signed-off-by: Dave Airlie <airlied@linux.ie>
+
+commit c8d2d5d41901ba8072b4f03617c39cbb52f9224b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Mar 25 09:02:20 2005 +0000
+
+    3dfx DRM depends on PCI
+    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
+
+commit df6ef4836ead254487a834e889d4595d915c4818
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Mar 25 09:01:27 2005 +0000
+
+    For 2.6.12 and 2.6.11.x:
+    Remove incorrect "drm_"-prefix from parameter description.
+    Signed-off-by: Magnus Damm <damm@opensource.se>
+
+commit ab396776fbf2777d31c4253001e882d2faee0c3b
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Fri Mar 18 22:51:43 2005 +0000
+
+    Add support for production version of ATI RN50/ES1000. (ATI Technologies
+        Inc.)
+
+commit 34563921dd0b41d4ccf08374227e31d765b40353
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Tue Mar 15 22:12:30 2005 +0000
+
+    add R200_EMIT_PP_TRI_PERF_CNTL packet to support brilinear filtering on
+        r200
+
+commit d2fd9200956a94cfd91a39e76994f326bdfc6ac0
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Mon Mar 14 22:50:21 2005 +0000
+
+    via changes:
+    1. Initialize futex locks to zero on device init.
+    2. Remove some stray defines from via_drm.h
+    3. Prepare via_drm.h for drm client inclusion. The goal is to share a
+        common file with common definitions.
+    4. Sync shared / shared-core via_drm.h
+    5. Bump minor, because of the futex lock initialization.
+
+commit a396617dbc15abafdc172b972a02c04007ad579f
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Sun Mar 13 02:16:10 2005 +0000
+
+    Command DMA optimizations:
+    - don't waste DMA memory when small command buffers are flushed
+    - minimized padding with noops
+    - slightly simplified faked DMA flushing
+
+commit 7d3c42b58940b56efa9bfc13a08b5e67797fc771
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Mar 8 23:47:11 2005 +0000
+
+    Fix for bug 2673 from Egbert Eich - memset the version
+
+commit 95fa851769b2a3461fb710f6d035bc5b2bf164e0
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Mon Mar 7 12:19:49 2005 +0000
+
+    Tracked down random lockups related to command DMA that occurred in Quake3
+        after ~5min: buffer aging was subtly broken. Part of this may have also
+        affected vertex DMA buffer aging and client-side texture heap aging,
+        though with less fatal consequences. Bumped minor version and driver
+        date.
+
+commit 32b6823a2540da83553f49a1daf89159c425c93e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Mar 7 09:40:18 2005 +0000
+
+    minor pointer cast typo
+
+commit 15995234b4d6cb848d919b0342b5697fffe80c89
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Sun Mar 6 01:41:06 2005 +0000
+
+    Added support for command DMA on Savage4-based hardware. Unfortunately
+        command and vertex DMA don't work at the same time. Command DMA
+        performance is superior and works with all vertex formats. Bumped minor
+        version and driver date.
+
+commit 26f04a16645edb366fce16060f6d5d01f2ff54b3
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Mar 4 03:04:37 2005 +0000
+
+    add some idct type 3 packets for reference
+
+commit bc54ede0a865d55b3cc39db79aae3a8bc12bbcc0
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Wed Feb 23 16:34:30 2005 +0000
+
+    Use wrap counter to extend 16-bit hardware event tags to 32-bit logical
+        event counters in the SAVAGE_EVENT_EMIT/WAIT ioctls. This is needed for
+        reliable client-side texture heap aging. Slightly simplified DMA buffer
+        aging while at it. Bumped minor version and driver date.
+
+commit f3cf4bc5f2bd556689ef197877de596b83dbd3d9
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Sun Feb 20 00:05:43 2005 +0000
+
+    Fix VIA K8M800 PCI ID.
+
+commit 56cdeff23181772142a56268e50ceff691c7934d
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Feb 19 22:07:07 2005 +0000
+
+    Fix a couple of gcc warnings in DRM_INFOs.
+
+commit baeb76076e79dae0ed78f12e294336deaa3af9e7
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Feb 19 20:00:55 2005 +0000
+
+    Merge r1.26 from FreeBSD: Now that mem(4) is a kernel module, we need to
+        depend on it.
+
+commit 49e19c8d001c34f675b8d81ffde8f0792292f6ff
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Fri Feb 18 20:06:10 2005 +0000
+
+    fd.o bug #2576: Add support for ATI RN50/ES1000. (ATI Technologies Inc.)
+
+commit b646515d6124b906f5a0c2cf76f8fda590884ef0
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Fri Feb 18 16:40:54 2005 +0000
+
+    Bug #2567: Fix reversed memset arguments. (David Krause)
+
+commit 80d844d99250e7bc26fbae7ca4a274ad46f7676f
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Feb 15 13:15:08 2005 +0000
+
+    Run depmod after installing new modules
+
+commit 3e8792e7051090b442d29444fa2e5dfe46847c34
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Feb 14 03:28:01 2005 +0000
+
+    Use fuword32 for DRM_GET_USER_UNCHECKED when available. May help on 64-bit
+        platforms.
+    Submitted by: Jung-uk Kim, jkim at niksun dot com
+
+commit ed082798f481b43d9745aaae15306e94a9acb169
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Feb 14 03:26:52 2005 +0000
+
+    Use the proper API to get PCI vendor/device number for a dev.
+    PR: ports/76879 Submitted by: Alex, lesha at intercaf dot ru.
+
+commit 2f7cd38c122b2f7f790e51b78a51cc935c9b2f18
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Feb 14 03:22:58 2005 +0000
+
+    Initialize kbuf to NULL to quiet the compiler about uninit variables
+        (wasn't an issue). Don't forget to free kbuf if the copyin fails.
+
+commit 650c0fe391b09479afd787e0b1db0a3e22cc4fcd
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Sun Feb 13 23:03:48 2005 +0000
+
+    Fixed Futex release bug. Bumped driver date and patchlevel.
+
+commit 0d2eb2b90c092eaef00c95a9403ed7f0c8f7b3a6
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Feb 13 01:18:25 2005 +0000
+
+    Fix bad copy'n'pastage of copyrights -- don't disclaim anything for VA
+        Linux or PI in my copyrights when I should be doing it for myself.
+
+commit ba18d68ff512f672520b0c78aa955ad1f9a9d7d0
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Feb 13 01:08:29 2005 +0000
+
+    Add the first bits necessary for a port of savage to FreeBSD. More to
+        follow later.
+
+commit 5d5acf28d8225a4a8a440e63abba8136e344b852
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Thu Feb 10 19:29:58 2005 +0000
+
+    add support for texture micro tiling for radeon/r200. Add support for cube
+        maps for r100. (Stephane Marchesin's port of the core version).
+
+commit 732cdc5cef25b1ea518fec9c9028d3a9806b690a
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Thu Feb 10 19:22:43 2005 +0000
+
+    add support for texture micro tiling on radeon/r200. Add support for r100
+        cube maps (since it also requires a version bump) at the same time.
+
+commit 08790293b13bb4562307309461400dad22c72eaf
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Feb 10 11:02:56 2005 +0000
+
+    Stephane's port of Eric's race fix
+
+commit 2cdfb2cc8527a6a805b159006885268607383448
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Tue Feb 8 22:46:56 2005 +0000
+
+    fix incorrect PCI id for ATI radeon
+
+commit 81459d6e50a02b87ed95073659536eefa1e09fdf
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Feb 8 04:17:14 2005 +0000
+
+    Close a race which could allow for privilege escalation by users with DRI
+        privileges on Radeon hardware. Essentially, a malicious program could
+        submit a packet containing an offset (possibly in main memory) to be
+        rendered from/to, while a separate thread switched that offset in
+        userspace rapidly between a valid value and an invalid one.
+        radeon_check_and_fixup_offset() would pull the offset in from user
+        space, check it, and spit it back out to user space to be copied in
+        later by the emit code. It would sometimes catch the bad value, but
+        sometimes the malicious program could modify it after the check and get
+        an invalid offset rendered from/to.
+    Fix this by allocating a temporary buffer and copying the data in at once.
+        While here, make the cliprects stuff not do the VERIFYAREA_READ and
+        COPY_FROM_USER_UNCHECKED gymnastics, avoiding a lock order reversal on
+        FreeBSD. Performance impact is negligible -- no difference on r200 to
+        ~1% improvement on rv200 in quake3 tests (P4 1Ghz, demofour at
+        1024x768, n=4 or 5).
+
+commit dc4defe742387dc3081557111b67a1ab99455dbb
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Feb 7 22:55:54 2005 +0000
+
+    Invalid bound check of driver defined ioctls in drm_ioctl
+    Bug 2489 Reporter: Aapo Tahkola <aet@rasterburn.org>
+
+commit a36d5b33aaa7731621a288a6a9a02bf86c8c80e4
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Mon Feb 7 21:11:59 2005 +0000
+
+    Cast user data to correct type in radeon_surface_free's copyin.
+
+commit 03ddea5b274a515528ea58db62f7b5f779430c5b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Feb 7 11:20:43 2005 +0000
+
+    change DRIVER_ to CORE_ makes things look nicer, also change it so the
+        driver name is marked on resource allocations
+
+commit 300e0866d68d40af9271a588bd93522e4e7a339c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Feb 7 10:44:28 2005 +0000
+
+    fix agp detection on linux
+
+commit 5a332a0f61760d8c13a01ba9f9208fafcafc3bb4
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Feb 7 03:10:03 2005 +0000
+
+    Restore a debugging message to DRM_DEBUG instead of DRM_ERROR.
+
+commit 2239c55a304416dbf83e7fd545df5c3dde3ff058
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Feb 7 01:14:42 2005 +0000
+
+    Remove some annoying trailing whitespace.
+
+commit 080a547d4d42d42e08a525aca9a62b5ece7616d5
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Feb 5 08:00:14 2005 +0000
+
+    - Implement drm_initmap, and extend it with the resource number to help
+        FreeBSD. Add drm_get_resource_{start|len} so linux-specific stuff
+        doesn't need to be in shared code.
+    - Fix mach64 build by using __DECONST to work around passing a const
+        pointer to useracc, which is unfortunately not marked const.
+    - Get rid of a lot of maplist code by not having dev->maplist be a pointer,
+        and by sticking the link entries directly in drm_local_map_t rather
+        than having a separate structure for the linked list.
+    - Factor out map uninit and removal into its own routine, rather than
+        duplicating in both drm_takedown() and drm_rmmap().
+    - Hook up more driver functions, and correct FreeBSD-specific bits of
+        radeon_cp.c, making radeon work.
+    - Baby steps towards using bus_space as we should.
+
+commit 270ca5f3cee387c10a06a4d58e50c5d0e1cea837
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Thu Feb 3 10:51:22 2005 +0000
+
+    Via driver: Add missing drm_poll function to via driver in core.
+
+commit 7f7bbdcbed4f752bb2063fd1c650121e368797fc
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Feb 3 01:06:10 2005 +0000
+
+    Declare r128_do_cleanup_pageflip static since it's only used here and its
+        prototype went away.
+
+commit ed31275144b9d322f7339700a5f5cf1167ee8322
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Feb 3 01:05:34 2005 +0000
+
+    Cast user data to correct type in radeon_surface_free's copyin.
+
+commit caa4212faa659a30d543a15781428bd8b4c2c882
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Tue Feb 1 22:09:46 2005 +0000
+
+    momentary revert. libdrm build may be broken now, but no one uses it yet...
+
+commit 0d6b7fcb79e9bf6f823b5802f8317056015faeec
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Feb 1 11:08:31 2005 +0000
+
+    cleanup patch from Adrian Bunk <bunk@stusta.de>
+
+commit 1dd948f280b52645b320ea0745ec48b8d98c9d9b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Feb 1 10:43:42 2005 +0000
+
+    make functions static in i915, remove unused functions
+
+commit 62e0a58ecf03fe85de6e671fe2fc7f613ba39b37
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Feb 1 10:33:51 2005 +0000
+
+    update i830 similiar to the kernel, add statics
+
+commit 8d4c731aa1e0936d8187ad77b5c779a79e22566d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Feb 1 10:18:27 2005 +0000
+
+    make more functions static in i810 and fix pageflip cleanup
+
+commit 4b23b5fc3ebe5660ad8d5eed8057877a9c7592ea
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Sun Jan 30 03:30:45 2005 +0000
+
+    Final pass of libdrm.so work:
+    - Add $(DESTDIR) for distributors doing package creation
+    - Remove OS-specific include path from build
+    - Add /usr/include/drm for driver-kernel API
+    - Install all of shared-core/*.h in /usr/include/drm
+    - Rename xf86drm.h to libdrm.h since we're not X biased anymore
+    - Include backwards compat for xf86drm.h name, with a warning
+    - Fix libdrm source to account for drm.h living in /usr/include/drm
+
+commit 41cbbb47afa898cd4bfe5f39fad57199088a5727
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jan 29 23:05:35 2005 +0000
+
+    fix radeon drv
+
+commit cd9ef39c769202f161619ee7a95674371c57cd48
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Thu Jan 27 22:48:47 2005 +0000
+
+    Fixed multiple devices DMA bug. Fixed PCI path FIRE command detection
+
+commit 77045dc51672715115f179c099dfb8d7b4d304d4
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jan 27 09:13:42 2005 +0000
+
+    fix incorrect PCI id for ATI radeon
+
+commit 43c3223de690b892759901386d8dc936b0dfbad1
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Wed Jan 26 17:48:59 2005 +0000
+
+    (Stephane Marchesin,me) Add radeon framebuffer tiling support to radeon
+        drm. Add new ioctls to manage surfaces which cover the tiled areas
+
+commit 408376b2031cf301f1a8e35e89ceefc72f2fdc94
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Wed Jan 26 14:19:24 2005 +0000
+
+    replace magic number with macro constant RADEON_ZBLOCK16
+
+commit 310abb39b24159be9839156b4034426cea6a7449
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 24 08:39:22 2005 +0000
+
+    use libdrm after it was updated
+
+commit 311da0f2124104dfac5fe59bf0ffd7fd88280945
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jan 24 01:05:07 2005 +0000
+
+    hopefully fix drm_core setversion ioctl... pointed out by Eric on irc
+
+commit 3df805bd4ab492537e3aa0b9ac5ae99491ee38d6
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Sat Jan 22 08:24:36 2005 +0000
+
+    Add drm.h to the install target.
+
+commit 39d5c831a01dbffca268e5938c255e26a860bab1
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Thu Jan 20 23:33:24 2005 +0000
+
+    Removed one bogus Savage3D PCI ID. Corrected another one. Restored
+        numerical ordering.
+
+commit 36ec8d82e73215cb49034c5ec540dee170752ee0
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Thu Jan 20 19:05:42 2005 +0000
+
+    Add a Savage3D PCI ID
+
+commit 858e68fbdc4597f6c0dce9dd092a85078d1fb6c6
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Thu Jan 20 12:23:25 2005 +0000
+
+    Corrected some confusion of vb_stride and vtx_size
+    Implemented SAVAGE_CMD_DMA_IDX and SAVAGE_CMD_VB_IDX for ELTs support in
+        the _savage_render_stage of the 3D driver
+    Bumped minor version and driver date
+
+commit 9620a0b8bb2447bc17bf9a5aa9174720bf2ced68
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Jan 19 10:03:33 2005 +0000
+
+    Fix cut & paste problem
+
+commit f5914ad67bd87db8128a47fd74da3573b1306f27
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Jan 19 08:55:53 2005 +0000
+
+    Fix a cut & paste problem
+
+commit d29e2369be1a8643d12ab93997757fe3aafaa655
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Mon Jan 17 21:46:32 2005 +0000
+
+    Some code commenting concerning the FIFO & DMA engine.
+
+commit 7d0cb01cbf620e090230978ccee6cf7a882c832c
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Jan 17 20:24:52 2005 +0000
+
+    Add detection of whether the device is AGP by walking the capabilities
+        list.
+
+commit c74052cfae9cf3929e692551ce657f8fb55b6f08
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Mon Jan 17 00:02:04 2005 +0000
+
+    Add xf86drm.h to the install target.
+
+commit e5cc0b8f6f561b6eab91ab653cdce38dc160398f
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Sun Jan 16 23:50:58 2005 +0000
+
+    Shared libdrm work:
+    - create libdrm.so target
+    - build it by default
+    - drop xf86drmCompat.c from the build
+    - make 'clean' target never fail
+    - use pattern rules for .c -> .o for parallelism
+    - add 'install' target
+
+commit 37318f167511248315675ac45ba7d4c8fc4efcfc
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Jan 16 07:49:55 2005 +0000
+
+    remove duplicate drm_sysfs.o
+
+commit 0867ce78f6ec31b718f58ce80c56822c40cb68ca
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Jan 16 06:41:34 2005 +0000
+
+    This table is in radeon_drv.h along with the version number so remove it
+        from here
+
+commit 354dd17d2505fd3b9754f6ccc960671e1f9363d9
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Jan 16 05:40:12 2005 +0000
+
+    The patch makes drmAddBufs/drmMapBufs can handle buffers in video memory
+    The attached patch adds a new buffer type DRM_FB_BUFFER. It works like AGP
+        memory but uses video memory.
+    From: austinyuan@viatech.com.cn (fd.o bug 1668) Signed-off-by: Dave Airlie
+        <airlied@linux.ie>
+
+commit 9514ee39f7e5063383b99de580e7e3115645e886
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Sun Jan 16 01:22:09 2005 +0000
+
+    Fixed a bug that prevented the driver from ever emitting triangle strips or
+        fans. Bumped patchlevel and driver date.
+
+commit ffc51f1f32c57a99f2a8b02c0a9aa211362ec9b2
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Sat Jan 15 16:55:01 2005 +0000
+
+    Setup MTRRs for frame buffer and aperture manually on Savage3D and
+        Savage4-based cards. Automatic setup in drm_initmap doesn't work due to
+        the weird alignment and size of the aperture.
+
+commit 6c8a3194f40fc673b1055f1f2b70b45209881e7f
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jan 13 01:26:16 2005 +0000
+
+    due to backways compat crap for IRQ_HANDLED etc.. this wouldn't build on
+        2.4
+
+commit d4a8f16eb6a2fe13f2576f224e6c1a8b3ba89719
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Wed Jan 12 16:07:49 2005 +0000
+
+    Use virt_to_page instead of vmalloc_to_page in drm_do_vm_shm_nopage for
+        consistent pages allocated with drm_pci_alloc.
+
+commit ee576367632b582e29f2b3d42f2eb9250cfdf219
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Jan 11 10:59:01 2005 +0000
+
+    Import Thomas' changes upto 2.4.3 to shared. Small tweak to install target.
+
+commit 9904319b95794088fe1db34e86ed62bc20f863e7
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Jan 11 10:42:52 2005 +0000
+
+    import Thomas' shared-core via changes up to 2.4.1
+
+commit 17d893f567787914add42c221996c631455cdb25
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Mon Jan 10 22:46:02 2005 +0000
+
+    Only try to find the agp_buffer_map if dma_type is AGP. This is all that's
+        needed on the DRM side to support PCI Savages. Bumped patch level and
+        driver date.
+
+commit d6af902ff74d4a384c2dd9acb9540d637f588bc6
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Sun Jan 9 19:49:21 2005 +0000
+
+    Improved workaround for Savage3D DMA lockup to emit NOPs only before the
+        first indexed drawing command of a cmdbuf or if a wait command was
+        emitted since the last indexed drawing command.
+
+commit 6e38fd357625ef002cf1f4570296dc66ba2631c6
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sun Jan 9 17:30:44 2005 +0000
+
+    Adjust 4 level page check for <= 2.6.10
+
+commit e7ba83bd6f3a1ab9981948a64e9a09940d25e281
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Sat Jan 8 23:28:27 2005 +0000
+
+    Fixed off-by-one error in savage_bci_wait_fifo_shadow.
+
+commit fb6a4d0a7dfd8e996dca6d45bb820979f231c82c
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Fri Jan 7 11:37:01 2005 +0000
+
+    via updates: moved the verifier state struct to dev_priv. Implemented AGP
+        alignment check.
+
+commit ca2b94cfa2f07c4fd1188d85d8d916318e15e7f2
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Fri Jan 7 08:21:29 2005 +0000
+
+    Updated via DRM with check for stray FIRE commands primitive list.
+
+commit fcece3cf34ed5cc7e82d324362a40b3dd5493bbe
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu Jan 6 17:51:32 2005 +0000
+
+    Add i915GM support Add resume functionality (must be used with later DDX)
+        Bump to 1.2
+
+commit c6c7496ca090dd56599de5bb1398f69762569d5e
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Jan 6 17:09:22 2005 +0000
+
+    Adjust drm-memory for 4 level page tables in 2.6.10 ifdef'd to use 3 levels
+        in kernels older than 2.6.10
+
+commit 50a6ffa8789ca12029da1db86ad8c90ce62cd241
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Thu Jan 6 15:53:38 2005 +0000
+
+    via DRM: Updated the verifier to check the vertex lists more thorough. This
+        should hopefully stop it from getting out of sync.
+    The PCI command parser is still not updated.
+
+commit ae1bc4a6da92ab31c933baa0b3f6c17c9bd16eb5
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Wed Jan 5 23:45:42 2005 +0000
+
+    3D scissor regs are now managed by the DRM to iterate over clip rects
+        passed to the cmdbuf ioctl (try xeyes on top of glxgears ;-)
+    Tightened the texture state check
+    Bumped Savage DRM version to 2.1.0 so that DRI driver can (theoretically)
+        depend on the DRM to manage the scissor registers
+
+commit 4818014ab10e5ab27fe7c87f7936a932526612a6
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Wed Jan 5 17:46:34 2005 +0000
+
+    Bumped driver date and minor version.
+
+commit e34b5601912ce4b611d429304d5271fcf6f9f457
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Wed Jan 5 17:44:43 2005 +0000
+
+    VIA update:
+    Release video futexes when context is destroyed (This was previously done
+        by the X server).
+    Added New Unichrome Pro VIDEO DMA commands to the verifier.
+    Added Quiescent heavyweight lock mode.
+
+commit 094f02c568fb2096a93b30adf291f82e0b87bbce
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Wed Jan 5 14:34:12 2005 +0000
+
+    Fixed the DMA buffer age test. Should fix occasional "soft" lockups. Bumped
+        patch level and driver date.
+
+commit 04842e8bcf0cc1b3553ba380c450ad1f22b8b463
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Sat Jan 1 20:22:58 2005 +0000
+
+    Completeley rewritten Savage DRM which can be considered secure (modulo
+        implementation errors). Direct hardware (MMIO, BCI) access is no longer
+        needed in the Mesa driver. Bumped version to 2.0.0. Corresponding
+        changes to the DDX and Mesa drivers are being committed.
+
+commit ed165a25292740d5d3ef7e78dc04a6a3402562aa
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Sat Jan 1 20:03:15 2005 +0000
+
+    Added a new DRM map type _DRM_CONSISTENT for consistent PCI memory. It uses
+        drm_pci_alloc/free for allocating/freeing the memory. Only implemented
+        in the Linux DRM so far.
+
+commit fe4ade81bb7a1242b18b84e012c1a293eea0420b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jan 1 12:07:51 2005 +0000
+
+    i810/i830 bug with Jon's file operations changes
+
+commit e19fa7ada122a68d6bedf3d678e96545ed41a39f
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Fri Dec 31 11:44:27 2004 +0000
+
+    VIA DRM: verifier: Added verbose palette error reporting, and support for
+        stipple palettes together with rudimentary checks for texture palette
+        sizes.
+    other: Bumped version patchlevel and driver date.
+
+commit 590b23011910e27664c8bc6ebac4b2b150d81519
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Fri Dec 31 11:27:57 2004 +0000
+
+    VIA DRM: Stability enhancements and cleanups in via_dma.c Added explicit
+        licence notice in via_dma.c
+
+commit 02c35ec0a28b4fffcfc09ca444f7dc0c0912216d
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Tue Dec 21 17:13:22 2004 +0000
+
+    via DRM: Tightened the security for some functions of the
+        DRM_IOCTL_VIA_DMA_INIT IOCTL. Bumped patchlevel and driver date.
+    XFree86 bug: 2119
+
+commit 47c178da08c01501890e23219cbac8319992a453
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Mon Dec 20 12:03:02 2004 +0000
+
+    Copy HC_ParaType_Auto change to shared-core. Bump version numbers and
+        dates.
+
+commit c4c48a8a5bb27cee0592aebcc032abe7858604c8
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Mon Dec 20 11:57:10 2004 +0000
+
+    Add a very simple install target. I expect there are more correct ways to
+        do this.
+
+commit ae0db704b4ada67f9df81e208308c7d92c29396e
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Sun Dec 19 19:13:47 2004 +0000
+
+    via changes: Fixed typecasting bug in via_dma.c, and possible short-circuit
+        bug in the cmdbuf_size ioctl. Modified ring-buffer jump code AGAIN, due
+        to new oddities discovered on the Unichrome Pro with faster processors.
+        Bumped patchlevel and driver date.
+
+commit eaaf0a5211883608e2e698cde04bcb0da4c4a4ee
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Fri Dec 17 14:11:05 2004 +0000
+
+    Add the 'Auto' pageflipping command to the verifier. I don't think any
+        verification is required for the arguments of this packet from a
+        security point of view.
+
+commit ebd3b867deed789bd4b3fe98f88c20a9454f0061
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu Dec 16 11:07:20 2004 +0000
+
+    drm_pciids.h should only 'cleaned' when the shared/ directory exists. Which
+        the Makefile already knows about, but it was cleaning this file anyway.
+
+commit 3e65f52bda674bec43b807d50b41a537c9e93959
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Dec 15 03:34:09 2004 +0000
+
+    Use SYSCTL_ADD_OID macro instead of calling function directly.
+    Submitted by: reffie@FreeBSD.org
+
+commit aff0a2548561ecbe3411b57cd31f46cbb1b4f6b8
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Mon Dec 13 13:53:12 2004 +0000
+
+    VIA drm updates:
+    1. Improved security check of AGP texture adresses.
+    2. Hopefully last fix of ring-buffer jump oddities.
+    3. Added ioctl to check available space and command regulator lag in
+        ring-buffer. This is needed for 3D application responsiveness.
+
+commit b4782ba76b8ee48dca9948abe8ba5cd1f42617e7
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Dec 10 11:53:24 2004 +0000
+
+    Use wbinvd macro instead of assembly for it,
+    From: Stefan Dirsch <sndirsch@suse.de> Signed-off-by: Dave Airlie
+        <airlied@linux.ie>
+
+commit c4a87c6883ede7bbf486743efe3e9325d96f8e54
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Wed Dec 8 16:43:00 2004 +0000
+
+    (Stephane Marchesin, me) add hyperz support to radeon drm. Only fast z
+        clear and z buffer compression are working correctly, hierarchical-z is
+        not.
+
+commit 98d01f9542d7f70aa10d68c0e41e631b5f156770
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Tue Dec 7 12:18:47 2004 +0000
+
+    Patch from Jon Smirl from Nov. 2nd that makes older X servers behave well
+        with linux-core. Without this, they will fail on their second
+        invocation since the drm already has a busID assigned.
+    Submitted by: Jon Smirl
+
+commit bf6eb1c0d47e670658c42e439434c0c25caabcfb
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Tue Dec 7 12:09:11 2004 +0000
+
+    Fix up linux 2.4 series Makefiles for via_verifier.c
+
+commit 1fbfd9eb32220a10d66373b77172965cfeccd4f7
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Mon Dec 6 11:19:23 2004 +0000
+
+    Security and optimization fixes for the via drm:
+    1. The command verifier was never initialized in the non-core source tree.
+    2. Check added that the AGP ring buffer has been initialized before
+        accepting command buffer.
+    3. Free space check in the AGP buffer is moved to after command
+        verification, which is more optimal in most cases.
+
+commit 267e0645272720344eb7556a948e72112edbe2ec
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Fri Dec 3 23:03:36 2004 +0000
+
+    Added 3D functionality to the via command verifier. Modified the via
+        ring-buffer code somewhat to workaround hardware problems. Bumped via
+        minor version number.
+
+commit f197110e07b0be03d5d79329779b665ac46433d5
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Dec 3 10:22:15 2004 +0000
+
+    Make 1-bit fields be unsigned (no sign bit :). sparse complains about them:
+        drivers/char/drm/sis_ds.h:88:12: warning: dubious one-bit signed
+        bitfield drivers/char/drm/sis_ds.h:89:16: warning: dubious one-bit
+        signed bitfield
+    Signed-off-by: Randy Dunlap <rddunlap@osdl.org> Signed-off-by: Dave Airlie
+        <airlied@linux.ie>
+
+commit 4f8fa6028631fa1d799e9a68ed710fbc98976656
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Sat Nov 27 22:55:31 2004 +0000
+
+    Reworked PCI MMIO command buffer parser, and imported code from the Mesa
+        driver. It can now handle the 3D OpenGL commands from the Mesa
+        unichrome driver.
+    Added vsync frequency detection support. This will be used in the future
+        for XvMC and better frame timing.
+    Bumped minor version number and driver date.
+
+commit f0a86288fa4d7b951f33f7b1a6ef36106c7df788
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Nov 11 11:09:11 2004 +0000
+
+    patch from bug 1803 - will try and push to kernel soon
+
+commit 4b4df875b26bd08ae62f26b8ced6a050425752ac
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Tue Nov 9 16:58:02 2004 +0000
+
+    Fix more build problems on linux-core
+
+commit 76b1a7f2b423eef828e911f93f1ef38927a5507e
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Tue Nov 9 03:36:06 2004 +0000
+
+    make linux-core build again
+
+commit 6483e7a1ac8395828eb3a13f763cf99d6ef89535
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Tue Nov 9 00:54:19 2004 +0000
+
+    add missing CHIP_RV350 to radeon_enums
+
+commit a1d9e5abafe60ca2b7f96cadd1013695ada4ac41
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Nov 7 04:11:15 2004 +0000
+
+    Refine the locking of the DRM. Most significant is covering the driver
+        ioctls with dev_lock, which is a major step toward being able to remove
+        Giant. Covers some new pieces (dev->unique*) in the core, and avoids
+        one call down into system internals with the drm lock held, which is
+        usually bad (FreeBSD LOR #23, #27).
+
+commit c5bededa5130a58273448188c04c15bc9c1097f3
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Nov 7 02:19:58 2004 +0000
+
+    add some more r300 pci ids
+
+commit c21cdee38a6b9124d01662b36207450aa5fbb626
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Nov 7 02:15:11 2004 +0000
+
+    respect cc and cflags
+
+commit 67f6c5e36a93a9cdb18df133f6c31bab521c152a
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Nov 7 00:30:15 2004 +0000
+
+    Don't link in files which no longer exist.
+
+commit fa3fdbd99c6b6e5cec59f1044ce6ce1105b5e8dd
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Nov 7 00:25:49 2004 +0000
+
+    Now that the memory debug code is gone, and all 3 BSDs have M_ZERO, stop
+        using drm_alloc/drm_free in the core and instead use plain malloc/free.
+
+commit d37457b5996c09d1965f8906501cd1fde6aa9499
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Nov 6 23:05:46 2004 +0000
+
+    Add the drm Makefile and update .cvsignores.
+
+commit cb5aaa89871c051098ae8067d0e386840b7bdc59
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Nov 6 23:02:07 2004 +0000
+
+    Convert more drivers for bsd-core, moving the ioctl definitions to shared
+        code. Remove the "drv" from sisdrv, as it's unnecessary. Use the
+        drm_pci functions in i915 instead of per-os implementations of the
+        same. Avoid whitespace within fields in drm_pciids.txt (one of the r300
+        definitions), since it breaks the bsd pciids script. Tested on sis,
+        mga, r128. i915 needs more work.
+
+commit 7ddbd38dde5dc5566ba14f2b1c449611a6d0224f
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Nov 6 21:44:54 2004 +0000
+
+    Remove some core stuff that ended up being unnecessary.
+
+commit 7bdccfd0bb192200ba022c368f85f73e5a989e7a
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Nov 6 21:18:49 2004 +0000
+
+    Get r128 basically working: Hook up the driver's dma ioctl, use the proper
+        offset into the driver ioctl array, and don't make the ctx bitmap
+        conditional.
+
+commit ae7a1713139f1eacec9cc1629cacef0394e270cc
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Nov 6 20:27:19 2004 +0000
+
+    Move the lock/unlock ioctls to a more logical place, in drm_lock.c.
+
+commit cca29ac9becffc7d5fc8204c706621b842c3557d
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Nov 6 20:21:55 2004 +0000
+
+    Connect up r128_ioctls in driver config.
+
+commit 069f53a93b2c47c55c54dc8092ef23a9e7461033
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sat Nov 6 16:55:41 2004 +0000
+
+    Move radeon i2c include to top of file
+
+commit 642a8106d270e74ec8ee1a809657d66f4fe6f542
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sat Nov 6 16:51:36 2004 +0000
+
+    Export missing r128 ioctl symbol
+
+commit 000c8eb18ef7ee9cecb34909be52281ec88a5486
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sat Nov 6 16:41:24 2004 +0000
+
+    Fix Linux build. Why won't this complile? extern int const foo; static
+        struct drm_driver driver = { .var = foo }; error says foo is not
+        constant
+
+commit b2f275b46e575766c7b5dab22ba30a367a182c9e
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Nov 6 11:50:08 2004 +0000
+
+    Hook the debug output up to a sysctl, so you can choose to enable at
+        runtime.
+
+commit 7adee84064d55207dbf7893cc8cb579bfa1a7631
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Nov 6 11:19:38 2004 +0000
+
+    Add file missed in last commit: Commit first pieces of port to OpenBSD,
+        done by Martin Lexa (martin at martinlexa dot cz). Now that we've got
+        porting for all three major BSDs (and the fourth being very similar to
+        FreeBSD), move the mostly-duplication drm_os_* files into drmP.h.
+        Remove some cruft from linux heritage and from pieces of the DRM that
+        have since been removed.
+    Note that things are still not quite working for even FreeBSD, but these
+        are first steps at cleanup, and just a WIP checkpoint.
+
+commit d7510ea4136a031b16fb25a32bd77970d315707a
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Nov 6 11:16:26 2004 +0000
+
+    Commit first pieces of port to OpenBSD, done by Martin Lexa (martin at
+        martinlexa dot cz). Now that we've got porting for all three major BSDs
+        (and the fourth being very similar to FreeBSD), move the
+        mostly-duplication drm_os_* files into drmP.h. Remove some cruft from
+        linux heritage and from pieces of the DRM that have since been removed.
+    Note that things are still not quite working for even FreeBSD, but these
+        are first steps at cleanup, and just a WIP checkpoint.
+
+commit cf259f10aa8dbd83a4c086963fee7138280a9688
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Nov 6 02:00:04 2004 +0000
+
+    Remove the vestiges of the memory-debug code.
+
+commit c9202c89653b8dac2ac322c3d3a7389945e1c94c
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Nov 6 01:41:47 2004 +0000
+
+    Commit WIP of BSD conversion to core model. Compiles for r128, radeon, but
+        doesn't run yet. Moves the ioctl definitions for these two drivers back
+        to the shared code -- they aren't OS-specific.
+
+commit 39a23640b2de9e59e99d48e6de8c9edae0231856
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Nov 5 17:29:14 2004 +0000
+
+    Move ati_pcigart shared routines into drm-core module
+
+commit f08a01c0e21431e1b7990584ce2f61f0e711c093
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Wed Nov 3 13:37:37 2004 +0000
+
+    Fixed bug in via_dma.c. The code didn't check that the lock was held by the
+        caller. Just that it was held.
+
+commit 9409d8231c3be346ce7148275ce0ee86ec171716
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Mon Nov 1 20:48:49 2004 +0000
+
+    Reworked the jump-code in via_dma.c. The command regulator now seems to
+        pause correctly after a jump. Removed the debug message from within the
+        interrupt handler of via_irq.c
+
+commit 08758b2fb76bc4e862f25d0164ae9f523d2dec20
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Mon Nov 1 10:52:18 2004 +0000
+
+    correct historic mis-attribution of copyright
+
+commit 5128542814215b26ed342e3a4ac2217606fe5e76
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Sun Oct 31 15:16:44 2004 +0000
+
+    Allow drivers to override reclaim_buffers in an OS-independent way by
+        passing drm_device_t* as first parameter, like in the BSD version.
+
+commit 8264e2c8aa6b2811bca0e45c50ac3328d14bfbf7
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Sat Oct 30 13:01:48 2004 +0000
+
+    Some stabilizing work to the DMA ring-buffer code. Temporarily replaced the
+        rewind jump with a reinitialization. This makes the code stable on
+        CLE266 and KM400.
+
+commit 816a2917099b3ff214dc357c5b41984f34902cf3
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Oct 29 17:09:54 2004 +0000
+
+    Switch SPIN_LOCK_UNLOCKED to spin_lock_init()
+
+commit c611cb9f171df3b9ad19e57e614f35c67e73ceb1
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Oct 29 14:38:07 2004 +0000
+
+    Add include of moduleparam.h
+
+commit b974e2cd683fa798970cd1bdc5e20acfb7a34a9c
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Oct 28 15:52:31 2004 +0000
+
+    Break poll() to make it match the Xserver's broken expectations.
+
+commit 486a84d70c31423a849cd88dbd91ced2dcf83742
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Oct 28 09:50:39 2004 +0000
+
+    fix for 2.4 build
+
+commit b37efdadca5da66cfd442a88353fa92c9e7aec24
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sat Oct 23 18:12:34 2004 +0000
+
+    Round 2 of getting rid of inter_module_get()
+
+commit 43cbf43a5f9e54decbfd837d0b5984454f2d61bf
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sat Oct 23 14:43:06 2004 +0000
+
+    Revert symbol_get() changes from drm_drv
+
+commit 4b29f857685e4fc6c8901a061c6de7b86ee3e993
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Oct 23 14:00:53 2004 +0000
+
+    fix inter module put/get
+
+commit 1473556e065b1970196b8bb542574cd1e275bb00
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Oct 23 07:02:29 2004 +0000
+
+    actually 2.6.10 introduced pfn range so it should work now..
+
+commit 182a0e5dac5e2ae3751abc2eaa0398aa0150a131
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Oct 23 06:59:15 2004 +0000
+
+    fix pfn vs page for older kernels (2.6.9-rc kernels many not work..)
+
+commit 8d7e798d4c73650ed240a3ad194744b94043e31f
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Oct 23 06:25:56 2004 +0000
+
+    Apply radeon r300 microcode patch to non-core
+
+commit 9ea6fe7aa6ba27cc7003c9cd141e9146a492416d
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sat Oct 23 04:21:27 2004 +0000
+
+    Prepare to eliminate inter_module_get("agp")
+
+commit ad87dd8427b6142c42d7b97c7a4170c89b6728ec
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Oct 22 16:03:21 2004 +0000
+
+    Bring in patch from kernel for remap_pfn_range
+
+commit d76f734f68eeea32c94de6ad4979a94ca8e320db
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Oct 21 16:58:28 2004 +0000
+
+    Fix up the radeon i2c error handing
+
+commit 17ce33835a0b582d87343fab331d80342f268d4d
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Wed Oct 20 16:23:42 2004 +0000
+
+    Don't release an i2c channel that has not initialized correctly
+
+commit 7ebbebf3d3a3af3c363a1396d737d5a61634124b
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Wed Oct 20 05:11:49 2004 +0000
+
+    Switch linux-core from using dev->pdev->driver->name to
+        dev->driver->pci_driver.name. This avoids the stealth mode case where
+        pdev is pointing to the wrong driver or no driver.
+
+commit 5ae6c5af751780fbf424b848aa2355bc303a5b73
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Wed Oct 20 04:41:38 2004 +0000
+
+    Fix dd vs di version typo in drm_setversion
+
+commit 157a814be6f3065a2463141f1592fa8948765334
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Tue Oct 19 18:18:02 2004 +0000
+
+    Add a protective check against a possible buffer overflow
+
+commit bcfbd73536e8e44b028953e4e04c83d143612a10
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Tue Oct 19 16:30:02 2004 +0000
+
+    Fix missing I2C busses to be non-fatal error.
+
+commit ca1ec9268f9de783daf3f2db86a4fb47108d609a
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Tue Oct 19 02:50:14 2004 +0000
+
+    drm-core, Clean up bug error path on stealth mode exit
+
+commit 0d89b19325d533a7c1817fcb568a1879fd28a865
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Mon Oct 18 14:16:41 2004 +0000
+
+    Update Doxygen configuration & comments.
+
+commit d403173005fd345ba8b83f19497a8aaf07e7eee6
+Author: Ville Syrjala <syrjala@users.sourceforge.net>
+Date:   Sat Oct 16 11:21:56 2004 +0000
+
+    Fixed off by one errors in clipping.
+
+commit 52fdf10fd79c2223c05e2146431343132b4db964
+Author: Ville Syrjala <syrjala@users.sourceforge.net>
+Date:   Sat Oct 16 10:54:58 2004 +0000
+
+    Fixed bad formatting.
+
+commit a8b2c94c181a8f398a824aa3267144a29ffaca33
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Oct 15 20:37:01 2004 +0000
+
+    Remove drm_init.c
+
+commit 91aa32742c49db0c553b5836afd28c8ea2436014
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Oct 15 20:36:15 2004 +0000
+
+    Move drm_cpu_valid out of drm_init. drm_init is empty now.
+
+commit fa50e2b5132b84353ae964a39c3b10ea270d15e8
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Oct 15 02:59:35 2004 +0000
+
+    Switch linux-core over to 2.6 parameter model to enable debug use
+        drm_debug=1
+
+commit 5e8838fd115879174567c4c2db8ad25331619994
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Wed Oct 13 16:40:53 2004 +0000
+
+    Add a poll function that alternates between zero and normal poll return to
+        bring DRM into conformance with normal poll().
+
+commit bbfe18e3bf7b45543c9f59f7363c1ed5b6bca719
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Tue Oct 12 18:46:26 2004 +0000
+
+    Via updates. Fixed unlikely but possible uint32_t overflow in ring-buffer
+        code. bumped patchlevel.
+
+commit ad70dc676ebf8f2f86d171dccb873a04a3e5b87b
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Tue Oct 12 03:59:17 2004 +0000
+
+    Breakout heads into their own data structures.
+
+commit ad549c5ae62fd75aa2bdb8bf5efc4913c476cb02
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sun Oct 10 22:54:55 2004 +0000
+
+    Rename fn_tbl to driver. Core driver now uses pci_driver name which
+        reflects the personality name.
+
+commit 3f02a793514a866401119efc74c20512f4732703
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Oct 10 05:52:19 2004 +0000
+
+    Vladimir requested support so we can at least load r300 microcode for
+        helping
+    2D operations.
+    Ups radeon to version 1.12.0, Vladimir, you might want to add any extra
+        pciids...
+    Approved-by: Dave Airlie <airlied@linux.ie>
+
+commit 5654a78547d0903c0ea2c290cbfac6ea9e777b9a
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sun Oct 10 02:49:06 2004 +0000
+
+    Forgot to add the new Makefile
+
+commit b5e02f8eb3b9c178014e510e5999fab671031a6c
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sun Oct 10 00:09:31 2004 +0000
+
+    Make the test programs build
+
+commit 8727326371621c8c2b9f794532ca543a708ed71f
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Oct 9 12:42:52 2004 +0000
+
+    cleanup VIA driver to look a bit like others before kernel merge
+
+commit efcb9fb7ae3caad341bd8c82febf9d65b2a73933
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Oct 9 11:16:20 2004 +0000
+
+    fix up whitespacing in Kconfig
+
+commit fec94a82748b3603da7239e39d247a9654765659
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Oct 9 11:12:24 2004 +0000
+
+    Lindent the via stuff so I can include it in kernel
+
+commit e09229d6c85bcb8b899f09fd70f264b4e1d6d0bd
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Oct 9 10:58:19 2004 +0000
+
+    remove unused dma remnants that were gamma only - these could cause an oops
+        on via
+
+commit d24194e904cbfc85147efae6922e497e0102b2eb
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Fri Oct 8 21:11:02 2004 +0000
+
+    Changed unsigned to uint32_t in some ioctl parameters. Introduced first
+        rudimentary command verifier for dma buffers. Changed the decoder futex
+        ioctl parameters. Bumped the via major version number.
+
+commit 3981f17227aa72b263d27e79aede307b1e2980a8
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Oct 8 14:31:25 2004 +0000
+
+    Fix refcount bug in stealth mode
+
+commit 6619c5d941b86452405222a5b44a546dd0aa45c7
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Oct 7 00:40:16 2004 +0000
+
+    Fix drm_exit to allow for DRM(global) being deleted when framebuffer is
+        loaded.
+
+commit 61d36f6179f535de4a37c58cb7dade2b6035883d
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Wed Oct 6 16:27:55 2004 +0000
+
+    Revert back to drm_order() instead of using kernel get_order(). The
+        functions are not identical.
+
+commit 4dbc1e87288987f0506087c7971639c33af8fe3e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Oct 5 12:12:01 2004 +0000
+
+    Patch for Kconfig for making i830/i915 not build together
+
+commit 6dee8401a65c2b976dad8937985439fb8f0887be
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Tue Oct 5 02:58:14 2004 +0000
+
+    enable the device in the right order, remove __devinit from drm_int
+
+commit aba12cfc0e80694457347dc9d0ed78cd78192ea3
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sat Oct 2 19:11:30 2004 +0000
+
+    janitor-list_for_each-drivers-char-drm-radeon_memc.patch from mm kernel
+
+commit e17abf5d5dc7c9895ed9aea0efb4ac501171fa54
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Sep 30 23:47:45 2004 +0000
+
+    Make the debug memory functions compile for the core model.
+
+commit a36a6a291d3627bf1ad036fa4a7a33ea99e8ed5d
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Sep 30 21:27:59 2004 +0000
+
+    Remove DRM() macros from core ffb driver. DaveA says he'll make it compile
+        someday.
+
+commit 9f9a8f1382711a05ec000b639d971b619d8bc305
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Sep 30 21:12:10 2004 +0000
+
+    Lindent of core build. Drivers checked for no binary diffs. A few files
+        weren't Lindent's because their comments didn't convert very well. A
+        bunch of other minor clean up with no code implact included.
+
+commit 368493edc9e47ce63edf955e9fa9d096500c4e8e
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Sep 30 21:06:53 2004 +0000
+
+    savage.h not used in core builds
+
+commit e1d74a98994963b0427486391fad4f6473d39c9f
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Sep 30 20:46:59 2004 +0000
+
+    core ffb.h is not used anymore
+
+commit b3d70ad6a7b6f4bd1216929200ddfc8e348529cb
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Sep 30 20:25:13 2004 +0000
+
+    Remove unused drm_module.h
+
+commit 1c0a437fa20e8c3fb971cd8947754a9b274bea76
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Sep 30 19:26:35 2004 +0000
+
+    Move things around to reduce public symbols and even out files. Switch to
+        get_order from drm_order.
+
+commit 3aef3841d0c8099a97a56a285f0a21d9147405bd
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Sep 30 18:13:33 2004 +0000
+
+    Make fops per driver instead of global, remove default flush, poll, read
+        functions
+
+commit 0bff0d9eb6317ccccafc79cac7b235b4cb4c9161
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Tue Sep 28 22:25:06 2004 +0000
+
+    Getting the AGP module is a global resource. Make sure a dual PCI/AGP
+        driver doesn't release it on unload since an AGP driver may also be
+        loaded.
+
+commit 9e421181ddfc2d91859e9959487baf2df851e743
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Mon Sep 27 20:14:31 2004 +0000
+
+    Fix the shared directory I accidentally stomped on
+
+commit 6d6526fdf9a4390fab3edbca79d6a0b80b84ddd1
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Mon Sep 27 19:53:51 2004 +0000
+
+    core needs three new files
+
+commit fa6b1d129e7bf8acf41e66c9c665ae9f9c1d5b0d
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Mon Sep 27 19:51:38 2004 +0000
+
+    First check in for DRM that splits core from personality modules
+
+commit 77fa7b9548bf7a5bf5e49515f1a478c27ede07a7
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Mon Sep 27 15:42:48 2004 +0000
+
+    Flip the 2.4 check so that it looks for 2.6 instead. This will allow builds
+        where we can't determine the version through.
+
+commit edbfb46c0bfcc2a5a20d9f23d7088a4acce52b8d
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Sep 24 04:31:25 2004 +0000
+
+    README with hints on how to make a 2.6 specific version of a 2.4/2.6 shared
+        file
+
+commit 1d6392f1fdcd8ed7e2936af815387d12ee124cab
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Sep 24 04:21:21 2004 +0000
+
+    Makefile reminder to build in 2.6 when on 2.6
+
+commit 74f063fc9d445f263242063e7acab1864ff75205
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Sep 24 03:12:17 2004 +0000
+
+    Create new linux-2.6 build. Move all gpl files into the 2.6 build. If you
+        edit files for 2.6 be sure and break the link to the 2.4 directory and
+        copy the cvs history.
+
+commit 36a257cfe9e45e7a2022f19100a193eb73e30d4b
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Sep 23 17:22:27 2004 +0000
+
+    Remove 2.6 code that allow DRM major device number to be shared. We can add
+        it back later if needed. Checked DRM on both 2.4 and
+    2.6 to ensure that it builds and runs.
+
+commit 55c5e240892bb9673cce602e7deb323f29aa8031
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Sep 23 05:40:05 2004 +0000
+
+    Add new sysfs support files
+
+commit c158a36c4cfef024ba1be05a163cfd4b00ebea21
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Sep 23 05:39:15 2004 +0000
+
+    1) switches from class_sysfs to drm sysfs implementation to allow
+        customization
+    2) compiles again on 2.4, but doesn't work
+
+commit af326f6f0c26191b4aef2183fb485e58495b29a5
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Wed Sep 22 22:51:18 2004 +0000
+
+    Create permanent maps of framebuffer, aperture and MMIO registers. Added
+        chipset-type information in driver data field of Savage PCI-IDs. Added
+        missing PCI-ID 0x8d03 (ProSavageDDR on Pentium boards). Don't require
+        AGP.
+
+commit 27fc998f7d16e7197f38b2d7d1ce65938e06423d
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Wed Sep 22 19:13:02 2004 +0000
+
+    Remove hotplug reset support from DRM driver. This will be handled by the
+        VGA driver when it gets written.
+
+commit 184a50368505bb74f3efac3cf48e72db41487342
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Sep 22 16:45:44 2004 +0000
+
+    Add *.flags to cvsignore.
+
+commit 2ad068005aa9785dd86e0023354f68e970f04e9f
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Tue Sep 21 05:13:21 2004 +0000
+
+    Make DRM permanent maps match broken X behavior. X is mapping regions that
+        are both smaller and larger than what the hardware supports. If DRM
+        tries to fix these requests X will fail.
+
+commit 6f31c42fe923ff3f79a55d8c859e6ccfd3bd322d
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Mon Sep 20 19:23:27 2004 +0000
+
+    Remove size restriction on permanent addmap
+
+commit 59cc1d8256fb3b6e2374e52eb24da12b046aea91
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Mon Sep 20 17:09:26 2004 +0000
+
+    Felix's fix for map request smaller than permanent map size
+
+commit 5654880eeed0646a53655b093f4d3bf5608ebcc7
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Sep 20 11:29:16 2004 +0000
+
+    remove HAVE_COUNTERS
+
+commit fa75a81c9acbae7282e2ea5596f04a6b359c95e9
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Sep 20 10:45:53 2004 +0000
+
+    another fix after the macro stuff
+
+commit c15b1d15ffbf41ed60cd807d13f031c8f270f887
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sat Sep 18 16:44:43 2004 +0000
+
+    Fix from: Nishanth Aravamudan replace direct assignment with
+        __set_current_state()
+
+commit 993a75a5d148cb0a93bbed677b550bfb4d57fe4a
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Sep 17 20:01:59 2004 +0000
+
+    Makefile and missing file to build libxf86drm.a
+
+commit f10f8821014bc7a05e8bbc9f199e0f60b1541a0e
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Sep 17 04:25:19 2004 +0000
+
+    Add the two GPL licensed I2C support files.
+
+commit 0c6fb0fbe1fff43af60634b785cd5b7196c8dd03
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Sep 17 04:02:28 2004 +0000
+
+    Add linux sysfs i2c support to radeon driver. This patch adds GPL licensed
+        files to the linux build but not to the BSD directories.
+
+commit c7c9d3ef7b82215696c007415a018c670d54041e
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Sep 16 18:42:03 2004 +0000
+
+    Let's try adding the dyn-minor patch again. This patch will reuse minor
+        numbers if a card is hotplugged in/out instead of just having them
+        increase.
+
+commit 5dfd89ae0a4894a3b9de17c17bb75c47e6509b8e
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Sep 16 14:32:17 2004 +0000
+
+    Fix drm_scatter to properly report it's availability
+
+commit eeb0ef1a7076e7744655954e95a65532eb4b7ebe
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Wed Sep 15 17:44:30 2004 +0000
+
+    Back dyn-minor patch out for now. fops handling is broken on some cards
+
+commit 941d2cf431d0534ec53f90e627bb0445b6f0260e
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Wed Sep 15 16:06:50 2004 +0000
+
+    Don't use module_param if it isn't defined in older kernels.
+
+commit 64ef12c55cfca7885108950eb975c4d6625a0570
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Wed Sep 15 00:20:21 2004 +0000
+
+    Dynamic device minor support. Minor device numbers will be reused if the
+        device is hotplugged in/out of the system
+
+commit 03c2e674e43db5fcf4cb4b641005c329c7b343a9
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Tue Sep 14 03:59:25 2004 +0000
+
+    Add chip family names to the radeon driver
+
+commit 13cb3f1b006d24e4578aca25522fd224aed5cd9c
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sun Sep 12 19:24:08 2004 +0000
+
+    Fix error path in probe() to release resources if there is an error.
+
+commit 15407efd468b8745354a346544aba5f25448103a
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sun Sep 12 03:30:30 2004 +0000
+
+    Make the comment match the code
+
+commit 36050cc958596ca81d667d8a51e124e9ea9eb866
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sun Sep 12 03:23:50 2004 +0000
+
+    Fix DRM to compile cleanly with recent kernel changes in PCI IO and
+        DRM_COPY_FROM_USER. PCI IO changes in 2.6.9-rc1 bk currently.
+
+commit e6d468ad7f398a72e8be227564f3a450de873cc6
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Sep 10 16:44:28 2004 +0000
+
+    More general patch to mark resources in use by all DRM drivers. Makes the
+        code Linux specific.
+
+commit 1fb27632c3338ff974c27fd88e2098a5193bb145
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Wed Sep 8 20:57:39 2004 +0000
+
+    Update doxygen configuration file. Minor documentation updates/fixes.
+
+commit 3bf785c9126a0bbc38b794096dbbddab5682c251
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Wed Sep 8 01:49:06 2004 +0000
+
+    Adjust permanent mapping code to account for more than one framebuffer map
+
+commit b0c73b7fcb3f2504f2ab747bae75a98112071491
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Tue Sep 7 16:48:44 2004 +0000
+
+    Added IOCTL for writing 2D DMA command buffers over PCI. Bumped minor
+        version number.
+
+commit c33f4449fc893d5478d9541bc6a80124c8f96ea5
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Sep 5 23:33:57 2004 +0000
+
+    missed fix as part of last checkin
+
+commit eeae6a0a3885f9af9efba7c1e1bcb1e633635717
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Sep 5 10:54:59 2004 +0000
+
+    merge back bunch of whitespace and misc changes from kernel
+
+commit f96e00595dff85e18697205686f568042e0b083b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Sep 5 10:10:34 2004 +0000
+
+    bad code copy for alpha.. fix the member names
+
+commit 3dcbc1f4a13e2f8d5ddb2a9ae8bc83c48a30a2b7
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Sep 5 02:36:48 2004 +0000
+
+    make the AMD64 check a compat thing
+
+commit 4499ea42eae887c45403cd9ea364fccf311fee8e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Sep 4 23:21:40 2004 +0000
+
+    Fixup OS_HAS_AGP/OS_HAS_MTRR along lines of patches going to kernel, as
+        suggested by Arjan..
+    Signed-off-by: Dave Airlie <airlied@linux.ie>
+
+commit 3d9e16aa6e074fdaa7a74f2fb6b0c46f1dd04172
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Sep 4 13:15:40 2004 +0000
+
+    doh.. that makes no sense.. thinko in removal of OS_HAS_AGP
+
+commit 8825579f1c23f5165270fa284e11efd62437e34a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Sep 3 14:54:53 2004 +0000
+
+    file drm_core.h was initially added on branch drmlib-0-0-1-branch.
+
+commit fba81d4482303ba0f88c07871635c8a6583257cb
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Sep 3 14:54:53 2004 +0000
+
+    file drm_agpsupport.c was initially added on branch drmlib-0-0-1-branch.
+
+commit 0c955c00c7722bb611eac7876433f66e7d1d0e83
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Sep 3 14:54:53 2004 +0000
+
+    file drm_core_memory.h was initially added on branch drmlib-0-0-1-branch.
+
+commit be11d2b18561fa4a3e55d178b925820c244a1b54
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Sep 3 14:54:53 2004 +0000
+
+    file drm_headers.h was initially added on branch drmlib-0-0-1-branch.
+
+commit 91be7bd6de6a7958780bdb6886205ffe0287e7c3
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Sep 3 14:54:53 2004 +0000
+
+    file drm_memory.c was initially added on branch drmlib-0-0-1-branch.
+
+commit b13574a0f38537958fb08006088ef3d9009a3ff7
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Sep 3 14:54:53 2004 +0000
+
+    file drm_memory_debug.c was initially added on branch drmlib-0-0-1-branch.
+
+commit 02ab8dd7f7edaf6626ebb61320380fec3cb4da77
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Sep 3 14:54:53 2004 +0000
+
+    file drm_proc.c was initially added on branch drmlib-0-0-1-branch.
+
+commit 9ed4e7854bb2e785412488a88a41df5659faad56
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Sep 3 14:54:53 2004 +0000
+
+    file drmcore_exports.c was initially added on branch drmlib-0-0-1-branch.
+
+commit 838bb7af71b5730de55549a74c8198215c1f1475
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Sep 2 12:33:03 2004 +0000
+
+    oops called ctor instead of dtor.. found this on the kernel merge
+
+commit a070d15b530da87b835f4a439886eea3c606ac2f
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Sep 2 04:11:27 2004 +0000
+
+    Fix ref count problem in stealth mode. pci_get_subsys() with last parameter
+        set does the pci_dev_put for you.
+
+commit 244b3e6c7cf61d3de56267e5813b0a1821ca0ac0
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Aug 31 05:02:23 2004 +0000
+
+    Apply patch from Bryan Stine bugzilla #1227
+
+commit da6b44849763fac5ccb7d7511128454c6c2a92c7
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Aug 30 11:34:51 2004 +0000
+
+    implement drm_core_check_feature and use it .. looks lots nicer
+
+commit 7809efc8c32520e6b25c143ee3276edbf534ed14
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Aug 30 09:01:50 2004 +0000
+
+    drm-memory patch, cleans up alloc/free and makes calloc look more libc like
+
+commit 08de6e5b04c1950a5f396315e59d2476726e26d8
+Author: Erdi Chen <erdi@freedesktop.org>
+Date:   Mon Aug 30 04:58:24 2004 +0000
+
+    Fix copy_from_user return value ignored warning at via_dma.c:168.
+
+commit 0844f3e9f37bacf650fab4953482923e9480aae3
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Aug 29 12:39:17 2004 +0000
+
+    add context include so fn are defined
+
+commit b9c82926bc5fe91cac9091a5af3f68b797bd95d1
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Aug 29 12:37:11 2004 +0000
+
+    fix up some small things ffb (no idea if it works or not ..)
+
+commit 55c6e72306efd960eb28870c8f7520360275d444
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Aug 29 12:17:26 2004 +0000
+
+    remove hacky context thing that was gamma only
+
+commit 1430163b4bbf7b00367ea1066c1c5fe85dbeefed
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Aug 29 12:04:35 2004 +0000
+
+    Drop GAMMA DRM from a great height ...
+
+commit 6916572c1c32cd030258ab917f0a568517d5006b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Aug 29 10:09:23 2004 +0000
+
+    fixup issue caused by fntbl-2 merge
+
+commit 4a89c75456b1d7d0dd20bae0e0f5dd47bdc5417e
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sat Aug 28 23:59:51 2004 +0000
+
+    Initialize pdev to NULL correctly so that pci_get_subsys() will work.
+
+commit 73e606753fcece20f905281d44067504d5f2fabc
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Aug 27 09:14:30 2004 +0000
+
+    run i915 through lindent
+
+commit 019fd38a3c032774a1e80b3aed7de3710ba84e0a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Aug 27 09:11:07 2004 +0000
+
+    __NO_VERSION__ hasn't been needed since 2.3 days ditch it...
+
+commit 60f23ebc5cd5d78f594b20b2ddb330b5158c0902
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Aug 27 02:26:07 2004 +0000
+
+    Make DRM detect vesafb and revert to stealth mode to avoid resource
+        conflicts
+
+commit e068fcbfddaf95e96be7999e1a66062fab6fcb46
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Aug 26 03:54:01 2004 +0000
+
+    Rearrange things so that via_dma.c will compile with inline via_check_dma
+
+commit d4dbf457813e97531ded3bf24f3b6ad421189c69
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Aug 24 11:15:53 2004 +0000
+
+    Merged drmfntbl-0-0-2
+
+commit eac498baeaf9b57b448065b0fb9f4eeadbb9aa6b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Aug 24 10:43:45 2004 +0000
+
+    addmap-base-2 patch from Jon Smirl:
+    sets up the DRM to have the ability to have permanent maps while the driver
+        is loaded...
+
+commit 25e319c1ef5b6c002ddfe55338cd920240cc1dad
+Author: Erdi Chen <erdi@freedesktop.org>
+Date:   Tue Aug 24 01:44:37 2004 +0000
+
+    This patch adds three new ioctl's to the VIA Unichrome/Pro DRM driver:
+        DRM_IOCTL_VIA_DMA_INIT DRM_IOCTL_VIA_CMDBUFFER DRM_IOCTL_VIA_FLUSH
+    The first ioctl sets up an area in AGP memory that will be used as the ring
+        buffer. The second ioctl copies a command buffer from user space memory
+        to the ring buffer. The third ioctl waits for engine idle until it
+        returns.
+    The motivation for this patch is to avoid the wait for engine idle call
+        before each buffer flush in the current DRI driver. With this patch,
+        the DRI driver can continue to flush its buffer as long as there is
+        free space in the ring buffer.
+    This patch adds an additional copy operation on the command buffer. This
+        buffer copying is necessary to support multiple DRI clients rendering
+        simultaneously. Otherwise, more CPU time will be spent in the busy loop
+        waiting for engine idle between DRI context switch. Even in the single
+        client case, the tradeoff is reasonable in comparision to the kernel
+        call to check for free buffer space for the client to render directly
+        to the ring buffer.
+
+commit 7fe4f607681e9a5593e91915953a9b6c45e5f08c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Aug 23 10:05:01 2004 +0000
+
+    set pointers to NULL after freeing, remove some extra debugging
+
+commit 5c9ed8309493acb099463d25b32fabb5b7c004af
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Aug 17 13:10:05 2004 +0000
+
+    Merged drmfntbl-0-0-1
+
+commit 93e8c201afac565942f9d3523ac808d3220d6d0e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Aug 17 11:24:50 2004 +0000
+
+    preparation patch for radeon permanent mapping registers/framebuffer makes
+        dev_priv live always, and add AGP detection in kernel patch:
+        radeon-pre-2.patch From: Jon Smirl
+
+commit 02ef96053ccbe4c20827ec8006455906e7fb2360
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Aug 17 10:36:46 2004 +0000
+
+    2.6.8.1 has changed the links in /lib/modules
+
+commit c360d6f4f2075c90d42b109e3da932ac5d69699c
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sun Aug 15 15:46:28 2004 +0000
+
+    Fix warning about unused ddev variable
+
+commit 23bbff24aa427d6d0c16707dbe99c28ba2075894
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sun Aug 15 15:35:14 2004 +0000
+
+    Add dev to DRIVER_CTX_DTOR( dev, pos->handle) so that sis driver will
+        compile #if 0 get_pci_driver use in hotplug function until fbdev work
+        around is written
+
+commit 740ddb9c5d5506bc921d10742cf41b5aa143f84e
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Aug 14 00:56:34 2004 +0000
+
+    Remove unused pcigart/sg header stuff from i915 driver.
+
+commit dd83f39f034756e7eb8e002dbfb0047f88aa79e4
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Aug 14 00:46:15 2004 +0000
+
+    Add a "dev" argument to DRIVER_CTX_[CD]TOR. This will be used in an
+        upcoming commit for the SiS driver.
+
+commit 2376ec4ef8d280cf6fba44ba0163989eff739187
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Aug 14 00:03:32 2004 +0000
+
+    Hopefully proper fix for corrupted driver name in memcontrol list.
+    Reported by: Jung-uk Kim <jkim@niksun.com>
+
+commit 211c37e250af6f8645a247ef1cce4dee041f3fd1
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Aug 13 23:32:39 2004 +0000
+
+    Fix apparent copy'n'paste-o of the card attributes commit that broke the
+        FreeBSD build.
+
+commit d78db7c930c4652f45584098747efa8feb4cd280
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Aug 13 23:17:17 2004 +0000
+
+    Enable MTRR usage on AMD64, and use DELAY() instead of rolling our own
+        udelay code.
+    Submitted by: Jung-uk Kim <jkim@niksun.com>
+
+commit fd62869a0f600f2fd477d5aa365f7732686f5542
+Author: Adam Jackson <ajax@nwnk.net>
+Date:   Wed Aug 11 23:23:35 2004 +0000
+
+    Bug #979: Don't include <sys/sysmacros.h> on linux, it occasionally emits
+        makedev() as a function call that elfloader can't resolve. Originally
+        Gentoo Bug #41962, reported by Ryan Breen, fix feedback from Ryan
+        Lortie.
+
+commit ecf1458b2ce431227807b07844b44e8c9171636d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Aug 11 09:07:36 2004 +0000
+
+    minor patch from Jon Smirl : sets up some things for later use
+
+commit 9277f9eef388ffef26000ab455d30260bdf41c93
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Aug 10 11:14:07 2004 +0000
+
+    Patch from Jon Smirl to add attribute field to the pciids, and use this for
+        certain radeon combinations - intel drivers can probably use this for
+        dual head capable devices etc..
+
+commit 42e91874608f28246367207815eb7334574d7aa7
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Aug 4 10:56:48 2004 +0000
+
+    2.4 compat
+
+commit be3e54bc15aadf26743a8d0150b8fa38952863b4
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Aug 4 10:53:21 2004 +0000
+
+    2.4 hotplug compat
+
+commit 6c9715eaf502587c58acfaea420a4fdf29bd7221
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Aug 3 11:26:38 2004 +0000
+
+    bring over fix from i865-agp branch, it now probes the driver, X hangs
+        box..
+
+commit 4f8f02a1922653b2ce5c115c4469e927b5d826fa
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Aug 3 09:21:11 2004 +0000
+
+    fix for drm in /proc - from Jon Smirl
+
+commit 33b740ad9946ce6fdedeed45287e488f95fb7b42
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Aug 2 11:45:23 2004 +0000
+
+    forgot to check these in.. thanks to Jon for reminding me ..
+
+commit 5e7e41819eb4d4b18201bbb46d0c6e359c4039cd
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Sat Jul 31 15:45:00 2004 +0000
+
+    Add a hotplug event to DRM. Parameters match the ones from the general PCI
+        hotplug event plus the addition of one requesting RESET. Put your
+        scripts in /etc/hotplug.d/drm to run. kernel class_simple generates the
+        ADD/REMOVE events. No cards currently request RESET, the flag is there
+        to stop you from resetting your boot display.
+
+commit bd71ba642890856aff339482a9422ecea1ef55d1
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jul 31 08:38:39 2004 +0000
+
+    patch from RH xorg-x11 tree ported to drm.h
+
+commit cc4d03930ce753302a88fc9722473a5d9fac7b44
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jul 31 08:12:39 2004 +0000
+
+    Patch picked up from Redhat xorg release:
+    Patch by John Dennis <jdennis@redhat.com> which fixes DRI locking bug on
+        ia64 architecture.
+        https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=104338
+        http://bugs.xfree86.org/show_bug.cgi?id=778
+
+commit eb3d0635d4830969d10d5fe8aef17cebb2f3fd15
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jul 31 07:26:52 2004 +0000
+
+    fixes for using userspace pointers found by sparse utility
+    From: Dave Airlie
+
+commit dc4508c33845602e4c94c3e125536d01fe9110b1
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jul 31 07:25:58 2004 +0000
+
+    athe patch below optimises the drm code to not do put_user() on memory the
+        kernel allocated and then mmap-installed to userspace, but instead
+        makes it use the kernel virtual address directly instead.
+    From: Arjan van de Ven <arjanv@redhat.com>
+
+commit 1cec18a5cd3bcd37aab71c255d63fd394143bc5e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jul 29 13:00:48 2004 +0000
+
+    add read/write 16
+
+commit b1cf4ca7e540bcf28beaf3f5a70915a810a75b1b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jul 29 12:49:54 2004 +0000
+
+    change to agp not pci ... still not working
+
+commit 0b02bf9d45b70af3b7e236526143c7b78a6fca8b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jul 29 11:09:22 2004 +0000
+
+    initial port of i915 to BSD, not finished doesn't work.. no idea why...
+
+commit 862fcee057a4602a0a9fdc54266f63fe33b0fd8b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Jul 25 08:57:15 2004 +0000
+
+    check for __user if not there define it
+
+commit 02df04d71d373f1f779ebfd5d383a704ebb397ee
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Jul 25 08:47:38 2004 +0000
+
+    sync up with current 2.6 kernel bk tree - mostly __user annotations
+
+commit 1f132b7849c453d3aebd227866f743cbcf7f3881
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Jul 25 05:52:22 2004 +0000
+
+    whitespace merge with kernel
+
+commit c54ba5691a573ba273498217323f19c35b1637d8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Jul 25 05:41:44 2004 +0000
+
+    if the driver has already register don't do another intermodule register
+
+commit 6ba31fb4813116e94f8fc94574ffd81743cf8832
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Jul 25 05:36:45 2004 +0000
+
+    Patch from Tom Arbuckle for missing bus_address
+
+commit 1e5354e867d1dde8c86273e7434f49b57779ef36
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Fri Jul 23 16:12:27 2004 +0000
+
+    Correct a couple of packet length calculations.
+
+commit 6ed7e36f4c6933cc29b0f5c8cb810490dd93a8fc
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jul 22 12:07:13 2004 +0000
+
+    another logic error returns 0 or greater for success
+
+commit ea2155a2e1c31f634d80701a00fb19af6d3402c3
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jul 21 09:36:16 2004 +0000
+
+    ATI Rage 128 and Radeon DRM unconditionally depend on PCI
+    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
+
+commit c9911beb0957c7ccf93c73f77f349f3f8788b526
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jul 21 09:30:43 2004 +0000
+
+    add some more debugging fix ++ and --
+
+commit a776c5ec0464e264bba3f3a4794a067d3c667097
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jul 20 12:43:12 2004 +0000
+
+    first set of __user annotations from kernel (Al Viro)
+
+commit b35cba47d5e927c3ff1944fadef1816b9b1e1dd7
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jul 20 11:48:25 2004 +0000
+
+    Add NULLs instead of 0 for i915
+
+commit 9266bf53019b29a92c7e6c65e7b89bdae365b70d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jul 20 11:35:29 2004 +0000
+
+    Kconfig update add i915 bring over some stuff from kernel
+
+commit b20b00d4bc49534ba6e3695fb05cfc240bd3f0af
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jul 20 11:26:13 2004 +0000
+
+    add x86_64 architecture defines from kernel (leave AMD64 defines in for
+        backwards compat)
+
+commit fdb6ae31cb721a928d058d7419444f55eb60a542
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jul 20 11:22:26 2004 +0000
+
+    fix some more NULLs from kernel
+
+commit 7ee263b94f77cadab659207344c82d5528d498cb
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Jul 20 10:59:02 2004 +0000
+
+    attempt to clean up stub_register, register_chrdev isn't good enough to
+        make the decision for multiple cards with one drm ..
+
+commit 8efddd01e8a2254b4ed00dff0d55827b6f2b35ce
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jul 15 13:03:55 2004 +0000
+
+    sparse cleanups from kernel: Al Viro
+
+commit bb5112b616080033ab9f09092098527f2aa09b70
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jul 14 12:34:55 2004 +0000
+
+    Fix reference counting for stub for new Linux PCI probe
+
+commit e86fc9f47f05f47375d5a306fe979012e3b7e8e4
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jul 14 12:14:37 2004 +0000
+
+    allow O= usage for Linux 2.6 kernel building in another directory
+
+commit 6c16cbd40469d2690b293ef854de7a1f7246b998
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Jul 11 10:17:34 2004 +0000
+
+    split out backwards compat into a separate file makes it easier for merging
+        to 2.6
+
+commit f9e2fe84700c155a744d7ae3db4ebe12d5db9b10
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun Jul 11 09:58:49 2004 +0000
+
+    fix issue in 2.4 kernels with returning NULL from this function
+
+commit 6e4bf5ead5a342426020a1d48d93b8deae2a9e73
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Thu Jul 8 20:18:10 2004 +0000
+
+    Add two items to Makefile clean XFree86 bug: Reported by: Submitted by:
+        Reviewed by: Obtained from:
+
+commit 8696e71db2d79eb318c00abde625d7b61d6800a1
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Wed Jul 7 04:36:36 2004 +0000
+
+    Make drm/libdrm/xf86drm.c match
+        xc/xc/programs/Xserver/hw/xfree86/os-support/linux/drm/xf86drm.c so
+        that it matches the prototypes in xf86drm.h XFree86 bug: Reported by:
+        Submitted by: Reviewed by: Obtained from:
+
+commit deed1eca099eab19f48e40a5b0e7c15c2304b3d4
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Wed Jul 7 04:22:17 2004 +0000
+
+    Add xf86drm.h back to drm/libdrm until it's true home can be found.
+        mesa-solo needs this file to build. XFree86 bug: Reported by: Submitted
+        by: Reviewed by: Obtained from:
+
+commit eaccc05b267670a0934675064e37bbd590e1028e
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Jul 6 00:25:19 2004 +0000
+
+    Fix module loading on alpha by not referencing MTRR symbols on
+        !__REALLY_HAVE_MTRR.
+
+commit 694291fbd39e0e6ad9a9698794485003648c7fd0
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Jul 6 00:23:42 2004 +0000
+
+    MFC as of 20040705: dev_t -> struct cdev * change.
+
+commit f3527e9256ab6494e3bffebfa29d870891266c4c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 5 12:10:25 2004 +0000
+
+    align with kernel
+
+commit 3c9fb37e655f5556c9c002535f1a85c4f248fb2c
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 5 11:56:51 2004 +0000
+
+    fixes from kernel for 0 vs NULL - mika
+
+commit 4cfd0d5ceed49f834a09b22756c100b77bcfa327
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jul 5 11:44:30 2004 +0000
+
+    whitespace align with kernel
+
+commit 87832bc81a56ad8abb135628ac906ba9aa4a155b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jun 21 11:46:52 2004 +0000
+
+    fix bug with pci_disable_device in the wrong place (Paul Mackerras) remove
+        hack code from me..
+
+commit 1ee210e3b5b2d0b9101e371ec1401cdc34b2f25d
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jun 12 02:30:52 2004 +0000
+
+    dirty hack to make mach64 work, (don't worry I'll get around to fixing it
+        asap..)
+
+commit 373d67702c1fd6c6258ce03d3fb4fc167ff947cb
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Jun 10 12:48:35 2004 +0000
+
+    A few changes for recent redhat.
+
+commit 0faa00ae648647b93202b1726864787e383a2ede
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Jun 10 12:47:50 2004 +0000
+
+    i915 drm module
+
+commit 291ffeae9a2b95cf35835ddd0f25e434e4c26f44
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Jun 10 12:45:38 2004 +0000
+
+    i915.o drm driver
+
+commit 78d0fd6526bb725151d8dce86006af7616ee4758
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jun 10 09:43:53 2004 +0000
+
+    gamma_dma_priority and gamma_dma_send_buffers both deref d->send_indices
+        and/or d->send_sizes. When these functions are called from gamma_dma,
+        these pointers are user pointers and are thus not safe to deref. This
+        patch copies over the pointers inside gamma_dma_priority and
+        gamma_dma_send_buffers.
+    Submitted-by: Robert T. Johnson <rtjohnso@eecs.berkeley.edu> Signed-off-by:
+        Dave Airlie <airlied@linux.ie>
+
+commit cfa5bf31290edad723e1ce388d3840f495f3ccff
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Jun 7 01:42:35 2004 +0000
+
+    The dev->devname being passed to request_irq in drm_irq.h is null. With the
+        old DRM interface, the devname was set in DRM(setunique), but with the
+        current DRM interface >=1.1 the devname is not being set in
+        DRM(set_busid).
+    From: Alan Swanson Approved-by: Dave Airlie <airlied@linux.ie>
+
+commit 52e3a8a5d9ac8e91eb66872a008d1f7d5d67a326
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Wed Jun 2 17:41:52 2004 +0000
+
+    Added some comments copied from xf86drm.h.
+
+commit f994b1f31bb64f0fb56a778c350b6ff05c93501f
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Tue Jun 1 16:17:32 2004 +0000
+
+    Replace size_t with an ugly, ugly hack. This was done so that code in the
+        core X-server would compile. Hopefully, this will soon be replaced with
+        explicitly sized types (i.e., uint32_t) and everyone will be happy.
+
+commit 024fd4b15022236fe3f79eba23fec5d6177d0cb4
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun May 30 23:38:08 2004 +0000
+
+    2.4 compat
+
+commit 412f9909c6127db1ab03716f74cc51c4ac3a603e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun May 30 23:34:23 2004 +0000
+
+    fixes from kernel: Make users of page->count use the provided macros
+
+commit 43c244ebbad842d0ebf3756376bfc6ab1fd11b9f
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Tue May 18 23:30:46 2004 +0000
+
+    fix whitespace issue in previous patch
+
+commit aa142ff1b5ac1488221830bb9b512c2d22f6675f
+Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
+Date:   Tue May 18 23:03:22 2004 +0000
+
+    add R200_EMIT_RB3D_BLENDCOLOR state packet to support GL_EXT_blend_color,
+        GL_EXT_blend_func_separate and GL_EXT_blend_equation_separate on r200
+
+commit 8350382cb1a5aba150c411be3b662dfe444cb84a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue May 18 09:46:31 2004 +0000
+
+    another 2.4 fix
+
+commit df6c37fc88c659691230d1f589aff93e69e6c63e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue May 18 09:42:22 2004 +0000
+
+    2.4 compat fix
+
+commit 13894755a74454187f2c84f553b5b9d4a83fb7e3
+Author: Erdi Chen <erdi@freedesktop.org>
+Date:   Fri May 14 23:54:31 2004 +0000
+
+    Add PCI id entry for VIA CN400 (UnichromePro) chip. XFree86 bug: Reported
+        by: Submitted by: Reviewed by: Obtained from:
+
+commit 853adb8be338de113301d7db3c10058476f3bff7
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue May 11 04:43:43 2004 +0000
+
+    Merge from FreeBSD-current. Mostly 64-bit cleanliness fixes, but a few
+        driver interface changes from -current.
+
+commit 485b259b4492ed6b7abdf063d1d5cefe01d3a3b0
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue May 11 04:23:02 2004 +0000
+
+    Add missing DRM_ERR()s.
+
+commit a1160ba2793b6c17a8aeb31b0d4cc17f3439cf9a
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon May 10 11:16:26 2004 +0000
+
+    do some real testing and fix the DRM initialising and unloading
+
+commit c47b611b08327da4a5249d222079be07c26fb2ff
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun May 9 22:36:19 2004 +0000
+
+    Add mach64 DRM module for BSD (untested, but compiles).
+
+commit dfdf8e14d3f8e4ceb0cad396efc8b4ecb587d5f6
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun May 9 22:29:55 2004 +0000
+
+    Add .cvsignore files.
+
+commit 51ed2f593703164b7bb7f9d0522f273f3f628c03
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun May 9 22:16:11 2004 +0000
+
+    Warning fixes.
+
+commit d477cc007cacbf95d7db295f579e23fafb423f02
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun May 9 22:14:07 2004 +0000
+
+    - Link in shared files as necessary and clean them up.
+    - Generate drm_pciids.h automatically.
+
+commit c093a03d47a50c5f178caff6dd20f7c03cddeb40
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun May 9 22:07:58 2004 +0000
+
+    Catch up with sis's DRM tag change.
+
+commit 7bfce0c357360ef3035b6782d48d93a2ad40bd22
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun May 9 21:59:36 2004 +0000
+
+    Remove after repocopy to Makefile, now that we don't have to worry about
+        conflicting with imake's output.
+
+commit b9dcb5b18713e6fe12130f780535d1b56b8b89cf
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun May 9 21:57:58 2004 +0000
+
+    No /bin/bash on BSD.
+
+commit 29f2b1c1cfc13ffc3176d049eb7f235604c70cb1
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun May 9 21:56:19 2004 +0000
+
+    drm_hw_lock_t is now defined in drm.h, remove from here.
+
+commit a2f7a9fa5f7a5dacbc9e04d132f26dd70201fb45
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun May 9 06:45:17 2004 +0000
+
+    Commit sysfs and drm PCI changes for 2.6 kernel
+
+commit d7e777b696e55def668834d4fcfff94b1a89cc54
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun May 9 06:36:55 2004 +0000
+
+    make drm pciids
+
+commit 0b481856dd30fce905759e470b0abff4e186782e
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon May 3 00:06:04 2004 +0000
+
+    use drm.. not dri for class...
+
+commit a9d2438999b79419772a00d0deb1caab30334765
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun May 2 13:03:51 2004 +0000
+
+    fix 2.4 build
+
+commit a3612f450be04ca73e5acb3afc4eff65194612df
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sun May 2 12:27:17 2004 +0000
+
+    better device class support from Jon Smirls patches..
+
+commit 06332524b5c023db2a6952c25c5bc8a905b093cb
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Apr 26 06:43:53 2004 +0000
+
+    add another tdfx
+
+commit d40443534c3cab2ea1435556c85ef38503eb63ac
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 22 12:41:43 2004 +0000
+
+    Add __user annotations from kernel
+
+commit 87812e82f45d5ca81fd0603d6bd54854831c9174
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 22 11:31:55 2004 +0000
+
+    add sparc ffb files from kernel just to keep things in sync
+
+commit 0edc2abf8414f6fa414aa4071f4fa9ccbee186a7
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Apr 21 23:45:18 2004 +0000
+
+    add new files to generate pci ids
+
+commit 2d9bbba0e10642a149297498c4e03fc43bac1280
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Apr 21 12:18:42 2004 +0000
+
+    bug from Linux kernel list caught by checker
+
+commit 93bd67ef62e95a32f8b7e2fd7d9dadee52664160
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Apr 21 12:13:31 2004 +0000
+
+    centralise pci ids into one place and use scripts to generate files for
+        kernel
+
+commit 0f32a8852712e405f64c5917bcebefc441aa1ba3
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sun Apr 18 22:59:01 2004 +0000
+
+    Move Makefile.linux to Makefile.
+    Get rid of Makefile juggling hacks which are no longer necessary.
+
+commit 6f6d2a553a776068a53332e409fa19e83f6be964
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Mon Apr 12 10:18:18 2004 +0000
+
+    1. Added a PCI ID.
+    2. Big change to the XvMC part of the SAREA. OpenGL clients will not suffer
+        from this, and via XvMC is still alpha. Needed to make future additions
+        to XvMC (More decoders and overlays) possible.
+    3. Bumped version number to 1.3.0.
+
+commit 6fa5c5d958688fba801bc08e75345edd51bf27c7
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Apr 12 05:44:16 2004 +0000
+
+    more files for mach64
+
+commit 873e1c4d38c78e8b4a5df42d983f285cfb3ae4cc
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Apr 12 05:27:40 2004 +0000
+
+    Add mach64 to the trunk
+
+commit 7e39628577d7478644c51bba2ef1d5e2e029bbbb
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sat Apr 10 16:20:00 2004 +0000
+
+    Have CVS ignore some files produced by the build.
+
+commit 3306abbde7565596528e863d2cf906a4a49f3271
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Apr 10 13:52:43 2004 +0000
+
+    white space changes to align with kernel
+
+commit 7e0f883501ad11d16762763a555a9502f76ffba3
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Apr 10 13:25:30 2004 +0000
+
+    include highmem.h
+
+commit 2b0292c73995a4892812fe632abdaf46c49279e0
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Apr 10 12:58:18 2004 +0000
+
+    update gamma_dma with patch from davej in 2.6
+
+commit e375a3dc10eb8945e05577df8b40072dfffaba81
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Apr 10 08:15:48 2004 +0000
+
+    patch from Andrew Morton tree from Arjan van de Ven fixes some oopses seen
+        with 4G/4G split
+
+commit 23ec8875fce631e4554a72161937dca735c2d675
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Apr 10 07:41:19 2004 +0000
+
+    align code with Linux kernel.
+
+commit 6aad146173e2442eb0dbb10d02ddcd8a62808937
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Apr 10 07:39:00 2004 +0000
+
+    remove unused code
+
+commit fd473357980b9ba40bef089aadb78136faaa2008
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Apr 10 07:36:30 2004 +0000
+
+    update from linux kernel for ia64
+
+commit f673c9280c2691063534062fb9fdea74ad85b18a
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Apr 9 00:21:43 2004 +0000
+
+    remove Imakefile
+
+commit 596cf634ae9be821c90688f982ae84b6145696c9
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu Apr 8 23:22:05 2004 +0000
+
+    fix build problem
+
+commit ce601f364723ad361706be59fb7e09d9f6ca444a
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu Apr 8 23:19:15 2004 +0000
+
+    disable PCI DMA ioctls as they are not used currently until SAVAGE_CMD_DMA
+        is made to work.
+
+commit c47597b484866deb7698eb5575348ecd83088314
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 8 14:15:36 2004 +0000
+
+    big whitespace .. this aligns all the whitespace in this file with the bk
+        checkout linux tree
+
+commit 13724f032e127fbaf6d47bb2b6ba8933df23ffe8
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 8 13:11:04 2004 +0000
+
+    2.6 sysfs patches + stubs in drmP.h for 2.4 compatibility
+
+commit c3e2685e822f70976fa57db2955cdd98dc5730f4
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 8 12:25:31 2004 +0000
+
+    long dev_t patches from 2.6 tree
+
+commit 9cff4b45e77c9259a4161ddb55564336f8b99361
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 8 12:22:22 2004 +0000
+
+    2.6 patches for larger dev_t
+
+commit 3e0f3c1fbb9b10bcc8e037f79f25d5e491dcfd91
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 8 12:20:39 2004 +0000
+
+    more 2.4 compat fns
+
+commit 1bc7576474a85b649e2f3291d72890363e6d1483
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 8 12:09:10 2004 +0000
+
+    patch from Linux kernel 2.6.5
+
+commit bc1428035ceb5300df429d09a64a20a2a7e903b2
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 8 12:05:25 2004 +0000
+
+    fixes from Linux kernel
+
+commit ee2889ec0d2f8b6138f916df3c3d8b7e208cc1f7
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Apr 8 11:26:52 2004 +0000
+
+    patch from lk
+
+commit 994fa063cd3ad2f55ea26beef7e31403c68ae78a
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Wed Mar 31 22:05:57 2004 +0000
+
+    VIA module fixes:
+    1. Fixed up PCI-id's.
+    2. Fixed 2.6 warning in kernel Makefile.
+
+commit 20163c2b10f5a1d9c8647f5592ac11e4e9867dfc
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Mar 26 15:52:11 2004 +0000
+
+    copy correct Makefile
+
+commit 9b7bf9127e94e0c57a760aacef15db0ae3d6f1b3
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Fri Mar 26 13:42:48 2004 +0000
+
+    Added via driver to drm/linux/Config.in Reported by: Terry Barnaby
+
+commit 1da595d797f797ff071d98ebf6a4eaad38bb1347
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Wed Mar 24 23:22:22 2004 +0000
+
+    Exported symbols cause compilation failure of via_mm.c on 2.4 kernels.
+        Added via_mm.o to export-objs:
+    Reported by: HMX, Via Arena Forum
+
+commit b15deb239213d28f28a50abe44204836f64d7aed
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Wed Mar 24 10:07:37 2004 +0000
+
+    Modified linux/Kconfig to include the via drm driver.
+
+commit 89d67d90873d1baff48fbd671d5b3a4cb354ada5
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Tue Mar 23 21:14:17 2004 +0000
+
+    Merged via-1-2-0: Altered Makefiles in drm/linux
+
+commit 6cd8831f7accbcc3efb019d7d288c5b6cc28a230
+Author: Thomas Hellstrom <unichrome@shipmail.org>
+Date:   Tue Mar 23 21:08:48 2004 +0000
+
+    Merged via-1-2-0
+
+commit 681da75af9837fd433d4773c86df52de1c8dba60
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Mar 23 11:17:03 2004 +0000
+
+    make sure in DRM toplevel
+
+commit dfc71cbd42fe4b4b445bd16087c05e525c38f509
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Tue Mar 23 11:06:47 2004 +0000
+
+    initial shell script to create linux kernel drm from the DRI one
+
+commit ab66cbc1c5403129b2510208e02146bb062d7b76
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Wed Mar 17 01:03:26 2004 +0000
+
+    Adjust shared path in makefile XFree86 bug: Reported by: Submitted by:
+        Reviewed by: Obtained from:
+
+commit 537ac1a39e16c2fe1d1ac513666a4f95798b3c08
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Tue Mar 16 00:59:24 2004 +0000
+
+    Makefile the makefile really clean everything XFree86 bug: Reported by:
+        Submitted by: Reviewed by: Obtained from:
+
+commit 0b6f155dbdfe661142307a72aa07a52bde6ec08f
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Tue Mar 16 00:52:24 2004 +0000
+
+    Add a missing ifdef CTX to get rid of the waring in the gamma driver build.
+        XFree86 bug: Reported by: Submitted by: Reviewed by: Obtained from:
+
+commit 24115068e465cf0d788d870a3c1c24bb68a9cb14
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Mar 12 21:22:52 2004 +0000
+
+    Fixes need to clean up the mess I made with the mesa merge. This code
+        allows the mesa drivers to use a single definition of the DRM
+        sarea/IOCTLS located in the drm driver directory. Adjustments were made
+        to the 2D drivers to not include these changes. Changes to the mesa
+        copy of DRM were copied to the DRI copy. XFree86 bug: Reported by:
+        Submitted by: Reviewed by: Obtained from:
+
+commit f47ed991432672b7353e73b9d3194f255b957bee
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sat Feb 28 14:29:44 2004 +0000
+
+    Remove extraneous code accidentally added with revision 1.86
+
+commit b61f07def349644ec8077cb12b303d444e223c1b
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sat Feb 28 11:52:19 2004 +0000
+
+    More differentiated error codes for DRM(agp_acquire)
+    Obtained from: Linux kernel
+
+commit ce21dca4aaecac73490f26491b8f06a74d0ee0f5
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Tue Feb 24 14:24:07 2004 +0000
+
+    Use DO_MUNMAP_4_ARGS macro defined in Makefile.linux (Steve Holland).
+        Silence a warning about a format-argument mismatch in printk.
+
+commit 3dea36d8437726fd57cc006e351ed8982b091d76
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Sun Feb 22 16:20:16 2004 +0000
+
+    Merged the Savage DRM driver from the savage-2-0-0-branch into the trunk.
+
+commit d0031f22cfecc2cce512aae66bedc9fe337f5d97
+Author: Felix Kuehling <fxkuehl@gmx.de>
+Date:   Sat Feb 21 19:54:51 2004 +0000
+
+    Conditionally add definition of list_for_each_entry_safe for kernel
+        versions that don't have it.
+
+commit 82157579b586c8f1e147250e09f0837214019680
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Fri Feb 20 22:55:12 2004 +0000
+
+    drm_ctx_dtor.patch Submitted by: Erdi Chen
+
+commit 213247a4416b959738a658f2217d4d01ae9c1e67
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Wed Feb 18 20:56:58 2004 +0000
+
+    Fix sisfb header location for 2.6 kernels
+    Submitted by: Andrew Morton
+
+commit 2b9c12ef83b8de5acba782918212f7fa250c9e45
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sun Jan 11 00:14:28 2004 +0000
+
+    Adapt to nopage() prototype change in Linux 2.6.1.
+    Reviewed by: Arjan van de Ven <arjanv@redhat.com>, additional feedback from
+        William Lee Irwin III and Linus Torvalds.
+
+commit 0dea4de28873252221d40e3597997f6d0141171d
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sat Jan 10 20:59:16 2004 +0000
+
+    Make sure that all state packets are handled in
+        radeon_check_and_fixup_packets()
+    Fix state packet IDs of R200 cubic offsets
+
+commit 7b62ed9aed8794e9efe0059dbf37bc41dc691323
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sat Jan 10 12:28:06 2004 +0000
+
+    R200_PP_CUBIC_OFFSET_F1_[0-6] state packets only contain 5 offsets, not 6
+        (thanks to Andreas Stenglein for spotting this)
+
+commit fb7b802ddaa1440fdba829eff5373c7d9425f582
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Jan 6 04:54:25 2004 +0000
+
+    Fix some misuse of NULL where 0 is intended.
+    Obtained from: FreeBSD CVS
+
+commit 9fb6986e83a84f6b958e8aba2c20b5988676bd55
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Dec 16 08:57:08 2003 +0000
+
+    Don't ioremap the framebuffer area. The ioremapped area wasn't used by
+        anything, and took up valuable KVA. While I'm in the area, clean up BSD
+        MTRR stuff some more.
+    Suggested by: jonsmirl
+
+commit 5285b029876a4d3122ae72cc3d81ca8d184ed9ca
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Dec 16 07:39:43 2003 +0000
+
+    Add a collection of Radeon and R128 PCI IDs, including the IGP chipsets.
+    Submitted by: Donnie Berkholz <spyderous@gentoo.org> (mostly)
+
+commit 64006ef86b329183599b06da7705bb0b294a1c1a
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Mon Dec 8 16:33:08 2003 +0000
+
+    Add i865 pci id
+
+commit 6e56c39371a551af1e05e53231162e0fc42c6ce0
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Nov 12 20:30:51 2003 +0000
+
+    Fix a locking nit, and add asserts in some things that should be called
+        with locks held.
+
+commit 1f7598245af7e73b34130a44fbaac230e29d7aad
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Nov 6 04:48:06 2003 +0000
+
+    Return EBUSY when attempting to addmap a DRM_SHM area with a lock in it if
+        dev->lock.hw_lock is already set. This fixes the case of two X Servers
+        running on the same head on different VTs with interface 1.1, by making
+        the 2nd head fail to inizialize like before.
+
+commit 2c1172a31794e20f7ba1a2ab234d4dab2f84005b
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Nov 6 04:35:08 2003 +0000
+
+    Remove unused variable.
+
+commit a41a479f74f3fadf1539d1adaefb933ba9a6112c
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Nov 5 20:47:28 2003 +0000
+
+    Changes to DRM(irq_install)...... wrap dev->dma usage with __HAVE_DMA in
+        irq handler, fixes kernel ooops. comment out some setting of flags that
+        are done in DRM(setup) (not sure why both of the above is done in the
+        irq handler)
+
+commit 66c9e3053f857df340a982edaa8ea57b229efeed
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Nov 5 08:13:52 2003 +0000
+
+    - Tie the DRM to a specific device: setunique no longer succeeds when given
+        a busid that doesn't correspond to the device the DRM is attached to.
+        This is a breaking of backwards-compatibility only for the
+        multiple-DRI-head case with X Servers that don't use interface 1.1.
+    - Move irq_busid to drm_irq.h and make it only return the IRQ for the
+        current device. Retains compatibility with previous X Servers, cleans
+        up unnecessary code. This means no irq_busid on !__HAVE_IRQ, but can be
+        changed if necessary.
+    - Bump interface version to 1.2. This version when set signifies that the
+        control ioctl should ignore the irq number passed in and enable the
+        interrupt handler for the attached device. Otherwise it errors out when
+        the passed-in irq is not equal to the device's.
+    - Store the highest version the interface has been set to in the device.
+    - Fix a recursion on DRM_LOCK in irq_uninstall on FreeBSD. This leaves
+        irq_uninstall being done without the lock in some cases, but it was
+        racey anyways.
+
+commit 19ee64add26773f4436440f8fa405a1011eea4c4
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Nov 5 02:42:56 2003 +0000
+
+    Use int64_t instead of s64 -- fixes FreeBSD compile, works on linux.
+
+commit 8feb046d8c3c9d531e25c3f854b94593f0a1964b
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Nov 5 02:41:50 2003 +0000
+
+    Args for the BSD DRM_PUT_USER_UNCHECKED were swapped.
+
+commit e8f5b01a4087fac1e44f9f34894dc20a1cbf1e49
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Nov 5 02:08:31 2003 +0000
+
+    __linux__ is spelled with a lowercase 'l'
+
+commit 5864101ab4400aad6ca936bc94000a4607851bb3
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Nov 5 01:43:47 2003 +0000
+
+    Repo-copy linux/drm/kernel/drm.h to shared/drm/kernel/drm.h and use it on
+        both Linux and *BSD.
+
+commit e5cad7fced023e9ad6395147d6fff7ba28f11d17
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Nov 5 00:49:35 2003 +0000
+
+    Remove buf_alloc which is unused since the locking commit.
+
+commit 27f9c5f01659bb643db00ffb17c140ae3bd99df8
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Tue Nov 4 00:59:52 2003 +0000
+
+    build fix
+
+commit 2655ccddf4c026f37dcc76754cdfde6f0a4a4c86
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Tue Nov 4 00:46:05 2003 +0000
+
+    Memory layout transition:
+    the 2D driver initializes MC_FB_LOCATION and related registers sanely
+    the DRM deduces the layout from these registers
+    clients use the new SETPARAM ioctl to tell the DRM where they think the
+        framebuffer is located in the card's address space
+    the DRM uses all this information to check client state and fix it up if
+        necessary
+    This is a prerequisite for things like direct rendering with IGP chips and
+        video capturing.
+
+commit 84dfe702e27e0ef22801f8fe366120bea90adf4f
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Nov 3 05:11:04 2003 +0000
+
+    Add i852/i855 PCI ID. Also fix whitespace in the other ID definitions.
+
+commit 3f7279cb8ec1d4e65028df955ae17b8081940b4f
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Oct 27 22:05:38 2003 +0000
+
+    Add a DRM_PUT_USER_UNCHECKED, which will be used by an upcoming radeon
+        change.
+
+commit 2423fedcc8d57d02ccf7aa1209a4b31f248792a7
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Oct 24 21:49:28 2003 +0000
+
+    Don't try to use dev->dma_lock unless dma is initialized (dev->dma != NULL)
+        in bufs_info sysctl handler. dev->dma and dev->dma_lock existence are
+        protected by DRM_LOCK(). Fixes panic on sysctl hw.dri when the device
+        is uninitialied (when you aren't in X).
+
+commit e4a2a9c04024972f21cdf0620f6faa6de157686d
+Author: Jon Smirl <jonsmirl@yahoo.com>
+Date:   Fri Oct 24 17:40:54 2003 +0000
+
+    Switch pci enumeration call to work on both 2.4 and 2.6 pci_for_each_dev is
+        not supported on 2.6
+
+commit 451a1d3f69a8d19c24382ef2b483517e9ef2c9f6
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Oct 24 00:59:31 2003 +0000
+
+    Move the REALLY_HAVE_AGP endif above the mtrr functions. Broke tdfx module.
+
+commit b79d1b341f876c982c1cde02e8aff6c675688b49
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Oct 23 05:56:13 2003 +0000
+
+    Move to "old-style" probing as documented in linux/Documentation/pci.txt.
+        This should resolve the probe problems with radeon framebuffer due to
+        pci_driver attachment being exclusive.
+
+commit 69d038eb4989772b9b21736c821dd5abe8232260
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Oct 23 05:52:19 2003 +0000
+
+    Missed the sis.h header in Makefile.linux in the move to shared/.
+
+commit 92429f6ebea629e8884eb53cb0c64aad555a4d76
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Oct 23 05:51:35 2003 +0000
+
+    The SiS300 pci id also covers the 305, so make the name reflect that.
+
+commit 06cb132e86dc4a04044c3c76725ba3037008ab34
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Oct 23 02:23:31 2003 +0000
+
+    - Introduce a new ioctl, DRM_IOCTL_SET_VERSION. This ioctl allows the
+        server or client to notify the DRM that it expects a certain version of
+        the device dependent or device independent interface. If the major
+        doesn't match or minor is too large, EINVAL is returned. A major of -1
+        means that the requestor doesn't care about that portion of the
+        interface. The ioctl returns the actual versions in the same struct.
+    - Introduce DRM DI interface version 1.1. If the server requests version
+        1.1, then the DRM sets the unique itself according to the busid of the
+        device it probed, which may then be accessed as normal using getunique.
+    - Request version 1.1 in libdrm's drmOpenByBusID, allowing the X Server to
+        request based on a BusID. Introduce a wrapper for DRM_IOCTL_SET_VERSION
+        and bump libdrm minor version.
+    - Pass the busid in DRIScreenInit if libdrm can handle both a busid and
+        name. This allows drmOpenByBusID to be used to find the DRM instead of
+        just the driver name, which allows us in the future to tie a DRM more
+        strongly to the device it probed to. Introduce a function
+        DRICreatePCIBusID which creates a busid in the form pci:oooo:bb:dd.f
+        similar to linux's pci_name() function. This matches the format used by
+        the DRM in version 1.1. libdrm knows how to match both this format and
+        the old PCI:b:d:f format.
+    - Use the new DRICreatePCIBusID function in the *_dri.c to request the new,
+        more exact busid format.
+
+commit 86e6325e5ab848c15c422f20133445fe6c1caa09
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Oct 22 22:08:53 2003 +0000
+
+    - Add DRM_GET_PRIV_WITH_RETURN macro. This can be used in shared code to
+        get the drm_file_t * based on the filp passed in ioctl handlers.
+    - Use this macro on BSD for simplification and improve its error reporting.
+        Make failure to find the drm_file_t * print as an error, not debug.
+        This failure may be part of the problem with KDE.
+    - Make debug and error print macros include the pid on BSD.
+
+commit 4e6ddcbb698c029b407d5dc43348c6e422a36705
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Oct 22 21:50:09 2003 +0000
+
+    Fix warning about static DRM(bufs_info) defined but not used in the
+        !__HAVE_DMA case.
+
+commit ea7b4fdc225ebbbfd77f875fd3bfcfbdcfa9a1f7
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Oct 20 05:09:21 2003 +0000
+
+    Fix the possibility of sleeping with locks held in sysctls by copying the
+        data into temporary variables with the lock held then outputting to
+        sysctls with the lock released. Rearranged a little extra code to aid
+        this. Note that drm_memory_debug.h hasn't had this fix applied, but I
+        consider that code to be just about dead anyway.
+
+commit 6b0424fdcdec9d12943718e4542659c8bca019da
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Oct 20 00:55:56 2003 +0000
+
+    Clean up BSD MTRR handling. The NetBSD code is untested, but it's my best
+        shot.
+
+commit 0cf1887139eb1ce18d09f7be0567aa93d802040d
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Oct 19 23:35:58 2003 +0000
+
+    - SMPng lock the DRM. This is only partial -- there are a few code paths
+        used by root (the X Server) which are not locked. However, it should
+        deal with lost-IRQ issues on -current which I think people have been
+        experiencing but I am unable to reproduce (though I understand why they
+        would occur, because of a bug of mine). Note that most of the locking
+        (DRM_LOCK()/UNLOCK()) is all covered by Giant still, so it doesn't
+        matter yet.
+    - Remove locking on FreeBSD-stable and NetBSD. These are covered by the
+        fact that there is no reentrancy of the kernel except by interrupts,
+        which are locked using spldrm()/splx() instead.
+
+commit 59fbe01fea8f77fc3810643c14a1738d197d4291
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Oct 19 22:29:08 2003 +0000
+
+    Clean up extra zeroing of dev->dma, and use calloc to take advantage of
+        M_ZERO.
+
+commit 63ce8af5550950b19db432230910e7a2424fa16f
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Oct 19 20:06:03 2003 +0000
+
+    Fix probing on 2.5+ kernels, which require that drivers have .id_table set.
+        We use PCI_ANY_ID to ask that our probe is called for every available
+        device.
+    Submitted by: jonsmirl
+
+commit 2950f9e6823d43abae151966ae808d1a63e6659c
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Oct 17 05:13:48 2003 +0000
+
+    - Move IRQ functions from drm_dma.h to new drm_irq.h and disentangle them
+        from __HAVE_DMA. This will be useful for adding vblank sync support to
+        sis and tdfx. Rename dma_service to irq_handler, which is more
+        accurately what it is.
+    - Fix the #if _HAVE_DMA_IRQ in radeon, r128, mga, i810, i830, gamma to have
+        the right number of underscores. This may have been a problem in the
+        case that the server died without doing its DRM_IOCTL_CONTROL to
+        uninit.
+
+commit ff58476011ba8fe72d65e884380d3d86710bfdd4
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Oct 17 03:14:39 2003 +0000
+
+    - Converted Linux drivers to initialize DRM instances based on PCI IDs, not
+        just a single instance. Moved the PCI ID lists from <card>_drv.c in BSD
+        to <card>.h. The PCI ID lists include a driver private field, which may
+        be used by drivers for chip family or other information. Based on work
+        by jonsmirl.
+    - Make tdfx_drv.c and tdfx.h match other drivers.
+    - Fixed up linking of sis shared files.
+    Tested with Radeon and SiS on Linux and FreeBSD, including a Linux setup
+        with
+    2 SiS cards in a machine, but only one head being used (with DRI)
+
+commit 355b204de0dbc01308bebc77c4c1c0a9a402cded
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Thu Oct 16 14:18:52 2003 +0000
+
+    Introduce COMMIT_RING() as in radeon DRM, stop using error prone writeback
+        for ring read pointer (Paul Mackerras)
+    Get rid of some superfluous stuff, minor fixes
+
+commit a64dab132375b4bf5d4e8aeecc1bf341879482fa
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Oct 16 03:20:03 2003 +0000
+
+    Try that again. It's a long.
+
+commit a9e1a57d6d03f9fc52357db8af7ac2e7b8a488e4
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Oct 16 03:19:06 2003 +0000
+
+    Debug printf format fix.
+
+commit 9fbfb7ca6a7da93fda0d086a712108e1b14c99d1
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Oct 3 08:08:10 2003 +0000
+
+    Some code cleanups done while working on locking. Reduces always-true
+        tests, excessive indenation, convoluted handling of errors, or code
+        duplication.
+
+commit 929536172cda4288857cdc29b272e61e02fd47bd
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Oct 3 07:02:51 2003 +0000
+
+    Stylistic preparation for SMPng locking work: DRM_LOCK/DRM_UNLOCK have side
+        effects, so make them look like functions (add parenthesis).
+
+commit e187d665e4ffee4990d096d8d3722630b2ba2d46
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Oct 2 20:52:44 2003 +0000
+
+    Add an MIT-style copyright, assigned to myself, to these files. I think
+        I've touched enough of the code here, and there was no previous
+        copyright. Do some drive-by style fixes while I'm here.
+
+commit 89dd7be3dd7f73d3bae54a01865e5605a707f823
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Oct 2 07:02:34 2003 +0000
+
+    Axe more old gamma DMA infrastructure.
+
+commit a6b84f73e18d88524a906a319c6c8e3c44bd7dea
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Oct 2 04:48:54 2003 +0000
+
+    Mostly whitespace cleanups and style(9) fixes focused on "if(" -> "if ("
+        Change some nearby memset()s to bzero()s or to calloc allocations to
+        take advantage of M_ZERO). Reverse some error tests to reduce high
+        levels of indentation. Move the sg_cleanup() call out of the maplist
+        loop in DRM(takedown)-- I can't see any need for it to be inside.
+
+commit 4dee75ff58a50559cb8a92c276c0b952c2776154
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Oct 2 04:12:34 2003 +0000
+
+    Wrap sys/endian.h usage with __FreeBSD_version >= 480000.
+    Obtained from: i865-agp-0-1-branch
+
+commit 4a55e75e97e39256d5cdb561cf01ff7df73fe664
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Oct 2 04:07:03 2003 +0000
+
+    Allow the DRM to attach to a "drmsub" device. This will be provided by the
+        i810 AGP module, working around the limitation of one driver per
+        device.
+    Obtained from: i865-0-1-branch
+
+commit 8fe6a0d6c9aae796cc1217794644b314a9960a43
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Oct 2 03:51:49 2003 +0000
+
+    MTRR issue with SMP and -stable seems to be resolved. Re-enable MTRRs on
+        4.x
+
+commit e5546d2f26db3eb15b2be1f33a0b07c7ca497337
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Tue Sep 30 22:43:23 2003 +0000
+
+    file via_drm.h was initially added on branch cle266-0-0-1-branch.
+
+commit 87c04835df1ab427c003c5f3d716dbd12a5f4294
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Tue Sep 30 22:43:23 2003 +0000
+
+    file via.h was initially added on branch cle266-0-0-1-branch.
+
+commit 64828b7fe36f771e124d0a69e022c5d8177b4564
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Tue Sep 30 22:43:23 2003 +0000
+
+    file via_drv.c was initially added on branch cle266-0-0-1-branch.
+
+commit 215a05721bc08eea804c6790a43666ceb297e5d8
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Tue Sep 30 22:43:23 2003 +0000
+
+    file via_drv.h was initially added on branch cle266-0-0-1-branch.
+
+commit 37ff4d7ddeff8dfd303b6dedd591f21e4962745e
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Tue Sep 30 22:43:23 2003 +0000
+
+    file via_ds.c was initially added on branch cle266-0-0-1-branch.
+
+commit 53e11840a54b7b252d56cc8909846a24d53d2366
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Tue Sep 30 22:43:23 2003 +0000
+
+    file via_ds.h was initially added on branch cle266-0-0-1-branch.
+
+commit 097d0a51e2c6e8bc1d77b46afe15b1068d6c9a94
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Tue Sep 30 22:43:23 2003 +0000
+
+    file via_map.c was initially added on branch cle266-0-0-1-branch.
+
+commit 8d9d81680779ce40b96cdfbd83067b797876a981
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Tue Sep 30 22:43:23 2003 +0000
+
+    file via_mm.c was initially added on branch cle266-0-0-1-branch.
+
+commit d04d1cf313be536dc69d4b807a6503aef1204c6d
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Tue Sep 30 22:43:23 2003 +0000
+
+    file via_mm.h was initially added on branch cle266-0-0-1-branch.
+
+commit 5d4b13707666701506dcb86e7fc2dfe79ee056ea
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Sun Sep 28 21:27:09 2003 +0000
+
+    Fix typo in SiS help message (and testing cvs commit to
+        dri.freedesktop.org)
+
+commit 28aee7fb1c5b7a7e59aed8ed8e9dc1e3d4b88561
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Sep 25 23:04:10 2003 +0000
+
+    Whitespace cleanup (spaces before tabs or instead of tabs).
+
+commit b0fab09c4df5075ebfae3637f39ef595a8a37066
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Sep 25 19:08:46 2003 +0000
+
+    Whitespace cleanup.
+    Submitted by: Linus Torvalds <torvalds@osdl.org>
+
+commit a0a38f8bd68792206491a51e708d2d1bd2db8b26
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Sep 25 19:08:11 2003 +0000
+
+    Fix Kconfig for SiS DRM now that it doesn't require sisfb.
+    Submitted by: Linus Torvalds <torvalds@osdl.org>
+
+commit b0a928557c91fec527f41ae8b2441174889bf32c
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Sep 24 14:39:25 2003 +0000
+
+    post merge fix
+
+commit decf9e2297d87d646a4259f5d70290f105a487cd
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Sat Sep 13 00:25:59 2003 +0000
+
+    compatibility layer still uses agp (not gart)
+
+commit dc17c4cdc358213340947ec0e7e7f4caf7664232
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Sep 12 20:03:17 2003 +0000
+
+    bsd drm fixes
+
+commit c5168016cc028f59b417df77f1f169bf06e40271
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Sep 12 20:00:59 2003 +0000
+
+    linux drm fixes
+
+commit 85c16d962d8f6011b670d74d0669402ec4708f6f
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Sep 12 14:24:17 2003 +0000
+
+    resolve merge conflicts
+
+commit 6fc41e25e5acbbfae4d2e93a0d9e6f980f8ae477
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Sep 9 07:45:12 2003 +0000
+
+    Use spldrm/splx around tsleep() in DRM_WAIT_ON
+
+commit 4d6d3572029414419289fd512416effb9a9ad832
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Sep 7 23:56:20 2003 +0000
+
+    Correct format in debug printfs (free is a pointer, not an int).
+
+commit 6f563cd513bfcd35643ebc4f0d5c58f0193cc163
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Sep 7 23:27:04 2003 +0000
+
+    Fix for older -stable.
+    Obtained from: FreeBSD CVS
+
+commit ebca51d8da42e7e4882694bc3233bf0f8dbdf301
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Aug 29 21:41:32 2003 +0000
+
+    Update to reflect renaming of SIS ioctls.
+
+commit f634f687592bca690a9bc045661005c77854647b
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Aug 29 20:54:26 2003 +0000
+
+    These files were missed in the SiS DRM commit.
+
+commit fabc64dd573f01a2160be474b4abc65a3a9aa5ea
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Aug 29 19:24:36 2003 +0000
+
+    Port the SiS DRM to FreeBSD. This includes the ability for the DRM to
+        allocate framebuffer memory without sisfb, and a new ioctl to be used
+        by the X Server which tells the DRM what region of framebuffer memory
+        to allocate from. Also fixes a possibility to panic the kernel I
+        believe. Tested on linux with sisfb and FreeBSD (without sisfb) with
+        new DRI only.
+
+commit a7aebb6dac3287374721dd2101a4584f12c63c82
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Aug 29 19:16:13 2003 +0000
+
+    Add DRM(calloc), which is convenient, used by the new sis code, and takes
+        advantage of M_ZERO on BSDs.
+
+commit db781291164dfa10538776748df7af901c6b20a2
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Aug 29 19:08:06 2003 +0000
+
+    Update radeon PCI IDs.
+
+commit bd3bc9f23d7a1895b2bf87d39346c5d4c9615020
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Aug 29 19:07:27 2003 +0000
+
+    This PCI header has been living in dev/pci/ for a while now.
+
+commit ba804e7864eef2fd1d92cfe75b0bc868302da084
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Thu Aug 28 12:14:17 2003 +0000
+
+    Remove superfluous TLB flush
+
+commit b83d2f909e03c7c4a95f19a04d717f7ea8dc288e
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Tue Aug 26 16:49:33 2003 +0000
+
+    Rename agp to gart for radeon
+
+commit 062751ac472b2721bed0cd1ee48a3ae7d327ff07
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Tue Aug 26 15:44:01 2003 +0000
+
+    Remove artificial PCI GART limitations, rename AGP to GART where
+        appropriate
+
+commit 963ad33cb6b85189f3385bcba46905b6d4d329db
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Aug 19 02:22:57 2003 +0000
+
+    Fix the debug build.
+
+commit ad78a613a49daea936372c75423ac17f9f83b092
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Aug 19 00:41:00 2003 +0000
+
+    - Remove $FreeBSD$ tags as they weren't too useful and merges are now being
+        done through perforce.
+    - Add copyright headers to drm_os_*bsd.h, still need to research the other
+        copyright-less files better.
+
+commit 07a9b30082d6a64d39964f504e3afc4317e22ef7
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Mon Aug 18 23:46:19 2003 +0000
+
+    Clean up Radeon DRI resume code
+
+commit 0f094c33da5054e6be9ccf8bf0f6282c9aed5791
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Aug 18 23:42:16 2003 +0000
+
+    Make r128_do_wait_for_idle static, as it's only used in this file.
+    Noticed by: CScout
+
+commit 6298d1a1e0deccf085970e12922430dbde09e5da
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Aug 18 23:41:05 2003 +0000
+
+    Remove an unnecessary #define __NO_VERSION__
+    Noticed by: CScout
+
+commit 9d7b01ebbe71ff6ca3ea421d5bff64f403b592ba
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Fri Aug 15 10:31:54 2003 +0000
+
+    Merge from 2.6 kernel (Linus Torvalds)
+
+commit a073ff7dc73dc98e81e2ae26e8c500ea7141084b
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Fri Aug 15 01:05:24 2003 +0000
+
+    DA: loads of whitespace .. some from Linus, some from me
+
+commit 428cbe0b91b1b446b0878544f30121df9b5bb2ac
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Aug 13 23:35:40 2003 +0000
+
+    DA: patch from Matthew upgraded to latest DRI head to solve issue with i810
+        compatibility
+
+commit 03e6674c13f8e7033c891ae8979e7f996fe9a6c1
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Aug 12 21:48:16 2003 +0000
+
+    Whitespace cleanup from the pageflipping commit.
+
+commit 4c9daf6847b4e263d006154ac1e523c091308a6b
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Aug 12 21:47:34 2003 +0000
+
+    Document change in interface version 1.9.
+
+commit fbdadde0079120d49ca719781817a342bb62801d
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Aug 12 21:34:03 2003 +0000
+
+    Document the changes in interface version 2.5.
+
+commit 02675a470e9fde770418748b14d0a69a7f562d3b
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Aug 12 21:18:05 2003 +0000
+
+    Merge from FreeBSD r1.11: We have memset in the kernel, no need to define
+        it to bzero (which it was always used for).
+
+commit 447d8c56bb8db6c8139c4c4cb3e99f6674069e09
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Mon Aug 11 01:46:02 2003 +0000
+
+    DA: code cleanups for i810_dma.c from 2.4 kernel
+
+commit c99acb597fe430305b6bba62467cd3c85a36b8f5
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Fri Aug 8 21:06:44 2003 +0000
+
+    Added some information as to when (which DRM version) various queries were
+        added.
+
+commit e7944efc4550416ee53e2f570f759d4e6078834b
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Thu Aug 7 10:13:50 2003 +0000
+
+    build fix for kernels >= 2.6
+
+commit da16867c8433516c361944e6e4265bd511ac72c8
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Wed Aug 6 11:46:21 2003 +0000
+
+    Fix maplist entries being used after they were freed; thanks to Benjamin
+        Herrenschmidt for tracking this down
+
+commit 4b60cae90e0f689f68167c2e3419df7574cae1ab
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Tue Jul 29 10:11:48 2003 +0000
+
+    IRQ code cleanup suggested by Linus Torvalds
+    i830 build fix
+
+commit c26ffeafca30332520660d2bef1106b56d0ef5e1
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sat Jul 26 15:59:09 2003 +0000
+
+    Degrade uninformative error message to debug message, as in other drivers
+
+commit aaf2105be967ad7f99c643b4be09cf6d3d063b65
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Jul 26 03:25:40 2003 +0000
+
+    Add Rage 128 pageflipping support, defaults to off. DRM version bump to
+        2.5.0. It still has some issues, including a flicker in the fps meter
+        in tuxracer and I've seen garbage left behind after moving/closing
+        windows. However, it's usable. Add the Option "EnablePageFlip" "YES" to
+        use it.
+
+commit 983db58a26c37237acf54af60f28a4243467079a
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Jul 26 03:18:34 2003 +0000
+
+    Fix FreeBSD build after IRQ changes.
+
+commit bef7017749c9d3af733bdca4863a012f5d6506d3
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Fri Jul 25 10:50:39 2003 +0000
+
+    Compile fixes for recent 2.5/2.6 Linux kernels. I hope this doesn't break
+        the i830 driver or the BSDs. :)
+
+commit 32ef0f59a8d62460da338568af347286aa450146
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Fri Jul 25 10:31:37 2003 +0000
+
+    Fail in DRM(agp_acquire) if the AGP aperture can't be used, such that the X
+        server falls back to PCI GART or disables the DRI gracefully
+
+commit 3669639b2162d0ec0d3f9b47b2e443b6d89d1cee
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Fri Jul 11 15:27:55 2003 +0000
+
+    Restore __HAVE_KERNEL_CTX_SWITCH, required for the sparc drm module in the
+        kernel tree. Added comments to that effect.
+
+commit 1654bc5752740e54a5e6cfd18021a9f66d7b7df2
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Wed Jul 9 23:21:15 2003 +0000
+
+    DA: fix for bug 484 in Bugzilla, originally from me, reworked by David
+        Dawes to avoid backword incompatibilities...
+
+commit f4188a751829926f5901d18a0d95774c8cdecbf8
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Wed Jul 9 09:28:42 2003 +0000
+
+    file drm_mem.h was initially added on branch newdrm-0-0-1-branch.
+
+commit 7dc959ed2114f4b92b7e0cb8b067f2a182e9a4d8
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Wed Jul 9 09:26:17 2003 +0000
+
+    file drm_dma.c was initially added on branch newdrm-0-0-1-branch.
+
+commit 49d152544e64b9d3802f5efd6e5f53cb93756a10
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Wed Jul 9 09:26:17 2003 +0000
+
+    file drm_fops.c was initially added on branch newdrm-0-0-1-branch.
+
+commit 6a0e4854574732ed301a1aa7fb8753b37666def1
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Wed Jul 9 09:26:17 2003 +0000
+
+    file drm_lock.c was initially added on branch newdrm-0-0-1-branch.
+
+commit c7f9545482223eb01d9b4c76212305615483150a
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Wed Jul 9 09:26:17 2003 +0000
+
+    file drm_stub.c was initially added on branch newdrm-0-0-1-branch.
+
+commit cf6e7980c913b0b78cbf020052d9135fc2da0417
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Wed Jul 9 09:26:17 2003 +0000
+
+    file drm_vm.c was initially added on branch newdrm-0-0-1-branch.
+
+commit 2daf14765214c50088c16e3538d24e157578d000
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Jul 8 17:10:13 2003 +0000
+
+    Removed unused __HAVE_KERNEL_CTX_SWITCH, whatever that was.
+
+commit 39e1c534c0730e451062a9dbcbdf5ab95d1c5c50
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Fri Jul 4 18:31:42 2003 +0000
+
+    Don't need to include linux/wrapper.h - we only use Set/ClearPageReserved
+        from linux/mm.h now and wrapper.h has been removed in 2.5.69 and later.
+
+commit 01d6ae90d6a8b5ed32739b39334079d5f1c3d95e
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Tue Jul 1 18:56:57 2003 +0000
+
+    file drm_agp.c was initially added on branch newdrm-0-0-1-branch.
+
+commit a145363ee175757ff0309a50157a9d75e97fda26
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Tue Jul 1 18:56:57 2003 +0000
+
+    file drm_bufs.c was initially added on branch newdrm-0-0-1-branch.
+
+commit 7c565e4961c194d9b432d4a6790883ac5c061867
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Tue Jul 1 18:56:57 2003 +0000
+
+    file drm_mem.c was initially added on branch newdrm-0-0-1-branch.
+
+commit 43d3934ac86bdd7319b140b7dae823579a3bc43c
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Tue Jul 1 18:56:57 2003 +0000
+
+    file drm_pci.c was initially added on branch newdrm-0-0-1-branch.
+
+commit 8ec900afb4ea0d0ab3f7f1e7e71f41de210da3bf
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Tue Jul 1 18:56:57 2003 +0000
+
+    file drm_sg.c was initially added on branch newdrm-0-0-1-branch.
+
+commit 66d39b549eef3bdaaa3b6a99992659e0b381b4aa
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Jun 23 16:34:14 2003 +0000
+
+    file savage_dma.c was initially added on branch savage-1_0_0-branch.
+
+commit 5640adddc896c89ae25c7db38c796bde21a37bdc
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Jun 23 16:34:14 2003 +0000
+
+    file savage_state.c was initially added on branch savage-1_0_0-branch.
+
+commit 1b0eb5e3561f3cdabae73c8152fe0b5b72863922
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Sat Jun 21 15:27:51 2003 +0000
+
+    file drm_pci_tmp.h was initially added on branch newdrm-0-0-1-branch.
+
+commit dab537cbb1817f6a229640cf2584e64495b7a186
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Sat Jun 21 14:01:43 2003 +0000
+
+    file drm_stub_tmp.h was initially added on branch newdrm-0-0-1-branch.
+
+commit b568f838490ef2558e7297a1950e6e9e26093d24
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Sat Jun 21 13:18:47 2003 +0000
+
+    file drm_memory_tmp.h was initially added on branch newdrm-0-0-1-branch.
+
+commit 7014016e08c3d98aa348e21f7ce1937535db2e13
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Sat Jun 21 13:09:08 2003 +0000
+
+    file drm_vm_tmp.h was initially added on branch newdrm-0-0-1-branch.
+
+commit b816fa625fc05afd0ffa62a2a5d0784c024c3319
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Sat Jun 21 12:49:34 2003 +0000
+
+    file drm_dma_tmp.h was initially added on branch newdrm-0-0-1-branch.
+
+commit d64200e830586990cb1ae5436bdfec9127f2a731
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Sat Jun 21 12:27:27 2003 +0000
+
+    file drm_lock_tmp.h was initially added on branch newdrm-0-0-1-branch.
+
+commit e7334f927f1f5fc6ed1df1abf2c345be1682c3f8
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Thu Jun 19 00:14:25 2003 +0000
+
+    file drm_bufs_tmp.h was initially added on branch newdrm-0-0-1-branch.
+
+commit 93522f6d3ad6924cbf413915491e4f8228502d98
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Thu Jun 19 00:09:52 2003 +0000
+
+    Revert the janitorial - that works is now on the new branch
+        newdrm-0-0-1-branch.
+
+commit 0a995b624d325055abf5ba09d39ac8d85866d85a
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Wed Jun 18 15:07:31 2003 +0000
+
+    file i830_compat.c was initially added on branch i865-agp-0-1-branch.
+
+commit 22e5f8d765745ff3f41d1b8016e1c0b889bb52d1
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Wed Jun 18 15:07:31 2003 +0000
+
+    file i830.h was initially added on branch i865-agp-0-1-branch.
+
+commit 2efebc956c68e5b5ef28690ea1829d9d993dd33f
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Wed Jun 18 15:07:31 2003 +0000
+
+    file i830_dma.c was initially added on branch i865-agp-0-1-branch.
+
+commit a9611f09037e3966aace29fdfff296dae82e642f
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Wed Jun 18 15:07:31 2003 +0000
+
+    file i830_drm.h was initially added on branch i865-agp-0-1-branch.
+
+commit 900bd6e4377d70cb6a26905d5310304c6c1a4d71
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Wed Jun 18 15:07:31 2003 +0000
+
+    file i830_drv.c was initially added on branch i865-agp-0-1-branch.
+
+commit cf840e71f2e7d8b8814a605020ca3b0d03964295
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Wed Jun 18 15:07:31 2003 +0000
+
+    file i830_drv.h was initially added on branch i865-agp-0-1-branch.
+
+commit 4d0e244f8f6fbc710703413cf358942a06cbe843
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Wed Jun 18 15:07:31 2003 +0000
+
+    file i830_irq.c was initially added on branch i865-agp-0-1-branch.
+
+commit fbde3dc0e6649f83173a6f39a01338288e8e56f1
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Wed Jun 18 15:07:31 2003 +0000
+
+    file i830_mem.c was initially added on branch i865-agp-0-1-branch.
+
+commit 9e7d6177d1e57f8ab08da3232568597d5005709c
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Mon Jun 16 10:40:52 2003 +0000
+
+    Possibly fix stanford checker complaints about sarea
+
+commit fdf320a1b8025dd4b33670fddae9df2890ee6c5b
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Sat Jun 14 15:18:49 2003 +0000
+
+    Move the linux AGP includes into drm_agp.h and only define the AGP data
+        structures if AGP support is enabled in the kernel (__REALLY_HAVE_AGP).
+        This fixes the compile errors on kernels without AGP support.
+
+commit 0b01c70d59f6e038b8f90f7be98fb77d771ecc1a
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Jun 10 18:54:17 2003 +0000
+
+    Texture rectangle support for r100
+
+commit 98840144b120691423038a29e1f0afdc8606cce7
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Mon Jun 9 23:12:33 2003 +0000
+
+    Revert bogus last commit
+
+commit 1062b9930f2c0ddb9f5f0db29796aba0e247c80d
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Mon Jun 9 23:11:23 2003 +0000
+
+    Don't activate blend fallbacks unless blending is enabled
+
+commit 1a2bb4332972c57c0d810e879e251d74a538f13b
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Sat Jun 7 12:45:55 2003 +0000
+
+    Verify 'drm_agp' is not NULL for all its wrappers - this causes no overhead
+        and must be done if in future a driver tries to talk to the AGP
+        directly from kernelspace instead of userspace, and the AGP is not
+        present.
+
+commit e3a149f08095f1a7321fce890b1337098485f254
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Sat Jun 7 12:30:22 2003 +0000
+
+    Check that the AGPGART "drm_agp" symbol pointer is valid before
+        initializing the DRM device - this was causing a kernel oops when the
+        AGPGART module wasn't loaded.
+
+commit f723f743c55156039525a5f49dfe6e0fd141c8df
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Sat Jun 7 01:44:15 2003 +0000
+
+    fix pitch compile error
+
+commit 8eaa2d245077d5e949679e48897b57f8dc505a25
+Author: Dave Airlie <airlied@linux.ie>
+Date:   Thu Jun 5 23:31:40 2003 +0000
+
+    add page flipping support to the DRM, up version number to 1.3.0...
+
+commit 8e7cd92f35629a6f6d904346b09883173a7bda29
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Tue Jun 3 23:50:23 2003 +0000
+
+    Added the Doxygen configuration file. Minor documentation fixes.
+
+commit 6611a5fb7f41f81e38391c77903d98a29937ceed
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Tue Jun 3 23:27:01 2003 +0000
+
+    Split declarations/definitions in drm_scatter.h into drm_sg.h/drm_sg_tmp.h
+        respectively. Splited the work out of the ioctls and renamed (with the
+        _ioctl prefix). Added some more documentation. Did the same for
+        drm_sgpsupport.h.
+
+commit a709d4c97c2de9d75ba845da41d61f8734ee573b
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Jun 3 11:23:58 2003 +0000
+
+    file i830_mem.c was initially added on branch i865-agp-0-1-branch.
+
+commit 89463947581a5aad25abd22f36e95391c42972b6
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Fri May 30 12:07:45 2003 +0000
+
+    file i830_compat.c was initially added on branch i865-agp-0-1-branch.
+
+commit 518db771de1fd1ac26721197833d33147740edae
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Wed May 28 02:03:37 2003 +0000
+
+    Restore change to _DRM_VBLANK_SIGNAL from rev. 1.41, which was reverted
+        with the documentation merge.
+
+commit ccf6d6a5136af3d59a9d93566f55058e9c8480b4
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Wed May 28 01:44:49 2003 +0000
+
+    Restore DRM_*MEMORYBARRIER change reverted with documentation merge
+
+commit d2443b2186712dd7c977b47e06444396e1e493ff
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Tue May 27 00:37:33 2003 +0000
+
+    Merged DRM documentation.
+
+commit aeb4bc3f5b991d7970dca9417e04df06c0bf008a
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Mon May 26 20:04:53 2003 +0000
+
+    Add support to r128 for MESA_ycbcr_texture (Ian Romanick, Leif Delgass)
+
+commit c0efa1a777baf90561a31957014d760f89146e4f
+Author: David Dawes <dawes@xfree86.org>
+Date:   Tue May 20 22:43:39 2003 +0000
+
+    DRM part of Radeon DRI suspend/resume support (Charl Botha).
+
+commit 2134577e314d1dac4b48b78e5b6d6e92f2c76ea8
+Author: David Dawes <dawes@xfree86.org>
+Date:   Tue May 20 22:42:24 2003 +0000
+
+    Support for building DRM module on OpenBSD (Wilbern Cobb, Matthieu Herrb).
+        (resync with XFree86 trunk)
+
+commit b942999b5915cbad75f16f6c242bab03c33f0c8b
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sat May 17 00:37:34 2003 +0000
+
+    do allow reading from read only mappings...
+
+commit e5d3c7f260d18168eec755c73f01ac617390d96c
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Fri May 16 23:41:27 2003 +0000
+
+    Support AGP bridges where the AGP aperture can't be accessed directly by
+        the CPU (David Mosberger, Benjamin Herrenschmidt, myself, Paul
+        Mackerras, Jeff Wiedemeier)
+
+commit 1d5bf7a7de35f87e68cce740151fd46cd8fa2ff3
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Tue May 6 21:10:33 2003 +0000
+
+    fix warning on machines where sizeof(drm_addr_t) != 4 (Randy Dunlap)
+
+commit 285b1cdc39d9cc47e3ff74b9f9b56c24317beec5
+Author: Ian Romanick <idr@us.ibm.com>
+Date:   Wed Apr 30 01:51:00 2003 +0000
+
+    Merged texmem-0-0-1
+
+commit 7e1a4bfab3648a83cf2f8eed01c6ac346829aa3c
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Tue Apr 29 16:59:00 2003 +0000
+
+    remove unused variables
+
+commit 87ed795ff354eb6e9431c87ab315349326c1af79
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Apr 28 23:18:43 2003 +0000
+
+    Fix a typo: On takedown the mtrr operation is MEMRANGE_SET_REMOVE, not
+        _UPDATE.
+
+commit 5f1e2399eb5b76537c91fc9aba2569f2c289a284
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Mon Apr 28 17:49:26 2003 +0000
+
+    Restore Eric Anholt's DRM_*MEMORYBARRIER changes from rev 1.11
+
+commit a57d3204613922ee07e56209169e4b4ce1f17754
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Mon Apr 28 16:20:31 2003 +0000
+
+    Only free original pagelist in addbufs_pci if one already exists (fixes
+        oops).
+
+commit 6eb5364eb81474a6ceac8b44c3283cb0327b2a82
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Apr 28 15:29:46 2003 +0000
+
+    DRM_READ/WRITEMEMORYBARRIER was given an argument in the bsd tree, fix for
+        linux
+
+commit c584292e30f1f3fc22da32117dfbb72bb79cdbe2
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Sun Apr 27 09:53:58 2003 +0000
+
+    Put back __HAVE_KERNEL_CTX_SWITCH for David Miller's sparc drm driver
+        (which doesn't live in our cvs).
+
+commit 22b9b720d572ba6fec288e2a13537aec069cec7f
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Apr 27 00:43:14 2003 +0000
+
+    Use real endian conversion functions.
+
+commit 9828bd24c8f7b9d115acf94e422fa34ec8627b92
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Apr 26 23:55:30 2003 +0000
+
+    Fix formatting of hw.dri sysctl.
+
+commit 766a1da2e5841959246abab9cf27c79d75636129
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Apr 26 23:32:00 2003 +0000
+
+    Remove the map argument from DRM_*MEMORYBARRIER. Not all of the uses of
+        DRM_*MEMORYBARRIER we had were related to an MMIO space. This means
+        arch-specific code on the BSDs, unfortunately. Also add
+        DRM_MEMORYBARRIER() and change the DRM_READMEMORYBARRIER()s that used
+        to be read/write barriers to it.
+
+commit a172ee2a18b715a6de9b8e914aecd8414a4f3b2d
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Apr 26 23:04:22 2003 +0000
+
+    MFL: Don't install irq handler unless the driver has been initialized.
+
+commit ce514e08aa8fdbdf52da2ac2cbdace68e0b25210
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Apr 26 22:52:39 2003 +0000
+
+    Add PCI DMA memory functions and make addbufs_pci and associated code use
+        it. To do this we need to save the bus address along with the virtual
+        address in the seglist. Also fix some error handling and a few bits of
+        whitespace.
+
+commit f2a0c5438dc83171de1007a68e4f98e35b5a8fbe
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Sat Apr 26 22:28:56 2003 +0000
+
+    Ensure driver has been initialized (dev_private != NULL) before installing
+        irq handler in DRM(irq_install). Modify all drivers to ensure irq
+        handler is removed before cleanup and cleanup is called at takedown.
+        Remove unused buffer private struct fields in i810, i830. Check for
+        lock on init/cleanup in all drivers except i810/i830. The current DDX
+        for i810 and i830 doesn't hold the lock on kernel init (FIXME?).
+
+commit a79adaab72bde726ce4c08184997f34b31014d9e
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Apr 26 22:21:37 2003 +0000
+
+    Missed files in the last commit: Remove memory debugging sysctl unless
+        MEMORY_DEBUG is set.
+
+commit 8621ae310b496a5d5db10236083f3f3d38362719
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Apr 26 22:18:39 2003 +0000
+
+    Move the memory functions with debugging info to drm_memory_debug.h, and
+        remove a couple of dead functions.
+
+commit 79a0c5757e400c236b4c365761a377d52393606a
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Apr 26 21:57:43 2003 +0000
+
+    Remove #if 0'ed code.
+
+commit f5844cea13ba330beaeebb171eca1580efba62c6
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Sat Apr 26 21:33:44 2003 +0000
+
+    2.5.x sync patch from Linus Torvalds
+
+commit 2c40a56393102bb0fb21e183bf5a08b0eea35c57
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Sat Apr 26 21:22:08 2003 +0000
+
+    move prototypes for gamma functions to gamma_drv.h
+
+commit 2142b7840a5e0c2b6342ef94f285ac9fcf4a87ce
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Sat Apr 26 21:21:36 2003 +0000
+
+    Remove #if 0'd code
+
+commit e60eb69bc029c04b39ef0de620002d5ba2433d04
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Apr 26 06:53:22 2003 +0000
+
+    Replace the C atomic_cmpset_int compatibility function for -stable with the
+        real i386 atomic_cmpset_int from -current. FreeBSD-stable won't ever
+        have DRM support for non-i386.
+
+commit acb5d6b2732cccfa3734b25dc808ecdc5a6c556c
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Apr 26 06:39:55 2003 +0000
+
+    Disable MTRRs on FreeBSD-stable. Without this, it hangs on boot in the MTRR
+        setting for AGP cards on SMP machines.
+
+commit cb32dde3be831096e98c66398159f7d7ddf3d672
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Fri Apr 25 19:42:47 2003 +0000
+
+    Fix potential oops and memory leaks when allocations fail in
+        addbufs_agp/pci. Add support for buffer private structs with PCI DMA
+        buffers. Also some debug format string fixes.
+
+commit 77ee73f8cd92aa136488e23424282afba9977160
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Apr 25 02:27:21 2003 +0000
+
+    Merge from FreeBSD-current.
+
+commit c3092ead6427d04b7067c1d7d95163c7aa7b75b1
+Author: David Dawes <dawes@xfree86.org>
+Date:   Fri Apr 25 00:57:42 2003 +0000
+
+    Targets for building dristat and drmstat.
+
+commit 58650c3a9d53044a0ab463df41864ddb39238bab
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Apr 25 00:02:14 2003 +0000
+
+    Clean up the DRM_COPY_TO_USER()ing of DRM(infobufs), making it more
+        legible.
+
+commit 781828b26e35e8347e461d2097563823e8f76c88
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Apr 24 23:57:29 2003 +0000
+
+    Clean up the style of the linux-compat code and use ioctl() directly rather
+        than reimplementing it.
+
+commit 16fda821eb457818414faa57bf9ccfba93c3a350
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Thu Apr 24 23:18:33 2003 +0000
+
+    Pass dma handle from pci_alloc_consistent to the card for status page,
+        rather than using virt_to_bus() on the virtual address.
+
+commit a147df879b3b850612222759c14f4142d2406e74
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Apr 24 19:09:55 2003 +0000
+
+    Remove more gamma DMA infrastructure. Most of this code was copied straight
+        from linux, so it could be added back if some driver needed it in the
+        future.
+
+commit d6a82ff9c160acbb7db5bee2cde45818d1e8548e
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Thu Apr 24 16:55:22 2003 +0000
+
+    Remove unused dev->map_count. We always iterate the maplist with
+        list_for_each() and the count is not updated or used for stats.
+
+commit 2dc672a7908817f43391703a8341cb873fbb1543
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Thu Apr 24 16:47:32 2003 +0000
+
+    Minor cleanups for dri/drmstat test progs (Both still need targets for new
+        Makefile)
+
+commit cd3d6090b79ad5583494938a231cfc4da610ca9b
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Thu Apr 24 15:29:30 2003 +0000
+
+    Remove unused variables
+
+commit 57406077e554d29e56a8a82c54ec7d41cdc07b79
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Apr 24 10:02:18 2003 +0000
+
+    Move the debug versions of the DRM memory functions to a new file and
+        implement non-debug ones as standard.
+
+commit a41594e8dfa029cfba9c518d6c21551f5e0857bc
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Apr 24 09:41:33 2003 +0000
+
+    Remove #if 0'd code and some unused string functions
+
+commit 01178567ebc428fcf8eb53a62b5ca9c449980491
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Apr 24 06:19:54 2003 +0000
+
+    Remove more gamma DMA code. This isn't all of it, but it's a major portion.
+
+commit c6d2af70cb30a5cc65aebae2637313158a95346e
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Apr 24 05:56:44 2003 +0000
+
+    Move some common code from addbufs_<type> to addbufs. Make buf_alloc be
+        protected by the count_lock and make it non-atomic.
+
+commit af3bfdef26b2d02ea4877e3d57601e57ffa4e95a
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Apr 24 05:14:05 2003 +0000
+
+    Remove the ioctl_count variable from the device. A reference is held to the
+        fp throughout the ioctl syscall, so the device can't be closed out from
+        under us.
+
+commit bcd527ee71043478d27ec3e5b611c9f34bf4f191
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Apr 24 04:50:07 2003 +0000
+
+    Remove a bunch of dead code and fix spelling of a couple of comments.
+
+commit 00522cedd6ee3027d2858909d34e862fa21e6e28
+Author: David Dawes <dawes@xfree86.org>
+Date:   Thu Apr 24 03:01:40 2003 +0000
+
+    Single/dual rasterizer quiescence patch for the glint/gamma DRI driver
+        (#5685, Sven Luther).
+
+commit 9d603b0abe3d1ab2a383ee9f33f27900f9eb1d5e
+Author: David Dawes <dawes@xfree86.org>
+Date:   Thu Apr 24 02:56:06 2003 +0000
+
+    break long line
+
+commit 9b2b2337b3caa006fa95eecb966b8a68eed83b90
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Apr 24 00:46:03 2003 +0000
+
+    Move one definition to drm_drv.h and remove the rest of drm_init.h which
+        was all unused.
+
+commit e21473c88853bb6f539ecca1c76e692d748bb722
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Apr 24 00:37:35 2003 +0000
+
+    Remove DRM_DMA_HISTOGRAM and associated code.
+
+commit 1fc0a5e1e4c43a0e9fe8b0d9860f22ae8e820d46
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Apr 24 00:25:36 2003 +0000
+
+    Make DRM(read) and DRM(poll) stubs and remove DRM(write) and
+        DRM(write_string). This is the first part of removing much of the
+        support code for gamma from the BSD DRM, since it appears that no new
+        drivers are using it and nobody has ever shown interest in gamma on
+        BSD.
+
+commit e15b0b6a1b95e4145363b15e1a581ee230b2f9a2
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Wed Apr 23 23:42:29 2003 +0000
+
+    Install dummy/noop read & poll fops unless the driver has replacements.
+
+commit 23a76c37594d3d423963c7b8610b64367e3ff9d8
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Wed Apr 23 14:21:17 2003 +0000
+
+    deal correctly with read() from the DRM failing
+
+commit d5db1144dd5cb96b7e25d0e08a209b38e0afdc9b
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Tue Apr 22 21:45:06 2003 +0000
+
+    get rid of superfluous fields in struct drm_radeon_ring_buffer
+    use correct address for ring read pointer writeback (yes, we seem to have
+        been running with bogus values for the ring read pointer, which
+        'worked' because the return value of radeon_wait_ring() is never
+        checked and the ring usually never fills up)
+
+commit 5ee61c18f4866bd9257bdc5eddefe6e58e0a1849
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Tue Apr 22 21:30:24 2003 +0000
+
+    Remove AGP dependency in kernel config for radeon, sis. Remove
+        PCIGART_ENABLED define for radeon, pcigart support now included for any
+        arch.
+
+commit 22608a414d7b7ef32ca51b9123be8341ddd5e8ce
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Tue Apr 22 19:42:27 2003 +0000
+
+    Only mga, i810, i830 require AGP (should mga define __MUST_HAVE_AGP?)
+
+commit 879e3d335c09bfe069948754600543291e8f8475
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Apr 22 12:52:17 2003 +0000
+
+    change PREINSTALL/POSTINSTALL/UNINSTALL irq code to real functions as per
+        the other drivers
+
+commit 9c5d16216d35d4b815471ff62de79f7fff2b2a2c
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Apr 22 12:42:22 2003 +0000
+
+    remove unused variable
+
+commit 0782f0df60b0544a8fb784aa253a4f57f9dfdeeb
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Apr 22 12:41:16 2003 +0000
+
+    fix gamma headers
+
+commit 73e20998b46bd8aa6ac903bc4701711d9a527f63
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Apr 22 12:14:59 2003 +0000
+
+    Rename drm_lists.h to gamma_lists.h
+
+commit 700e880c3dbaf3532287ad423f3158adbac85fb7
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Apr 22 12:07:43 2003 +0000
+
+    new file
+
+commit 928c25d14f76ff537bd56f135b91cf681dee326b
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Apr 22 12:07:24 2003 +0000
+
+    Move the excitingly named DRM(flush_block_and_flush) and friends to
+        gamma-specific code.
+    Fix templates so i8x0 drivers don't have to define __HAVE_DMA_WAITLIST.
+
+commit aba6bf7eb3cd53137fab4424ff39e2d68b83dc2a
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Apr 22 11:39:34 2003 +0000
+
+    remove unused __HAVE_KERNEL_CTX_SWITCH code
+
+commit a1780925fb461c736bae7e51de0d3a1e909548f2
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Apr 22 11:31:55 2003 +0000
+
+    Move a chunk of gamma-specific code out of drm_dma.h. Remove unused
+        'DRM_FLAG_NOCTX' option.
+
+commit 056762a9104997569b09416c35d9a0bfef175e1f
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Apr 22 10:18:29 2003 +0000
+
+    remove unused dma histogram code
+
+commit 5141da97f680235d10d74737d5444963d2080072
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Apr 22 10:13:14 2003 +0000
+
+    Move a bunch of gamma-specific code into a gamma-specific file. Restore the
+        kooky DRM(write_string) code for gamma.
+
+commit 13211ad82c184e3daf68c06203412d3f1c949291
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Apr 22 09:49:14 2003 +0000
+
+    add more get_param queries for embedded project
+
+commit fc4fb6b51b50e37ff697e872b297b6460c3617af
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Apr 22 08:06:14 2003 +0000
+
+    remove DRM read, poll and write_string
+
+commit 46e06192a88834a97257d2be5ab3aa7c325a1cfe
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Mon Apr 21 16:07:17 2003 +0000
+
+    Check for NULL map before calling DRM(ioremapfree) on cleanup. Prevents an
+        oops if a map wasn't found (e.g. XFree86 Bugzilla #108)
+
+commit da35a90d99cf56a8ffc48f87754013d13e1cafcd
+Author: David Dawes <dawes@xfree86.org>
+Date:   Thu Apr 17 18:52:05 2003 +0000
+
+    Add a Kconfig file as used in recent 2.5.x kernels.
+
+commit 21af3202874b5938e9c262a906f1eaba08e74b6e
+Author: David Dawes <dawes@xfree86.org>
+Date:   Thu Apr 17 18:48:06 2003 +0000
+
+    Make Config.in look more like a recent 2.4.x kernel version.
+
+commit dbb7beb51d8adb4b5616fbcca7999b00d760b839
+Author: David Dawes <dawes@xfree86.org>
+Date:   Thu Apr 17 18:44:38 2003 +0000
+
+    Rework the Linux drm kernel module build to leverage off the standard
+        kernel build system. This is based on suggestions and examples from
+        David Woodhouse. This approach has the advantage that the build
+        requirements of a wider range of standard kernels are now supported
+        transparently, but the disadvantage of some extra complexity to handle
+        building against clean vendor-distributed kernel source trees. This has
+        been tested with some recent Red Hat and SuSE distributions.
+
+commit c2d7ff1bf98f92add98fb76b63d2bdb190f3cf2c
+Author: David Dawes <dawes@xfree86.org>
+Date:   Thu Apr 17 18:41:28 2003 +0000
+
+    Bring some drm module changes over from the XFree86 trunk:
+    - Reset 'bound' flag for an agp entry after undbind succeeded in
+        drm_agpsupport.h (Egbert Eich).
+    - Ignore hw_lock for drm device if lock was set by a different instance (ie
+        Xserver) to prevent second server from spinning in driver release
+        function (currently only relevant for i8xx drm drivers) (David Dawes).
+    - Use the agpgart "key" for the unique handle for bindings rather than the
+        memory address (the key is guaranteed to be unique) (David Dawes).
+
+commit d1b7f551e6d582cd9c44d23883de1f6121907627
+Author: David Dawes <dawes@xfree86.org>
+Date:   Thu Apr 17 15:27:34 2003 +0000
+
+    Fix DRM module build on 2.5.41 and later kernels (tqueue -> workqueue).
+
+commit 48e389f3a5109383ca71c6c7f743b5107965f1d9
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Thu Apr 10 14:58:53 2003 +0000
+
+    file drm_pci.h was initially added on branch mach64-0-0-5-branch.
+
+commit 244d4faa1d537a01292c4d2cf6c025b41710908d
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Apr 8 04:43:29 2003 +0000
+
+    file mach64_drv.c was initially added on branch mach64-0-0-6-branch.
+
+commit 353c84d2ddd2b4aff288a5ffd4a766e928322b28
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Apr 8 04:23:49 2003 +0000
+
+    file Makefile was initially added on branch mach64-0-0-6-branch.
+
+commit 12a52fd8269a07103b6328483577f2487fd7cd01
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Apr 8 04:09:47 2003 +0000
+
+    file drm_linux_list.h was initially added on branch mach64-0-0-6-branch.
+
+commit 10444e06d4f4edaf8e8cd9370f450ce7c047efac
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Tue Apr 8 01:30:43 2003 +0000
+
+    Use list_entry() to get container struct from struct list_head pointers.
+        Build fix for RedHat 9 kernel (5 args to remap_page_range()).
+
+commit 3f7769921bd414f489d4487a5760a8d814efd51d
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Sat Apr 5 19:49:16 2003 +0000
+
+    add 'SG' map type identifier string (pci scatter/gather) to /proc vm info
+
+commit 6f88a5351c3f0b8e657708b64060adb833c8a919
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Apr 1 18:53:24 2003 +0000
+
+    Whitespace and remove a dead commented line.
+
+commit 8e51112fe06cc92a7e4d415c897d53008a935554
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Mon Mar 31 04:14:35 2003 +0000
+
+    Warning fix (use %p format for filp)
+
+commit 8926acac37025cd89dae2308c566c778fa1cc406
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Mar 30 07:23:03 2003 +0000
+
+    Spelling fixes in comments.
+    Submitted by: Linus Torvalds <torvalds@transmeta.com>
+
+commit aea0418d0db3338b81f83abf26df99dfd7ac85bc
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Mar 29 18:22:28 2003 +0000
+
+    Remove dead vma code and remove the unused devstate struct definition.
+
+commit 6ef79263b68402687ccc2b7447dd908c00e35057
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Mar 29 03:38:47 2003 +0000
+
+    Add DRMFILE definitions and supply filp for BSD in the
+        post-drm-filp-0-1-branch world. The filp is a void * cast from the
+        current pid. This is a temporary solution which maintains the status
+        quo until a proper solution is implemented.
+    What is really needed is a unique pointer per open, hopefully with a device
+        private area. This can be done in FreeBSD for all entry points except
+        mmap, but is difficult (sys/dev/streams/streams.c is an example). I
+        have partially completed code for this but have not had time to debug,
+        so this is a temporary fix.
+
+commit e27d2f8c7cacf1e9994e9030c7ebb15dc4f4efff
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Mar 29 03:30:21 2003 +0000
+
+    buf->filp is a pointer, so make printf format args be %p not %d
+
+commit 1728bc637df023cce7b5abfeab2796ea481ca7e9
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Fri Mar 28 14:27:37 2003 +0000
+
+    merged drm-filp-0-1-branch
+
+commit 37cb114bd92a17112033f4838e86857bcd466024
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Wed Mar 26 16:37:47 2003 +0000
+
+    Add 2nd arg for DRM_FREE
+
+commit b3eb34e0ea0ec7c550df5fd6b25efcf9e35c53cd
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Mar 25 11:36:43 2003 +0000
+
+    linux merge for drm
+
+commit c14006ba9f0522875327998215150067d8ca6ea7
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Mar 25 00:29:14 2003 +0000
+
+    XFree86 4.3.0 merge
+
+commit 0bd0dd2300e91707ae5a41a83eb37217fd8ad295
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Mar 11 20:51:28 2003 +0000
+
+    Merge back from FreeBSD-current, adding FreeBSD ID tags to aid future
+        merging. Also includes an update to radeon PCI IDs.
+
+commit 638d45d2a0f5101e0b10a4f2761f9e25d2872055
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Mar 8 05:05:41 2003 +0000
+
+    Make dma_addr_t an unsigned long not a uint32, don't try to use memrange
+        functions on FreeBSD non-x86, and remove a dead define.
+
+commit bf4b8ba753807eac22e7b14a5581c3c883d9473c
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Mar 6 19:21:23 2003 +0000
+
+    Remove the vbl signal code because it's untested (and has lock issues on
+        -current).
+
+commit a01d26f39d7e1fcf0ffafc04df832f72ae3d3896
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Mar 5 06:06:27 2003 +0000
+
+    Put cdevsw initialization in line with FreeBSD-current. (From r1.10,r1.11
+        of FreeBSD CVS)
+
+commit 3f786dbd1827d4f399bdf71e57d970ea8124bb0c
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Mar 5 06:04:50 2003 +0000
+
+    Update mmap handling for FreeBSD-current (Based on r1.3 of FreeBSD CVS).
+
+commit 1434bfe4a8e5fb7b6e8f52d3a732582e61216f68
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Mar 5 04:14:52 2003 +0000
+
+    Remove a paste-o in DRM_SPINUNINIT and add a volatile to the compatibility
+        atomic_cmpset_int.
+
+commit 51e5f73d2a4020a1bae860057bae2b0eff8e9c70
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Mar 4 11:41:12 2003 +0000
+
+    DRM_FREE/2 patch from Philip Brown
+
+commit 708ecd0e4b4b1bc2f78dbb4e004bb4d5ec3effe8
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Sun Mar 2 21:44:26 2003 +0000
+
+    file savage_drv.h was initially added on branch savage-0-0-1-branch.
+
+commit 2254ac21b8087c60fbf7d479ba3de2a1e7ac3d17
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Sun Mar 2 21:44:26 2003 +0000
+
+    file savage_drm.h was initially added on branch savage-0-0-1-branch.
+
+commit ef6838e92e53530077f3fa946434306b8addde3e
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Sun Mar 2 21:44:26 2003 +0000
+
+    file savage_bci.c was initially added on branch savage-0-0-1-branch.
+
+commit eb0fd431c82b494cf62012b43306fa7a836f3865
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Fri Feb 28 19:39:46 2003 +0000
+
+    Update object targets
+
+commit 40de83c52cab6d343533ca0879a062b75ae7d096
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Thu Feb 27 12:52:42 2003 +0000
+
+    file savage_drv.c was initially added on branch savage-0-0-1-branch.
+
+commit 1c3f7049057fcbc05a1c64e92329daf754c64691
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Thu Feb 27 12:52:42 2003 +0000
+
+    file savage.h was initially added on branch savage-0-0-1-branch.
+
+commit 40bae8bec876086a61763012508298398b27b7c4
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Wed Feb 26 09:49:54 2003 +0000
+
+    file mach64_irq.c was initially added on branch mach64-0-0-6-branch.
+
+commit b487f30ea5c129eed1dd85f7ad79db3d2485b1f8
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sat Feb 22 18:40:12 2003 +0000
+
+    Fix build on NetBSD.
+
+commit cfa778af9c70faea8c13e5cb7f80029eee0d074e
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Feb 21 23:23:09 2003 +0000
+
+    Merge from bsd-4-0-0-branch.
+
+commit a64472d18493de575a7636704b45babe7b4b4572
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Feb 16 19:03:04 2003 +0000
+
+    file mach64_drm.h was initially added on branch mach64-0-0-6-branch.
+
+commit 5bf6a26aeb2a89b4ed599361f60cb68bf45e3956
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Feb 16 19:03:04 2003 +0000
+
+    file mach64_state.c was initially added on branch mach64-0-0-6-branch.
+
+commit bd6120a28c30fa0b62c8c07a2fc7a6790834abf3
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Feb 16 19:03:04 2003 +0000
+
+    file mach64_drv.h was initially added on branch mach64-0-0-6-branch.
+
+commit afcfefa6dc296b4863b1c83ebcf8143750af65ad
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Feb 16 19:03:04 2003 +0000
+
+    file mach64_dma.c was initially added on branch mach64-0-0-6-branch.
+
+commit 314d1d2cbee3fe0851d914c57cc09bf388e8ac37
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Feb 16 19:03:04 2003 +0000
+
+    file mach64.h was initially added on branch mach64-0-0-6-branch.
+
+commit 639c2d813f91c80aca66b13242b8d45a1ea986e8
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sat Feb 8 18:02:02 2003 +0000
+
+    reclaim DMA buffers in DRIVER_RELEASE() (Felix Khling)
+
+commit fac2ed4d10e4d8283f818989df5d5722a447aac4
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Thu Feb 6 18:20:00 2003 +0000
+
+    fix EAGAIN handling in radeon_cp_dispatch_texture() (fixes corruption of
+        large textures), and get rid of superfluous local y variable
+
+commit b88cc5da26cf1478e425a6398456b52e27f53626
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Tue Feb 4 19:28:52 2003 +0000
+
+    disable strict aliasing for building the DRM
+
+commit 73bf29a6c14d12f86fbce48f6f6bace0de6732a6
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Tue Feb 4 19:20:18 2003 +0000
+
+    fix PCI and AGP posting problems (based on testing by Chris Ison and
+        suggestions by Benjamin Herrenschmidt and Arjan van de Ven)
+    remove radeon_flush_write_combine() which has been unused for a while
+
+commit f13af50838a2a207269ef46c3561ca1250dc6c12
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Tue Feb 4 15:56:37 2003 +0000
+
+    only acknowledge interrupts we handle - others could be used outside the
+        DRM
+
+commit f3751850c8b5b4216c460474147e0dcfc26a144e
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Mon Feb 3 14:30:32 2003 +0000
+
+    Fix size of VERTEX2 ioctl struct (Egbert Eich)
+
+commit c7d471b6ae936127311a816a8d15b4565746af48
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sun Feb 2 03:06:47 2003 +0000
+
+    don't inflate relative vblank sequence numbers on repeated calls (e.g. when
+        interrupted by a signal)
+
+commit 9b9b099471580616e1685bae725f2c297179ae99
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Sun Jan 26 22:25:35 2003 +0000
+
+    Add cast to avoid void * arithmetic warning
+
+commit 66f57c403c012f55126817bc21d40346d29d2d35
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Jan 24 00:49:15 2003 +0000
+
+    Fix build on -current: Provide M_WAITOK define.
+
+commit 77ea378b09a86a9fe73d0ecef40f5570068c9af0
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Jan 16 06:20:44 2003 +0000
+
+    Fix radeon for BSD.
+
+commit 826aad0aba648befe09592f154f75db5009a0cd9
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sat Jan 11 20:58:20 2003 +0000
+
+    limit number of pending vblank signals to 100 to prevent DoS, and minor
+        cleanups
+
+commit 6f940bc3f8aeb09925354445e92e9c0e74515b13
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Sat Jan 11 05:42:37 2003 +0000
+
+    file agp_30_symbols.h was initially added on branch agpgart_2_0_branch.
+
+commit a1fc6af2d8937fcc4eef25119d777e168e62b2ea
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Fri Jan 10 17:04:21 2003 +0000
+
+    Note that radeon_do_cp_idle() can fail, cope with it.
+
+commit 4b3051d3f606faf1a78ac85236119a1d2e10fdc7
+Author: Rik Faith <faith@alephnull.com>
+Date:   Mon Jan 6 07:38:25 2003 +0000
+
+    [TRIVIAL] [TRIVIAL PATCH 2.5.48] Remove unused function from radeon_mem.c
+        Submitted by Rusty Trivial Russell
+
+commit 320802ebc145c0b821979dc587cd7e90b10b2d55
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Fri Jan 3 11:22:23 2003 +0000
+
+    more cleanups, free mem heap data on last client exit
+
+commit 7419aa6e3f639ee47879824f387117d28b4de013
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Jan 2 18:59:43 2003 +0000
+
+    Bump radeon drm version nr on recent interface relaxation
+
+commit 14e831baf4ea2a412c9173cd9ec16b4928284232
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Jan 2 18:41:02 2003 +0000
+
+    Remove printk
+
+commit 208c0779b65242159bbb87153269faef9370670c
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Jan 2 18:38:07 2003 +0000
+
+    Make the radeon drm module better at cleaning up after itself if all the
+        clients (particularly the X server) exit without doing so for it.
+
+commit ab9eb685c002bc875e9a7d81b7ac7bd5fd0be1d4
+Author: David Dawes <dawes@xfree86.org>
+Date:   Mon Dec 16 19:18:51 2002 +0000
+
+    file i830_irq.c was initially added on branch mesa-4-0-4-branch.
+
+commit 05f761fa4fe6d9b34b44e7cfe57a8e11263b0e3c
+Author: David Dawes <dawes@xfree86.org>
+Date:   Thu Dec 12 22:20:30 2002 +0000
+
+    enums should be ints
+
+commit 786228bd26d56c13fc2655431ee5ca2d4d0c9863
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Dec 12 16:45:31 2002 +0000
+
+    bring in jantorial changes from 2.5.51
+
+commit fd621fd4a0c0033365353b6d33f132c7ef49b359
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Wed Dec 11 13:40:27 2002 +0000
+
+    remove agpgart informational
+
+commit b03fa556b2c7e19d7021c017e35aaacaf24e5694
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Fri Dec 6 12:22:43 2002 +0000
+
+    Rewrite radeon_cp_dispatch_texture() to avoid pingponging back to userspace
+        when issue large (multi-buffer) uploads.
+
+commit a885d6786f40fd0c4dbcb09a17f6e103d0949ed7
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Dec 6 02:27:30 2002 +0000
+
+    Add vblank signal code for BSD DRM. Untested so far, but working with a
+        4.2.0 userland at least.
+
+commit 85025d4f2ad25258fb7678395b8c7ce1be1f0063
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Wed Dec 4 15:39:53 2002 +0000
+
+    further vertical blank interrupt cleanups: remove unused variable,
+        non-ambiguous variable names, don't express subtraction in
+        unnecessarily complicated ways
+
+commit 4acba63bb7045e6bf665580cf6cea111f0786f77
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Tue Dec 3 00:43:47 2002 +0000
+
+    vertical blank interrupt cleanups: use spinlock instead of semaphore, send
+        signal directly from interrupt handler instead of using a taskqueue
+        (based on feedback by Linus Torvalds)
+
+commit 40891ac190fb74f389ea1a9758249a2f642fd99b
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sat Nov 30 14:24:07 2002 +0000
+
+    vertical blank ioctl can send signal instead of blocking
+
+commit c869f4a1e59c4fa0bed5681cad5ad49e685603eb
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Mon Nov 25 16:03:20 2002 +0000
+
+    added missing return fd (Alexander Stohr)
+
+commit a654424ca16dca5d27e91592e2082d1381f6d5f5
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Mon Nov 25 09:34:47 2002 +0000
+
+    Silence the radeon_freelist_get 'returning NULL' message. It's not an error
+        & just confuses people.
+
+commit b96f48a89c8962343ee75b0961a06453d0f8b355
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sat Nov 23 11:58:33 2002 +0000
+
+    allow unprivileged clients to use the GETPARAM ioctl (Wang WenRui)
+
+commit e656655a361acf73c5652fcef8cf6ba61dfe7a50
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Oct 30 06:10:34 2002 +0000
+
+    Kernel support for vblank syncing on Rage 128 and Matrox.
+
+commit 344c7f6b412c19c963c33709f0d4a3a7205e1d79
+Author: Jens Owen <jens@tungstengraphics.com>
+Date:   Tue Oct 29 20:29:05 2002 +0000
+
+    updated e-mail addresses for Keith, Alan and Jens
+
+commit 5e1b8ed88ae8fb8b697515140f7a00d022ac2db0
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Tue Oct 29 13:49:26 2002 +0000
+
+    preserve CRTC{,2}_OFFSET_CNTL in 2D driver to avoid bad effects when
+        pageflipping after a mode switch
+    take current page into account in AdjustFrame(); writing the CRTC offset
+        via the CP was probably a bad idea as this can happen asynchronously,
+        reverted
+    take frame offset into account when flipping pages
+    handle CRTC2 as well for pageflipping (untested)
+    preserve GEN_INT_CNTL on mode switches to prevent interrupts from getting
+        disabled
+
+commit 10900dab7caa593a54d76e5f6abdc3df9bdd0a04
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Oct 29 03:20:21 2002 +0000
+
+    Use bus_alloc_resource/bus_release_resource more properly: save the rid
+        returned by alloc.
+
+commit ff25e7016c74ed0be5d47be5bf1937335da2bbf4
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Mon Oct 28 19:05:40 2002 +0000
+
+    merge from mesa-4-1-branch to get cube-map registers. bumped version to 1.7
+
+commit 516392beff156f87b466ff7931e5573a3a931ca0
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Oct 27 05:25:50 2002 +0000
+
+    s/udelay/DRM_UDELAY/
+
+commit 9f21f02217dd8b81886f042ce1af99d61de9a218
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Oct 27 05:24:33 2002 +0000
+
+    Catch up to -current.
+
+commit b3a20ce219b353aa3e2b7f3b47ffd28b279557c7
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Oct 22 23:38:53 2002 +0000
+
+    final part of XFree86 4.2.99.2 merge
+
+commit ff4baa69da278b7f616063f37fbd27febf3eb211
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Oct 22 13:43:45 2002 +0000
+
+    Import of XFree86 4.2.99.2
+
+commit 5e9fad35880e89d428ba917d842d0e9ed9a1be6b
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Oct 14 23:35:24 2002 +0000
+
+    Fix reversed test that broke vblank waiting on FreeBSD.
+    Pointy hat to: anholt
+
+commit 3d69766ea6df4ab1837f5270beafb13c70ec61e6
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Oct 10 08:25:40 2002 +0000
+
+    Jonny Strom's mga_dma.c patch
+
+commit 2af90a581d20c983446d354051f0f098a5d4eacb
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed Oct 9 16:29:01 2002 +0000
+
+    replaced max() macro with conditional expression
+
+commit aa1ca406d637a1eabbff272c0508bed5eb1147a1
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Oct 8 08:32:06 2002 +0000
+
+    Fix error condition...
+
+commit a653224403a9c85b1406697e725226e0d477042a
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Oct 8 08:29:47 2002 +0000
+
+    Call pci_enable_device() in DRM(irq_busid).
+
+commit 381e0fe7f8ee5a9500fdb91d83ce45915b64db5f
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Wed Oct 2 07:55:27 2002 +0000
+
+    Free correct block in free_block (K. Rasche)
+
+commit 8c14585fc33f2af781261303780c0df70fbe0db2
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Tue Oct 1 17:31:20 2002 +0000
+
+    fix wait condition for vertical blank IRQs
+
+commit 537f2208f00069913c161750baef82964d0e870e
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Sep 29 23:56:17 2002 +0000
+
+    Remove some noise being spit to the console.
+
+commit 506c1c02a43970e8ae891c9015eba7ab581d08f3
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Sep 29 23:21:55 2002 +0000
+
+    Make our set_bit and friends match linux better (cleans up some warnings)
+
+commit efda4ce3539c9adf5fc798bb5e0ba5e8ce804afb
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Sep 29 22:47:08 2002 +0000
+
+    warnings cleanup
+
+commit 33a51d8518c37833a83225b47ad0b435050edeae
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Sep 29 22:39:34 2002 +0000
+
+    Fix some of my silliness in DRM_WAIT_ON (not returning EINTR).
+
+commit 899df4f53009d8484648ca12133a6ef8b1bd2d52
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Sun Sep 29 21:22:01 2002 +0000
+
+    Turn boxes off again
+
+commit 9243e642dabc30ddf4b1743acb8cd4e9e905f351
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Sun Sep 29 21:19:01 2002 +0000
+
+    Move os-dependent stuff out of radeon_irq.c
+
+commit e6901cad696cf58ee9f1a48bdc7e9fa047824f8a
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Sun Sep 29 20:48:18 2002 +0000
+
+    Fix up BSD irq handling.
+
+commit ec48dfa83599fa6061bb9cc566f8d8dc1727aced
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sun Sep 29 00:12:28 2002 +0000
+
+    add support for 16K and 64K page sizes (Bjorn Helgaas)
+
+commit a33d42e2ba08a97a434c25980449f4e027d0072b
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Fri Sep 27 21:47:52 2002 +0000
+
+    make SW interrupts more robust: write sequence number to scratch register,
+        acknowledge any lost interrupts before waiting
+
+commit cc9a169d08c00975f623d717737b499defb4938e
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Thu Sep 26 12:49:18 2002 +0000
+
+    DRM(vblank_wait) is driver specific
+
+commit 97961e2c65773328fe9c2e1d66e4a0b8a253d54d
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Sep 26 07:45:07 2002 +0000
+
+    BSD vblank framework.
+
+commit 770d045d25728be51534b930afdfa36f3ffddbfc
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Sep 26 07:21:05 2002 +0000
+
+    Fix one warning.
+
+commit f40674ea9f3e3c17d632de90d7e35da5640a55b2
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Wed Sep 25 19:48:51 2002 +0000
+
+    change RADEON_PARAM_IRQ_ACTIVE to RADEON_PARAM_IRQ_NR
+
+commit 55acd0d5a64a2ee6b0cecc75872fbf8c4bb42a0c
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Wed Sep 25 17:18:19 2002 +0000
+
+    common ioctl to wait for vertical blank IRQs
+
+commit f1c8fe95578e15d5eece6ad52540ce2c7c671f70
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Mon Sep 23 17:26:43 2002 +0000
+
+    merged r200-0-2-branch to trunk
+
+commit cfa1a918b6d6b2d0fd9ae0f58f5b86a15c443dcb
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sat Sep 21 23:18:54 2002 +0000
+
+    make sure we never oops because the hardware lock pointer in the sigdata
+        structure is out of date
+
+commit c4318a5c642d15ad3847a0b7a3185abf0c1ca219
+Author: David Dawes <dawes@xfree86.org>
+Date:   Wed Sep 11 00:57:49 2002 +0000
+
+    - Fix various bugs in the DRI support for the i830 and i845G (Keith
+        Whitwell).
+    - Major rework of the 2D i830/i845G support, including:
+    - Improve VESA mode selection, and fix refresh rate selection.
+    - Don't duplicate functions provided in the vbe modules.
+    - Don't duplicate functions provided in the vgahw module.
+    - Rewrite memory allocation.
+    - Rewrite initialisation and save/restore state handling.
+    - Decouple the i810 support from i830 and later.
+    - Remove various unnecessary hacks and workarounds.
+    - Fix an 845G problem with the ring buffer not in pre-allocated memory.
+    - Fix screen blanking.
+    - Fix some HW cursor glitches, and turn HW cursor off at VT switch and
+        exit.
+    - Don't attempt to use the i830's function 1 entity.
+    - Fix problems with option handling. (David Dawes).
+    - Add mode VBE-aware mode handling functions to the vbe module (David
+        Dawes).
+
+commit 9797f0fd172c7d87e009dbfe7603c9df48509394
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Aug 30 23:49:25 2002 +0000
+
+    Remove some extra symlinking for kernel module building that hasn't been
+        needed since 2000.
+
+commit b248c02c4ffaaaef4c91d8024808c35bcbfa303b
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Aug 30 21:34:03 2002 +0000
+
+    Remove this one too: it'll be used from the linux version (if ever)
+
+commit d51ec6b9728e8da473fb06e23424a1f6c0ee8e9b
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Aug 30 21:06:21 2002 +0000
+
+    Remove compat functions for FreeBSD for drivers which weren't available in
+        X4.2
+
+commit be88ab60dfbacddbc424c7e6bc558abf13eafa9d
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Fri Aug 30 07:55:25 2002 +0000
+
+    file radeon_irq.c was initially added on branch r200-0-2-branch.
+
+commit 4fcde1efc16ef0849c7aa61d568ef5577e2f1920
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Aug 29 07:34:49 2002 +0000
+
+    standardize use of __FUNCTION__ (Linus)
+
+commit 22c1ca1fd5116d55c81bbfdeccd995dc19572a8f
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Wed Aug 28 08:47:39 2002 +0000
+
+    Turn boxes off.
+
+commit 8a8cfd38df9a48069c4ca56006d219e0eb8ca59c
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Aug 28 04:33:02 2002 +0000
+
+    Remove i8x0 files from the BSD side. These were not actually ported, and
+        when they do get ported most of them won't live in these directories.
+
+commit fa560b4847fc89aa68251236d3843b97518b1853
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Aug 27 12:16:32 2002 +0000
+
+    file radeon_mem.c was initially added on branch r200-0-2-branch.
+
+commit e4830ba553eda00783261073cf4082176b4c2fe2
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Aug 27 03:56:10 2002 +0000
+
+    Remove drm_linux.h, it's no longer used.
+
+commit 5e81d590d557672376795011b9d78e93d10e2f7f
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Aug 27 01:22:55 2002 +0000
+
+    Include non-radeon modules in the build.
+
+commit 48cc350e21acd2b4b03c76937e2861af5271435a
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Mon Aug 26 22:16:18 2002 +0000
+
+    merged r200-0-1-branch
+
+commit a697941d4c35e0287c51f1a5cad5c2aa32ae9159
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Thu Aug 22 19:35:31 2002 +0000
+
+    Don't (re)define vmalloc_to_page for kernel >= 2.4.19, as it has been
+        backported from 2.5.x. Also fix a couple of incorrect
+        LINUX_VERSION_CODE tests and fix header dependency for r128, radeon
+        when building without AGP.
+
+commit 2febcafd66adfe0728f93e4b9b2954d793f71459
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Thu Aug 22 18:43:39 2002 +0000
+
+    SetPageLocked only defined in 2.5.x (x=?), use LockPage for 2.4.x (x>=9).
+        Also apply build fixes from i810_dma.c to i830_dma.c
+
+commit 18d3fac990b9f3b5820306129feb5563b5d207f4
+Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
+Date:   Wed Aug 21 14:09:28 2002 +0000
+
+    Change the linux kernel version condition in the i810 driver (according to
+        Alan Cox)
+
+commit 77c35c043a8d50244d4fbaa4f2b5d0b7d4fd856f
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Aug 21 07:14:21 2002 +0000
+
+    Remove drm_linux.h, move the two useful defines into drm_drv.h (the only
+        place they're used). Use fd locking on -current. Actually copy in data
+        from userspace to kernel in the linux-compat ioctl path. Make sure
+        ioctl sizes are as expected in the ioctl handler functions.
+
+commit 8eedac58332094c72caf1fc6c41312e8ce1728b7
+Author: Leif Delgass <ldelgass@users.sourceforge.net>
+Date:   Wed Aug 21 01:14:43 2002 +0000
+
+    add missing include (for udelay), remove unused counter.
+
+commit 3165128fc461fdadf34b7f4bbd393fa076c1ae14
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Wed Aug 21 00:09:32 2002 +0000
+
+    TRUE and FALSE don't seem to be defined everywhere...
+
+commit 33d57137daece1bc5b1e8cc0a11e45a9d5974939
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Mon Aug 12 07:26:00 2002 +0000
+
+    zero-cliprect case patch from Jacek
+
+commit d0ac4e5ad0481eb634b3b811a94f4a2b6587e479
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sun Aug 11 15:56:44 2002 +0000
+
+    test scratch register writeback before using it
+
+commit d2f2b42f1d206fd248ada48ce2c498e31351ab33
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Thu Aug 8 21:23:46 2002 +0000
+
+    Try to open the /dev/dri/cardX device once, then only if it fails check the
+        device number and recreate it if necessary. Fixes xf86drm.c to allow
+        linux binaries to be used for emulation on FreeBSD.
+
+commit 977b420d5dc66db3d4335132861a1eff3747b49a
+Author: Rik Faith <faith@alephnull.com>
+Date:   Tue Aug 6 18:00:57 2002 +0000
+
+    Updates from Rusty Russell to:
+    1) Remove redundant header inclusion
+    2) Silence bitop on non-long argument warnings (change int to long)
+    3) Move to ISO C (gcc 2.6) initializers (accepted by older gccs also) All
+        of these are syntax changes that should not impact functionality.
+
+commit 881a9b214d033a1e153f61996645bdaa37eb87d8
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Thu Jul 18 23:17:13 2002 +0000
+
+    fix off-by-one error for right bottom corner in radeon_emit_clip_rect()
+        (Jacek Rosik)
+
+commit 8fa8db126a6aa180fd44ae0be0e720722af69e1d
+Author: Tim Smith <electronghost@users.sourceforge.net>
+Date:   Wed Jul 17 08:30:36 2002 +0000
+
+    Workaround for Radeon lockups on fast machines
+
+commit 9a3a3143ce41c72b4de2721cf16025f11ca334ca
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sun Jul 14 20:26:52 2002 +0000
+
+    bump DRM minor and check it before using the GETPARAM ioctl to obtain
+        scratch register values
+
+commit fd86ac9561dc77ef23e19d28723b40c72bdf1e97
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Thu Jul 11 20:31:12 2002 +0000
+
+    Don't read scratch registers directly, obtain the values via the GET_PARAM
+        ioctl. The DRM reads them from memory addresses the chip writes to on
+        updates. Fall back to reading the registers directly with an old DRM.
+    (Tim Smith, cleanups by myself)
+
+commit 2ec9c15d8ce45d95ef395a4fff114109c908a572
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Tue Jul 9 02:40:38 2002 +0000
+
+    Increase the linux-compatibility max ioctl.
+
+commit 9ceabc585a20a3f992f2b3852d476df81855967a
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Sat Jul 6 09:43:12 2002 +0000
+
+    remove obsolete files
+
+commit 59c07e447b18708757375d969f8eef5abd3c9a93
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Jul 5 08:58:15 2002 +0000
+
+    remove files missed by merge
+
+commit 74ef13fd009b9e37956e4207d0a5ed92f4b5e39a
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Jul 5 08:31:11 2002 +0000
+
+    merged bsd-3-0-0-branch
+
+commit 24025ca5f78c15ced14490532b4410730353d2c1
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Jul 4 12:03:15 2002 +0000
+
+    Fix some more pageflipping issues -- existing code was doing MMIO writes
+        while ring was active. There is still an MMIO read in there, but I
+        haven't seen any lockups that could be attributed to it.
+
+commit ca81e1334edebb90b0528baad089fbc6df937fb6
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Jul 4 11:55:44 2002 +0000
+
+    Revert SET_SCISSORS change.
+
+commit cc45cc060963356edd832d1bbdf21da46e01c8fb
+Author: Tim Smith <electronghost@users.sourceforge.net>
+Date:   Tue Jul 2 21:34:25 2002 +0000
+
+    Fix lockup on faster machines when drawing in multiple clip rectangles
+        (e.g. when part of a 3D window is obscured by another window)
+
+commit bb91bc0879ccc1981c49fa761e9bd58bceb1e5cd
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Jun 27 17:56:39 2002 +0000
+
+    Set pfCurrentPage on cleanup_pageflip
+
+commit 8aecdbea7660ae184827a0812fc4bbd953279c5b
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Jun 25 12:13:20 2002 +0000
+
+    gamma_alloc -> DRM(alloc)
+
+commit f626cf76e61313152e57334c7f172de97235d169
+Author: Max Lingua <sunmax@users.sourceforge.net>
+Date:   Tue Jun 25 11:20:36 2002 +0000
+
+    file s3v.h was initially added on branch s3virge-0-0-1-branch.
+
+commit 4cdcbd6c2f8f7026fbf2435001fc1e90de01505c
+Author: Max Lingua <sunmax@users.sourceforge.net>
+Date:   Tue Jun 25 11:20:36 2002 +0000
+
+    file s3v_dma.c was initially added on branch s3virge-0-0-1-branch.
+
+commit 4073aa694c2de2f65f37afef93abeab139c1aa30
+Author: Max Lingua <sunmax@users.sourceforge.net>
+Date:   Tue Jun 25 11:20:36 2002 +0000
+
+    file s3v_drm.h was initially added on branch s3virge-0-0-1-branch.
+
+commit 5f8b0028a26cdbe0996abc243602010ae8af755e
+Author: Max Lingua <sunmax@users.sourceforge.net>
+Date:   Tue Jun 25 11:20:36 2002 +0000
+
+    file s3v_drv.c was initially added on branch s3virge-0-0-1-branch.
+
+commit 688082d6564644f2f64a44105c872cc57476a1f6
+Author: Max Lingua <sunmax@users.sourceforge.net>
+Date:   Tue Jun 25 11:20:36 2002 +0000
+
+    file s3v_drv.h was initially added on branch s3virge-0-0-1-branch.
+
+commit 978136f2f4dd12d1828ab41db5343ce5fccd52a9
+Author: Max Lingua <sunmax@users.sourceforge.net>
+Date:   Tue Jun 25 11:20:36 2002 +0000
+
+    file s3v_regs.h was initially added on branch s3virge-0-0-1-branch.
+
+commit 663c9a152a868ca9e1dbd6ab000f2da273d737ea
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Jun 21 06:08:46 2002 +0000
+
+    file radeon_state.c was initially added on branch bsd-3-0-0-branch.
+
+commit 3fe7fb316c6f160ec8b6ef2a8ebf159e71cd2283
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Jun 21 06:08:46 2002 +0000
+
+    file radeon.h was initially added on branch bsd-3-0-0-branch.
+
+commit f8794f23f6d9318a9797949f1761119706baae42
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Jun 21 06:08:46 2002 +0000
+
+    file radeon_drm.h was initially added on branch bsd-3-0-0-branch.
+
+commit 1942da19d46f67afbdf3da8103f3260377bbbe89
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Jun 21 06:08:46 2002 +0000
+
+    file mga_dma.c was initially added on branch bsd-3-0-0-branch.
+
+commit baf55c1b8b5560104e29e5f4089ccdde4bb111db
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Jun 21 06:08:46 2002 +0000
+
+    file mga_drv.h was initially added on branch bsd-3-0-0-branch.
+
+commit df6e570e4de5e57173d4b3b63ddaa0ba1a11e15e
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Jun 21 06:08:46 2002 +0000
+
+    file mga_ucode.h was initially added on branch bsd-3-0-0-branch.
+
+commit 2a0545aa19db1d861290df07709cbd58a2a820f3
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Jun 21 06:08:46 2002 +0000
+
+    file mga_warp.c was initially added on branch bsd-3-0-0-branch.
+
+commit 0ca7468d0602e46aead3e645de714345cb75c5f3
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Jun 21 06:08:46 2002 +0000
+
+    file mga.h was initially added on branch bsd-3-0-0-branch.
+
+commit d29446a3002a8f60736ab3bcb7a1f22a8f2818f0
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Jun 21 06:08:46 2002 +0000
+
+    file mga_state.c was initially added on branch bsd-3-0-0-branch.
+
+commit 1c9c08717a09cdb5fa9b40e7ed43efa7f76b82f3
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Jun 21 06:08:46 2002 +0000
+
+    file radeon_drv.h was initially added on branch bsd-3-0-0-branch.
+
+commit 5dd77d6e49205ff5ac71d832de270681ba186558
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Jun 21 06:08:46 2002 +0000
+
+    file mga_drm.h was initially added on branch bsd-3-0-0-branch.
+
+commit a3ddb601df69116be8e40481471b523e163bf65b
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Fri Jun 21 06:08:46 2002 +0000
+
+    file radeon_cp.c was initially added on branch bsd-3-0-0-branch.
+
+commit 9e3d3c9541bc167831841156b99f31cfa5cb39be
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Jun 19 04:01:55 2002 +0000
+
+    file r128_state.c was initially added on branch bsd-3-0-0-branch.
+
+commit c4f11163699b1046ec51b27440154fd3ad4bb727
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Jun 19 04:01:54 2002 +0000
+
+    file r128_drv.h was initially added on branch bsd-3-0-0-branch.
+
+commit 89181b9c599988e9b46f2a3d1de5ec47b8cc8c43
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Jun 19 04:01:54 2002 +0000
+
+    file r128_cce.c was initially added on branch bsd-3-0-0-branch.
+
+commit 2015f551378e19bc3a1727de2c3f68cec4ac1a42
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Jun 19 04:01:54 2002 +0000
+
+    file r128.h was initially added on branch bsd-3-0-0-branch.
+
+commit 5465239b0c422b4f8c1ef13e4353877fa9229993
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed Jun 19 04:01:54 2002 +0000
+
+    file r128_drm.h was initially added on branch bsd-3-0-0-branch.
+
+commit 063d0a30c2a9899ae52d50ad5d37d6171e37e3f8
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Tue Jun 18 22:40:26 2002 +0000
+
+    endianness fixes
+
+commit 1cb07189420a529a43ad390731f8365a0805a9bd
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Mon Jun 17 22:18:00 2002 +0000
+
+    file drm_os_netbsd.h was initially added on branch bsd-3-0-0-branch.
+
+commit 2dcada361db7db00bf0796e399b4188578e3efbe
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Wed Jun 12 15:50:28 2002 +0000
+
+    merged tcl-0-0-branch
+
+commit 5676a2a6105afdfc343e7f36f3c87e528a9d14b3
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sun Jun 2 16:00:45 2002 +0000
+
+    fixes for big endian in general and powerpc in particular
+
+commit 6ac48cddd0a074c77de0ab3dfc1661352b6f0c26
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Wed May 29 21:21:50 2002 +0000
+
+    Import Mesa 4.0 port of I830M/I845G 3D driver funded by 2d3d. Import
+        Lastest i810 ddx driver changes from XFree86 CVS to support the I845G.
+        Fixup warnings in I830M kernel driver.
+    -Jeff
+
+commit 96b22f57ea9fa0dca36062d56c8f205e5b08fd84
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file r128_drv.c was initially added on branch bsd-3-0-0-branch.
+
+commit 8e2b1e79da105a406cc33d8bb3b8cab35337647e
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file mga_drv.c was initially added on branch bsd-3-0-0-branch.
+
+commit 468b72512aa0e70de60506e4f03ea6d365e56267
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file tdfx.h was initially added on branch bsd-3-0-0-branch.
+
+commit ba9503de430f8e0a34bf9ed8c2dc9a635959eeb0
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file i830_dma.c was initially added on branch bsd-3-0-0-branch.
+
+commit d1c2922d76ab81bde00e504b179a7afb39b6fc78
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file i830.h was initially added on branch bsd-3-0-0-branch.
+
+commit 8a0fe9be3463e9244055847e5cd4f8df485526e8
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file i830_drv.c was initially added on branch bsd-3-0-0-branch.
+
+commit dbf4b0aecb2d6efd9f9fafd3fd7c7eae6c59f3ba
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file i830_drv.h was initially added on branch bsd-3-0-0-branch.
+
+commit 205e33909d26b587e36527b3fae6c4ed9cddab34
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file i810_drv.h was initially added on branch bsd-3-0-0-branch.
+
+commit e8ba43d3ac7982cc16b4cdc81671375f41e66a6f
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file radeon_drv.c was initially added on branch bsd-3-0-0-branch.
+
+commit f6126878dce5bc800252c9a8d095e9ac30f4d5ca
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file i810_dma.c was initially added on branch bsd-3-0-0-branch.
+
+commit 8fc7367069eaf14e30010f5a56fc4cbac15e39da
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file i810_drv.c was initially added on branch bsd-3-0-0-branch.
+
+commit 8afc2de290e1aed0377c097d05077d9aac2e4897
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file i810.h was initially added on branch bsd-3-0-0-branch.
+
+commit 76c315e7e09e84b135033c7bad74b1297ee72fe6
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file gamma.h was initially added on branch bsd-3-0-0-branch.
+
+commit 073cf3ae4818f8f1b720dbc58bdcf61ce62d11e0
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file mga.h was initially added on branch bsd-3-0-0-branch.
+
+commit d10db84928384084d9ab17bcca3d2880ecd611de
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file mga_dma.c was initially added on branch bsd-3-0-0-branch.
+
+commit c5b8f939db83d8de9c983b622c6003eca36ea4d2
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file mga_drv.h was initially added on branch bsd-3-0-0-branch.
+
+commit abbe04f64fab2a9fa2099756b776ec634df9fd82
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file mga_state.c was initially added on branch bsd-3-0-0-branch.
+
+commit 8797372f642018de3b5d7142e9c9f51d4eab999d
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file mga_ucode.h was initially added on branch bsd-3-0-0-branch.
+
+commit 49a57237e029892ee788f059c99bad5ccf9df1a1
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file mga_warp.c was initially added on branch bsd-3-0-0-branch.
+
+commit 3ddd3c649de865d44ad737b8510d46ce273bd728
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file r128.h was initially added on branch bsd-3-0-0-branch.
+
+commit c57397bf62734000673411231c8ac2b35f731e39
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file r128_cce.c was initially added on branch bsd-3-0-0-branch.
+
+commit eea2997098406bfd5a9dd4f93034e5715d5a641e
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file r128_drv.h was initially added on branch bsd-3-0-0-branch.
+
+commit 47d39609fe713e57ab9c1391f5ac2c2be71594df
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file r128_state.c was initially added on branch bsd-3-0-0-branch.
+
+commit 3e15d0e63c67158742f2c5434333213923f7b0fe
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file radeon.h was initially added on branch bsd-3-0-0-branch.
+
+commit 731dbf2dfccbf44f375f58d7dda91d9b2f1ab9ce
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file radeon_cp.c was initially added on branch bsd-3-0-0-branch.
+
+commit c12d19453954dd2ade830fac50bd4669954c7aab
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file radeon_drv.h was initially added on branch bsd-3-0-0-branch.
+
+commit 69e99d05a29d91e87f32affdc4776f76552b5783
+Author: Eric Anholt <anholt@freebsd.org>
+Date:   Wed May 29 08:44:52 2002 +0000
+
+    file radeon_state.c was initially added on branch bsd-3-0-0-branch.
+
+commit cd375832813a66491f43c3f5e56ed74670955e43
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri May 17 08:35:47 2002 +0000
+
+    Remove some older Linux 2.3.99 code
+
+commit 91d7b17e82e8d8659405832a3cd1e7a904ad283f
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri May 17 08:21:34 2002 +0000
+
+    same udelay fixes
+
+commit 9e67da5626b683df58f2041fdb0f743eb4da7036
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu May 16 23:47:15 2002 +0000
+
+    Allow drm to build under 2.4 and 2.5(.14)
+
+commit 3903e5ac94c07cf31f0bc24eff5011ef8cc7afba
+Author: Jens Owen <jens@tungstengraphics.com>
+Date:   Tue Apr 9 21:54:56 2002 +0000
+
+    Merged drmcommand-0-0-1
+
+commit a820c741374743065540546c92b1d5e1a2089225
+Author: Jens Owen <jens@tungstengraphics.com>
+Date:   Fri Mar 29 16:31:52 2002 +0000
+
+    file xf86drmCompat.c was initially added on branch drmcommand-0-0-1-branch.
+
+commit 31c885bafb47e24b8523dcc2850ce4acc8ef1004
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Mar 18 19:21:14 2002 +0000
+
+    file trident_drv.c was initially added on branch trident-0-0-1-branch.
+
+commit f0e215d3f946321fadad62cbc4e380b9f30ceb49
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Mar 18 19:21:14 2002 +0000
+
+    file trident.h was initially added on branch trident-0-0-1-branch.
+
+commit 2ab6ff71900ad068f6d5b8ee42743e13c928cedf
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Mar 11 11:26:13 2002 +0000
+
+    fixups for *BSD
+
+commit baef086c324769010f0d164c0fe03105d9e474e1
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Fri Mar 8 16:03:37 2002 +0000
+
+    Fix backwards compatibility bug, add tests for good numbers of
+        vertices/prim.
+
+commit 6a1941aa2431f3f4febb0f7aa3df127976eea33f
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Mar 8 09:00:12 2002 +0000
+
+    missing file
+
+commit 271830e9b6f32f66ffa62d55fafb21b5892ab122
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Mar 6 20:14:30 2002 +0000
+
+    fixup the radeon driver (not tested)
+
+commit 5e734a7ac85f7bd8b333a28cf26745d1960a3a43
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Mar 6 19:31:39 2002 +0000
+
+    i830 & mga contain minor changes from 4.2.0 for mesa 4.0 bsd merge
+
+commit 46cacdca855a99c1ffe0ccf7a7f88134bca9bade
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Mar 6 19:30:45 2002 +0000
+
+    first pass at merging mesa 4.0 kernel drivers into new bsd-3-0-0 branch.
+
+commit ab87c5d0d1b5c35006ce8b99a9260e3116c732dc
+Author: David Dawes <dawes@xfree86.org>
+Date:   Thu Feb 14 02:00:26 2002 +0000
+
+    First pass of mesa-4-0 branch merge into trunk.
+
+commit 65d25572deec33b7da13c211bf0aa78c361f535a
+Author: Michel Daenzer <michel@daenzer.net>
+Date:   Sat Feb 2 17:03:51 2002 +0000
+
+    wrapper for ioremap_nocache() like for ioremap() (Paul Mundt)
+
+commit 44aa4d6297874022a4f5a49ea24f2d052584d3dc
+Author: David Dawes <dawes@xfree86.org>
+Date:   Sun Jan 27 20:05:42 2002 +0000
+
+    First pass merge of XFree86 4.2.0 import.
+
+commit 14945ada16218e9f918c24e0d702979fae9b07f6
+Author: David Dawes <dawes@xfree86.org>
+Date:   Sun Jan 27 18:23:04 2002 +0000
+
+    Import of XFree86 4.2.0
+
+commit 16bd14926e02e4dbc6e74689bdb3eb90f30a0233
+Author: David Dawes <dawes@xfree86.org>
+Date:   Sun Jan 27 18:23:04 2002 +0000
+
+    Initial revision
+
+commit f18a6d836b5e0081dff9217b44e88e74c421c576
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Dec 10 23:29:37 2001 +0000
+
+    merge with linux kernel 2.4.15
+
+commit 727abee235478a66c90a8cd097f85307e232524a
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Tue Nov 27 11:43:12 2001 +0000
+
+    Put back i810 major version number (same reasons as for r128)
+
+commit 13e11e1f94ce2fcf2ce86be1400b644560cb066c
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Mon Nov 26 13:28:38 2001 +0000
+
+    Put drm version back from 3.0 to 2.2; XFree86 4.1 is the baseline for
+        versioning information.
+
+commit 05fb3e93f2f99a1ace1444c8f0669067f553504b
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Nov 2 17:40:11 2001 +0000
+
+    wrap the MODULE_LICENSE definition.
+
+commit 92ad1b60e109170e1fa7d22a4627efa7fa77aa71
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Oct 22 19:15:04 2001 +0000
+
+    merge kernel 2.4.13-pre6.
+
+commit 87ec138e1421f408c0fa86fa3567544dd488711e
+Author: Manuel Teira <mteira@users.sourceforge.net>
+Date:   Sun Oct 21 21:08:15 2001 +0000
+
+    file mach64.h was initially added on branch mach64-0-0-2-branch.
+
+commit bdd84e895838328d5a7f20e7063c49cd6f300fd0
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Oct 8 12:58:20 2001 +0000
+
+    commit Abraham vd Merwe fix.
+
+commit ca820fca877faf4776be142417795a5945c606e6
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Sep 25 09:32:16 2001 +0000
+
+    merge with 2.4.10 kernel
+
+commit 390440c9399a3c01811f3b37c2628d6e905656e8
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Sep 18 11:00:23 2001 +0000
+
+    remove Linux 2.3.x cruft.
+
+commit b1c44c8ac1cfd7927d96fdd9dce15a9996c14073
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Sep 17 21:12:10 2001 +0000
+
+    bumped the DRM versions (already done in ddx and client side drivers).
+
+commit 2fabe808274e5769fbc2b871e36e06fab2364208
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Sep 17 10:30:17 2001 +0000
+
+    Use CCE for 2D acceleration (Gerd Knorr)
+
+commit 9e69d0dac61cc20ed20281bfa5b7e12124fa3989
+Author: David Dawes <dawes@xfree86.org>
+Date:   Sat Aug 25 03:13:04 2001 +0000
+
+    - Remove the rest of the unneeded client-side libraries.
+    - Use installed libraries that are not built here.
+    - Don't build/install client-library related file and headers.
+
+commit 27e24cbc0ad561b8dabad08dfd89ca0dfaa7449d
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Aug 24 11:09:50 2001 +0000
+
+    file convert.c was initially added on branch bsd-2-0-0-branch.
+
+commit c6bf9bae8ec49987c66dadd5f9313cc13eb5832e
+Author: David Dawes <dawes@xfree86.org>
+Date:   Wed Aug 22 18:24:52 2001 +0000
+
+    First part of XFree86 4.1.99.1 merge.
+
+commit 2f060f44e0eb617059bf9301e62a0d2c202ddee1
+Author: David Dawes <dawes@xfree86.org>
+Date:   Wed Aug 22 18:00:47 2001 +0000
+
+    Import of XFree86 4.1.99.1
+
+commit 063fe900aa895ff2b342843d68c003650b83c8c3
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Tue Aug 21 21:54:04 2001 +0000
+
+    file drm_ioctl_table.h was initially added on branch mesa-3-5-branch.
+
+commit f4c2f1400203434d9a5392b990aaa4fa32dce9c5
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Sun Aug 19 15:20:08 2001 +0000
+
+    No one's maintaining 2.2.x support - so remove all the cruft.
+
+commit 8aaf82d45c406220d5f18168e4350827a9e038e2
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Tue Aug 14 00:35:07 2001 +0000
+
+    A few warning fixes when actually building under 2.4.9-pre2 + some
+        reformating
+
+commit aa09e3611490d6a2f12f211c3c834f1237126313
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Mon Aug 13 23:23:47 2001 +0000
+
+    Sync with Linus 2.4.9-pre2 + make all nopage routines more alike
+
+commit 2d4b2cf6f69de2ceaf0c2b00ccbb24aad412b202
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Sat Aug 11 15:48:00 2001 +0000
+
+    new multihead code was missing Voodoo3 2000 and Voodoo4 support.
+
+commit 97b8aa52bba602d5babe225983f7e4c7cb4d7492
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Fri Aug 10 16:29:21 2001 +0000
+
+    Commit Keith Owens kernel Makefile changes, merge and commit alpha patch
+        set from Jay Estabrook (sans some mga modifications which broke other
+        arch's.)
+
+commit b6923b39539c34c2a589197def5eee72a9d719bf
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Wed Aug 8 16:10:47 2001 +0000
+
+    Update to the code I sent Linus and Alan this morning. Added some missing
+        agp chipsets to drm_agpsupport.h, redid the card detection common code
+        to use a structure (avoids endian porting issues), changed the tdfx
+        driver to use the kernel pci id '#defines'
+
+commit 938a637d1fc33bc8ef14210d655c27d646ddc2d2
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Tue Aug 7 18:22:41 2001 +0000
+
+    Avoid compiler warning about r_list being used uninitialized.
+
+commit 51e38d96ead5700c25c4fddd8017dc7992e96f5a
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Tue Aug 7 18:15:10 2001 +0000
+
+    Lots of DRM fixes: added new pieces of template code so the ffb driver can
+        be ported, rolled back r128 and i810 version bumps so 4.1.0 works with
+        cvs kernel modules, added Config.in and updated Makefile.kernel,
+        incorporated lots of drm fixes inspired by patches sent by Redhat, made
+        DRM(realloc) usage check for NULL allocations, restructure driver init
+        routines to export dev_priv only when initialized and to check for all
+        error conditions.
+
+commit 56bd9c207770d41a497f3e8237a1099dd9d4cd91
+Author: David Dawes <dawes@xfree86.org>
+Date:   Mon Jul 30 19:59:39 2001 +0000
+
+    Merge the multihead-1-0-0 branch into the trunk, with the exception of the
+        glide header files.
+    The changes include:
+    - Brian Paul's changes to the tdfx client-side 3D driver to make it
+        dlopen() the correct glide library (Voodoo3 or Voodoo5). This allows
+        both types of the glide library to co-exist, and allows Voodoo3/Voodoo5
+        cards to be mixed in multi-head configs.
+    - DRM kernel driver changes to allow a driver to set up multiple instances
+        (minor numbers), one for each card present that the driver supports.
+        This is currently implemented and tested only for the tdfx DRM driver.
+    - Add some missing missing <stdarg.h> includes.
+    - Some log message cleanups.
+    - Change the 2D tdfx driver to access VGA legacy registers via their PCI
+        I/O space access points rather than their legacy addresses, and fix
+        some problems with the way the VGA-related bits are initialised.
+    Status:
+    - With these changes, multi-head direct rendering works with multiple
+        Voodoo3 and/or Voodoo5 cards. This has been tested with two PCI Voodoo3
+        cards and an AGP Voodoo5 card, and all permutations of those.
+    Caveats:
+    - Xinerama is not supported. If Xinerama is enabled, then direct rendering
+        gets disabled.
+    - The text mode on secondary screens will show junk after the X server
+        exits.
+    - On some hardware, starting the X server on multiple 3dfx cards will
+        result in a hard lockup. One workaround is to enable APIC support in a
+        uni-processor kernel, or use an SMP kernel.
+
+commit 84a5e7108773d5a5ff7242e1460c98e3acb178a8
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Mon Jul 23 20:25:38 2001 +0000
+
+    Fixes that allow the modules to be built into the kernel
+
+commit 5e8ba79eb6aabd85f52de43fcf30722268857f60
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Fri Jul 20 22:16:04 2001 +0000
+
+    Merge checker fixes from Alan Cox made to the drm in the ac kernel tree.
+        These aren't really security problems, but Alan has made some arguments
+        that have convinced me that the code should be fixed anyway.
+
+commit ae5b4effc05cd5ac44ab44c5c733c6599652f1eb
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Fri Jul 20 20:31:30 2001 +0000
+
+    Remove module name hacks because we aren't going to implement this anymore
+        because of Linus' comments
+
+commit 4eafeec960c29369982a9b15c24681a3072f491d
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Wed Jul 18 21:02:58 2001 +0000
+
+    Add module version name at a lower layer of the code, allows things to be
+        more flexible and allow older module versions to still work. Might not
+        be final code if we move over to DRI kernel module version, but will be
+        if we use XFree86 version. + Only build tdfx.o instead of tdfx-4_1_0.o
+        since tdfx.o has never changed its API.
+
+commit c6454e6a93544fd20f4b5d9cb2ee08725e9b6740
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Tue Jul 17 22:31:26 2001 +0000
+
+    Someone forgot to bump the r128 and i810 drivers properly before the 4.1.0
+        release. Better late than never.
+
+commit d5749d7603d397be7639266e6c740941af2004fb
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Mon Jul 16 22:42:36 2001 +0000
+
+    Added version string to the end of the kernel module name. This allows
+        multiple versions of the kernel module to co-exist on one machine.
+
+commit b816802daf6818306473c35d8776202c69fd0083
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Mon Jul 16 16:57:12 2001 +0000
+
+    i810 drm security fix
+
+commit 7ccc528911137156f216a13c95ce946c5f65af15
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Fri Jul 13 01:42:48 2001 +0000
+
+    Fix typo in XFREE86_VERSION().
+
+commit 12e9c636dfb4fbaf229e884afa8febaecd79b475
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Mon Jun 18 19:25:15 2001 +0000
+
+    Fix 5 security bugs found by the Stanford tools
+
+commit b1a588f0cc9cd7b4f5b2150f03722ac09b7e8989
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Mon Jun 18 13:45:23 2001 +0000
+
+    Forgot to bump date stamp.
+
+commit 3a410059b43027c08bcb0fef307dd4ee7734197e
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Mon Jun 18 12:59:42 2001 +0000
+
+    Enable shared IRQs in DMA template, use in i810 driver.
+
+commit d87c873df05eb3a110316c7af2358553fa7f988e
+Author: David Dawes <dawes@xfree86.org>
+Date:   Thu Jun 14 22:23:44 2001 +0000
+
+    First pass of 4.1.0 merge.
+
+commit 334e134918ee2ece3e845cd55c49c9709b67ee6c
+Author: David Dawes <dawes@xfree86.org>
+Date:   Thu Jun 14 21:53:06 2001 +0000
+
+    Import of XFree86 4.1.0
+
+commit dca245e37c875660fa766a264377628dd3a311e5
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed May 23 17:41:31 2001 +0000
+
+    Only authenticated clients can mmap() (Jeff Hartmann).
+
+commit 18ce40c9d31c166b49e6689c260eb1ddb3cc08c9
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu May 17 15:20:40 2001 +0000
+
+    Make the SiS module work again. At least glxinfo reports it's working, yet
+        trying to run the simple apps return 'out of video memory'
+
+commit 9c775d0b2f303389c24aea5e8abc1473f0cf93e8
+Author: David Dawes <dawes@xfree86.org>
+Date:   Mon May 14 14:49:58 2001 +0000
+
+    finish struct stat type cleanup Fix a build dependencies for the tdfx drm
+        module
+
+commit 0813760110535d8989af187d23b4eedc4c6b225f
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri May 4 14:05:13 2001 +0000
+
+    add some commented enclosures around the BUS_BASE calls for Alpha
+        platforms.
+
+commit 5f5d850013d6c846946f77b57e88a507232c0aca
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri May 4 09:31:35 2001 +0000
+
+    file drm_linux.h was initially added on branch bsd-2-0-0-branch.
+
+commit 726096309b86184b83cd5cb08c95fe7e870f443c
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri May 4 08:28:30 2001 +0000
+
+    file drm_agpsupport.h was initially added on branch bsd-2-0-0-branch.
+
+commit ebf0d7addfd51d1fafca354ebdcdb4fd17593616
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu May 3 14:52:29 2001 +0000
+
+    add new file
+
+commit 94c6d951a21f2d3b42cda0acb1b5dfc954c1c66b
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu May 3 14:51:01 2001 +0000
+
+    Make SiS driver compile with the new templated format. Not tested. minor
+        cleanups
+
+commit d3645e7a4e0885aba8063c6cc41d7d9fded99982
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu May 3 14:32:59 2001 +0000
+
+    remove deprecated file
+
+commit 2ea12226a675cc8d4b95799129f143fa61d97296
+Author: David Dawes <dawes@xfree86.org>
+Date:   Tue May 1 21:39:35 2001 +0000
+
+    Initial merge for XFree86 4.0.99.3 import
+
+commit a576d41498b742502d4f7dbfeed44737ff79db8f
+Author: David Dawes <dawes@xfree86.org>
+Date:   Tue May 1 17:07:59 2001 +0000
+
+    Import of XFree86 4.0.99.3
+
+commit b804c09d0699131a8333c19a4d58cb14125d413e
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Apr 30 16:18:22 2001 +0000
+
+    fix build of i810 kernel driver for 2.4.3 or greater kernels
+
+commit df76f812924e4db284fd38b3c5db6b87ec0d82fc
+Author: Kevin E Martin <kem@kem.org>
+Date:   Mon Apr 30 15:07:18 2001 +0000
+
+    - PCIGART patches for Alpha from Compaq
+
+commit d1ef7f9d2c9f8f191ab79b1a43eb96a787df5f64
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Apr 30 13:24:28 2001 +0000
+
+    file drm_vm.h was initially added on branch bsd-2-0-0-branch.
+
+commit 2c0811d628249f81f29b85392d5eaae3c12f882e
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Apr 30 11:11:00 2001 +0000
+
+    file drm_sysctl.h was initially added on branch bsd-2-0-0-branch.
+
+commit ae1cc904624245d738bfdf8afb74776c4e9b1215
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Apr 25 14:20:17 2001 +0000
+
+    file drm_os_freebsd.h was initially added on branch bsd-2-0-0-branch.
+
+commit 376189905b8391295f18a5fac922d1d9546c7b43
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Apr 25 14:20:17 2001 +0000
+
+    file drm_os_linux.h was initially added on branch bsd-2-0-0-branch.
+
+commit 97e48b4cd1747e427e70af6e530ec57676f6189d
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Apr 25 12:59:04 2001 +0000
+
+    file Makefile was initially added on branch bsd-2-0-0-branch.
+
+commit b1488c2f87ab3b4d377b32a0c0ed0ba05e996f25
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Sat Apr 21 19:06:46 2001 +0000
+
+    include linux/sisfb.h, per David Gaarenstroom
+
+commit 49781fcf37e30ed17513bd13a90ded39ab1b0b9d
+Author: David Dawes <dawes@xfree86.org>
+Date:   Wed Apr 18 18:45:20 2001 +0000
+
+    put back BUS_BASE
+
+commit 6f5e397f2549e7d5f806d2c44053d3d306a36f3a
+Author: Kevin E Martin <kem@kem.org>
+Date:   Mon Apr 16 21:43:28 2001 +0000
+
+    - Fix typo and remove magic numbers
+
+commit cc7afb2b16b84293258be0cc8bcffd32308cd3b9
+Author: David Dawes <dawes@xfree86.org>
+Date:   Tue Apr 10 18:45:17 2001 +0000
+
+    Use the linux version of xf86drm.c.
+
+commit 18fc5ee92394b31c00df8e72b1f29bada79292f5
+Author: David Dawes <dawes@xfree86.org>
+Date:   Mon Apr 9 21:56:31 2001 +0000
+
+    First pass of XFree86 4.0.99.2 merge.
+
+commit 1759c16ab9b64598968a0058039e8a66bf5f9773
+Author: David Dawes <dawes@xfree86.org>
+Date:   Mon Apr 9 16:27:54 2001 +0000
+
+    Import -f XFree86 4.0.99.2
+
+commit 0e7f6c0726e5ff08eeab8e17a5aa63fbe44b3410
+Author: Kevin E Martin <kem@kem.org>
+Date:   Fri Apr 6 17:53:32 2001 +0000
+
+    - Fix typo
+    - Clean up some macros
+
+commit 908d32f84c33a4192b8381d74fc6bccc73e309f9
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Apr 6 15:49:42 2001 +0000
+
+    search /lib/modules/<version>/build/include first, then the others....
+
+commit 2bd9bf98c7bc0c23870f86f97341197114c3e70a
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Apr 6 08:39:02 2001 +0000
+
+    Handle drivers that don't have __HAVE_SG defined.
+
+commit 5d6ddbca26d695561fb1d08d798a0cc254b805e7
+Author: Kevin E Martin <kem@kem.org>
+Date:   Thu Apr 5 22:16:12 2001 +0000
+
+    Merged ati-pcigart-1-0-0
+
+commit a15b9dec3cfed3ce36826faf8c7d76284b0527a8
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Apr 3 08:01:00 2001 +0000
+
+    include 2.4.2
+
+commit 4259e5e61716d321aa3c1ac6d7ad4bf0e3c39a38
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Apr 3 07:50:30 2001 +0000
+
+    make 2.4.2 -> 2.4.3 change conditional. works with older than 2.4.3 kernels
+        again.
+
+commit 62d49315299f4483b2e7fb44f21d6b09cef01afd
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Mon Apr 2 01:17:18 2001 +0000
+
+    Update radeon DRM to v1.1.0 (texture upload changes).
+
+commit fcc21069b7019a4a93e1ceacc175ccd682353861
+Author: David Dawes <dawes@xfree86.org>
+Date:   Fri Mar 30 17:16:20 2001 +0000
+
+    - Move xf86ConfigDRI declaration from xf86Priv.h to xf86.h.
+    - Don't include xf86Priv.h in the drm module.
+    - Fix 'struct stat' in loader libc wrapping to avoid unnecessary
+        XFree86LOADER #ifdefs in code that uses it.
+    - Make drmOpenMinor() static.
+
+commit e407c2f5a611e30b05ea095f8b17d39fb5a7ebfa
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Mar 30 13:32:39 2001 +0000
+
+    merge in 2.4.3 kernel change.
+
+commit 301a1ad315bd7881adcf0df33c589e0a74c059f4
+Author: David Dawes <dawes@xfree86.org>
+Date:   Wed Mar 21 20:22:16 2001 +0000
+
+    Move #include <linux/config.h> inside the __linux__ #ifdef, so that it
+        doesn't break non-Linux builds.
+
+commit 92b0aaa6fe787c2e17bba1973d19d6fd5a61d03a
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Mar 21 13:10:27 2001 +0000
+
+    - Fix MGA header info.
+    - Update date strings.
+    - Fix MGA hangs (undocumented side effects of DWGSYNC).
+    - Remove idle before ILOAD??? Seems fine with the above fix.
+
+commit b90028231c5c73783ee45124903794970f244978
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Mar 21 03:29:23 2001 +0000
+
+    Remove compiler warnings, minor cleanups.
+
+commit 86c41620a5f0a3b3af143bebdda0cca2114ade88
+Author: David Dawes <dawes@xfree86.org>
+Date:   Mon Mar 19 23:48:35 2001 +0000
+
+    merge/build fix
+
+commit 404a409ab302c99d8aceb85ede301b04780480d0
+Author: David Dawes <dawes@xfree86.org>
+Date:   Mon Mar 19 21:39:36 2001 +0000
+
+    Initial XFree86 4.0.99.1 merge.
+
+commit 0e5b8d77cfe0f86698041aebe31c54f59c877825
+Author: David Dawes <dawes@xfree86.org>
+Date:   Mon Mar 19 17:45:52 2001 +0000
+
+    Import of XFree86 4.0.99.1
+
+commit b42ff4f6600b97e9b7482152d5ea8713e800dc00
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Mon Mar 19 12:16:24 2001 +0000
+
+    Update version, date stamp.
+
+commit 9914f4cf6057957bd77f1c1b0b9957537eafdfb9
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Mon Mar 19 12:04:12 2001 +0000
+
+    Remove PRIMPTR completely.
+
+commit d15f98443295feeb4e3bd65b26f43c73d655e26e
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Mon Mar 19 11:49:25 2001 +0000
+
+    Try this...
+
+commit f2ad4d9bebd052e5b7c9a90c4a813830bd1b72f8
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Sun Mar 18 23:54:41 2001 +0000
+
+    __REALLY_HAVE_MTRR, vmalloc_32 fixes from Jeff Wiedemeier.
+
+commit 1d32e305efdcb4668a91d94e2149c9c7a243b6dc
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu Mar 15 21:48:51 2001 +0000
+
+    file agpgart.diff was initially added on branch gamma-2-0-0-branch.
+
+commit 74e19a40187ac3b5907922e5dc01418135a5794b
+Author: Kevin E Martin <kem@kem.org>
+Date:   Wed Mar 14 22:22:50 2001 +0000
+
+    Merged sarea-1-0-0
+
+commit e2b2bffc6b25361b2f09afc5a28030645440cd03
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Tue Mar 13 00:22:05 2001 +0000
+
+    Rest of MGA dualhead patch.
+
+commit 0b60aad8a5f1e6d38bf2d254fa5209492157e344
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Mon Mar 12 18:18:06 2001 +0000
+
+    Try that again...
+
+commit 134aecdeed19a339a147d7e88fc9b722b9794245
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Thu Mar 8 00:21:33 2001 +0000
+
+    Fix ring space calculations, tests. Based on patch by Bruce Stockwell.
+
+commit 8c511c60ec1ecbe3f0832a8e5a07bc43239eae5f
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Mar 7 15:06:57 2001 +0000
+
+    Change error message to debug message when client dies while holding the
+        lock. Should prevent bug reports about this, but you never know...
+
+commit 07f761bfae8f220c819b67f9f614984f930ff427
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Mar 7 08:53:15 2001 +0000
+
+    surround agp calls in drm_memory with __REALLY_HAVE_AGP instead of
+        CONFIG_... remove include for agpsupport in tdfx_drv.c - not needed.
+
+commit 3a74d3a371acc7b8632885c15ce2f7c05aae94bd
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Tue Mar 6 04:37:37 2001 +0000
+
+    Merge tdfx-3-1-0 branch.
+
+commit 971c2f8ad582bd0d6b97ed503c9e5abaa9feee02
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Mar 5 16:02:40 2001 +0000
+
+    allow dristat to find out whether AGP is write-combined or not.
+
+commit d1774bb44cdc1b5ce606c299b8eea1793f4352e3
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Mar 5 15:52:11 2001 +0000
+
+    fix that last patch to initialize the MTRR when AGP available.
+
+commit 8d3f3f4f9b8a5611888c35b7683661bcf52ef9cc
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Sun Mar 4 19:19:20 2001 +0000
+
+    Don't try and setup the MTRR for AGP when AGP not available. Check
+        dev->agp, when agp_acquire called, and..... Uncomment MUST_HAVE_AGP
+        around agp_* calls, so that support for both agp/pci can happen in a
+        single kernel driver.
+
+commit db03d12a8fe6c11029127831f1a9bf22056a250b
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Wed Feb 28 18:47:39 2001 +0000
+
+    file drm_scatter.h was initially added on branch ati-pcigart-0-0-1-branch.
+
+commit 9a4033a02ac74e384596190adfcc0e938c19865b
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Feb 28 14:11:05 2001 +0000
+
+    Make the hardware bug workaround configurable. That way, people with newer
+        revs of the chipset can avoid the copy when it's not needed.
+
+commit 7b5e87d91d062cceb1e4e54b2e144c3c87375234
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Feb 28 11:22:52 2001 +0000
+
+    Please try this if you experience lockups...
+
+commit 88dbee54ed400a3fd5594fab506518c171167805
+Author: Rik Faith <faith@alephnull.com>
+Date:   Wed Feb 28 09:27:44 2001 +0000
+
+    Implement drmOpen* without /proc dependence (Fallback to /proc is included
+        for backward compatibility.) Move statistic-gathering drm* calls from
+        dristat.c to xf86drm.c
+
+commit c4a247d26228b2506fcb1c5cac2302a22e91219e
+Author: Rik Faith <faith@alephnull.com>
+Date:   Wed Feb 21 16:06:10 2001 +0000
+
+    Add Linux 2.2.x support for stubs
+
+commit 48768df6c3197dea8f68fc69795c5aa820ce5678
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Wed Feb 21 15:48:40 2001 +0000
+
+    file gamma_drm.h was initially added on branch sarea-1-0-0-branch.
+
+commit 43f1a52a564812d814c8a5f92b95fc6d3b589200
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Tue Feb 20 20:16:56 2001 +0000
+
+    Fix some warnings and flush pixel cache in idle routine so readpixels works
+        correctly
+
+commit 62aa46ccec223aa3660c71ff0981ea035fc2cff9
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Tue Feb 20 13:44:45 2001 +0000
+
+    Disable DRIVER_DMA_QUIESCENT() in r128, radeon drivers. Prevents deadlock
+        in the locking process when the engine isn't idle.
+
+commit 01a14789edce0ce1cae0f3fd4328833399fae56d
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Fri Feb 16 05:24:06 2001 +0000
+
+    - Clean up the way customization of the templates is done.
+    - Fix old-style DMA for gamma driver (please test).
+    - Pull out IRQ handling into drm_dma.h (please test on i810, gamma).
+    - Lots of general cleanups, remove compiler warnings etc.
+
+commit 1d30ac11404c588e4a158d72f987c1fb3e478bea
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Feb 15 16:31:11 2001 +0000
+
+    Added missing include "drm_lists.h".
+    i810 now working fine with new kernel module.
+
+commit f2f5bf6f5f577d5cc43af99dbad16710225bfa2f
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Thu Feb 15 10:26:03 2001 +0000
+
+    - Fix up merge.
+    - Update date stamps.
+
+commit 360475376c5a597caf4a981c934a6b0d783fa94d
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Thu Feb 15 08:12:14 2001 +0000
+
+    Merge mga-1-0-0-branch into trunk.
+
+commit 38c22bc4883ac201bde7f5f130a72acd1be68ec5
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Feb 14 14:34:01 2001 +0000
+
+    file i810.h was initially added on branch mga-1-0-0-branch.
+
+commit 75720460ce234fcf0317b78869a669afd1274ae1
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Feb 14 06:31:26 2001 +0000
+
+    file radeon.h was initially added on branch mga-1-0-0-branch.
+
+commit de554cb64045516ede340549441f109fd06495cd
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Feb 14 05:30:38 2001 +0000
+
+    file r128.h was initially added on branch mga-1-0-0-branch.
+
+commit 32c4aa1eb3ffd59312c64a7f46b933371c31761f
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Feb 14 05:30:38 2001 +0000
+
+    file r128_drm.c was initially added on branch mga-1-0-0-branch.
+
+commit 0fa26e550d56e068737d40f741e1f567c3f79cc5
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Feb 14 01:37:05 2001 +0000
+
+    file tdfx.h was initially added on branch mga-1-0-0-branch.
+
+commit 0e928b4733388477409b827185c714fd87702f0b
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Feb 14 01:37:05 2001 +0000
+
+    file tdfx_drm.c was initially added on branch mga-1-0-0-branch.
+
+commit 3b17f9165b4c73665515c2e435a8221805e514d9
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Feb 13 17:53:02 2001 +0000
+
+    file gamma_context.c was initially added on branch mga-1-0-0-branch.
+
+commit 41b80a0ab0fedb60385afc374a590d0ab58ef6c3
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Feb 9 16:44:16 2001 +0000
+
+    file gamma_drm.c was initially added on branch mga-1-0-0-branch.
+
+commit 89486dffa8b91bb95f80420252675f095082b046
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Feb 9 16:44:16 2001 +0000
+
+    file gamma.h was initially added on branch mga-1-0-0-branch.
+
+commit 04c29ef2e484c09d29c17cc667433bd3b6d36b11
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Feb 2 11:44:22 2001 +0000
+
+    file dristat.c was initially added on branch mga-1-0-0-branch.
+
+commit 7d68e5ffe29cabf5ed802964d9501411ccae9b28
+Author: Rik Faith <faith@alephnull.com>
+Date:   Thu Feb 1 20:54:01 2001 +0000
+
+    file drm_stub.h was initially added on branch mga-1-0-0-branch.
+
+commit 82b645dc74218fd8d1ed10d045128002f0c1f705
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Mon Jan 29 17:46:23 2001 +0000
+
+    Corresponding sync with PCI GART updates.
+
+commit 5f67507e65a38cf6d33290299937c6bad98fcc6e
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Sun Jan 28 07:18:08 2001 +0000
+
+    Fix depth clears properly this time. Update all instances of
+        drmRadeonClear() to the new interface.
+
+commit a68dddf19caf0106479b71aab5a8de552a5ed596
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Fri Jan 26 07:52:36 2001 +0000
+
+    Client-side updates for drmRadeonClear(...), fixes color/depth buffer
+        clears.
+
+commit 4ebcb86ace31f127281644ed9aaadb0a3303d29d
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:02 2001 +0000
+
+    file mga_warp.c was initially added on branch mga-1-0-0-branch.
+
+commit b68ca866244e96c37c4a25c85bfeaef0405bbad2
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:02 2001 +0000
+
+    file mga_ucode.h was initially added on branch mga-1-0-0-branch.
+
+commit 321bc52606a3f674e8fc33cb990c7b04f4b050c9
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:01 2001 +0000
+
+    file mga_drm.c was initially added on branch mga-1-0-0-branch.
+
+commit 2adf5999619935da80e0f5b682a2c1ec7fdce0b3
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:00 2001 +0000
+
+    file mga.h was initially added on branch mga-1-0-0-branch.
+
+commit f14506198e6684429c400d7d4852bacc9a07bddb
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:00 2001 +0000
+
+    file drm_vm.h was initially added on branch mga-1-0-0-branch.
+
+commit bb1a10743f52e7bf9f73b3be9bad198f00efa925
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:00 2001 +0000
+
+    file drm_lock.h was initially added on branch mga-1-0-0-branch.
+
+commit 2f23eca6298e5f60bf40ec2ed5188f52d450ec22
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:00 2001 +0000
+
+    file drm_memory.h was initially added on branch mga-1-0-0-branch.
+
+commit 105bece739c52a7d1416728e950ec8a249f4ae9f
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:00 2001 +0000
+
+    file drm_bufs.h was initially added on branch mga-1-0-0-branch.
+
+commit b46a78c06061e4501bc2fa5657d6285cdce46769
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:00 2001 +0000
+
+    file drm_proc.h was initially added on branch mga-1-0-0-branch.
+
+commit 91844ee03910cce947801dc967606bd6260a91ef
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:00 2001 +0000
+
+    file drm_fops.h was initially added on branch mga-1-0-0-branch.
+
+commit fd82ce8f3fcf6c7368df6710f1943ee89a474620
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:00 2001 +0000
+
+    file drm_init.h was initially added on branch mga-1-0-0-branch.
+
+commit d2110a1dbefabcce14a4c492db4bfee038a99faf
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:00 2001 +0000
+
+    file drm_ioctl.h was initially added on branch mga-1-0-0-branch.
+
+commit 18ea3b5e6f6803ac2c50f12f1b107b1838f7520e
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:00 2001 +0000
+
+    file drm_drv.h was initially added on branch mga-1-0-0-branch.
+
+commit 03593b1629591a9fc80ff3a951d102668a1147f2
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:00 2001 +0000
+
+    file drm_context.h was initially added on branch mga-1-0-0-branch.
+
+commit 94dd569fc0f4d4d48e9de42670a126c04c259117
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:00 2001 +0000
+
+    file drm_drawable.h was initially added on branch mga-1-0-0-branch.
+
+commit b25e0fee34a39a6b07c22b48b05dd02c56a0ffa7
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:00 2001 +0000
+
+    file drm_agpsupport.h was initially added on branch mga-1-0-0-branch.
+
+commit a596a6f4e850556bac1259a6616395dc11e0866e
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:00 2001 +0000
+
+    file drm_auth.h was initially added on branch mga-1-0-0-branch.
+
+commit ae28c6aab6789c5eba42ef05e04827b150402370
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:00 2001 +0000
+
+    file drm_dma.h was initially added on branch mga-1-0-0-branch.
+
+commit 249dfc1c29d9f539c59bc014eae72baa5b35d88e
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 16:09:00 2001 +0000
+
+    file drm_lists.h was initially added on branch mga-1-0-0-branch.
+
+commit 4d2a4455b4e7bc65952aa6167c34b488c4ca3b8d
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Jan 24 15:34:46 2001 +0000
+
+    - Misc cleanups.
+    - Fix drmR128Clear parameters (Radeon to follow).
+    - Add some helper macros to r128/radeon kernel modules.
+
+commit 642bb6fbb0bfbc6e549e61bd0ece72abcbd399b7
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Tue Jan 23 17:53:57 2001 +0000
+
+    file ati_pcigart.h was initially added on branch ati-pcigart-0-0-1-branch.
+
+commit 97379b82c812b5eed0a4a52106afc895469e13fa
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Tue Jan 23 17:53:57 2001 +0000
+
+    file ati_pcigart.c was initially added on branch ati-pcigart-0-0-1-branch.
+
+commit 9116644366c427b39945bca71969a5b561181046
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Thu Jan 18 18:21:05 2001 +0000
+
+    Fixed problem preventing compile on system w/o agpgart.
+
+commit 417bfc8a9d42cf2b9238ee394514fa3db512c49d
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Wed Jan 17 18:43:04 2001 +0000
+
+    file r128_pcigart.c was initially added on branch ati-pcigart-0-0-1-branch.
+
+commit 5708131c9ab5ee3b51a6ef937925f36e083147b1
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Wed Jan 17 18:43:04 2001 +0000
+
+    file scatter.c was initially added on branch ati-pcigart-0-0-1-branch.
+
+commit 4c3f3de819981959f764c5d2a69417c52d122d61
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Sat Jan 13 01:33:00 2001 +0000
+
+    Remove debug messages.
+
+commit 33e8dcf7e97e6bec69fc05137e1eede1a0f9b443
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Jan 11 20:05:39 2001 +0000
+
+    Makefile.linux was checking $(MACHINE) for 'i386' before building the
+        i810.o module. However on my i810's, $(MACHINE) is 'i686'.
+
+commit 61c15f4a2d053c9e609360a5e600f56b0887c3aa
+Author: Nathan Hand <nathanh@manu.com.au>
+Date:   Mon Jan 8 16:21:42 2001 +0000
+
+    Merged tdfx-3-0-0
+
+commit 0994e635b2f002c8e9f177037a46c26ccd98c59d
+Author: Kevin E Martin <kem@kem.org>
+Date:   Fri Jan 5 22:57:55 2001 +0000
+
+    Merged ati-5-0-0
+
+commit 833af23c5d21b1ab139327861d25d96dcd91af6f
+Author: Rik Faith <faith@alephnull.com>
+Date:   Thu Jan 4 18:41:41 2001 +0000
+
+    Sync with Linux 2.4.0-prerelease
+
+commit c7c6156aecdee2838dd0e193a3d529ecbb797ae7
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Sat Dec 30 23:28:53 2000 +0000
+
+    add blit ioctl, fix plnwt handling
+
+commit b19c44e4fe01db3efe72e6a130bbd49af151ee95
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Fri Dec 15 01:15:57 2000 +0000
+
+    Update date information.
+
+commit 013d6f0806de66edcca4193cd4a0b175bb3c2b32
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Dec 13 10:30:26 2000 +0000
+
+    file bufs_tmp.h was initially added on branch mach64-0-0-1-branch.
+
+commit 8725828cf0ebb55f813e19f87f7d279c62b68293
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Tue Dec 12 14:50:50 2000 +0000
+
+    - Fix nasty depth span bug. Drawable offset was not being added to pixel
+        coords.
+    - Remove unneeded mask parameters from clear ioctl.
+    - Use correct subpixel offsets, fixes most glean bugs.
+    - Remove 32-bit depth buffer support. Only use 16 or 24-bit depth buffers.
+
+commit 14a73775360585b9a09bfdf932881fbb06b34037
+Author: David Dawes <dawes@xfree86.org>
+Date:   Tue Dec 5 16:39:28 2000 +0000
+
+    Import of XFree86 4.0.1g
+
+commit 41fa18dda5e49caed68ce853791a21dd6d92376b
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Mon Dec 4 06:26:37 2000 +0000
+
+    file mach64_dma.c was initially added on branch mach64-0-0-1-branch.
+
+commit 51b68cb483aa93c8eb19e9915f08978324b1b3ac
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Mon Dec 4 06:26:37 2000 +0000
+
+    file mach64_state.c was initially added on branch mach64-0-0-1-branch.
+
+commit 8e02d8dcc4f52549f97c83f2b3c0aaa249f66977
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Sat Dec 2 13:10:03 2000 +0000
+
+    file mach64_drm.h was initially added on branch mach64-0-0-1-branch.
+
+commit e15a24e154d6749ba0be3155ed802005c5e1ebf0
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Sat Dec 2 06:14:18 2000 +0000
+
+    Merged ati-4-1-1-branch into trunk.
+
+commit 33fd00485f350f7ecceb1fabfa81ce4137c894c2
+Author: David Dawes <dawes@xfree86.org>
+Date:   Thu Nov 30 17:32:23 2000 +0000
+
+    Import of XFree86 4.0.1f
+
+commit 84699b456d2453b3c3c99eb75ebfc0dfe30eb64f
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Mon Nov 27 15:30:26 2000 +0000
+
+    file context_tmp.h was initially added on branch mach64-0-0-1-branch.
+
+commit 2da85fdba0331e2ae5d7ea245ef865aa9eee3687
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Mon Nov 27 15:30:26 2000 +0000
+
+    file driver_tmp.h was initially added on branch mach64-0-0-1-branch.
+
+commit 3e9ebfb4cf89b60871a226dbf1d4ec5129d6c070
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Mon Nov 27 15:30:26 2000 +0000
+
+    file mach64_drv.h was initially added on branch mach64-0-0-1-branch.
+
+commit 960f13cdf4cc4201fabe4c48e40395d3a755be58
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Tue Nov 21 16:18:47 2000 +0000
+
+    Integrated bug fix from David S. Miller (a wait queue removal bug)
+
+commit 679531e1669085115bac5f6fc982d54a4a9608e8
+Author: Rik Faith <faith@alephnull.com>
+Date:   Wed Nov 15 15:47:51 2000 +0000
+
+    Sync with Linux 2.4.0-test11-pre5 Provide backward compatibility tested
+        against 2.2.18pre21
+    As usual, since all 2.4.0-test* kernels set LINUX_VERSION_CODE to the same
+        value, if you are running a 2.4.0-test kernel, you MUST be running
+        2.4.0-test11-pre4 or later (although anything after 2.4.0-test11-pre1
+        should work fine -- I tested with pre4/pre5). I expect 2.2.x support to
+        continue to work for all recent kernels, but I tested with 2.2.18pre21
+        -- we use the old intermodule symbol communication for 2.2.x kernels,
+        so they should all continue to work.
+
+commit 0636342ef84da23f30b838b4f933e3aa15d5c2ce
+Author: Rik Faith <faith@alephnull.com>
+Date:   Tue Nov 14 21:35:00 2000 +0000
+
+    Move .c to .h file
+
+commit 633e9c8f8b2366a93951f11830954fb895917252
+Author: Kevin E Martin <kem@kem.org>
+Date:   Mon Nov 13 23:35:02 2000 +0000
+
+    file radeon_state.c was initially added on branch ati-5-0-0-branch.
+
+commit 58d90faf9a3d3ef2a66d2cc3632958ab73e19250
+Author: Kevin E Martin <kem@kem.org>
+Date:   Mon Nov 13 23:35:02 2000 +0000
+
+    file radeon_cp.c was initially added on branch ati-5-0-0-branch.
+
+commit 006458f227b9e97252406df52963d98b41bb3a1b
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Nov 10 18:27:33 2000 +0000
+
+    Split agpsupport.c into pre-2.4.0 version and current version.
+
+commit 94071289a4c61a1083a3d6b3546b06cafeaeac44
+Author: David Dawes <dawes@xfree86.org>
+Date:   Wed Nov 8 00:07:17 2000 +0000
+
+    merge with 4.0.1d
+
+commit 5745cb7fa70cf312d371aac44de3beae2a8d6e47
+Author: David Dawes <dawes@xfree86.org>
+Date:   Tue Nov 7 22:10:46 2000 +0000
+
+    Import of XFree86 4.0.1d
+
+commit 37d6828fef51b3a113a11b54e7dbd9c92cd4a548
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Wed Nov 1 19:00:45 2000 +0000
+
+    Added multitexture fix to the mga drm driver
+
+commit 52f0bc3c9ec722c0c8a40bb7959e7ec2eb9d8180
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Sep 29 02:05:41 2000 +0000
+
+    More changes for sync with Linux 2.4.0-test9-pre7
+
+commit 39a659e87718d8b6bbf138510e83de7a1e95d855
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Sep 29 01:47:11 2000 +0000
+
+    Audit calls to schedule() Remove tags from files shared with Linux kernel
+        tree Remove debugging statements to make debugging more useful Other
+        minor cleanups in preparation for sync with Linux 2.4.0-test9-pre7
+
+commit b0a7efb5a959a6105486d303d25d06d69d5d569e
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Thu Sep 28 23:04:57 2000 +0000
+
+    Use PG_reserved for things we remap non-cached
+
+commit ed2d0b4bb0bb90af87c7c89a2e0a6297455d3bbe
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Thu Sep 28 15:09:39 2000 +0000
+
+    Fixed two things Rik pointed out in the last commit
+
+commit 550dff98b0cf08687cdde697fc6909aeb9cef30f
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Wed Sep 27 21:32:19 2000 +0000
+
+    Merged the mga-lock-debug-0-2-0-branch with the trunk. This includes
+        several fixes including: (Jeff) Really disable multitexture (Broken
+        since Mesa 3.4 integration.)
+    (Jeff) Various changes in mga_state.c in the kernel module, which includes
+        a fix to the bug where the first OGL application hangs the machine
+        w/out rendering anything. This also includes defines for the warp
+        registers so they are easily human readable.
+    (Rik and Jeff) Fixed all the schedule loops in the kernel to look like they
+        are supposed too.
+    (Jeff) Configurable agp modes: Add the option "AGPMode2x" or "AGPMode4x" to
+        your XF86Config file.
+    (Rik) Various cleanups to the mga kernel driver to make it easier to read
+        and debug.
+    (Rik) Removed alot of DRM_DEBUG statements from the kernel driver.
+
+commit dbe7d55cb08487f688dfbdd29835500b3b087721
+Author: Kevin E Martin <kem@kem.org>
+Date:   Wed Sep 27 03:34:14 2000 +0000
+
+    file radeon_drv.c was initially added on branch radeon-1-0-0-branch.
+
+commit 0688c5939796e09e2cea759e64774c6db478f513
+Author: Kevin E Martin <kem@kem.org>
+Date:   Wed Sep 27 03:34:14 2000 +0000
+
+    file radeon_drv.h was initially added on branch radeon-1-0-0-branch.
+
+commit 9c250f5c18795cbf919d0ce947a269876e945cac
+Author: Kevin E Martin <kem@kem.org>
+Date:   Wed Sep 27 03:34:14 2000 +0000
+
+    file radeon_context.c was initially added on branch radeon-1-0-0-branch.
+
+commit 54e6f2f846ee46dc464033aa6a0c021ab7ccefd2
+Author: Kevin E Martin <kem@kem.org>
+Date:   Wed Sep 27 03:34:14 2000 +0000
+
+    file radeon_drm.h was initially added on branch radeon-1-0-0-branch.
+
+commit ca013c632ca00931d404392be4e625f325fc959c
+Author: Kevin E Martin <kem@kem.org>
+Date:   Wed Sep 27 03:34:14 2000 +0000
+
+    file radeon_bufs.c was initially added on branch radeon-1-0-0-branch.
+
+commit cba6c830e07f4906a2b9de4de51ec3f2f1f9d7f6
+Author: Kevin E Martin <kem@kem.org>
+Date:   Wed Sep 27 03:34:14 2000 +0000
+
+    file radeon_dma.c was initially added on branch radeon-1-0-0-branch.
+
+commit c7558d8fa4df805b7f7ff3d631432eadac9b8a1c
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Sun Sep 24 09:34:10 2000 +0000
+
+    commit xfree86 4.0.1d-pre update
+
+commit b1aa228f7d7390f8b9a361f862d724b908d5a71f
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Sat Sep 23 21:25:26 2000 +0000
+
+    Import of XFree86 4.0.1d-pre (2)
+
+commit 881683873e6aeab6529b8e6db8ed0678c87e86d7
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Sep 22 18:14:54 2000 +0000
+
+    Import of XFree86 4.0.1d-pre
+
+commit e06e4a73ac182bbd15ad7e6c10d259b12f39a383
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Sep 20 05:25:18 2000 +0000
+
+    file mach64_drv.c was initially added on branch mach64-0-0-0-branch.
+
+commit 7ed69fd309850cee0c14775b92322e4f91955405
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Sep 20 05:25:18 2000 +0000
+
+    file mach64_bufs.c was initially added on branch mach64-0-0-0-branch.
+
+commit d75fe0d7bfd1d5c3893464b2d184543932ffe347
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Sep 20 05:25:18 2000 +0000
+
+    file mach64_context.c was initially added on branch mach64-0-0-0-branch.
+
+commit de842ea5dbfd78d2e749d552f06410dbc2072087
+Author: Rik Faith <faith@alephnull.com>
+Date:   Tue Sep 19 19:41:07 2000 +0000
+
+    Make management of current->state more correct.
+
+commit 01346c98b1d919374dc1f2ee70d4b401d2eaad67
+Author: Rik Faith <faith@alephnull.com>
+Date:   Tue Sep 19 19:24:28 2000 +0000
+
+    Make management of current->state correct (accidentally made incorrect when
+        fixing the trispd bug).
+
+commit e2a16e1906592636e5e0e5ed82db776466b7e494
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Tue Sep 19 18:24:09 2000 +0000
+
+    Correct sync with 2.4.0-test9-pre4 kernel.
+
+commit 9c8e1adfac249ee2a4d10e7ae32fc439c22fb8f6
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Tue Sep 19 18:14:16 2000 +0000
+
+    Sync with 2.4.0-test9-pre4 kernel.
+
+commit ce199c73e555546aa4c6654695ab90ea42b1970d
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Tue Sep 19 16:40:02 2000 +0000
+
+    file r128_state.c was initially added on branch ati-4-1-1-branch.
+
+commit 4ec540945deb46008a7d6ff54d78c02582de5629
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Tue Sep 19 16:38:55 2000 +0000
+
+    file r128_cce.c was initially added on branch ati-4-1-1-branch.
+
+commit dc6b57bf22ecbac04a5a1fee72fd0a43646b9c8c
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu Sep 14 14:48:44 2000 +0000
+
+    axp cast fix.
+
+commit f850c1bd06d8ccb576e8836ed8f0c16db6eec343
+Author: Rik Faith <faith@alephnull.com>
+Date:   Wed Sep 13 15:02:35 2000 +0000
+
+    Remove debugging statement from production code.
+
+commit 1f8651163acb06b0691322ec9ab96bc606ba8777
+Author: Rik Faith <faith@alephnull.com>
+Date:   Wed Sep 13 15:00:09 2000 +0000
+
+    Fix for [Bug #112247] Hard MGA lock with trispd -size 50000
+
+commit bda40b41465ab67f8eef0b89cd26f9bbe8cf4a85
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Sun Sep 10 04:59:05 2000 +0000
+
+    Sync with 2.4.0-test8 kernel.
+
+commit 3adced5b29924079da9b600265687863e6f92d99
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Thu Sep 7 22:33:36 2000 +0000
+
+    file drm_heavy_kern_lock.c was initially added on branch
+        mga-lock-debug-0-0-1-branch.
+
+commit 5f2cfc5bd8132d1bd4dabd78848acd0ee038ea92
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Thu Sep 7 20:42:32 2000 +0000
+
+    Merge of tdfx branch undid the changes from the 2.4.0-test8-pre5 kernel
+        sync, so apply them again.
+
+commit f1bb3c5f5ff40e89004064d8ac8e13a3798b9afb
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Thu Sep 7 12:40:41 2000 +0000
+
+    Merged tdfx-2-1-branch
+
+commit 7db6449142ca24183f50e6f9dcf396b899b4113b
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Wed Sep 6 20:56:34 2000 +0000
+
+    Sync with 2.4.0-test8-pre5 kernel.
+
+commit e3e2d66131a3615379fe81ea106d7133da084683
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu Aug 31 15:32:10 2000 +0000
+
+    Bump version number after kernel interface change.
+
+commit 433408db2e334f25df700b701fb3e159abd471b9
+Author: Rik Faith <faith@alephnull.com>
+Date:   Thu Aug 31 10:10:03 2000 +0000
+
+    Pre Linux 2.4.0 compatibility header file
+
+commit 0bdde422b7db154935295938a937dab0c3212edf
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Wed Aug 30 22:36:27 2000 +0000
+
+    Added planemask args for color and depthbuffer clears.
+
+commit 926349534d4a20b8dc4f795e41055540ad48d112
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Wed Aug 30 22:34:28 2000 +0000
+
+    Initialize vertsize correctly. Add planemask arguments for color and depth
+        stencil clearing.
+
+commit 32cebaf750b82639822f5f50d0aa8a4417595ada
+Author: Rik Faith <faith@alephnull.com>
+Date:   Mon Aug 28 19:50:52 2000 +0000
+
+    Add compatibility header file to make Linux 2.4.0 kernel patches cleaner.
+
+commit 6f07e1ff6bec8f306e8aa1d59b8bcaa93ffa776e
+Author: Rik Faith <faith@alephnull.com>
+Date:   Sat Aug 26 10:36:44 2000 +0000
+
+    Sync with Linux 2.4.0-test7 Add signal blocking support to all drivers
+        (using control-z on a running direct-rendering client should work now)
+
+commit 37643234affb329775d3330eed650dee59d39bad
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Aug 25 12:49:18 2000 +0000
+
+    Apply patch from Alan Hourihane to temporarily allow compilation on Alpha
+        (the driver has not been tested on Alpha -- this just makes it compile)
+
+commit ac3c3571a714a38f7572f94c40fe143b43beb3b9
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Aug 25 12:45:53 2000 +0000
+
+    Remove misleading authorship information from sis driver (author has been
+        contacted and will provide improved information later) Rename
+        sis_drm_public.h to sis_drm.h to be consistent with the other drivers.
+
+commit 68f6795ef45739816fe9d5f1f5b3ef4900bf3187
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Aug 25 12:44:44 2000 +0000
+
+    Improve detection of kill_fasync parameter count Make compilation of sis.o
+        depend on CONFIG_FB_SIS
+
+commit fb3939c1a5cee3fedc02e0ca710870548481f99e
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Sun Aug 20 18:16:49 2000 +0000
+
+    Bug fixes for 32bpp rendering (still disabled)
+
+commit e30361416b31f6661d36f9d331f48217d66c9ee8
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Fri Aug 18 19:03:19 2000 +0000
+
+    Possible fix for trispd bug
+
+commit 364d44a24cb7a32ab7ac860e9dde0cd5d082fcd7
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Aug 18 18:57:56 2000 +0000
+
+    Fix ABA problem in drm_freelist_{put,try}
+
+commit f0f6509a72abf3a3a0a8f26a35b7a8f3d96cbb9b
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Aug 18 13:55:23 2000 +0000
+
+    Sync with Linux 2.4.0-test7/pre4
+
+commit f75ec3010ad8d15d316f6e6d580c85f9e6b8466e
+Author: Rik Faith <faith@alephnull.com>
+Date:   Thu Aug 17 20:26:11 2000 +0000
+
+    Bug #112196: auth.c uses semaphores while holding spinlocks Make spinlocked
+        region smaller to avoid semaphore.
+
+commit 761ffd63f3b8c9789afe026e75d384a6d450165a
+Author: Rik Faith <faith@alephnull.com>
+Date:   Thu Aug 17 20:20:33 2000 +0000
+
+    Bug #112197 Made sis driver compile under 2.4.0-test7/pre4
+
+commit 3e42514360d15f63c250875e3aa4eb6ddd748763
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Wed Aug 16 21:13:24 2000 +0000
+
+    Fix for bug #111744 which caused any application to never render and dma to
+        stall on certain mga cards
+
+commit cba4d3504c843f6f66ffc0b477f86b4ee0048065
+Author: David Dawes <dawes@xfree86.org>
+Date:   Wed Aug 16 18:29:06 2000 +0000
+
+    first part of 4.0.1b merge
+
+commit 0cbca9cca2a9680bcced7d2ffe47599a37c7fea9
+Author: David Dawes <dawes@xfree86.org>
+Date:   Wed Aug 16 17:23:02 2000 +0000
+
+    Import of XFree86 4.0.1b
+
+commit 1df8afa8fff0750775ebcd8770d3b887053a65a7
+Author: David Dawes <dawes@xfree86.org>
+Date:   Wed Aug 16 17:23:02 2000 +0000
+
+    Initial revision
+
+commit 8b9363d1b1f7bc40fb68261f7659dea5124f2821
+Author: Rik Faith <faith@alephnull.com>
+Date:   Tue Aug 8 16:04:21 2000 +0000
+
+    Sync with Linux 2.4.0-test6-pre8
+
+commit 9199075a6a975ebcc44aff53fe0f77080c01a30b
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Mon Aug 7 16:55:10 2000 +0000
+
+    Fix for multiple sarea bug + agp built into kernel segfault
+
+commit f3ae6786f89a4f63dbba93c5519d3792a1744dd7
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Aug 4 10:04:55 2000 +0000
+
+    Sync with Linux 2.4.0-test6-pre2
+
+commit bcad11818296fa58a356175bc7e13060579012d0
+Author: Rik Faith <faith@alephnull.com>
+Date:   Sat Jul 22 01:08:00 2000 +0000
+
+    Fix typo
+
+commit 1e54e554312d0970427e81c0a2bc8a16d1325c07
+Author: Rik Faith <faith@alephnull.com>
+Date:   Sat Jul 22 01:04:22 2000 +0000
+
+    Move to new, denser, easier-to-read Linux kernel Makefile format
+
+commit 3bcc55a74d5fba18e53c4a6441dffb50badbbec0
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Jul 21 18:28:01 2000 +0000
+
+    Revert some changes and try alternative way to clean up AGP handling.
+
+commit 6dd96a15ed329f26565bb971877f03e15801f3f5
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Jul 21 16:57:00 2000 +0000
+
+    Revert some changes and try alternative way to clean up AGP handling.
+
+commit e38b34e54a79919588f23294ddb326309c9cb005
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Jul 21 15:48:24 2000 +0000
+
+    Fixes for building in the kernel tree
+
+commit 81da79d1ed038ff8968abcf1cde3362035603861
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Jul 21 14:20:57 2000 +0000
+
+    Changes to make AGP optional for in-kernel builds
+
+commit 6d1ce8fe7727ee0a704a8a7464b22559ce9831fd
+Author: Rik Faith <faith@alephnull.com>
+Date:   Thu Jul 20 20:21:10 2000 +0000
+
+    kfree_s was deprecated in 2.4.0-test?
+
+commit b4722ec943b3c51e103aaf7c6c77fe7b9c2c716d
+Author: Rik Faith <faith@alephnull.com>
+Date:   Thu Jul 20 05:17:49 2000 +0000
+
+    More fixups for kernel build: EXPORT_SYMTAB warning removal
+        put_module_symbol clean up of tdfx tdfx_cleanup routine Makefile.kernel
+        fix
+
+commit 0bd1fa795a06f592c1115b251685b36fec63fed3
+Author: Rik Faith <faith@alephnull.com>
+Date:   Thu Jul 20 01:52:00 2000 +0000
+
+    Fixes for building in the kernel tree
+
+commit e8c9ed03f8d950ef82c09e387001b2fd43b81182
+Author: Rik Faith <faith@alephnull.com>
+Date:   Thu Jul 20 01:14:58 2000 +0000
+
+    Fixed for monolithic kernel build
+
+commit 742c33bf6197e6ed18c7de89c7d895fecafaa838
+Author: Rik Faith <faith@alephnull.com>
+Date:   Thu Jul 20 00:59:40 2000 +0000
+
+    Fix signature for *_options function
+
+commit c459c9ead3476a8edc1cd453fafa2b1c83c20e60
+Author: Rik Faith <faith@alephnull.com>
+Date:   Thu Jul 20 00:48:12 2000 +0000
+
+    Added support for building as modules or as part of monolithic kernel
+
+commit 1d3c4d2ed2d7dd9e91037cff9ef0044a8fc2a6bb
+Author: Rik Faith <faith@alephnull.com>
+Date:   Wed Jul 19 20:59:35 2000 +0000
+
+    Bump driver dates and add descriptions
+
+commit ee9514b63b4309defc21a929deba1651a5dd8306
+Author: Rik Faith <faith@alephnull.com>
+Date:   Wed Jul 19 20:41:51 2000 +0000
+
+    Allow SAREA > 1 page in size
+
+commit aed8549e91ade1582505ebce50e4a79d99b4436f
+Author: Rik Faith <faith@alephnull.com>
+Date:   Wed Jul 19 18:38:41 2000 +0000
+
+    Sync with Linux 2.4.0-test4 kernel
+
+commit 7b888f87fa5ec559df97a7e911dd5a3328895f6f
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Thu Jul 13 18:47:48 2000 +0000
+
+    applied Jeff's xf86cvs-I810copy.patch
+
+commit 4509385d37d0738f14d48bd91d9378e72dacc063
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Wed Jul 12 21:37:17 2000 +0000
+
+    Final misc changes to bring upto 4.0.1
+
+commit 8751b6774da527fdc3773d86da53ad5948b733dc
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Tue Jul 11 11:41:07 2000 +0000
+
+    Merge XFree86 4.0.1
+
+commit 8bc39d01cae622db6097b967c132f9b0e04fb785
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Jul 10 21:32:06 2000 +0000
+
+    Import of XFree86 4.0.1
+
+commit 62838b948cdddc0f007c200fbec195c1a008c731
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Sat Jul 1 01:50:00 2000 +0000
+
+    Fix for agpgart module detection. If the kernel module has been configured
+        to use AGP, and the module is not present, fail gracefully instead of
+        doing evil things.
+
+commit dc2701a9f6034a04319f71e43e7f928f818be6db
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Fri Jun 23 17:14:20 2000 +0000
+
+    Update register definitions to match r128_reg.h
+
+commit d399dbcd569a66f5bf4863ffa2aab95fa8ebd5fc
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Tue Jun 13 17:38:09 2000 +0000
+
+    Merged bsd-1-0-1
+
+commit 2fbd4bf0189cf6d421000c7eea85fee3b9c79ed0
+Author: Rik Faith <faith@alephnull.com>
+Date:   Tue Jun 13 14:34:13 2000 +0000
+
+    Unify code with kernel: Change some spacing in comments Add #include
+        <linux/config.h> to all *_drv.c files
+
+commit 1c8b2b5e06f7967babfa49b9dc8bf24316bfe201
+Author: Rik Faith <faith@alephnull.com>
+Date:   Tue Jun 13 14:22:03 2000 +0000
+
+    Update email addresses and copyright notices to reflect VA Linux Systems
+
+commit d5348efe258d5399dd161bb488d22c981177bf78
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Mon Jun 12 15:47:31 2000 +0000
+
+    Merging the ati-4-1-0 branch onto the trunk.
+
+commit ea425f532fb9c5b8f4d942e45751b7f715464b34
+Author: Daryll Strauss <daryll@users.sourceforge.net>
+Date:   Mon Jun 12 02:33:12 2000 +0000
+
+    Merged the tdfx-2-0 branch onto the trunk
+
+commit b084e752920a3cc8ef904e67280fd903d050c301
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Fri Jun 9 17:16:10 2000 +0000
+
+    file mga_state.c was initially added on branch bsd-1-0-1-branch.
+
+commit 776faf51f00a856349c46bcc87e888207ec68558
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Fri Jun 9 17:16:10 2000 +0000
+
+    file mga_drv.h was initially added on branch bsd-1-0-1-branch.
+
+commit 8444cd6f11ecd8dca28f0a54c769bd908c4dd1df
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Fri Jun 9 17:16:10 2000 +0000
+
+    file Makefile was initially added on branch bsd-1-0-1-branch.
+
+commit 2add3b9dc882b20e977ec16343ef13fabd4392a6
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Fri Jun 9 17:16:10 2000 +0000
+
+    file mga_dma.c was initially added on branch bsd-1-0-1-branch.
+
+commit 0eed55ba456d3541c11b6bb5e6739747ce177b84
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Fri Jun 9 17:16:10 2000 +0000
+
+    file mga_drv.c was initially added on branch bsd-1-0-1-branch.
+
+commit 736ca698c8f0fd42654b396caaa8f1e5b3f0f6a0
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Fri Jun 9 17:16:10 2000 +0000
+
+    file mga_bufs.c was initially added on branch bsd-1-0-1-branch.
+
+commit 018c96b3e6fa2119ca63e107c29ae5ce54ced11c
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Fri Jun 9 17:16:10 2000 +0000
+
+    file mga_context.c was initially added on branch bsd-1-0-1-branch.
+
+commit 877873ad33536765af1f51d485a2f8f28feff2e4
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Fri Jun 9 17:16:10 2000 +0000
+
+    file mga_drm.h was initially added on branch bsd-1-0-1-branch.
+
+commit 7d88040f523a1e82435a4bfae71d3b370d7a6a05
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Fri Jun 9 15:14:51 2000 +0000
+
+    Fix define of PCI_DEVICE_ID_3DLABS_GAMMA when not available in the kernel
+        includes.
+
+commit 0dc99dc4b941ca5b47ebbf7c7f03cb16b296f87c
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Thu Jun 8 17:13:48 2000 +0000
+
+    don't draw if window is unmapped, other updates (Jeff Hartmann)
+
+commit 569da5a42ebf10c86d6c6ba81866a888e1c708dc
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Thu Jun 8 14:38:22 2000 +0000
+
+    Merged glxmisc-3-0-0
+
+commit 5ce0f2afec70a1d062b749e1bf7150c21d35281d
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Tue Jun 6 22:51:29 2000 +0000
+
+    define VM_DONTCOPY to zero if undefined
+
+commit 909085a0083fccae1c74d2c78dc8a34efc55a5cf
+Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
+Date:   Mon Jun 5 00:42:21 2000 +0000
+
+    Include new updated gamma support.
+
+commit f0cf8d5edd466b3e224bad08223ba2b31fb3f046
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Wed May 31 14:32:36 2000 +0000
+
+    file ctxbitmap.c was initially added on branch bsd-1-0-1-branch.
+
+commit fa0a35a25fd008617ef6c7444cb92b138dd01859
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Tue May 30 17:13:31 2000 +0000
+
+    Merged bsd-1-0-0
+
+commit a72f370f4d8a65db5c4ff28dc49b0a1d7acc146c
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Tue May 30 14:47:51 2000 +0000
+
+    file r128_drm.h was initially added on branch bsd-1-0-0-branch.
+
+commit 50996ec9ba504e125d76a3713dfe96d5b8e99ac3
+Author: Gareth Hughes <gareth@users.sourceforge.net>
+Date:   Fri May 26 23:24:54 2000 +0000
+
+    Fixed WARP pipe hangs in Quake 3. Fullscreen or window at (0,0) seems to
+        work fine now, but an offset window still hangs in the same places as
+        before.
+
+commit ddcb28259f70d6808caf57e8eb9f74ca95b5f069
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Thu May 25 21:06:02 2000 +0000
+
+    Merged mga-0-0-3-branch
+    - New security model for i810
+    - Enable i810 dri by default
+    - New indexed vertex path for mga
+    - Mga kernel driver rework
+    - Removed dead files in i810 driver
+
+commit 2bb4f7ef4252007c356c0fbb8597925d395cb6b1
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Mon May 22 10:28:44 2000 +0000
+
+    file agpsupport.c was initially added on branch bsd-1-0-0-branch.
+
+commit 99efe3c247f726909f0a9a43e59835ebfc2d121f
+Author: Kevin E Martin <kem@kem.org>
+Date:   Thu May 18 06:14:27 2000 +0000
+
+    Merged ati-4-0-1
+
+commit e79f86b2540527fd5261aae9e251d582282914dc
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:47 2000 +0000
+
+    file tdfx_drv.c was initially added on branch bsd-1-0-0-branch.
+
+commit daa2b5316de12dd0bc231764312981567bb9db92
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:47 2000 +0000
+
+    file tdfx_context.c was initially added on branch bsd-1-0-0-branch.
+
+commit bbdf6517b972b40a2a9502b3a715a7fa4f04c623
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:47 2000 +0000
+
+    file Makefile was initially added on branch bsd-1-0-0-branch.
+
+commit 946502a97c93bc5266740e5e1d744f209aa3db46
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:47 2000 +0000
+
+    file tdfx_drv.h was initially added on branch bsd-1-0-0-branch.
+
+commit b8a8b6a0072cb5b5fbe57bce2ef4baf7dd2e8d7d
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:47 2000 +0000
+
+    file gamma_drv.h was initially added on branch bsd-1-0-0-branch.
+
+commit 0ce3eb0c37f36f857738c8c5ab869b015019a8a3
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:47 2000 +0000
+
+    file gamma_dma.c was initially added on branch bsd-1-0-0-branch.
+
+commit fc3e594efe21c7ee7f93840947c59b87a7da3713
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:47 2000 +0000
+
+    file gamma_drv.c was initially added on branch bsd-1-0-0-branch.
+
+commit ec9c8cf8c3ba4aef093e8a0fa754d40d0f56738a
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:46 2000 +0000
+
+    file lock.c was initially added on branch bsd-1-0-0-branch.
+
+commit dc461915572f293d4fb4ea9ff8c1806cdd850216
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:46 2000 +0000
+
+    file memory.c was initially added on branch bsd-1-0-0-branch.
+
+commit 3b55ffde2f887945b4c0bc8cd15730678e6a6333
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:46 2000 +0000
+
+    file vm.c was initially added on branch bsd-1-0-0-branch.
+
+commit 874b13095bc3571eefaf8098a1b08a6906bc8adb
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:46 2000 +0000
+
+    file drmstat.c was initially added on branch bsd-1-0-0-branch.
+
+commit 7428ee6555af8dc0e7a1b77f096bb683ebb8deb2
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:46 2000 +0000
+
+    file fops.c was initially added on branch bsd-1-0-0-branch.
+
+commit 2c88ecd2e6d7af28d69b634dc6e34b12bd02fb12
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:46 2000 +0000
+
+    file init.c was initially added on branch bsd-1-0-0-branch.
+
+commit 54d4e7afff4a5f8bc0932f1a048f52cbbbcbb06b
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:46 2000 +0000
+
+    file proc.c was initially added on branch bsd-1-0-0-branch.
+
+commit 291816bd9c718ce25fe9c9b54f68ce83d75ba9ed
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:46 2000 +0000
+
+    file lists.c was initially added on branch bsd-1-0-0-branch.
+
+commit badaa2f2eb79a244feb412b49c19cdc1372f69ff
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:46 2000 +0000
+
+    file sysctl.c was initially added on branch bsd-1-0-0-branch.
+
+commit 1d6bc9c448915a91b1ecf7ed7ac9b698b24d2ec7
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:46 2000 +0000
+
+    file context.c was initially added on branch bsd-1-0-0-branch.
+
+commit bbb0c2352b93f7b71900f66ddcfb6621a79c66e6
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:46 2000 +0000
+
+    file ioctl.c was initially added on branch bsd-1-0-0-branch.
+
+commit 573dcc12080f12f3afda076497185e0cf317ced3
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:46 2000 +0000
+
+    file dma.c was initially added on branch bsd-1-0-0-branch.
+
+commit a1a5b192d4ba3bc1a57e7f7fa708139d256689b8
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:46 2000 +0000
+
+    file bufs.c was initially added on branch bsd-1-0-0-branch.
+
+commit 111738fade531ad02729b8b2d18a077afe74459d
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:46 2000 +0000
+
+    file auth.c was initially added on branch bsd-1-0-0-branch.
+
+commit 93dcf91a0f03db4a07b4b2d86c0398c144883ff5
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:46 2000 +0000
+
+    file drawable.c was initially added on branch bsd-1-0-0-branch.
+
+commit c14788bf2982357e529114e4b4cf70e7b730a8ff
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:46 2000 +0000
+
+    file mga_drm.h was initially added on branch bsd-1-0-0-branch.
+
+commit 356bfda022741de65c7629c5c282690c0939cde2
+Author: Doug Rabson <dfr@freebsd.org>
+Date:   Sun May 7 14:14:46 2000 +0000
+
+    file i810_drm.h was initially added on branch bsd-1-0-0-branch.
+
+commit fc671ac20f84b2a8bac34472aa2c3033dee3acab
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file drmP.h was initially added on branch bsd-1-0-0-branch.
+
+commit 6b760708bdf876bf4cfd567743e45905d6c50653
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file Makefile.bsd was initially added on branch bsd-1-0-0-branch.
+
+commit 188d7591db6cddad414d971ac4db1c67855945d8
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file Imakefile was initially added on branch bsd-1-0-0-branch.
+
+commit a8af9a06524345dfd14ab42fb21484f0a8b22117
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file drm.h was initially added on branch bsd-1-0-0-branch.
+
+commit 9ca9e835279b66b14ad74158044aa6f08986d25b
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file tdfx_drv.c was initially added on branch bsd-1-0-0-branch.
+
+commit 268b2d0fa4c97c75b4cb2ce0d005b115da123b88
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file gamma_drv.h was initially added on branch bsd-1-0-0-branch.
+
+commit 2b4191b5b2331bc3146a546cd6737ba4cc8ea812
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file gamma_drv.c was initially added on branch bsd-1-0-0-branch.
+
+commit f352d4892ece370627de380da362cd55cf3ef2e6
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file gamma_dma.c was initially added on branch bsd-1-0-0-branch.
+
+commit a8ea56741b040e85221c7a4c5bfe9ff3d8817336
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file auth.c was initially added on branch bsd-1-0-0-branch.
+
+commit ba453d71d3cca772c6682772e96eb606d208cbee
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file bufs.c was initially added on branch bsd-1-0-0-branch.
+
+commit 244e9c02acf60bd5e1aba9082f889509bb0f4bb6
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file context.c was initially added on branch bsd-1-0-0-branch.
+
+commit 8f45e86a7681f73238c065d59be4b31ee058ba1d
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file dma.c was initially added on branch bsd-1-0-0-branch.
+
+commit 94e0ea68ae33160e62fcc9ffd38d919b8bab06f1
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file drawable.c was initially added on branch bsd-1-0-0-branch.
+
+commit 47c42ab42a8248794d07cea0e8fac233023c0754
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file drmstat.c was initially added on branch bsd-1-0-0-branch.
+
+commit e801cc05e755c0ecd6bb420482ebab110443ee17
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file fops.c was initially added on branch bsd-1-0-0-branch.
+
+commit 20afae284903d86b6168ebe26802935a9a761102
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file init.c was initially added on branch bsd-1-0-0-branch.
+
+commit 145d5c0006c7c0ad51075424df16c961bff461dd
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file ioctl.c was initially added on branch bsd-1-0-0-branch.
+
+commit 39d7d7228d997c9839898becee8fce7e9baacf68
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file lists.c was initially added on branch bsd-1-0-0-branch.
+
+commit 1140d8b0343e273c71a01d0a82fe3325e2072fe8
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file lock.c was initially added on branch bsd-1-0-0-branch.
+
+commit 3df97c45106cd08ab393935494b2ec42bebdb567
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file memory.c was initially added on branch bsd-1-0-0-branch.
+
+commit 7304e831cc1e429a07f27d8fc916f72cbde508cf
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file proc.c was initially added on branch bsd-1-0-0-branch.
+
+commit fe7968a7c507f9b330cc17e1f21b846ebcba561a
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file sysctl.c was initially added on branch bsd-1-0-0-branch.
+
+commit 4735070bd77fe68542e116effbaaff61ae640ba2
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file tdfx_context.c was initially added on branch bsd-1-0-0-branch.
+
+commit 2efb5abb9bd233ebe57393c697d04b3e412cae27
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file tdfx_drv.h was initially added on branch bsd-1-0-0-branch.
+
+commit 813dc2fd4717e8fe21333e4c22d2380e0126bb0a
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Wed May 3 23:13:52 2000 +0000
+
+    file vm.c was initially added on branch bsd-1-0-0-branch.
+
+commit 01836824d5b3dd4833573ebf3f98ed4cfb9cd5b3
+Author: Brian Paul <brian.paul@tungstengraphics.com>
+Date:   Thu Apr 20 16:36:40 2000 +0000
+
+    Merged glxmisc-1-0-0
+
+commit da74fc3f29f3cc093929fe6c54140522ff489e2a
+Author: Kevin E Martin <kem@kem.org>
+Date:   Sat Apr 15 08:06:36 2000 +0000
+
+    file r128_bufs.c was initially added on branch ati-4-0-1-branch.
+
+commit 4a106124909259a08e65cc087dd6212629fa85a3
+Author: Kevin E Martin <kem@kem.org>
+Date:   Wed Apr 12 06:22:02 2000 +0000
+
+    file r128_dma.c was initially added on branch ati-4-0-1-branch.
+
+commit d476a211bcf712506ac11f79a9f6c56a49ab4907
+Author: Kevin E Martin <kem@kem.org>
+Date:   Wed Apr 12 06:22:02 2000 +0000
+
+    file r128_drm.h was initially added on branch ati-4-0-1-branch.
+
+commit 42f526b5ca90317dd751a772105f30e8151b8613
+Author: Daryll Strauss <daryll@users.sourceforge.net>
+Date:   Sun Apr 9 17:29:28 2000 +0000
+
+    Only enable DRI for 16bpp mode. Allow GL_BLEND if color is 0,0,0,1 Wrap
+        grTexLodBiasValue call Link math library into libGL Recognize Napalm
+        boards Allow CLUT/gamma changes Make driver compile on 2.2.14 kernel
+
+commit 1dcfddf9154bcce3d6e004acee7dd503c27d0f0b
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Wed Apr 5 18:48:23 2000 +0000
+
+    Fixed reclaim Oops
+
+commit ba1b1ae3806490cce16a9c8957b52cd74967f463
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Tue Apr 4 22:08:14 2000 +0000
+
+    Merged mga branch with trunk
+
+commit 7d715d1800031ccbd37db7f88896464c0e838f10
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Fri Mar 31 00:08:00 2000 +0000
+
+    file mga_drm.h was initially added on branch mga-0-0-2-branch.
+
+commit 45b6bd6f19d04e375dede6cd0374031a49e31efd
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Fri Mar 31 00:08:00 2000 +0000
+
+    file i810_drm.h was initially added on branch mga-0-0-2-branch.
+
+commit 5bd8014f276d447178a1193d9dea1b976647d6ce
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Thu Mar 16 03:37:30 2000 +0000
+
+    Merge with 4.0
+
+commit adc03d3661117a687b5e1686f11b4b1314922203
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Wed Mar 15 21:40:23 2000 +0000
+
+    Import of XFree86 4.0
+
+commit d9ff0e3884abd19cdf99426d4d4b1e8f17b4ffd1
+Author: Kevin E Martin <kem@kem.org>
+Date:   Tue Feb 22 22:10:28 2000 +0000
+
+    3.9.18 merge
+
+commit 7a9b291ab55dd9dcfeb35217f6105ad57c94f433
+Author: Kevin E Martin <kem@kem.org>
+Date:   Tue Feb 22 15:43:59 2000 +0000
+
+    Import of XFree86 3.9.18
+
+commit 9a1197da5cd84624f5b0741e0a20fee60eb8b4f1
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Sun Feb 13 01:29:40 2000 +0000
+
+    file i810_clear.c was initially added on branch mga-0-0-1-branch.
+
+commit 37fa5fd54ae4cedbd5db22a646b37dbef8998656
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Sun Feb 13 01:29:40 2000 +0000
+
+    file i810_dma.h was initially added on branch mga-0-0-1-branch.
+
+commit c6e856749badbdeeaa7647f93760f612f370a4ef
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Sat Feb 12 21:48:57 2000 +0000
+
+    file Makefile.linuxpoll was initially added on branch mga-0-0-1-branch.
+
+commit baacc589f1add9ca5ff8a471c2c2bcb1b93f227f
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Sat Feb 12 21:48:57 2000 +0000
+
+    file mga_dmapoll.c was initially added on branch mga-0-0-1-branch.
+
+commit 5a3acfc628f42ee244468f84e8e811c79f7bf938
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Sat Feb 12 02:08:58 2000 +0000
+
+    file i810_drm_public.h was initially added on branch mga-0-0-1-branch.
+
+commit 9fc0e46b67bd9ffa2b91644680fe21d0d9451314
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Sun Feb 6 18:50:35 2000 +0000
+
+    file mga_state.h was initially added on branch mga-0-0-1-branch.
+
+commit d222453c4af94838fc1a669c3222dc0fdd9ee896
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Fri Feb 4 07:32:24 2000 +0000
+
+    file mga_dma.h was initially added on branch mga-0-0-1-branch.
+
+commit a0ae1680027e9fc460a82ef70ee83c738d9d1846
+Author: Keith Whitwell <keith@tungstengraphics.com>
+Date:   Fri Feb 4 07:32:24 2000 +0000
+
+    file mga_clear.c was initially added on branch mga-0-0-1-branch.
+
+commit 9fcbf05c442d0b45d0fa7d7aca28e1f3c67de65a
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Fri Jan 28 02:11:01 2000 +0000
+
+    Fixed freelist_put bug
+
+commit 84ad2d4aaea46ca2be005a37bd99dc5be1b2a891
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Thu Jan 27 23:48:40 2000 +0000
+
+    file mga_state.c was initially added on branch mga-0-0-1-branch.
+
+commit d93a3667b2bcab7ed08de79e9eafd7c162d8e674
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Thu Jan 27 23:48:40 2000 +0000
+
+    file mga_drm_public.h was initially added on branch mga-0-0-1-branch.
+
+commit 0d9121a5ec6a5bdd881fbc48f97805b5aed2d0b5
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Wed Jan 19 13:05:51 2000 +0000
+
+    file mgareg_flags.h was initially added on branch mga-0-0-1-branch.
+
+commit d545384a2b719f84a9a27ca7502f05325a49e646
+Author: Rik Faith <faith@alephnull.com>
+Date:   Mon Jan 17 10:27:29 2000 +0000
+
+    Try a more complex (and more correct?) method for finding kernel inlcude
+        files
+
+commit fb0ace84a9e1afb0ec49b11d0a10898dbbb61502
+Author: Daryll Strauss <daryll@users.sourceforge.net>
+Date:   Sat Jan 15 18:25:07 2000 +0000
+
+    Remove -g from build Fix lost code from tdfx-1-1 merge in tdfx_priv.c Lower
+        the minimum required fifo size Fix the kernel tree detection in the
+        Makefile
+
+commit 9a838857e1a271bd13881c2cd2d058072654dd12
+Author: Rik Faith <faith@alephnull.com>
+Date:   Thu Jan 13 15:03:41 2000 +0000
+
+    Add new code to do SMP/MODVERSIONS detection for more distributions
+
+commit aa724a52b9e3b5fa6a768629e2d403288432b7a8
+Author: Daryll Strauss <daryll@users.sourceforge.net>
+Date:   Wed Jan 12 21:47:44 2000 +0000
+
+    Add a drm_poll function to the tdfx driver. This fixes the problem with
+    3.9.17 where the server hangs when the mouse is first moved.
+
+commit e83ae7576bca0dc248a03c8031b0cce37956aac4
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Sat Jan 8 00:17:21 2000 +0000
+
+    file i810_dma.c was initially added on branch mga-0-0-1-branch.
+
+commit ca64f467f296b26826c4e00e1f310a4301ac1e65
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Sat Jan 8 00:17:21 2000 +0000
+
+    file i810_drv.h was initially added on branch mga-0-0-1-branch.
+
+commit 19f6b7f5ff0e836262bb1478d9aae9a65f733f5d
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Sat Jan 8 00:17:21 2000 +0000
+
+    file i810_drv.c was initially added on branch mga-0-0-1-branch.
+
+commit c3622292efbf605b09ce63c5bed27d02c4f6cafe
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Sat Jan 8 00:17:21 2000 +0000
+
+    file i810_bufs.c was initially added on branch mga-0-0-1-branch.
+
+commit 138484c670aa570d7ad2e0308ace13ec0bfe9ee0
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Sat Jan 8 00:17:21 2000 +0000
+
+    file i810_context.c was initially added on branch mga-0-0-1-branch.
+
+commit 9243a76e0384f66c6c6799917affffbd9ca38ec6
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Jan 7 06:54:54 2000 +0000
+
+    Merge between X_3_9_16 and X_3_9_17 Compiles but may not run.
+
+commit bf0e55959f6c73731500ed9a0d4decc17c9523cd
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Thu Jan 6 23:44:30 2000 +0000
+
+    file mga_bufs.c was initially added on branch mga-0-0-1-branch.
+
+commit cbb5afb3386a074f1b05983ed3880b3b33cb0d26
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Thu Jan 6 23:44:30 2000 +0000
+
+    file mga_context.c was initially added on branch mga-0-0-1-branch.
+
+commit 19da57df105a2a71842cf3a6a18ebb07c86c95fc
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Thu Jan 6 23:44:30 2000 +0000
+
+    file ctxbitmap.c was initially added on branch mga-0-0-1-branch.
+
+commit 1c33c6909546e3b51f36c04bba12cc2275149902
+Author: Rik Faith <faith@alephnull.com>
+Date:   Thu Jan 6 12:55:00 2000 +0000
+
+    Import of XFree86 3.9.17
+
+commit 0371c290a12f75d36c9c1e7c947bf98fe210908b
+Author: Daryll Strauss <daryll@users.sourceforge.net>
+Date:   Sat Dec 18 18:34:59 1999 +0000
+
+    Rename the device to be /dev/dri instead of /dev/dri to avoid a conflict.
+        Rename proc entry from /proc/graphics to /proc/dri to be consistent.
+
+commit 46e1467a83415f3859ac15b8aa8dfb829c85d1d4
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Dec 17 17:17:53 1999 +0000
+
+    file agpsupport.c was initially added on branch ati-4-0-0-branch.
+
+commit 87fd9a07fc0bd8d052843817703e0032cbe365f6
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Dec 17 17:15:18 1999 +0000
+
+    file r128_drv.c was initially added on branch ati-4-0-0-branch.
+
+commit bf24c3d8819be07d29ee6fdd9bf95b5127c2b018
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Dec 17 17:15:18 1999 +0000
+
+    file r128_context.c was initially added on branch ati-4-0-0-branch.
+
+commit 1606f5b249386c27a0d70a1e7693d1246ada3de5
+Author: Rik Faith <faith@alephnull.com>
+Date:   Fri Dec 17 17:15:18 1999 +0000
+
+    file r128_drv.h was initially added on branch ati-4-0-0-branch.
+
+commit 32338d3ebb7153b6c9c41bbc1b1f2a627178cb93
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Wed Dec 15 06:49:15 1999 +0000
+
+    file mga_drv.c was initially added on branch mga-0-0-1-branch.
+
+commit 8de9114ea6be1790a8d36cd260e0944f2991d8b8
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Wed Dec 15 06:49:15 1999 +0000
+
+    file mga_dma.c was initially added on branch mga-0-0-1-branch.
+
+commit 1c6999d90c77ae43616f180345dc2257ae65fe3a
+Author: Jeff Hartmann <jhartmann@valinux.com>
+Date:   Wed Dec 15 06:49:15 1999 +0000
+
+    file mga_drv.h was initially added on branch mga-0-0-1-branch.
+
+commit b03b238dfc4d1992e27878ea6f3cac334f1fd56d
+Author: Rik Faith <faith@alephnull.com>
+Date:   Wed Dec 8 19:20:20 1999 +0000
+
+    Sync with Linux 2.3.30
+
+commit e1dba5c3a73078dec24f07a6d685435677db94a4
+Author: Daryll Strauss <daryll@users.sourceforge.net>
+Date:   Tue Dec 7 03:37:16 1999 +0000
+
+    Move Mesa to xc/extras Update to the latest Mesa 3.2 code Fix the Q3Demo
+        bugs (white railgun and texture mapping) Simplify driver texture
+        mapping routines Fix device driver for 2.3 kernels Improve performance
+
+commit b6a28bfe98f2c89cfb91079bd3c7b63fb0144eb1
+Author: Daryll Strauss <daryll@users.sourceforge.net>
+Date:   Sun Dec 5 23:10:37 1999 +0000
+
+    First DRI release of 3dfx driver.
+
+commit a8ab34ed47c1880b1206812c9b1b8312cd7a3357
+Author: Daryll Strauss <daryll@users.sourceforge.net>
+Date:   Sun Dec 5 01:19:48 1999 +0000
+
+    Import XFree 3.9.16
+
+commit b3a5766992019fc5f44cc9afd01b2617b76f47a7
+Author: Daryll Strauss <daryll@users.sourceforge.net>
+Date:   Sun Dec 5 01:19:48 1999 +0000
+
+    Initial revision
--- libdrm-2.4.32.orig/autogen.sh
+++ libdrm-2.4.32/autogen.sh
@@ -0,0 +1,6 @@
+#! /bin/sh
+
+test -n "$srcdir" || srcdir=`dirname "$0"`
+test -n "$srcdir" || srcdir=.
+autoreconf --force --install --verbose "$srcdir"
+test -n "$NOCONFIGURE" || "$srcdir/configure" "$@"
--- libdrm-2.4.32.orig/RELEASING
+++ libdrm-2.4.32/RELEASING
@@ -0,0 +1,66 @@
+The release criteria for libdrm is essentially "if you need a release,
+make one".  There is no designated release engineer or maintainer.
+Anybody is free to make a release if there's a certain feature or bug
+fix they need in a released version of libdrm.
+
+When new ioctl definitions are merged into drm-next, we will add
+support to libdrm, at which point we typically create a new release.
+However, this is up to whoever is driving the feature in question.
+
+Follow these steps to release a new version of libdrm:
+
+  1) Ensure that there are no local, uncommitted/unpushed
+     modifications. You're probably in a good state if both "git diff
+     HEAD" and "git log master..origin/master" give no output.
+
+  3) Bump the version number in configure.ac. We seem to have settled
+     for 2.4.x as the versioning scheme for libdrm, so just bump the
+     micro version.
+
+  4) Run autoconf and then re-run ./configure so the build system
+     picks up the new version number.
+
+  5) Verify that the code passes "make distcheck".  libdrm is tricky
+     to distcheck since the test suite will need to become drm master.
+     This means that you need to run it outside X, that is, in text
+     mode (KMS or no KMS doesn't matter).
+
+     Running "make distcheck" should result in no warnings or errors
+     and end with a message of the form:
+
+	=============================================
+	libdrm-X.Y.Z archives ready for distribution:
+	libdrm-X.Y.Z.tar.gz
+	libdrm-X.Y.Z.tar.bz2
+	=============================================
+
+     Make sure that the version number reported by distcheck and in
+     the tarball names matches the number you bumped to in configure.ac.
+
+  6) Commit the configure.ac change and make an annotated tag for that
+     commit with the version number of the release as the name and a
+     message of "libdrm X.Y.Z".  For example, for the 2.4.16 release
+     the command is:
+
+	git tag -a 2.4.16 -m "libdrm 2.4.16"
+
+  7) Push the commit and tag by saying
+
+	git push --tags origin master
+
+     assuming the remote for the upstream libdrm repo is called origin.
+
+  6) Use the release.sh script from the xorg/util/modular repo to
+     upload the tarballs to the freedesktop.org download area and
+     create an annouce email template.  The script takes three
+     arguments: a "section", the previous tag and the new tag we just
+     created.  For 2.4.16 again, the command is:
+
+	../modular/release.sh libdrm 2.4.15 2.4.16
+
+     This copies the two tarballs to freedesktop.org and creates
+     libdrm-2.4.16.announce which has a detailed summary of the
+     changes, links to the tarballs, MD5 and SHA1 sums and pre-filled
+     out email headers.  Fill out the blank between the email headers
+     and the list of changes with a brief message of what changed or
+     what prompted this release.  Send out the email and you're done!
--- libdrm-2.4.32.orig/xf86mm.h
+++ libdrm-2.4.32/xf86mm.h
@@ -0,0 +1,198 @@
+/**************************************************************************
+ * 
+ * Copyright 2006 Tungsten Graphics, Inc., Bismarck, ND. USA.
+ * All Rights Reserved.
+ * 
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the
+ * "Software"), to deal in the Software without restriction, including
+ * without limitation the rights to use, copy, modify, merge, publish,
+ * distribute, sub license, and/or sell copies of the Software, and to
+ * permit persons to whom the Software is furnished to do so, subject to
+ * the following conditions:
+ * 
+ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL
+ * THE COPYRIGHT HOLDERS, AUTHORS AND/OR ITS SUPPLIERS BE LIABLE FOR ANY CLAIM, 
+ * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR 
+ * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE 
+ * USE OR OTHER DEALINGS IN THE SOFTWARE.
+ *
+ * The above copyright notice and this permission notice (including the
+ * next paragraph) shall be included in all copies or substantial portions
+ * of the Software.
+ * 
+ * 
+ **************************************************************************/
+
+#ifndef _XF86MM_H_
+#define _XF86MM_H_
+#include <stddef.h>
+#include <stdint.h>
+#include "drm.h"
+
+/*
+ * Note on multithreaded applications using this interface.
+ * Libdrm is not threadsafe, so common buffer, TTM, and fence objects need to
+ * be protected using an external mutex.
+ *
+ * Note: Don't protect the following functions, as it may lead to deadlocks:
+ * drmBOUnmap().
+ * The kernel is synchronizing and refcounting buffer maps. 
+ * User space only needs to refcount object usage within the same application.
+ */
+
+
+/*
+ * List macros heavily inspired by the Linux kernel
+ * list handling. No list looping yet.
+ */
+
+typedef struct _drmMMListHead
+{
+    struct _drmMMListHead *prev;
+    struct _drmMMListHead *next;
+} drmMMListHead;
+
+#define DRMINITLISTHEAD(__item)		       \
+  do{					       \
+    (__item)->prev = (__item);		       \
+    (__item)->next = (__item);		       \
+  } while (0)
+
+#define DRMLISTADD(__item, __list)		\
+  do {						\
+    (__item)->prev = (__list);			\
+    (__item)->next = (__list)->next;		\
+    (__list)->next->prev = (__item);		\
+    (__list)->next = (__item);			\
+  } while (0)
+
+#define DRMLISTADDTAIL(__item, __list)		\
+  do {						\
+    (__item)->next = (__list);			\
+    (__item)->prev = (__list)->prev;		\
+    (__list)->prev->next = (__item);		\
+    (__list)->prev = (__item);			\
+  } while(0)
+
+#define DRMLISTDEL(__item)			\
+  do {						\
+    (__item)->prev->next = (__item)->next;	\
+    (__item)->next->prev = (__item)->prev;	\
+  } while(0)
+
+#define DRMLISTDELINIT(__item)			\
+  do {						\
+    (__item)->prev->next = (__item)->next;	\
+    (__item)->next->prev = (__item)->prev;	\
+    (__item)->next = (__item);			\
+    (__item)->prev = (__item);			\
+  } while(0)
+
+#define DRMLISTENTRY(__type, __item, __field)   \
+    ((__type *)(((char *) (__item)) - offsetof(__type, __field)))
+
+#define DRMLISTEMPTY(__item) ((__item)->next == (__item))
+
+#define DRMLISTFOREACHSAFE(__item, __temp, __list)			\
+	for ((__item) = (__list)->next, (__temp) = (__item)->next;	\
+	     (__item) != (__list);					\
+	     (__item) = (__temp), (__temp) = (__item)->next)
+
+#define DRMLISTFOREACHSAFEREVERSE(__item, __temp, __list)		\
+	for ((__item) = (__list)->prev, (__temp) = (__item)->prev;	\
+	     (__item) != (__list);					\
+	     (__item) = (__temp), (__temp) = (__item)->prev)
+
+typedef struct _drmFence
+{
+    unsigned handle;
+    int fence_class;
+    unsigned type; 
+    unsigned flags;
+    unsigned signaled;
+    uint32_t sequence;
+    unsigned pad[4]; /* for future expansion */
+} drmFence;
+
+typedef struct _drmBO
+{
+    unsigned handle;
+    uint64_t mapHandle;
+    uint64_t flags;
+    uint64_t proposedFlags;
+    unsigned mapFlags;
+    unsigned long size;
+    unsigned long offset;
+    unsigned long start;
+    unsigned replyFlags;
+    unsigned fenceFlags;
+    unsigned pageAlignment;
+    unsigned tileInfo;
+    unsigned hwTileStride;
+    unsigned desiredTileStride;
+    void *virtual;
+    void *mapVirtual;
+    int mapCount;
+    unsigned pad[8];     /* for future expansion */
+} drmBO;
+
+/*
+ * Fence functions.
+ */
+
+extern int drmFenceCreate(int fd, unsigned flags, int fence_class,
+                          unsigned type, drmFence *fence);
+extern int drmFenceReference(int fd, unsigned handle, drmFence *fence);
+extern int drmFenceUnreference(int fd, const drmFence *fence);
+extern int drmFenceFlush(int fd, drmFence *fence, unsigned flush_type);
+extern int drmFenceSignaled(int fd, drmFence *fence, 
+                            unsigned fenceType, int *signaled);
+extern int drmFenceWait(int fd, unsigned flags, drmFence *fence, 
+                        unsigned flush_type);
+extern int drmFenceEmit(int fd, unsigned flags, drmFence *fence, 
+                        unsigned emit_type);
+extern int drmFenceBuffers(int fd, unsigned flags, uint32_t fence_class, drmFence *fence);
+
+
+/*
+ * Buffer object functions.
+ */
+
+extern int drmBOCreate(int fd, unsigned long size,
+		       unsigned pageAlignment, void *user_buffer,
+		       uint64_t mask, unsigned hint, drmBO *buf);
+extern int drmBOReference(int fd, unsigned handle, drmBO *buf);
+extern int drmBOUnreference(int fd, drmBO *buf);
+extern int drmBOMap(int fd, drmBO *buf, unsigned mapFlags, unsigned mapHint,
+		    void **address);
+extern int drmBOUnmap(int fd, drmBO *buf);
+extern int drmBOFence(int fd, drmBO *buf, unsigned flags, unsigned fenceHandle);
+extern int drmBOInfo(int fd, drmBO *buf);
+extern int drmBOBusy(int fd, drmBO *buf, int *busy);
+
+extern int drmBOWaitIdle(int fd, drmBO *buf, unsigned hint);
+
+/*
+ * Initialization functions.
+ */
+
+extern int drmMMInit(int fd, unsigned long pOffset, unsigned long pSize,
+		     unsigned memType);
+extern int drmMMTakedown(int fd, unsigned memType);
+extern int drmMMLock(int fd, unsigned memType, int lockBM, int ignoreNoEvict);
+extern int drmMMUnlock(int fd, unsigned memType, int unlockBM);
+extern int drmMMInfo(int fd, unsigned memType, uint64_t *size);
+extern int drmBOSetStatus(int fd, drmBO *buf, 
+			  uint64_t flags, uint64_t mask,
+			  unsigned int hint, 
+			  unsigned int desired_tile_stride,
+			  unsigned int tile_info);
+extern int drmBOVersion(int fd, unsigned int *major,
+			unsigned int *minor,
+			unsigned int *patchlevel);
+
+
+#endif
--- libdrm-2.4.32.orig/tests/auth.c
+++ libdrm-2.4.32/tests/auth.c
@@ -0,0 +1,137 @@
+/*
+ * Copyright © 2007 Intel Corporation
+ *
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the "Software"),
+ * to deal in the Software without restriction, including without limitation
+ * the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ * and/or sell copies of the Software, and to permit persons to whom the
+ * Software is furnished to do so, subject to the following conditions:
+ *
+ * The above copyright notice and this permission notice (including the next
+ * paragraph) shall be included in all copies or substantial portions of the
+ * Software.
+ *
+ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+ * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+ * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
+ * IN THE SOFTWARE.
+ *
+ * Authors:
+ *    Eric Anholt <eric@anholt.net>
+ *
+ */
+
+#include <limits.h>
+#include "drmtest.h"
+
+enum auth_event {
+	SERVER_READY,
+	CLIENT_MAGIC,
+	CLIENT_DONE,
+};
+
+int commfd[2];
+
+static void wait_event(int pipe, enum auth_event expected_event)
+{
+	int ret;
+	enum auth_event event;
+	unsigned char in;
+
+	ret = read(commfd[pipe], &in, 1);
+	if (ret == -1)
+		err(1, "read error");
+	event = in;
+
+	if (event != expected_event)
+		errx(1, "unexpected event: %d\n", event);
+}
+
+static void
+send_event(int pipe, enum auth_event send_event)
+{
+	int ret;
+	unsigned char event;
+
+	event = send_event;
+	ret = write(commfd[pipe], &event, 1);
+	if (ret == -1)
+		err(1, "failed to send event %d", event);
+}
+
+static void client()
+{
+	struct drm_auth auth;
+	int drmfd, ret;
+
+	/* XXX: Should make sure we open the same DRM as the master */
+	wait_event(0, SERVER_READY);
+
+	drmfd = drm_open_any();
+
+	/* Get a client magic number and pass it to the master for auth. */
+	auth.magic = 0; /* Quiet valgrind */
+	ret = ioctl(drmfd, DRM_IOCTL_GET_MAGIC, &auth);
+	if (ret == -1)
+		err(1, "Couldn't get client magic");
+	send_event(0, CLIENT_MAGIC);
+	ret = write(commfd[0], &auth.magic, sizeof(auth.magic));
+	if (ret == -1)
+		err(1, "Couldn't write auth data");
+
+	/* Signal that the client is completely done. */
+	send_event(0, CLIENT_DONE);
+}
+
+static void server()
+{
+	int drmfd, ret;
+	struct drm_auth auth;
+
+	drmfd = drm_open_any_master();
+
+	auth.magic = 0xd0d0d0d0;
+	ret = ioctl(drmfd, DRM_IOCTL_AUTH_MAGIC, &auth);
+	if (ret != -1 || errno != EINVAL)
+		errx(1, "Authenticating bad magic succeeded\n");
+
+	send_event(1, SERVER_READY);
+
+	wait_event(1, CLIENT_MAGIC);
+	ret = read(commfd[1], &auth.magic, sizeof(auth.magic));
+	if (ret == -1)
+		err(1, "Failure to read client magic");
+
+	ret = ioctl(drmfd, DRM_IOCTL_AUTH_MAGIC, &auth);
+	if (ret == -1)
+		err(1, "Failure to authenticate client magic\n");
+
+	wait_event(1, CLIENT_DONE);
+}
+
+/**
+ * Checks DRM authentication mechanisms.
+ */
+int main(int argc, char **argv)
+{
+	int ret;
+
+	ret = pipe(commfd);
+	if (ret == -1)
+		err(1, "Couldn't create pipe");
+
+	ret = fork();
+	if (ret == -1)
+		err(1, "failure to fork client");
+	if (ret == 0)
+		client();
+	else
+		server();
+
+	return 0;
+}
+
--- libdrm-2.4.32.orig/tests/lock.c
+++ libdrm-2.4.32/tests/lock.c
@@ -0,0 +1,263 @@
+/*
+ * Copyright © 2007 Intel Corporation
+ *
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the "Software"),
+ * to deal in the Software without restriction, including without limitation
+ * the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ * and/or sell copies of the Software, and to permit persons to whom the
+ * Software is furnished to do so, subject to the following conditions:
+ *
+ * The above copyright notice and this permission notice (including the next
+ * paragraph) shall be included in all copies or substantial portions of the
+ * Software.
+ *
+ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+ * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+ * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
+ * IN THE SOFTWARE.
+ *
+ * Authors:
+ *    Eric Anholt <eric@anholt.net>
+ *
+ */
+
+/** @file lock.c
+ * Tests various potential failures of the DRM locking mechanisms
+ */
+
+#include <limits.h>
+#include "drmtest.h"
+
+enum auth_event {
+	SERVER_READY,
+	CLIENT_MAGIC,
+	SERVER_LOCKED,
+	CLIENT_LOCKED,
+};
+
+int commfd[2];
+unsigned int lock1 = 0x00001111;
+unsigned int lock2 = 0x00002222;
+
+/* return time in milliseconds */
+static unsigned int
+get_millis()
+{
+	struct timeval tv;
+
+	gettimeofday(&tv, NULL);
+	return tv.tv_sec * 1000 + tv.tv_usec / 1000;
+}
+
+static void
+wait_event(int pipe, enum auth_event expected_event)
+{
+	int ret;
+	enum auth_event event;
+	unsigned char in;
+
+	ret = read(commfd[pipe], &in, 1);
+	if (ret == -1)
+		err(1, "read error");
+	event = in;
+
+	if (event != expected_event)
+		errx(1, "unexpected event: %d\n", event);
+}
+
+static void
+send_event(int pipe, enum auth_event send_event)
+{
+	int ret;
+	unsigned char event;
+
+	event = send_event;
+	ret = write(commfd[pipe], &event, 1);
+	if (ret == -1)
+		err(1, "failed to send event %d", event);
+}
+
+static void
+client_auth(int drmfd)
+{
+	struct drm_auth auth;
+	int ret;
+
+	/* Get a client magic number and pass it to the master for auth. */
+	ret = ioctl(drmfd, DRM_IOCTL_GET_MAGIC, &auth);
+	if (ret == -1)
+		err(1, "Couldn't get client magic");
+	send_event(0, CLIENT_MAGIC);
+	ret = write(commfd[0], &auth.magic, sizeof(auth.magic));
+	if (ret == -1)
+		err(1, "Couldn't write auth data");
+}
+
+static void
+server_auth(int drmfd)
+{
+	struct drm_auth auth;
+	int ret;
+
+	send_event(1, SERVER_READY);
+	wait_event(1, CLIENT_MAGIC);
+	ret = read(commfd[1], &auth.magic, sizeof(auth.magic));
+	if (ret == -1)
+		err(1, "Failure to read client magic");
+
+	ret = ioctl(drmfd, DRM_IOCTL_AUTH_MAGIC, &auth);
+	if (ret == -1)
+		err(1, "Failure to authenticate client magic\n");
+}
+
+/** Tests that locking is successful in normal conditions */
+static void
+test_lock_unlock(int drmfd)
+{
+	int ret;
+
+	ret = drmGetLock(drmfd, lock1, 0);
+	if (ret != 0)
+		err(1, "Locking failed");
+	ret = drmUnlock(drmfd, lock1);
+	if (ret != 0)
+		err(1, "Unlocking failed");
+}
+
+/** Tests that unlocking the lock while it's not held works correctly */
+static void
+test_unlock_unlocked(int drmfd)
+{
+	int ret;
+
+	ret = drmUnlock(drmfd, lock1);
+	if (ret == 0)
+		err(1, "Unlocking unlocked lock succeeded");
+}
+
+/** Tests that unlocking a lock held by another context fails appropriately */
+static void
+test_unlock_unowned(int drmfd)
+{
+	int ret;
+
+	ret = drmGetLock(drmfd, lock1, 0);
+	assert(ret == 0);
+	ret = drmUnlock(drmfd, lock2);
+	if (ret == 0)
+		errx(1, "Unlocking other context's lock succeeded");
+	ret = drmUnlock(drmfd, lock1);
+	assert(ret == 0);
+}
+
+/**
+ * Tests that an open/close by the same process doesn't result in the lock
+ * being dropped.
+ */
+static void test_open_close_locked(drmfd)
+{
+	int ret, tempfd;
+
+	ret = drmGetLock(drmfd, lock1, 0);
+	assert(ret == 0);
+	/* XXX: Need to make sure that this is the same device as drmfd */
+	tempfd = drm_open_any();
+	close(tempfd);
+	ret = drmUnlock(drmfd, lock1);
+	if (ret != 0)
+		errx(1, "lock lost during open/close by same pid");
+}
+
+static void client()
+{
+	int drmfd, ret;
+	unsigned int time;
+
+	wait_event(0, SERVER_READY);
+
+	/* XXX: Should make sure we open the same DRM as the master */
+	drmfd = drm_open_any();
+
+	client_auth(drmfd);
+
+	/* Wait for the server to grab the lock, then grab it ourselves (to
+	 * contest it).  Hopefully we hit it within the window of when the
+	 * server locks.
+	 */
+	wait_event(0, SERVER_LOCKED);
+	ret = drmGetLock(drmfd, lock2, 0);
+	time = get_millis();
+	if (ret != 0)
+		err(1, "Failed to get lock on client\n");
+	drmUnlock(drmfd, lock2);
+
+	/* Tell the server that our locking completed, and when it did */
+	send_event(0, CLIENT_LOCKED);
+	ret = write(commfd[0], &time, sizeof(time));
+
+	close(drmfd);
+	exit(0);
+}
+
+static void server()
+{
+	int drmfd, tempfd, ret;
+	unsigned int client_time, unlock_time;
+
+	drmfd = drm_open_any_master();
+
+	test_lock_unlock(drmfd);
+	test_unlock_unlocked(drmfd);
+	test_unlock_unowned(drmfd);
+	test_open_close_locked(drmfd);
+
+	/* Perform the authentication sequence with the client. */
+	server_auth(drmfd);
+
+	/* Now, test that the client attempting to lock while the server
+	 * holds the lock works correctly.
+	 */
+	ret = drmGetLock(drmfd, lock1, 0);
+	assert(ret == 0);
+	send_event(1, SERVER_LOCKED);
+	/* Wait a while for the client to do its thing */
+	sleep(1);
+	ret = drmUnlock(drmfd, lock1);
+	assert(ret == 0);
+	unlock_time = get_millis();
+
+	wait_event(1, CLIENT_LOCKED);
+	ret = read(commfd[1], &client_time, sizeof(client_time));
+	if (ret == -1)
+		err(1, "Failure to read client magic");
+
+	if (client_time < unlock_time)
+		errx(1, "Client took lock before server released it");
+
+	close(drmfd);
+}
+
+int main(int argc, char **argv)
+{
+	int ret;
+
+
+	ret = pipe(commfd);
+	if (ret == -1)
+		err(1, "Couldn't create pipe");
+
+	ret = fork();
+	if (ret == -1)
+		err(1, "failure to fork client");
+	if (ret == 0)
+		client();
+	else
+		server();
+
+	return 0;
+}
+
--- libdrm-2.4.32.orig/debian/libdrm2.install
+++ libdrm-2.4.32/debian/libdrm2.install
@@ -0,0 +1 @@
+usr/lib/*/libdrm.so.2*
--- libdrm-2.4.32.orig/debian/libdrm-radeon1.install
+++ libdrm-2.4.32/debian/libdrm-radeon1.install
@@ -0,0 +1 @@
+usr/lib/*/libdrm_radeon.so.1*
--- libdrm-2.4.32.orig/debian/libdrm-dev.install
+++ libdrm-2.4.32/debian/libdrm-dev.install
@@ -0,0 +1,4 @@
+usr/include/*
+usr/lib/*/lib*.a
+usr/lib/*/lib*.so
+usr/lib/*/pkgconfig/*
--- libdrm-2.4.32.orig/debian/libkms1.lintian-overrides
+++ libdrm-2.4.32/debian/libkms1.lintian-overrides
@@ -0,0 +1 @@
+symbols-declares-dependency-on-other-package libkms-private
--- libdrm-2.4.32.orig/debian/libdrm-nouveau1a.symbols
+++ libdrm-2.4.32/debian/libdrm-nouveau1a.symbols
@@ -0,0 +1,46 @@
+libdrm_nouveau.so.1 libdrm-nouveau1a #MINVER#
+ nouveau_bo_busy@Base 2.4.23
+ nouveau_bo_emit_buffer@Base 2.4.23
+ nouveau_bo_handle_get@Base 2.4.23
+ nouveau_bo_handle_ref@Base 2.4.23
+ nouveau_bo_init@Base 2.4.23
+ nouveau_bo_map@Base 2.4.23
+ nouveau_bo_map_flush@Base 2.4.23
+ nouveau_bo_map_range@Base 2.4.23
+ nouveau_bo_new@Base 2.4.23
+ nouveau_bo_new_tile@Base 2.4.23
+ nouveau_bo_pending@Base 2.4.23
+ nouveau_bo_ref@Base 2.4.23
+ nouveau_bo_takedown@Base 2.4.23
+ nouveau_bo_unmap@Base 2.4.23
+ nouveau_bo_user@Base 2.4.23
+ nouveau_bo_wrap@Base 2.4.23
+ nouveau_channel_alloc@Base 2.4.23
+ nouveau_channel_free@Base 2.4.23
+ nouveau_device_close@Base 2.4.23
+ nouveau_device_get_param@Base 2.4.23
+ nouveau_device_open@Base 2.4.23
+ nouveau_device_open_existing@Base 2.4.23
+ nouveau_device_set_param@Base 2.4.23
+ nouveau_grobj_alloc@Base 2.4.23
+ nouveau_grobj_autobind@Base 2.4.23
+ nouveau_grobj_free@Base 2.4.23
+ nouveau_grobj_ref@Base 2.4.23
+ nouveau_notifier_alloc@Base 2.4.23
+ nouveau_notifier_free@Base 2.4.23
+ nouveau_notifier_reset@Base 2.4.23
+ nouveau_notifier_return_val@Base 2.4.23
+ nouveau_notifier_status@Base 2.4.23
+ nouveau_notifier_wait_status@Base 2.4.23
+ nouveau_pushbuf_emit_reloc@Base 2.4.23
+ nouveau_pushbuf_fini@Base 2.4.23
+ nouveau_pushbuf_flush@Base 2.4.23
+ nouveau_pushbuf_init@Base 2.4.23
+ nouveau_pushbuf_marker_emit@Base 2.4.23
+ nouveau_pushbuf_marker_undo@Base 2.4.23
+ nouveau_pushbuf_submit@Base 2.4.23
+ nouveau_reloc_emit@Base 2.4.23
+ nouveau_resource_alloc@Base 2.4.23
+ nouveau_resource_destroy@Base 2.4.23
+ nouveau_resource_free@Base 2.4.23
+ nouveau_resource_init@Base 2.4.23
--- libdrm-2.4.32.orig/debian/libdrm-nouveau1a.lintian-overrides
+++ libdrm-2.4.32/debian/libdrm-nouveau1a.lintian-overrides
@@ -0,0 +1 @@
+libdrm-nouveau1a: package-name-doesnt-match-sonames libdrm-nouveau1
--- libdrm-2.4.32.orig/debian/libdrm-radeon1.lintian-overrides
+++ libdrm-2.4.32/debian/libdrm-radeon1.lintian-overrides
@@ -0,0 +1 @@
+libdrm-radeon1: symbols-declares-dependency-on-other-package libdrm-radeon-private
--- libdrm-2.4.32.orig/debian/libdrm-omap1.symbols
+++ libdrm-2.4.32/debian/libdrm-omap1.symbols
@@ -0,0 +1,16 @@
+libdrm_omap.so.1 libdrm-omap1 #MINVER#
+ omap_bo_cpu_fini@Base 2.4.26
+ omap_bo_cpu_prep@Base 2.4.26
+ omap_bo_del@Base 2.4.26
+ omap_bo_dmabuf@Base 2.4.29-1ubuntu1+ti1.1
+ omap_bo_from_name@Base 2.4.26
+ omap_bo_get_name@Base 2.4.26
+ omap_bo_handle@Base 2.4.26
+ omap_bo_map@Base 2.4.26
+ omap_bo_new@Base 2.4.26
+ omap_bo_new_tiled@Base 2.4.26
+ omap_bo_size@Base 2.4.26
+ omap_device_del@Base 2.4.26
+ omap_device_new@Base 2.4.26
+ omap_get_param@Base 2.4.26
+ omap_set_param@Base 2.4.26
--- libdrm-2.4.32.orig/debian/gbp.conf
+++ libdrm-2.4.32/debian/gbp.conf
@@ -0,0 +1,8 @@
+[DEFAULT]
+
+# Keep pristine-tar (allows to re-create 'orig').
+pristine-tar = True
+
+[git-import-dsc]
+# Import in the ubuntu branch, not master
+debian-branch = ubuntu
--- libdrm-2.4.32.orig/debian/libdrm-radeon1.symbols
+++ libdrm-2.4.32/debian/libdrm-radeon1.symbols
@@ -0,0 +1,62 @@
+libdrm_radeon.so.1 libdrm-radeon1 #MINVER#
+| libdrm-radeon-private
+ bof_array@Base 0 1
+ bof_array_append@Base 0 1
+ bof_array_get@Base 0 1
+ bof_array_size@Base 0 1
+ bof_blob@Base 0 1
+ bof_blob_size@Base 0 1
+ bof_blob_value@Base 0 1
+ bof_decref@Base 0 1
+ bof_dump_file@Base 0 1
+ bof_incref@Base 0 1
+ bof_int32@Base 0 1
+ bof_int32_value@Base 0 1
+ bof_load_file@Base 0 1
+ bof_object@Base 0 1
+ bof_object_get@Base 0 1
+ bof_object_set@Base 0 1
+ bof_print@Base 0 1
+ bof_string@Base 0 1
+ radeon_bo_debug@Base 2.4.17
+ radeon_bo_get_handle@Base 2.4.17
+ radeon_bo_get_src_domain@Base 2.4.17
+ radeon_bo_get_tiling@Base 2.4.17
+ radeon_bo_is_busy@Base 2.4.17
+ radeon_bo_is_referenced_by_cs@Base 2.4.17
+ radeon_bo_is_static@Base 2.4.17
+ radeon_bo_manager_gem_ctor@Base 2.4.17
+ radeon_bo_manager_gem_dtor@Base 2.4.17
+ radeon_bo_map@Base 2.4.17
+ radeon_bo_open@Base 2.4.17
+ radeon_bo_ref@Base 2.4.17
+ radeon_bo_set_tiling@Base 2.4.17
+ radeon_bo_unmap@Base 2.4.17
+ radeon_bo_unref@Base 2.4.17
+ radeon_bo_wait@Base 2.4.17
+ radeon_cs_begin@Base 2.4.17
+ radeon_cs_create@Base 2.4.17
+ radeon_cs_destroy@Base 2.4.17
+ radeon_cs_emit@Base 2.4.17
+ radeon_cs_end@Base 2.4.17
+ radeon_cs_erase@Base 2.4.17
+ radeon_cs_get_id@Base 2.4.20
+ radeon_cs_manager_gem_ctor@Base 2.4.17
+ radeon_cs_manager_gem_dtor@Base 2.4.17
+ radeon_cs_need_flush@Base 2.4.17
+ radeon_cs_print@Base 2.4.17
+ radeon_cs_set_limit@Base 2.4.17
+ radeon_cs_space_add_persistent_bo@Base 2.4.17
+ radeon_cs_space_check@Base 2.4.17
+ radeon_cs_space_check_with_bo@Base 2.4.17
+ radeon_cs_space_reset_bos@Base 2.4.17
+ radeon_cs_space_set_flush@Base 2.4.17
+ radeon_cs_write_reloc@Base 2.4.17
+ radeon_gem_get_kernel_name@Base 2.4.17
+ radeon_gem_get_reloc_in_cs@Base 2.4.20
+ radeon_gem_name_bo@Base 2.4.17
+ radeon_gem_set_domain@Base 2.4.17
+ radeon_surface_best@Base 2.4.31
+ radeon_surface_init@Base 2.4.31
+ radeon_surface_manager_free@Base 2.4.31
+ radeon_surface_manager_new@Base 2.4.31
--- libdrm-2.4.32.orig/debian/compat
+++ libdrm-2.4.32/debian/compat
@@ -0,0 +1 @@
+9
--- libdrm-2.4.32.orig/debian/watch
+++ libdrm-2.4.32/debian/watch
@@ -0,0 +1,3 @@
+#git=git://anongit.freedesktop.org/mesa/drm
+version=3
+http://dri.freedesktop.org/libdrm/libdrm-(.*)\.tar\.gz
--- libdrm-2.4.32.orig/debian/libdrm2.symbols
+++ libdrm-2.4.32/debian/libdrm2.symbols
@@ -0,0 +1,146 @@
+libdrm.so.2 libdrm2 #MINVER#
+ drmAddBufs@Base 2.3.1
+ drmAddContextPrivateMapping@Base 2.3.1
+ drmAddContextTag@Base 2.3.1
+ drmAddMap@Base 2.3.1
+ drmAgpAcquire@Base 2.3.1
+ drmAgpAlloc@Base 2.3.1
+ drmAgpBase@Base 2.3.1
+ drmAgpBind@Base 2.3.1
+ drmAgpDeviceId@Base 2.3.1
+ drmAgpEnable@Base 2.3.1
+ drmAgpFree@Base 2.3.1
+ drmAgpGetMode@Base 2.3.1
+ drmAgpMemoryAvail@Base 2.3.1
+ drmAgpMemoryUsed@Base 2.3.1
+ drmAgpRelease@Base 2.3.1
+ drmAgpSize@Base 2.3.1
+ drmAgpUnbind@Base 2.3.1
+ drmAgpVendorId@Base 2.3.1
+ drmAgpVersionMajor@Base 2.3.1
+ drmAgpVersionMinor@Base 2.3.1
+ drmAllocCpy@Base 2.4.3
+ drmAuthMagic@Base 2.3.1
+ drmAvailable@Base 2.3.1
+ drmCheckModesettingSupported@Base 2.4.3
+ drmClose@Base 2.3.1
+ drmCloseOnce@Base 2.3.1
+ drmCommandNone@Base 2.3.1
+ drmCommandRead@Base 2.3.1
+ drmCommandWrite@Base 2.3.1
+ drmCommandWriteRead@Base 2.3.1
+ drmCreateContext@Base 2.3.1
+ drmCreateDrawable@Base 2.3.1
+ drmCtlInstHandler@Base 2.3.1
+ drmCtlUninstHandler@Base 2.3.1
+ drmDMA@Base 2.3.1
+ drmDelContextTag@Base 2.3.1
+ drmDestroyContext@Base 2.3.1
+ drmDestroyDrawable@Base 2.3.1
+ drmDropMaster@Base 2.4.3
+ drmError@Base 2.3.1
+ drmFinish@Base 2.3.1
+ drmFree@Base 2.3.1
+ drmFreeBufs@Base 2.3.1
+ drmFreeBusid@Base 2.3.1
+ drmFreeReservedContextList@Base 2.3.1
+ drmFreeVersion@Base 2.3.1
+ drmGetBufInfo@Base 2.3.1
+ drmGetBusid@Base 2.3.1
+ drmGetCap@Base 2.4.25
+ drmGetClient@Base 2.3.1
+ drmGetContextFlags@Base 2.3.1
+ drmGetContextPrivateMapping@Base 2.3.1
+ drmGetContextTag@Base 2.3.1
+ drmGetDeviceNameFromFd@Base 2.4.16
+ drmGetEntry@Base 2.3.1
+ drmGetHashTable@Base 2.3.1
+ drmGetInterruptFromBusID@Base 2.3.1
+ drmGetLibVersion@Base 2.3.1
+ drmGetLock@Base 2.3.1
+ drmGetMagic@Base 2.3.1
+ drmGetMap@Base 2.3.1
+ drmGetReservedContextList@Base 2.3.1
+ drmGetStats@Base 2.3.1
+ drmGetVersion@Base 2.3.1
+ drmHandleEvent@Base 2.4.16
+ drmHashCreate@Base 2.3.1
+ drmHashDelete@Base 2.3.1
+ drmHashDestroy@Base 2.3.1
+ drmHashFirst@Base 2.3.1
+ drmHashInsert@Base 2.3.1
+ drmHashLookup@Base 2.3.1
+ drmHashNext@Base 2.3.1
+ drmIoctl@Base 2.4.3
+ drmMalloc@Base 2.3.1
+ drmMap@Base 2.3.1
+ drmMapBufs@Base 2.3.1
+ drmMarkBufs@Base 2.3.1
+ drmModeAddFB2@Base 2.4.30
+ drmModeAddFB@Base 2.4.3
+ drmModeAttachMode@Base 2.4.3
+ drmModeConnectorSetProperty@Base 2.4.3
+ drmModeCrtcGetGamma@Base 2.4.3
+ drmModeCrtcSetGamma@Base 2.4.3
+ drmModeDetachMode@Base 2.4.3
+ drmModeDirtyFB@Base 2.4.17
+ drmModeFreeConnector@Base 2.4.3
+ drmModeFreeCrtc@Base 2.4.3
+ drmModeFreeEncoder@Base 2.4.3
+ drmModeFreeFB@Base 2.4.3
+ drmModeFreeModeInfo@Base 2.4.3
+ drmModeFreeObjectProperties@Base 2.4.32-1ubuntu1+ti1.3
+ drmModeFreePlane@Base 2.4.30
+ drmModeFreePlaneResources@Base 2.4.31
+ drmModeFreeProperty@Base 2.4.3
+ drmModeFreePropertyBlob@Base 2.4.3
+ drmModeFreeResources@Base 2.4.3
+ drmModeGetConnector@Base 2.4.3
+ drmModeGetCrtc@Base 2.4.3
+ drmModeGetEncoder@Base 2.4.3
+ drmModeGetFB@Base 2.4.3
+ drmModeGetPlane@Base 2.4.30
+ drmModeGetPlaneResources@Base 2.4.30
+ drmModeGetProperty@Base 2.4.3
+ drmModeGetPropertyBlob@Base 2.4.3
+ drmModeGetResources@Base 2.4.3
+ drmModeMoveCursor@Base 2.4.3
+ drmModeObjectGetProperties@Base 2.4.32-1ubuntu1+ti1.3
+ drmModeObjectSetProperty@Base 2.4.32-1ubuntu1+ti1.3
+ drmModePageFlip@Base 2.4.17
+ drmModeRmFB@Base 2.4.3
+ drmModeSetCrtc@Base 2.4.3
+ drmModeSetCursor@Base 2.4.3
+ drmModeSetPlane@Base 2.4.30
+ drmMsg@Base 2.4.1
+ drmOpen@Base 2.3.1
+ drmOpenControl@Base 2.4.3
+ drmOpenOnce@Base 2.3.1
+ drmRandom@Base 2.3.1
+ drmRandomCreate@Base 2.3.1
+ drmRandomDestroy@Base 2.3.1
+ drmRandomDouble@Base 2.3.1
+ drmRmMap@Base 2.3.1
+ drmSLCreate@Base 2.3.1
+ drmSLDelete@Base 2.3.1
+ drmSLDestroy@Base 2.3.1
+ drmSLDump@Base 2.3.1
+ drmSLFirst@Base 2.3.1
+ drmSLInsert@Base 2.3.1
+ drmSLLookup@Base 2.3.1
+ drmSLLookupNeighbors@Base 2.3.1
+ drmSLNext@Base 2.3.1
+ drmScatterGatherAlloc@Base 2.3.1
+ drmScatterGatherFree@Base 2.3.1
+ drmSetBusid@Base 2.3.1
+ drmSetContextFlags@Base 2.3.1
+ drmSetDebugMsgFunction@Base 2.3.1
+ drmSetInterfaceVersion@Base 2.3.1
+ drmSetMaster@Base 2.4.3
+ drmSetServerInfo@Base 2.3.1
+ drmSwitchToContext@Base 2.3.1
+ drmUnlock@Base 2.3.1
+ drmUnmap@Base 2.3.1
+ drmUnmapBufs@Base 2.3.1
+ drmUpdateDrawableInfo@Base 2.3.1
+ drmWaitVBlank@Base 2.3.1
--- libdrm-2.4.32.orig/debian/libkms1.symbols
+++ libdrm-2.4.32/debian/libkms1.symbols
@@ -0,0 +1,16 @@
+libkms.so.1 libkms1 #MINVER#
+| libkms-private
+ dumb_create@Base 0 1
+ intel_create@Base 0 1
+ kms_bo_create@Base 0
+ kms_bo_destroy@Base 0
+ kms_bo_get_prop@Base 0
+ kms_bo_map@Base 0
+ kms_bo_unmap@Base 0
+ kms_create@Base 0
+ kms_destroy@Base 0
+ kms_get_prop@Base 0
+ linux_create@Base 0 1
+ nouveau_create@Base 0 1
+ radeon_create@Base 2.4.24 1
+ vmwgfx_create@Base 0 1
--- libdrm-2.4.32.orig/debian/libdrm-intel1.symbols
+++ libdrm-2.4.32/debian/libdrm-intel1.symbols
@@ -0,0 +1,65 @@
+libdrm_intel.so.1 libdrm-intel1 #MINVER#
+ drm_intel_bo_alloc@Base 2.4.1
+ drm_intel_bo_alloc_for_render@Base 2.4.5
+ drm_intel_bo_alloc_tiled@Base 2.4.15
+ drm_intel_bo_busy@Base 2.4.13
+ drm_intel_bo_disable_reuse@Base 2.4.10
+ drm_intel_bo_emit_reloc@Base 2.4.1
+ drm_intel_bo_emit_reloc_fence@Base 2.4.20
+ drm_intel_bo_exec@Base 2.4.1
+ drm_intel_bo_fake_alloc_static@Base 2.4.1
+ drm_intel_bo_fake_disable_backing_store@Base 2.4.1
+ drm_intel_bo_flink@Base 2.4.1
+ drm_intel_bo_gem_create_from_name@Base 2.4.1
+ drm_intel_bo_get_subdata@Base 2.4.1
+ drm_intel_bo_get_tiling@Base 2.4.1
+ drm_intel_bo_is_reusable@Base 2.4.21
+ drm_intel_bo_madvise@Base 2.4.16
+ drm_intel_bo_map@Base 2.4.1
+ drm_intel_bo_mrb_exec@Base 2.4.23-3~
+ drm_intel_bo_pin@Base 2.4.1
+ drm_intel_bo_reference@Base 2.4.1
+ drm_intel_bo_references@Base 2.4.15
+ drm_intel_bo_set_tiling@Base 2.4.1
+ drm_intel_bo_subdata@Base 2.4.1
+ drm_intel_bo_unmap@Base 2.4.1
+ drm_intel_bo_unpin@Base 2.4.1
+ drm_intel_bo_unreference@Base 2.4.1
+ drm_intel_bo_wait_rendering@Base 2.4.1
+ drm_intel_bufmgr_check_aperture_space@Base 2.4.1
+ drm_intel_bufmgr_destroy@Base 2.4.1
+ drm_intel_bufmgr_fake_contended_lock_take@Base 2.4.1
+ drm_intel_bufmgr_fake_evict_all@Base 2.4.1
+ drm_intel_bufmgr_fake_init@Base 2.4.1
+ drm_intel_bufmgr_fake_set_exec_callback@Base 2.4.1
+ drm_intel_bufmgr_fake_set_fence_callback@Base 2.4.1
+ drm_intel_bufmgr_fake_set_last_dispatch@Base 2.4.1
+ drm_intel_bufmgr_gem_enable_fenced_relocs@Base 2.4.20
+ drm_intel_bufmgr_gem_enable_reuse@Base 2.4.1
+ drm_intel_bufmgr_gem_get_devid@Base 2.4.32
+ drm_intel_bufmgr_gem_init@Base 2.4.1
+ drm_intel_bufmgr_gem_set_aub_dump@Base 2.4.32
+ drm_intel_bufmgr_gem_set_vma_cache_size@Base 2.4.29
+ drm_intel_bufmgr_set_debug@Base 2.4.1
+ drm_intel_decode@Base 2.4.30
+ drm_intel_decode_context_alloc@Base 2.4.30
+ drm_intel_decode_context_free@Base 2.4.30
+ drm_intel_decode_set_batch_pointer@Base 2.4.30
+ drm_intel_decode_set_dump_past_end@Base 2.4.30
+ drm_intel_decode_set_head_tail@Base 2.4.30
+ drm_intel_decode_set_output_file@Base 2.4.30
+ drm_intel_gem_bo_aub_dump_bmp@Base 2.4.32
+ drm_intel_gem_bo_clear_relocs@Base 2.4.27
+ drm_intel_gem_bo_get_reloc_count@Base 2.4.27
+ drm_intel_gem_bo_map_gtt@Base 2.4.3
+ drm_intel_gem_bo_map_unsynchronized@Base 2.4.32
+ drm_intel_gem_bo_start_gtt_access@Base 2.4.3
+ drm_intel_gem_bo_unmap_gtt@Base 2.4.9
+ drm_intel_get_aperture_sizes@Base 2.4.26
+ drm_intel_get_pipe_from_crtc_id@Base 2.4.11
+ drm_mmAllocMem@Base 2.4.1
+ drm_mmDestroy@Base 2.4.1
+ drm_mmDumpMemInfo@Base 2.4.1
+ drm_mmFindBlock@Base 2.4.1
+ drm_mmFreeMem@Base 2.4.1
+ drm_mmInit@Base 2.4.1
--- libdrm-2.4.32.orig/debian/libdrm-omap1.install
+++ libdrm-2.4.32/debian/libdrm-omap1.install
@@ -0,0 +1 @@
+usr/lib/*/libdrm_omap.so.1*
--- libdrm-2.4.32.orig/debian/README.source
+++ libdrm-2.4.32/debian/README.source
@@ -0,0 +1,55 @@
+------------------------------------------------------
+Quick Guide To Patching This Package For The Impatient
+------------------------------------------------------
+
+1. Make sure you have quilt installed
+2. Unpack the package as usual with "dpkg-source -x"
+3. Run the "patch" target in debian/rules
+4. Create a new patch with "quilt new" (see quilt(1))
+5. Edit all the files you want to include in the patch with "quilt edit" 
+   (see quilt(1)).
+6. Write the patch with "quilt refresh" (see quilt(1))
+7. Run the "clean" target in debian/rules
+
+Alternatively, instead of using quilt directly, you can drop the patch in to 
+debian/patches and add the name of the patch to debian/patches/series.
+
+While building from git, dpkg-source can complain about symlinks vs.
+normal files mismatches. To work around this issue, before uploading,
+and without committing:
+
+  find -type l | while read dest; do src=$(readlink -f $dest); rm $dest; cp $src $dest; done
+
+------------------------------------
+Guide To The X Strike Force Packages
+------------------------------------
+
+The X Strike Force team maintains X packages in git repositories on
+git.debian.org in the pkg-xorg subdirectory. Most upstream packages
+are actually maintained in git repositories as well, so they often
+just need to be pulled into git.debian.org in a "upstream-*" branch.
+Otherwise, the upstream sources are manually installed in the Debian
+git repository.
+
+The .orig.tar.gz upstream source file could be generated using this
+"upstream-*" branch in the Debian git repository but it is actually
+copied from upstream tarballs directly.
+
+Due to X.org being highly modular, packaging all X.org applications
+as their own independent packages would have created too many Debian
+packages. For this reason, some X.org applications have been grouped
+into larger packages: xutils, xutils-dev, x11-apps, x11-session-utils,
+x11-utils, x11-xfs-utils, x11-xkb-utils, x11-xserver-utils.
+Most packages, including the X.org server itself and all libraries
+and drivers are, however maintained independently.
+
+The Debian packaging is added by creating the "debian-*" git branch
+which contains the aforementioned "upstream-*" branch plus the debian/
+repository files.
+When a patch has to be applied to the Debian package, two solutions
+are involved:
+* If the patch is available in one of the upstream branches, it
+  may be git'cherry-picked into the Debian repository. In this
+  case, it appears directly in the .diff.gz.
+* Otherwise, the patch is added to debian/patches/ which is managed
+  with quilt as documented in /usr/share/doc/quilt/README.source.
--- libdrm-2.4.32.orig/debian/copyright
+++ libdrm-2.4.32/debian/copyright
@@ -0,0 +1,344 @@
+This package was downloaded from
+http://dri.freedesktop.org/libdrm/
+
+It was debianized by Marcelo E. Magallon <mmagallo@debian.org> on
+Fri, 19 Aug 2005 21:11:18 -0600.
+
+
+ Copyright 2005 Adam Jackson.
+
+ Permission is hereby granted, free of charge, to any person obtaining
+ a copy of this software and associated documentation files (the
+ "Software"), to deal in the Software without restriction, including
+ without limitation on the rights to use, copy, modify, merge,
+ publish, distribute, sub license, and/or sell copies of the Software,
+ and to permit persons to whom the Software is furnished to do so,
+ subject to the following conditions:
+
+ The above copyright notice and this permission notice (including the
+ next paragraph) shall be included in all copies or substantial
+ portions of the Software.
+
+ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+ EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+ MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+ NON-INFRINGEMENT.  IN NO EVENT SHALL ADAM JACKSON BE LIABLE FOR ANY
+ CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
+ TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
+ SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+
+
+ Copyright 2000 Precision Insight, Inc., Cedar Park, Texas.
+ Copyright 2000 VA Linux Systems, Inc., Sunnyvale, California.
+ Copyright 2002 Tungsten Graphics, Inc., Cedar Park, Texas.
+ All Rights Reserved.
+
+ Permission is hereby granted, free of charge, to any person obtaining
+ a copy of this software and associated documentation files (the
+ "Software"), to deal in the Software without restriction, including
+ without limitation the rights to use, copy, modify, merge, publish,
+ distribute, sublicense, and/or sell copies of the Software, and to
+ permit persons to whom the Software is furnished to do so, subject to
+ the following conditions:
+
+ The above copyright notice and this permission notice (including the
+ next paragraph) shall be included in all copies or substantial
+ portions of the Software.
+
+ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+ EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+ MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+ NONINFRINGEMENT.  IN NO EVENT SHALL PRECISION INSIGHT AND/OR ITS
+ SUPPLIERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
+ WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
+ OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+ DEALINGS IN THE SOFTWARE.
+
+
+ Copyright (c) 2007-2008 Dave Airlie <airlied@linux.ie>
+ Copyright (c) 2007-2008 Jakob Bornecrantz <wallbraker@gmail.com>
+ Copyright (c) 2008 Red Hat Inc.
+ Copyright (c) 2007-2008 Tungsten Graphics, Inc., Cedar Park, TX., USA
+ Copyright (c) 2007-2009 Intel Corporation
+
+ Permission is hereby granted, free of charge, to any person obtaining a
+ copy of this software and associated documentation files (the "Software"),
+ to deal in the Software without restriction, including without limitation
+ the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ and/or sell copies of the Software, and to permit persons to whom the
+ Software is furnished to do so, subject to the following conditions:
+
+ The above copyright notice and this permission notice shall be included in
+ all copies or substantial portions of the Software.
+
+ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
+ AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+ LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+ FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
+ IN THE SOFTWARE.
+
+
+ Copyright 2002-2006 Tungsten Graphics, Inc., Cedar Park, Texas.
+ All Rights Reserved.
+
+ Permission is hereby granted, free of charge, to any person obtaining a
+ copy of this software and associated documentation files (the "Software"),
+ to deal in the Software without restriction, including without limitation
+ the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ and/or sell copies of the Software, and to permit persons to whom the
+ Software is furnished to do so, subject to the following conditions:
+
+ The above copyright notice and this permission notice (including the next
+ paragraph) shall be included in all copies or substantial portions of the
+ Software.
+
+ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+ TUNGSTEN GRAPHICS AND/OR ITS SUPPLIERS BE LIABLE FOR ANY CLAIM, DAMAGES OR
+ OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
+ ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
+ OTHER DEALINGS IN THE SOFTWARE.
+
+
+ Copyright 2000 Gareth Hughes
+ Copyright 2002 Frank C. Earl
+ Copyright 2002-2003 Leif Delgass
+ All Rights Reserved.
+
+ Permission is hereby granted, free of charge, to any person obtaining a
+ copy of this software and associated documentation files (the "Software"),
+ to deal in the Software without restriction, including without limitation
+ the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ and/or sell copies of the Software, and to permit persons to whom the
+ Software is furnished to do so, subject to the following conditions:
+
+ The above copyright notice and this permission notice (including the next
+ paragraph) shall be included in all copies or substantial portions of the
+ Software.
+
+ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+ THE COPYRIGHT OWNER(S) BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
+ IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
+ CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+
+
+ Copyright 2000 VA Linux Systems, Inc., Sunnyvale, California.
+ Copyright 2005 Stephane Marchesin.
+ All rights reserved.
+
+ Permission is hereby granted, free of charge, to any person obtaining a
+ copy of this software and associated documentation files (the "Software"),
+ to deal in the Software without restriction, including without limitation
+ the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ and/or sell copies of the Software, and to permit persons to whom the
+ Software is furnished to do so, subject to the following conditions:
+
+ The above copyright notice and this permission notice (including the next
+ paragraph) shall be included in all copies or substantial portions of the
+ Software.
+
+ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+ VA LINUX SYSTEMS AND/OR ITS SUPPLIERS BE LIABLE FOR ANY CLAIM, DAMAGES OR
+ OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
+ ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
+ OTHER DEALINGS IN THE SOFTWARE.
+
+
+ Copyright 2004  Felix Kuehling
+ All Rights Reserved.
+
+ Permission is hereby granted, free of charge, to any person obtaining a
+ copy of this software and associated documentation files (the "Software"),
+ to deal in the Software without restriction, including without limitation
+ the rights to use, copy, modify, merge, publish, distribute, sub license,
+ and/or sell copies of the Software, and to permit persons to whom the
+ Software is furnished to do so, subject to the following conditions:
+
+ The above copyright notice and this permission notice (including the
+ next paragraph) shall be included in all copies or substantial portions
+ of the Software.
+
+ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+ EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+ MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+ NON-INFRINGEMENT. IN NO EVENT SHALL FELIX KUEHLING BE LIABLE FOR
+ ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF
+ CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+ WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+
+
+ Copyright 2005 Eric Anholt
+ Copyright © 2007-2008 Intel Corporation
+ Copyright © 2008 Jérôme Glisse
+ All Rights Reserved.
+
+ Permission is hereby granted, free of charge, to any person obtaining a
+ copy of this software and associated documentation files (the "Software"),
+ to deal in the Software without restriction, including without limitation
+ the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ and/or sell copies of the Software, and to permit persons to whom the
+ Software is furnished to do so, subject to the following conditions:
+
+ The above copyright notice and this permission notice (including the next
+ paragraph) shall be included in all copies or substantial portions of the
+ Software.
+
+ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+ THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+ LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
+ OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
+ SOFTWARE.
+
+
+ Copyright 1998-2003 VIA Technologies, Inc. All Rights Reserved.
+ Copyright 2001-2003 S3 Graphics, Inc. All Rights Reserved.
+
+ Permission is hereby granted, free of charge, to any person obtaining a
+ copy of this software and associated documentation files (the "Software"),
+ to deal in the Software without restriction, including without limitation
+ the rights to use, copy, modify, merge, publish, distribute, sub license,
+ and/or sell copies of the Software, and to permit persons to whom the
+ Software is furnished to do so, subject to the following conditions:
+
+ The above copyright notice and this permission notice (including the
+ next paragraph) shall be included in all copies or substantial portions
+ of the Software.
+
+ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL
+ VIA, S3 GRAPHICS, AND/OR ITS SUPPLIERS BE LIABLE FOR ANY CLAIM, DAMAGES OR
+ OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
+ ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+ DEALINGS IN THE SOFTWARE.
+
+
+ Copyright © 2009 VMware, Inc., Palo Alto, CA., USA
+ Copyright © 2007-2009 Red Hat Inc.
+ Copyright © 2007 Intel Corporation
+ Copyright 2006 Tungsten Graphics, Inc., Bismarck, ND., USA
+ Copyright © 2008 Dave Airlie
+ Copyright © 2008 Jérôme Glisse
+ Copyright © 2008 Nicolai Haehnle
+ All Rights Reserved.
+
+ Permission is hereby granted, free of charge, to any person obtaining a
+ copy of this software and associated documentation files (the
+ "Software"), to deal in the Software without restriction, including
+ without limitation the rights to use, copy, modify, merge, publish,
+ distribute, sub license, and/or sell copies of the Software, and to
+ permit persons to whom the Software is furnished to do so, subject to
+ the following conditions:
+
+ The above copyright notice and this permission notice (including the
+ next paragraph) shall be included in all copies or substantial portions
+ of the Software.
+
+ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL
+ THE COPYRIGHT HOLDERS, AUTHORS AND/OR ITS SUPPLIERS BE LIABLE FOR ANY CLAIM,
+ DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
+ OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
+ USE OR OTHER DEALINGS IN THE SOFTWARE.
+
+
+ Copyright (C) 1999 Wittawat Yamwong
+
+ Permission is hereby granted, free of charge, to any person obtaining a
+ copy of this software and associated documentation files (the "Software"),
+ to deal in the Software without restriction, including without limitation
+ the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ and/or sell copies of the Software, and to permit persons to whom the
+ Software is furnished to do so, subject to the following conditions:
+
+ The above copyright notice and this permission notice shall be included
+ in all copies or substantial portions of the Software.
+
+ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
+ OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+ WITTAWAT YAMWONG, OR ANY OTHER CONTRIBUTORS BE LIABLE FOR ANY CLAIM,?
+ DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR?
+ OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE?
+ OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+
+
+ Copyright (c) 2007 Nouveau Project
+
+ Permission is hereby granted, free of charge, to any person obtaining a
+ copy of this software and associated documentation files (the "Software"),
+ to deal in the Software without restriction, including without limitation
+ the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ and/or sell copies of the Software, and to permit persons to whom the
+ Software is furnished to do so, subject to the following conditions:
+
+ The above copyright notice and this permission notice shall be included in
+ all copies or substantial portions of the Software.
+
+ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+ THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
+ WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF
+ OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
+ SOFTWARE.
+
+
+ Copyright 2010 Jerome Glisse <glisse@freedesktop.org>
+
+ Permission is hereby granted, free of charge, to any person obtaining a
+ copy of this software and associated documentation files (the "Software"),
+ to deal in the Software without restriction, including without limitation
+ on the rights to use, copy, modify, merge, publish, distribute, sub
+ license, and/or sell copies of the Software, and to permit persons to whom
+ the Software is furnished to do so, subject to the following conditions:
+
+ The above copyright notice and this permission notice (including the next
+ paragraph) shall be included in all copies or substantial portions of the
+ Software.
+
+ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL
+ THE AUTHOR(S) AND/OR THEIR SUPPLIERS BE LIABLE FOR ANY CLAIM,
+ DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
+ OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
+ USE OR OTHER DEALINGS IN THE SOFTWARE.
+
+
+ Copyright(c) 2011 Texas Instruments. All rights reserved.     
+  
+ Redistribution and use in source and binary forms, with or without    
+ modification, are permitted provided that the following conditions    
+ are met:                                                              
+ * Redistributions of source code must retain the above copyright     
+   notice, this list of conditions and the following disclaimer.      
+ * Redistributions in binary form must reproduce the above copyright  
+   notice, this list of conditions and the following disclaimer in    
+   the documentation and/or other materials provided with the         
+   distribution.                                                      
+ * Neither the name Texas Instruments nor the names of its            
+   contributors may be used to endorse or promote products derived    
+   from this software without specific prior written permission.      
+                                                                        
+ THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS   
+ "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT     
+ LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR 
+ A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT  
+ OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, 
+ SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT      
+ LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, 
+ DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY 
+ THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT   
+ (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE 
+ OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. 
--- libdrm-2.4.32.orig/debian/libdrm-nouveau1a.install
+++ libdrm-2.4.32/debian/libdrm-nouveau1a.install
@@ -0,0 +1 @@
+usr/lib/*/libdrm_nouveau.so.1*
--- libdrm-2.4.32.orig/debian/changelog
+++ libdrm-2.4.32/debian/changelog
@@ -0,0 +1,1160 @@
+libdrm (2.4.32-1ubuntu1+ti2.0) precise; urgency=low
+
+  * Rebased properties patches 
+
+ -- Xavier Boudet <x-boudet@ti.com>  Thu, 12 Apr 2012 08:32:10 +0000
+
+libdrm (2.4.32-1ubuntu1+ti1.3) precise; urgency=low
+
+  * Apply rebased upstream patches
+
+ -- Xavier Boudet <x-boudet@ti.com>  Wed, 04 Apr 2012 13:47:04 +0000
+
+libdrm (2.4.32-1ubuntu1+ti1.2) precise; urgency=low
+
+  * Enable omap-add-rotation-ioctl.patch
+
+ -- Xavier Boudet <x-boudet@ti.com>  Wed, 28 Mar 2012 16:31:29 +0200
+
+libdrm (2.4.32-1ubuntu1+ti1.1) precise; urgency=low
+
+  * Updated "omap" patch support i.e. from
+    GitHub robclark/libdrm commit ID:
+    43eeb275b77bdfa3ff9df5b0caba8f504b44b4e4
+
+ -- Xavier Boudet <x-boudet@ti.com>  Wed, 28 Mar 2012 16:12:34 +0200
+
+libdrm (2.4.32-1ubuntu1) precise; urgency=low
+
+  [ Robert Hooker ]
+  * Merge from Debian unstable, remaining changes:
+    - debian/rules
+    - debian/control:
+      + Build libdrm-intel1 everywhere rather than just {i386,amd64}
+        for Plymouth
+    - 100-revert-intel-fix-build-of-intel-drm.patch
+      101-revert-dont-build-intel-drm.patch
+      + Add patch series to reenable building libdrm-intel1 on !i386/amd64,
+        (drop when plymouth is updated to 0.8.4.)
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Thu, 22 Mar 2012 19:59:34 +0200
+
+libdrm (2.4.32-1) unstable; urgency=low
+
+  [ Robert Hooker ]
+  * New upstream release (2.4.31).
+  * Bump libdrm2 and libdrm-radeon1 symbols and shlibs to account for
+    recent changes.
+
+  [ Cyril Brulebois ]
+  * New upstream release (2.4.32).
+  * Bump libdrm-intel1's symbols and shlibs accordingly.
+
+ -- Cyril Brulebois <kibi@debian.org>  Mon, 19 Mar 2012 19:56:12 +0000
+
+libdrm (2.4.30-1) unstable; urgency=low
+
+  * New upstream release.
+  * Bump libdrm2's and libdrm-intel1's symbols and shlibs accordingly.
+  * Document the symlink dance when building from git in README.source.
+
+ -- Cyril Brulebois <kibi@debian.org>  Fri, 06 Jan 2012 20:04:37 +0100
+
+libdrm (2.4.29-1ubuntu1+ti1.2) precise; urgency=low
+
+  * Checking libdrm omap version is greater than 2.4.29
+    instead of 2.4.26 in the rules file. 
+
+ -- David Bercovitz <d-bercovitz@ti.com>  Tue, 24 Jan 2012 14:54:13 +0100
+
+libdrm (2.4.29-1ubuntu1+ti1.1) precise; urgency=low
+
+  * Updated "omap" patch support i.e. from
+    GitHub robclark/libdrm commit ID:
+    a031223eda3f09cda6737866622f82bd68e6ce91 
+
+ -- David Bercovitz <d-bercovitz@ti.com>  Mon, 23 Jan 2012 14:50:40 +0100
+
+libdrm (2.4.29-1ubuntu1) precise; urgency=low
+
+  * Merge from Debian unstable, remaining changes:
+    - debian/rules
+    - debian/control:
+      + Build libdrm-intel1 everywhere rather than just {i386,amd64}
+        for Plymouth
+
+ -- Robert Hooker <sarvatt@ubuntu.com>  Mon, 19 Dec 2011 21:33:42 -0500
+
+libdrm (2.4.29-1) unstable; urgency=low
+
+  * New upstream release:
+    - assert()s are now gone (Closes: #651316).
+  * Update libdrm-intel1's symbols and shlibs accordingly.
+
+ -- Cyril Brulebois <kibi@debian.org>  Tue, 13 Dec 2011 13:16:22 +0100
+
+libdrm (2.4.28-1) unstable; urgency=low
+
+  * New upstream release.
+
+ -- Cyril Brulebois <kibi@debian.org>  Tue, 06 Dec 2011 15:17:50 +0100
+
+libdrm (2.4.27-1ubuntu1) precise; urgency=low
+
+  * Merge from Debian unstable, remaining changes:
+    - debian/rules
+    - debian/control:
+      + Build libdrm-intel1 everywhere rather than just {i386,amd64}
+        for Plymouth
+
+ -- Robert Hooker <sarvatt@ubuntu.com>  Tue, 08 Nov 2011 11:33:07 -0500
+
+libdrm (2.4.27-1) unstable; urgency=low
+
+  * New upstream release:
+    - Push the new Intel API for use by mesa.
+    - Usual bug fixes.
+  * Update libdrm-intel1's symbols and shlibs accordingly.
+
+ -- Cyril Brulebois <kibi@debian.org>  Tue, 01 Nov 2011 19:30:54 +0100
+
+libdrm (2.4.26-1ubuntu1+ti1.2) oneiric; urgency=low
+
+  * Changing "armel" into "any-arm" architecture:
+    Useful when moving to Ubuntu Precise which
+    is "armhf" architecture
+
+ -- David Bercovitz <d-bercovitz@ti.com>  Wed, 21 Dec 2011 14:56:21 +0100
+
+libdrm (2.4.26-1ubuntu1+ti1.1) oneiric; urgency=low
+
+  * Experimental TI OMAP support added.
+    - New packages:
+      + libdrm-omap1
+      + libdrm-omap1-dbg
+
+ -- David Bercovitz <d-bercovitz@ti.com>  Mon, 12 Dec 2011 10:37:12 +0200
+
+libdrm (2.4.26-1ubuntu1) oneiric; urgency=low
+
+  * Merge from Debian unstable, remaining changes:
+    - debian/rules
+    - debian/control:
+      + Build libdrm-intel everywhere rather than just {i386,amd64}
+        for Plymouth
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Sat, 02 Jul 2011 01:00:31 +0300
+
+libdrm (2.4.26-1) unstable; urgency=low
+
+  * New upstream release:
+    - Fix two important intel bugs.
+  * Add libpciaccess-dev build-dep.
+  * Update libdrm-intel1.symbols and shlibs for new aperture-related symbol.
+
+ -- Cyril Brulebois <kibi@debian.org>  Fri, 24 Jun 2011 17:07:04 +0200
+
+libdrm (2.4.25-3) unstable; urgency=low
+
+  * Team upload.
+
+  [ Steve Langasek ]
+  * Build for multiarch.
+
+  [ Julien Cristau ]
+  * Add lintian overrides for symbols-declares-dependency-on-other-package (we
+    use that for private symbols).
+  * Bump Standards-Version to 3.9.2.
+
+ -- Julien Cristau <jcristau@debian.org>  Thu, 09 Jun 2011 20:05:53 +0200
+
+libdrm (2.4.25-2ubuntu2) oneiric; urgency=low
+
+  * debian/rules:
+    - Really build libdrm-intel everywhere.  Fixes arm/powerpc FTBFS.
+
+ -- Christopher James Halse Rogers <raof@ubuntu.com>  Thu, 26 May 2011 12:09:35 +1000
+
+libdrm (2.4.25-2ubuntu1) oneiric; urgency=low
+
+  * Merge from Debian unstable.  remaining Ubuntu changes:
+    - debian/rules
+    - debian/control:
+      + Build libdrm-intel everywhere rather than just {i386,amd64} for Plymouth
+    - debian/rules:
+    - debian/control:
+    - debian/*.install.in:
+    - debian/*.links.in:
+      + Multiarchify
+  * debian/patches/100_intel_remember_named_bo.patch:
+    - Drop this cherry-pick; included in 2.4.24
+
+ -- Christopher James Halse Rogers <raof@ubuntu.com>  Wed, 25 May 2011 10:39:02 +1000
+
+libdrm (2.4.25-2) unstable; urgency=low
+
+  * Upload to unstable.
+
+ -- Cyril Brulebois <kibi@debian.org>  Mon, 16 May 2011 19:14:49 +0200
+
+libdrm (2.4.25-1) experimental; urgency=low
+
+  * New upstream release.
+  * Update libdrm2.symbols and shlibs.
+  * Update libkms1.symbols, marking dumb_create@Base as private.
+  * Switch to dh:
+    - Bump compat/build-dep to 8.
+    - Use dh-autoreconf.
+    - Tidy old build-deps.
+    - Testsuite now automatically gets run.
+  * Accordingly, add a build-dep to fix FTBFS during make check:
+    - 03_build_against_librt.diff
+  * Add libudev-dev build-dep on Linux so that detection works.
+  * Since the testsuite just got enabled, let's not bail out if it fails.
+  * Remove xsfbs as it's no longer needed.
+  * Bump Standards-Version (no changes needed).
+
+ -- Cyril Brulebois <kibi@debian.org>  Tue, 19 Apr 2011 02:57:29 +0200
+
+libdrm (2.4.24-2) unstable; urgency=low
+
+  * Upload to unstable.
+
+ -- Cyril Brulebois <kibi@debian.org>  Sun, 10 Apr 2011 22:57:02 +0200
+
+libdrm (2.4.24-1) experimental; urgency=low
+
+  [ Christopher James Halse Rogers ]
+  * New upstream release.
+  * Add new internal radeon symbols to libkms1.symbols
+
+  [ Cyril Brulebois ]
+  * Just as a reminder, not adding a lintian override for the following
+    warning, since patches were sent upstream to stop exporting private
+    symbols: symbols-declares-dependency-on-other-package
+
+ -- Cyril Brulebois <kibi@debian.org>  Sat, 05 Mar 2011 20:27:23 +0100
+
+libdrm (2.4.23-3) unstable; urgency=low
+
+  * Cherry-pick from upstream:
+    - intel: Fallback to old exec if no mrb_exec is available
+    - intel: Set the public handle after opening by name
+    - intel: Remember named bo
+  * The first of those fixes should fix some failures to submit batch
+    buffer (Closes: #612766).
+  * Bump dependency to 2.4.23-3 for the drm_intel_bo_mrb_exec symbol in
+    libdrm-intel1's symbols file. While the former version is alright
+    from a shared object point of view, runtime doesn't seem to agree
+    (Closes: #609299).
+  * Bump the libdrm-intel1 shlibs version for consistency.
+
+ -- Cyril Brulebois <kibi@debian.org>  Wed, 16 Feb 2011 11:44:44 +0100
+
+libdrm (2.4.23-2) unstable; urgency=low
+
+  * Upload to unstable.
+  * Update Uploaders list. Thanks, David & Brice!
+
+ -- Cyril Brulebois <kibi@debian.org>  Sat, 05 Feb 2011 11:26:44 +0100
+
+libdrm (2.4.23-1ubuntu6) natty; urgency=low
+
+  * Add 100_intel_remember_named_bo.patch: Reuse already requested buffer
+    objects if re-requested.  Fixes error where dmesg shows "Object
+    ... appears more than once in object list".  Cherrypick from upstream
+    libdrm 2.4.24 tree.
+    (LP: #747205)
+
+ -- Bryce Harrington <bryce@ubuntu.com>  Fri, 01 Apr 2011 17:53:28 -0700
+
+libdrm (2.4.23-1ubuntu5) natty; urgency=low
+
+  * Fix up libdrm-dev symlinks for multiarch.
+
+ -- Bryce Harrington <bryce@ubuntu.com>  Fri, 01 Apr 2011 11:44:30 -0700
+
+libdrm (2.4.23-1ubuntu4) natty; urgency=low
+
+  * Build for multiarch.
+
+ -- Steve Langasek <steve.langasek@ubuntu.com>  Sat, 19 Mar 2011 20:53:05 -0700
+
+libdrm (2.4.23-1ubuntu3) natty; urgency=low
+
+  * Change Conflicts to Breaks/Replaces as per debian policy 7.4
+    for libdrm-nouveau1a/libdrm-nouveau1a-dbg
+
+ -- Robert Hooker <sarvatt@ubuntu.com>  Tue, 25 Jan 2011 11:35:22 -0500
+
+libdrm (2.4.23-1ubuntu2) natty; urgency=low
+
+  * Temporarily lower libdrm-nouveau1 Conflicts: to Replaces: libdrm-nouveau1
+    to allow bootstrapping a new plymouth build.
+
+ -- Robert Hooker <sarvatt@ubuntu.com>  Tue, 25 Jan 2011 11:03:37 -0500
+
+libdrm (2.4.23-1ubuntu1) natty; urgency=low
+
+  * Merge from Debian experimental.  Remaining Ubuntu changes:
+    - Enable libdrm-intel for ports architectures until plymouth is fixed to
+      not need it unconditionally.
+    - Move runtime libraries to /lib for plymouth.
+  
+ -- Christopher James Halse Rogers <raof@ubuntu.com>  Fri, 21 Jan 2011 10:23:07 +1100
+
+libdrm (2.4.23-1) experimental; urgency=low
+
+  [ Sven Joachim ]
+  * New upstream release.
+  * Rename the libdrm-nouveau1 package to libdrm-nouveau1a, since upstream
+    broke the ABI without changing the soname.
+    - Make libdrm-nouveau1a{,-dbg} conflict with libdrm-nouveau1{,-dbg} and
+      remove the Breaks against xserver-xorg-video-nouveau.
+    - Adjust the lintian override.
+    - Bump libdrm-nouveau shlibs and symbols versions to 2.4.23.
+  * Use dh_prep instead of the deprecated dh_clean -k in debian/rules.
+
+ -- Julien Cristau <jcristau@debian.org>  Thu, 23 Dec 2010 17:56:54 +0100
+
+libdrm (2.4.22-2ubuntu1) natty; urgency=low
+
+  * Merge from debian experimental. Remaining Ubuntu changes:
+    - Enable libdrm-intel for ports architectures until plymouth is fixed to
+      not need it unconditionally.
+    - Move runtime libraries to /lib for plymouth.
+
+ -- Robert Hooker <sarvatt@ubuntu.com>  Mon, 08 Nov 2010 21:08:44 -0400
+
+libdrm (2.4.22-2) experimental; urgency=low
+
+  * Cherry-pick some commits from upstream to make the intel video driver
+    2.13.901 buildable:
+     - 057fab33: intel: Prepare for BLT ring split
+     - 36245771: intel: enable relaxed fence allocation for i915
+     - 49447a9b: intel: initialize bufmgr.bo_mrb_exec unconditionally
+
+ -- Cyril Brulebois <kibi@debian.org>  Sun, 07 Nov 2010 22:51:12 +0100
+
+libdrm (2.4.22-1) experimental; urgency=low
+
+  [ Sven Joachim ]
+  * New upstream release.
+
+ -- Cyril Brulebois <kibi@debian.org>  Sat, 02 Oct 2010 00:41:05 +0200
+
+libdrm (2.4.21-2) experimental; urgency=low
+
+  [ Sven Joachim ]
+  * Bump libdrm-nouveau shlibs and symbols versions to 2.4.21-1 to ensure
+    that packages built against this version are not used with squeeze's
+    libdrm-nouveau1.
+  * Add a lintian override for the symbols-file-contains-debian-revision
+    warning.  Bump debhelper compatibility level to 6 for dh_lintian.
+
+ -- Julien Cristau <jcristau@debian.org>  Wed, 25 Aug 2010 23:14:40 +0200
+
+libdrm (2.4.21-1ubuntu2.1) maverick-proposed; urgency=low
+
+  * Add 03_intel_limit_tiled_pitches.patch: Fixes a problem where framebuffers
+    with a width greater than 2048 pixels could not be allocated on pre-i965
+    generation intel GPUs, which is common for multi-monitor setups. Backport
+    of upstream commit 726210f87. (LP: #619663)
+
+ -- Robert Hooker <robert.hooker@canonical.com>  Fri, 08 Oct 2010 12:08:09 -0400
+
+libdrm (2.4.21-1ubuntu2) maverick; urgency=low
+
+  * debian/rules: Don't install upstream changelog. This saves > 1 MB of CD
+    space.
+
+ -- Martin Pitt <martin.pitt@ubuntu.com>  Sun, 01 Aug 2010 20:46:42 +0200
+
+libdrm (2.4.21-1ubuntu1) maverick; urgency=low
+
+  * Merge from debian experimental. Remaining Ubuntu changes:
+    - Enable libdrm-intel for ports architectures until plymouth is fixed to
+      not need it unconditionally.
+    - Move runtime libraries to /lib for plymouth.
+
+ -- Robert Hooker <sarvatt@ubuntu.com>  Thu, 10 Jun 2010 18:52:09 -0400
+
+libdrm (2.4.21-1) experimental; urgency=low
+
+  [ Christopher James Halse Rogers ]
+  * debian/rules:
+    - Add libkms to build
+    - Build vmwgfx experimental API.  The drm module is available in the 2.6.34
+      kernel so we might as well build the userspace bits.
+  * debian/control:
+    - Add libkms1, libkms1-dbg packages on linux
+  * debian/patches/02_build_libkms_against_in_tree_drm:
+    - Link libkms against libdrm as it uses symbols from libdrm.
+
+  [ Robert Hooker ]
+  * New upstream release.
+  * Refresh 02_build_libkms_against_in_tree_drm.
+  * Update libdrm-intel1.symbols, libdrm-radeon1.symbols and shlibs.
+
+  [ Julien Cristau ]
+  * Update the copyright file to hopefully include all licenses variations and
+    copyright statements from the source tree.
+  * Mark new libdrm_radeon symbols private.  They shouldn't actually be
+    exported.
+  * Same with libkms.  Also don't set a minimum version to 2.4.20, since we
+    didn't ship it before anyway.
+
+ -- Julien Cristau <jcristau@debian.org>  Thu, 10 Jun 2010 23:24:54 +0200
+
+libdrm (2.4.20-3) experimental; urgency=low
+
+  [ Sven Joachim ]
+  * Update libdrm-nouveau1 to the ABI of Linux 2.6.34.
+    - Drop 03_revert_abi_change.diff.
+    - Bump libdrm-nouveau shlibs and symbols versions to 2.4.20-3~
+      to ensure that packages built against this version are not used
+      with an older libdrm-nouveau1 version.
+    - Add versioned Breaks against xserver-xorg-video-nouveau to force
+      an upgrade of that package and prevent X segfaults.
+  * Include full SONAME in libdrm-nouveau1.install.
+  * Update xsfbs to 81fc271788605b52e85c2d11635a0371fb44605e0.
+
+ -- Julien Cristau <jcristau@debian.org>  Wed, 26 May 2010 10:33:22 +0200
+
+libdrm (2.4.20-2ubuntu1) maverick; urgency=low
+
+  * Merge from debian experimental, remaining changes:
+    - Dropped patches:
+      02_fix_kms_detection_with_linux_backport_modules.diff - Obsolete
+      03_revert_abi_change.diff - Obsolete
+      04_git_nouveau_fix_sigsegv_in_nouveau_bo_new_tile.patch - Upstream
+  * Refresh libdrm-nouveau1 symbols
+
+ -- Robert Hooker <sarvatt@ubuntu.com>  Fri, 14 May 2010 13:47:41 -0400
+
+libdrm (2.4.20-2) experimental; urgency=low
+
+  * Upload again, faking a new upstream version, since a screw-up on
+    ftpmaster side trashed all files from experimental.
+
+ -- Cyril Brulebois <kibi@debian.org>  Wed, 28 Apr 2010 01:54:44 +0200
+
+libdrm (2.4.20-1) experimental; urgency=low
+
+  * New upstream release.
+    + Cherry-pick upstream fixes 107ccd92 and 332739e3.
+  * Update libdrm-intel1.symbols, libdrm-radeon1.symbols and shlibs.
+  * Disable libkms for now.
+
+ -- Brice Goglin <bgoglin@debian.org>  Fri, 16 Apr 2010 07:14:41 +0200
+
+libdrm (2.4.18-5) unstable; urgency=low
+
+  * Upload to unstable.
+
+ -- Cyril Brulebois <kibi@debian.org>  Wed, 14 Apr 2010 13:02:34 +0200
+
+libdrm (2.4.18-4) experimental; urgency=low
+
+  * Steal 03_revert_abi_change.diff from Ubuntu to revert the nouveau ABI
+    change.  Current Debian kernels support only the old ABI.
+    Thanks Sven Joachim!
+  * Build a libdrm-nouveau1 package on Linux architectures (Closes: #568162).
+    Patch adapted from the Ubuntu package. Thanks Sven Joachim!
+
+ -- Brice Goglin <bgoglin@debian.org>  Wed, 24 Mar 2010 22:27:00 +0100
+
+libdrm (2.4.18-3) unstable; urgency=low
+
+  * Include full SONAME in libdrm*.install to prevent accidental breakage.
+  * Add back the drm headers in libdrm-dev.
+
+ -- Julien Cristau <jcristau@debian.org>  Tue, 16 Mar 2010 12:28:50 +0100
+
+libdrm (2.4.18-2) unstable; urgency=low
+
+  * Fix FTBFS on non-Linux architectures (Closes: #570851): Replace
+    --{enable,disable}-radeon-experimental-api configure flag with
+    --{enable,disable}-radeon since it got renamed.
+  * Add ${misc:Depends} where it was missing, and fold all Depends.
+  * Bump Standards-Version from 3.8.3 to 3.8.4 (no changes needed).
+  * Add myself to Uploaders.
+
+ -- Cyril Brulebois <kibi@debian.org>  Mon, 22 Feb 2010 15:31:47 +0100
+
+libdrm (2.4.18-1ubuntu3) lucid; urgency=low
+
+  * debian/patches/04_git_nouveau_fix_sigsegv_in_nouveau_bo_new_tile.patch:
+    + Cherry pick from upstream git.  Fixes a segfault in libdrm_nouveau on
+      X start for some cards (LP: #547124)
+
+ -- Christopher James Halse Rogers <raof@ubuntu.com>  Mon, 12 Apr 2010 11:14:11 +1000
+
+libdrm (2.4.18-1ubuntu2) lucid; urgency=low
+
+  * libdrm-nouveau1.symbols: Add a missing symbol introduced in 2.4.18.
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Fri, 19 Feb 2010 14:34:02 +0200
+
+libdrm (2.4.18-1ubuntu1) lucid; urgency=low
+
+  * Merge from Debian unstable.
+  * Remove the nouveau patches, since they are included in this version.
+  * Add 03_revert_abi_change.diff to revert the nouveau ABI change.
+    We need the old ABI until the kernel has been updated.
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Fri, 19 Feb 2010 14:19:08 +0200
+
+libdrm (2.4.18-1) unstable; urgency=low
+
+  * New upstream release.
+
+ -- Brice Goglin <bgoglin@debian.org>  Thu, 18 Feb 2010 08:06:14 +0100
+
+libdrm (2.4.17-1ubuntu3) lucid; urgency=low
+
+  * Unapply patches in debian/patches from the source package.
+
+ -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 18 Feb 2010 06:48:37 -0800
+
+libdrm (2.4.17-1ubuntu2) lucid; urgency=low
+
+  * Move runtime libraries to /lib (needed by plymouth)
+
+ -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 18 Feb 2010 06:11:08 -0800
+
+libdrm (2.4.17-1ubuntu1) lucid; urgency=low
+
+  * Merge from Debian unstable.  Previous merge was from the unreleased
+    2.4.17-1 in pkg-xorg git.  This merge picks up the finalised changelog
+    and few extra changes.  Remaining Ubuntu changes:
+    + rules, control, libdrm-nouveau1.symbols, libdrm-nouveau1.install:
+      Enable libdrm_nouveau
+  * debian/control:
+    + libdrm-dev: Only Depend on libdrm-nouveau1 on linux-any.
+  * debian/copyright:
+    + Remove copyright section for no-longer-shipped add_libdrm-nouveau.patch.
+  * debian/patches/02_fix_kms_detection_with_linux_backport_modules.diff:
+    + Add /sys/.../lbm-drm/ to search path for controlD* file, as well as
+      /sys/.../drm/.  linux-backport-modules-nouveau has the drm module renamed
+      to lbm_drm to avoid conflicts with other modules' drm.  This fixes
+      drmCheckModesettingAvailable when using linux-backports-modules-nouveau.
+  * debian/patches/03_update_nouveau_defines_1.diff:
+  * debian/patches/04_update_nouveau_defines_2.diff:
+  * debian/patches/05_update_nouveau_defines_3.diff:
+    + Patches taken from git.  Update #defines in nouveau headers to make allow
+      recent DDXs to build.
+  * debian/patches/06_nouveau_free_objects_on_channel_close.diff:
+  * debian/patches/07_nouveau_fix_mem_leak_on_channel_free.diff:
+    + Patches taken from git.  Fix a couple of memory leaks when freeing
+      channels
+  * debian/libdrm-nouveau1.symbols:
+    + Add new symbol added in 06_nouveau_free_objects_on_channel_close.
+  * debian/patches/08_nouveau_no_flush_notify_on_channel_free.diff:
+    + Patch taken from git.  Avoid calling flush_notify when part of the 
+      channel's context might be freed.
+  * debian/patchs/09_add_BEGIN_RING_NI.diff:
+    + Patch taken from git.  Add BEGIN_RING_NI inline to nouveau_pushbuf.h.
+      Used in nv50 accel code.
+
+ -- Christopher James Halse Rogers <raof@ubuntu.com>  Mon, 01 Feb 2010 15:55:14 +1100
+
+libdrm (2.4.17-0ubuntu2) lucid; urgency=low
+
+  * Enable libdrm-intel for ports architectures (LP: #507765)
+  * Adjust libdrm-dev dependencies to reflect nouveau being linux-any
+
+ -- Emmet Hikory <persia@ubuntu.com>  Fri, 15 Jan 2010 12:31:40 +0900
+
+libdrm (2.4.17-0ubuntu1) lucid; urgency=low
+
+  * Merge with Debian unstable, remaining changes:
+    + control, rules, libdrm-nouveau1.symbols: Enable libdrm_nouveau.
+  * Update libdrm-nouveau1.symbols and shlibs.
+  * Drop 02_silent_master.diff, applied upstream.
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Sat, 09 Jan 2010 00:00:29 +0200
+
+libdrm (2.4.17-1) unstable; urgency=low
+
+  [ Julien Cristau ]
+  * New upstream release, closes: #560434, #567831.
+  * Update patch 01_default_perms.diff to account for upstream move of libdrm
+    to toplevel.
+  * Update libdrm2.symbols and shlibs.
+  * Update libdrm-intel1.symbols and shlibs.
+  * Bump debhelper build-dep, we use dh_strip --remaining-packages (closes:
+    #558443).  Thanks, Sergio Gelato!
+  * Enable libdrm_radeon, interface to kernel graphics memory management on
+    radeon (closes: #558786).
+  * Rename the build directory to not include DEB_BUILD_GNU_TYPE for no
+    good reason.  Thanks, Colin Watson!
+  * Remove myself from Uploaders
+
+  [ Brice Goglin ]
+  * Bump linux-libc-dev dependency to 2.6.32, thanks Piotr Engelking,
+    closes: #561224.
+  * Add libdrm-radeon1 symbols and update shlibs.
+  * Update debian/copyright.
+
+  [ Timo Aaltonen ]
+  * Update libdrm2.symbols and shlibs.
+
+ -- Brice Goglin <bgoglin@debian.org>  Sun, 31 Jan 2010 20:12:38 +0100
+
+libdrm (2.4.15-1) unstable; urgency=low
+
+  * New upstream release.
+    + update libdrm-intel1 symbols and shlibs
+  * Only build libdrm-intel on x86 (linux and kfreebsd).
+
+ -- Julien Cristau <jcristau@debian.org>  Mon, 23 Nov 2009 17:00:57 +0100
+
+libdrm (2.4.14-1ubuntu2) lucid; urgency=low
+
+  * debian/patches/02_silent_master.diff:
+    - The library noisily writes to stderr every time the drm master
+      is set or dropped; this can have the side-effect that the kernel
+      repaints all of the console messages over top of whatever you
+      left on the screen.  That's fugly.
+
+ -- Scott James Remnant <scott@ubuntu.com>  Fri, 11 Dec 2009 04:24:50 +0000
+
+libdrm (2.4.14-1ubuntu1) karmic; urgency=low
+
+  * Merge from Debian unstable. (LP: #446080)
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Thu, 08 Oct 2009 16:35:53 +0300
+
+libdrm (2.4.14-1) unstable; urgency=low
+
+  * Parse space-separated DEB_BUILD_OPTIONS, and handle parallel=N.
+  * New upstream release.
+  * Bump Standards-Version to 3.8.3.
+
+ -- Julien Cristau <jcristau@debian.org>  Thu, 24 Sep 2009 21:53:09 +0200
+
+libdrm (2.4.13-1ubuntu1) karmic; urgency=low
+
+  * Merge with Debian. (LP: #420803)
+    + Included fixes:
+      - radeon: fix GTT writing space check
+        (LP: #411115)
+    + Remaining Ubuntu changes:
+      - control:
+        + libdrm-intel1 Replaces libdrm2 (<= 2.4.1-0ubuntu5)
+        + libdrm-dev depends on newer linux-libc-dev on !lpia
+        + libdrm-dev depends on libdrm-{radeon1,nouveau1}
+        + add libdrm-{radeon1,nouveau1}{,-dbg} source packages
+      - rules:
+        + Add libdrm-nouveau1 and libdrm-nouveau1-dbg package
+        + Enable radeon and nouveau experimental apis
+      - copyright:
+        + Update to include new files from add_libdrm-nouveau.patch
+      - libdrm-dev.install: Also install r300_reg.h, via_3d_reg.h,
+        xgi_drm.h, the nouveau headers, and other headers not provided by
+        the kernel.
+      - libdrm-{radeon1,nouveau1}.{install,symbols}:  Add nouveau and
+        radeon
+  * control:
+    + Increase linux-libc-dev version dependency to 2.6.30-2.4 for !lpia
+    + Drop Replaces on linux-libc-dev
+
+ -- Bryce Harrington <bryce@ubuntu.com>  Tue, 08 Sep 2009 15:18:34 -0700
+
+libdrm (2.4.13-1) unstable; urgency=low
+
+  [ Christopher James Halse Rogers ]
+  * debian/control:
+    + Remove scary 'built from DRM snapshot' warning from long description of
+      libdrm-intel1{,-dbg}
+
+  [ Julien Cristau ]
+  * New upstream release.
+  * Update libdrm-intel1.symbols.
+
+ -- Julien Cristau <jcristau@debian.org>  Sat, 05 Sep 2009 13:15:36 +0200
+
+libdrm (2.4.12-1ubuntu1) karmic; urgency=low
+
+  * Merge from Debian unstable.
+  * Drop 101_update_libdrm-nouveau_interface.patch, included upstream.
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Tue, 28 Jul 2009 14:13:58 +0300
+
+libdrm (2.4.12-1) unstable; urgency=low
+
+  * New upstream release.
+
+ -- Brice Goglin <bgoglin@debian.org>  Tue, 21 Jul 2009 15:29:03 +0200
+
+libdrm (2.4.11-1ubuntu1) karmic; urgency=low
+
+  [ Timo Aaltonen ]
+  * Merge from Debian unstable.
+
+  [ Christopher James Halse Rogers ]
+  * Add 101_update_libdrm-nouveau_interface.patch.  Backport several
+    libdrm-nouveau commits from upstream which are needed to interface with
+    the new 0.0.14 nouveau kernel interface provided by recent nouveau.ko
+    (LP: #395700)
+  * debian/libdrm-nouveau1.symbols: Add new symbols introduced in 
+    101_update_libdrm-nouveau_interface
+  * debian/libdrm-dev.install:
+    + Remove drm_mode.h from libdrm-dev again; this is shipped in 
+      linux-libc-dev.
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Wed, 08 Jul 2009 14:52:50 +0300
+
+libdrm (2.4.11-1) unstable; urgency=low
+
+  * New upstream release.
+  * Also pull in additional fix for libdrm-intel: Only do BO caching up to
+    64MB objects.
+  * Update libdrm-intel1.symbols and bump shlibs.
+  * Add README.source from xsfbs.  Bump Standards-Version to 3.8.1.
+  * Remove Thierry Reding from Uploaders, he doesn't seem to be around anymore
+    :(
+
+ -- Julien Cristau <jcristau@debian.org>  Mon, 08 Jun 2009 16:22:04 +0200
+
+libdrm (2.4.11-0ubuntu1) karmic; urgency=low
+
+  * New upstream release
+  * Add 100_bo_cache_up_to_64mb.patch.  Cherrypick from upstream.
+    This avoids making objects significantly bigger than they would be
+    otherwise, which would result in some failing at binding to the GTT.
+    Fixes issue with hangs viewing large images.
+    (LP: #330460)
+  * libdrm-intel1.symbols: Add drm_intel_bo_disable_reuse and
+    drm_intel_get_pipe_from_crtc_id
+  * Don't try to install ChangeLog since not included in upstream release.
+
+ -- Bryce Harrington <bryce@ubuntu.com>  Tue, 02 Jun 2009 17:31:34 -0700
+
+libdrm (2.4.9-2ubuntu1) karmic; urgency=low
+
+  * Merge from debian unstable, remaining changes:
+    - control:
+      + libdrm-intel1 Replaces libdrm2 (<= 2.4.1-0ubuntu5)
+      + libdrm-dev depends on linux-libc-dev => 2.6.28-5.15 on
+        [amd64 armel i386] only, and >= 2.6.28-2.4 on lpia
+      + Remove scary 'built from DRM snapshot' warning from long description of
+        libdrm-intel1{,-dbg}
+      + libdrm-dev depends on libdrm-nouveau1
+      + add libdrm-nouveau1{,-dbg} source packages
+    - rules:
+      + Add libdrm-nouveau1 and libdrm-nouveau1-dbg package
+      + Enable nouveau experimental api
+    - copyright:
+      + Update to include new files from add_libdrm-nouveau.patch
+    - libdrm-dev.install: Also install r300_reg.h, via_3d_reg.h,
+      xgi_drm.h, the nouveau headers, and other headers not provided by
+      the kernel.
+
+ -- Bryce Harrington <bryce@ubuntu.com>  Mon, 11 May 2009 18:56:10 -0700
+
+libdrm (2.4.9-2) unstable; urgency=low
+
+  * Ship all drm headers on kfreebsd, again.
+  * Move -dbg packages to new debug section.
+
+ -- Julien Cristau <jcristau@debian.org>  Sun, 03 May 2009 18:55:42 +0200
+
+libdrm (2.4.9-1) unstable; urgency=low
+
+  [ Brice Goglin ]
+  * New upstream release.
+    + Remove buggy symlinks for the upstream tarball.
+  * Add myself to Uploaders.
+
+  [ Julien Cristau ]
+  * Make the linux-libc-dev dependency linux-only (closes: #521253).  Thanks,
+    Petr Salinger!
+
+ -- Brice Goglin <bgoglin@debian.org>  Sat, 11 Apr 2009 23:12:49 +0200
+
+libdrm (2.4.5-2) unstable; urgency=low
+
+  * Add drm_mode.h to the list of headers we don't ship.
+
+ -- Julien Cristau <jcristau@debian.org>  Wed, 25 Mar 2009 10:56:53 +0100
+
+libdrm (2.4.5-0ubuntu5) jaunty; urgency=low
+
+  * debian/patches/02_libdrm_nouveau_update.patch:
+    - Pull in upstream changes to libdrm-nouveau.  
+      + Fixes a memory leak in fence handling.
+      + Fixes an error the DDX reports in accessing the frontbuffer.
+      + Should be reverted for the next upstream version of libdrm.
+
+ -- Christopher James Halse Rogers <raof@ubuntu.com>  Sat, 04 Apr 2009 17:54:51 +1100
+
+libdrm (2.4.5-0ubuntu4) jaunty; urgency=low
+
+  * debian/libdrm-nouveau1.symbols:
+    - Fix thinko copied over from libdrm-intel1.symbols.  The file should
+      specify libdrm-nouveau1 as the corresponding package, not libdrm2.
+      Fixes xserver-xorg-video-nouveau failing to depend on libdrm-nouveau1
+      (LP: #350925)
+  * debian/control:
+    - There's no good reason to restrict the dependency of libdrm-dev on
+      libdrm-nouveau1 to x86 architectures.
+
+ -- Christopher James Halse Rogers <raof@ubuntu.com>  Sun, 29 Mar 2009 17:32:31 +1100
+
+libdrm (2.4.5-0ubuntu3) jaunty; urgency=low
+
+  * debian/control: libdrm-dev should also depend on libdrm-nouveau1
+    Fixes xserver-xorg-video-nouveau FTBFS on amd64.
+    (LP: #346556)
+
+ -- Christopher James Halse Rogers <raof@ubuntu.com>  Sat, 21 Mar 2009 11:17:59 +1100
+
+libdrm (2.4.5-0ubuntu2) jaunty; urgency=low
+
+  * debian/control: nouveau package description should refer to it, not
+    intel. (LP: #341294)
+  * debian/libdrm-dev.install: Also install r300_reg.h, via_3d_reg.h, and
+    xgi_drm.h.
+  * debian/rules:  Enforce --fail-missing again
+
+ -- Bryce Harrington <bryce@ubuntu.com>  Wed, 18 Mar 2009 18:50:31 -0700
+
+libdrm (2.4.5-0ubuntu1) jaunty; urgency=low
+
+  [Bryce Harrington]
+  * Merge from debian-unstable (unreleased git).  Remaining changes:
+    - debian/control: libdrm-intel1 Replaces libdrm2 (<= 2.4.1-0ubuntu5)
+    - debian/control: libdrm-dev Depends on linux-libc-dev only 
+      on [amd64 armel i386] until the other archs have caught up.
+    - debian/control: libdrm-dev Replace linux-libc-dev (<= 2.6.28-3.4),
+      since it includes the drm headers. We will drop them from libdrm-dev
+      when the drivers support the new headers.
+    - debian/control: Split the linux-libc-dev dep on lpia and depend 
+      on >= 2.6.28-2.4 on lpia
+    - debian/control: libdrm-dev Depends on linux-libc-dev (>= 2.6.28-5.15).
+  * debian/rules: enable nouveau experimental api
+  
+  [Christopher James Halse Rogers]
+  * debian/rules, debian/control, debian/libdrm-nouveau1.install:
+    + Add libdrm-nouveau1 and libdrm-nouveau1-dbg package
+  * debian/libdrm-nouveau1.symbols:
+    + Add initial symbols file.
+  * debian/control:
+    + Remove scary 'built from DRM snapshot' warning from long description of
+      libdrm-intel1{,-dbg}
+  * debian/libdrm-dev.install:
+    + Also install the libdrm-nouveau headers; these aren't going to be shipped
+      by the kernel any time soon.
+  * debian/copyright:
+    + Update to include new files from add_libdrm-nouveau.patch
+
+ -- Bryce Harrington <bryce@ubuntu.com>  Mon, 09 Mar 2009 16:43:00 -0700
+
+libdrm (2.4.5-1) unstable; urgency=low
+
+  * New upstream release. (closes: #505740)
+
+  [ Timo Aaltonen ]
+  * New upstream release. (closes: #505740)
+  * debian/rules:
+    -Run autoreconf at build time, build-depend on automake and libtool.
+     (closes: #482727)
+    -Add a debian/libdrm2.symbols file and '-c4' parameter to dh_makeshlibs
+     to fail if new symbols are added. Don't use Debian versions for now.
+
+  [ Julien Cristau ]
+  * Add a new package for the intel-specific bits (libdrm-intel1)
+  * Build-depend on pkg-config and libpthread-stubs0-dev (closes: #502078).
+    Thanks, Frank Lichtenheld!
+  * Don't mention *.la in libdrm-dev.install.
+  * Make libdrm-dev depend on libdrm-intel1 on x86.
+  * On Linux, let udev create the device files.
+  * Let linux-libc-dev provide some drm headers, drop them from libdrm-dev.
+    Add dependency on linux-libc-dev >= 2.6.28.
+  * Set libdrm2 shlibs to 2.4.3, libdrm-intel1 shlibs to 2.4.5.  Update
+    symbols files.
+
+ -- Julien Cristau <jcristau@debian.org>  Tue, 24 Mar 2009 22:20:50 +0100
+
+libdrm (2.4.4-0ubuntu6) jaunty; urgency=low
+
+  * Bump dep on linux-libc-dev dep to >= 2.6.28-1.4 on lpia as this version of
+    the headers now include a compatibility #define which mesa requires.
+
+ -- Loic Minier <lool@dooz.org>  Tue, 03 Feb 2009 23:20:27 +0100
+
+libdrm (2.4.4-0ubuntu5) jaunty; urgency=low
+
+  * Revert XS-Original-Vcs-* to Vcs-*, this *is* maintained in Git, sorry.
+  * Split the linux-libc-dev dep on lpia and depend on >= 2.6.28-1.1 on lpia
+    -- the version differs because it's built from linux-lpia instead of
+    linux; this is not going to be fixable anytime soon, so we should be
+    careful to use arch-specific versions for linux-libc-dev deps/bdeps.
+
+ -- Loic Minier <lool@dooz.org>  Sun, 01 Feb 2009 16:25:46 +0100
+
+libdrm (2.4.4-0ubuntu4) jaunty; urgency=low
+
+  * Also depend on linux-libc-dev on [lpia] as linux-libc-dev_2.6.28-1.2_lpia
+    has the drm headers; the avoidance of this dep on other arches just helps
+    installability, but because the headers are missing you're unlikely to do
+    anything with the lib anyway.  The solution is a linux-ports upload.
+  * Rename Vcs-* to XS-Original-Vcs-*.
+
+ -- Loic Minier <lool@dooz.org>  Sat, 31 Jan 2009 23:50:33 +0100
+
+libdrm (2.4.4-0ubuntu3) jaunty; urgency=low
+
+  * libdrm-dev Depends on linux-libc-dev only on [amd64 armel i386]
+    until the other archs have caught up.
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Sat, 31 Jan 2009 12:37:12 +0200
+
+libdrm (2.4.4-0ubuntu2) jaunty; urgency=low
+
+  * debian/control: Add a missing comma to libdrm-dev's Depends.
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Fri, 23 Jan 2009 13:45:58 +0200
+
+libdrm (2.4.4-0ubuntu1) jaunty; urgency=low
+
+  * Merge with Debian experimental, remaining changes:
+    - libdrm-intel1 Replaces libdrm2 (<= 2.4.1-0ubuntu5)
+    - libdrm-dev: Replace linux-libc-dev (<= 2.6.28-3.4), since it
+      includes the drm headers. We will drop them from libdrm-dev
+      after jaunty alpha2 when the drivers support the new headers.
+    - debian/libdrm-dev.install: Don't install the drm headers anymore,
+      the drivers should build against the ones provided by the kernel.
+  * debian/libdrm-dev.install: Include a couple of headers not found
+    in the 2.6.28 kernel (mach64, nouveau). (LP: #314771)
+  * debian/control: libdrm-dev Depends on linux-libc-dev (>= 2.6.28-5.15).
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Fri, 23 Jan 2009 10:19:06 +0200
+
+libdrm (2.4.1-0ubuntu9) jaunty; urgency=low
+
+  * debian/libdrm-dev.install: Don't install the drm headers anymore, 
+    the drivers should build against the ones provided by the kernel.
+    (LP: #308387)
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Fri, 02 Jan 2009 12:48:40 +0200
+
+libdrm (2.4.1-0ubuntu8) jaunty; urgency=low
+
+  * libdrm-dev: Replace linux-libc-dev (<= 2.6.28-3.4), since it
+    includes the drm headers. We will drop them from libdrm-dev
+    after jaunty alpha2 when the drivers support the new headers.
+    (LP: #308387)
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Tue, 16 Dec 2008 23:29:38 +0200
+
+libdrm (2.4.1-0ubuntu7) jaunty; urgency=low
+
+  * Merge with debian-experimental git, remaining changes:
+    - libdrm-intel1 Replaces libdrm2 (<= 2.4.1-0ubuntu5)
+
+ -- Timo Aaltonen <tepsipakki@ubuntu.com>  Wed, 03 Dec 2008 09:24:35 +0200
+
+libdrm (2.4.1-0ubuntu6) jaunty; urgency=low
+
+  * libdrm-intel1 Replaces libdrm2 (<= 2.4.1-0ubuntu5)
+
+ -- Timo Aaltonen <tepsipakki@ubuntu.com>  Thu, 27 Nov 2008 10:25:29 +0200
+
+libdrm (2.4.1-0ubuntu5) jaunty; urgency=low
+
+  * Split the symbols file (libdrm2, libdrm-intel1), remove shlibs and
+    use dh_makeshlibs properly instead.
+
+ -- Timo Aaltonen <tepsipakki@ubuntu.com>  Thu, 27 Nov 2008 09:42:59 +0200
+
+libdrm (2.4.1-0ubuntu4) jaunty; urgency=low
+
+  * debian/libdrm2.install: Careful with those wildmarks.
+    libdrm2 got libdrm_intel.so too, don't do that.
+
+ -- Timo Aaltonen <tepsipakki@ubuntu.com>  Thu, 27 Nov 2008 08:58:47 +0200
+
+libdrm (2.4.1-0ubuntu3) jaunty; urgency=low
+
+  * Actually build the new libdrm-intel1 package.
+
+ -- Timo Aaltonen <tepsipakki@ubuntu.com>  Wed, 26 Nov 2008 14:41:08 +0200
+
+libdrm (2.4.1-0ubuntu2) jaunty; urgency=low
+
+  * Build-depend on libpthread-stubs0-dev and pkg-config (FTBFS).
+  * Make libdrm-dev depend on libdrm-intel1.
+
+ -- Timo Aaltonen <tepsipakki@ubuntu.com>  Wed, 26 Nov 2008 01:15:07 +0200
+
+libdrm (2.4.1-0ubuntu1) jaunty; urgency=low
+
+  * New upstream release.
+
+ -- Timo Aaltonen <tepsipakki@ubuntu.com>  Wed, 26 Nov 2008 00:38:11 +0200
+
+libdrm (2.3.1-2) unstable; urgency=high
+
+  * Remove from the source package a bunch of files that are only used by the
+    kernel drm component.  This gets rid of the mga, r128 and radeon
+    microcode, and thus closes: #502675.  Thanks, Ben Hutchings!
+
+ -- Julien Cristau <jcristau@debian.org>  Sun, 19 Oct 2008 14:26:37 +0200
+
+libdrm (2.3.1-1) unstable; urgency=low
+
+  [ Brice Goglin ]
+  * Update upstream URL in debian/copyright.
+  * Bump Standards-Version to 3.7.3 (no changes).
+  * Drop the XS- prefix from Vcs-Git and Vcs-Browser fields in debian/control.
+  * Install the upstream ChangeLog.
+
+  [ Julien Cristau ]
+  * New upstream release (needed for mesa 7.1 and newer xserver).
+  * Note: this release removes the memory manager (TTM) interface used by the
+    i915tex dri driver.
+  * debian/rules: don't call configure with --host if we're not
+    cross-building, and fix some rules dependencies.
+
+  [ Timo Aaltonen ]
+  * Bump the shlibs to 2.3.1.
+
+ -- Julien Cristau <jcristau@debian.org>  Sun, 13 Jul 2008 19:07:49 +0200
+
+libdrm (2.3.0-4) unstable; urgency=low
+
+  [ David Nusinow ]
+  * Add NEWS.Debian explaining the change in the last upload to interested
+    administrators.
+
+  [ Julien Cristau ]
+  * Upload to unstable.
+
+ -- Julien Cristau <jcristau@debian.org>  Fri, 20 Apr 2007 05:06:34 +0200
+
+libdrm (2.3.0-3) experimental; urgency=low
+
+  * Add myself to uploaders
+  * Patch libdrm to default to device permission 666 so we don't have to do it
+    in xorg.conf. The only way libdrm can do anything is through the server
+    anyway. This can still be overridden by a user's xorg.conf. This change
+    also requires adding quilt to the build-depends
+
+ -- David Nusinow <dnusinow@debian.org>  Sun, 15 Apr 2007 13:08:50 -0400
+
+libdrm (2.3.0-2) unstable; urgency=low
+
+  * Update my email address in debian/control.
+  * Add XS-Vcs-Git and XS-Vcs-Browser in debian/control.
+  * Upload to unstable.
+
+ -- Julien Cristau <jcristau@debian.org>  Thu, 12 Apr 2007 19:06:57 +0200
+
+libdrm (2.3.0-1) experimental; urgency=low
+
+  [ Thierry Reding ]
+  * New upstream release.
+  * Set the Debian X Strike Force as maintainer.
+  * Add myself to uploaders.
+  * Add a debugging symbol package for libdrm2.
+
+  [ Julien Cristau ]
+  * Bump shlibs to libdrm2 >= 2.3.0.
+  * Add myself to uploaders.
+  * Add build-dep on dpkg-dev >= 1.13.19 to make sure that the binary:Version
+    substvar is available.
+  * libdrm2-dbg depends on libdrm2 (= ${binary:Version}).
+  * Don't install libdrm.la, and use dh_install --list-missing.
+
+ -- Julien Cristau <julien.cristau@ens-lyon.org>  Thu,  4 Jan 2007 18:56:08 +0100
+
+libdrm (2.2.0-0.1) experimental; urgency=low
+
+  * Non-maintainer upload.
+  * New upstream release.
+  * Bump Standards-Version to 3.7.2, no changes required.
+  * Bump debhelper compatibility to 5 and adjust build-dependency.
+  * Don't try to install pkgconfig files from usr/share/pkgconfig because
+    there is nothing in that directory.
+
+ -- Thierry Reding <thierry@gilfi.de>  Sat, 18 Nov 2006 19:50:26 +0100
+
+libdrm (2.0.2-0.1) unstable; urgency=low
+
+  * Non-maintainer upload.
+  * New upstream release (closes: #377166).
+    - Includes a fix for FTBFS on GNU/kFreeBSD (closes: #332994).
+  * Manually force static build.
+
+ -- Andres Salomon <dilinger@debian.org>  Sat, 23 Sep 2006 06:32:23 +0000
+
+libdrm (2.0.1-1) unstable; urgency=high
+
+  * New upstream release
+    - Fixes a pathological hash table smash discovered by the Coverity scanner
+    - updates the installed header files for various new #defines
+
+ -- David Nusinow <dnusinow@debian.org>  Tue,  4 Apr 2006 23:46:05 -0400
+
+libdrm (2.0-1) experimental; urgency=low
+
+  * First upload to Debian
+
+ -- David Nusinow <dnusinow@debian.org>  Thu,  5 Jan 2006 22:45:27 -0500
+
+libdrm (2.0-0ubuntu1) dapper; urgency=low
+
+  * New upstream release.
+  * Change binary package from libdrm1 to libdrm2, following soversion bump.
+
+ -- Daniel Stone <daniel.stone@ubuntu.com>  Mon, 12 Dec 2005 13:05:22 +1100
+
+libdrm (1.0.5-0ubuntu1) dapper; urgency=low
+
+  * New upstream version.
+
+ -- Daniel Stone <daniel.stone@ubuntu.com>  Wed,  2 Nov 2005 01:56:07 +1100
+
+libdrm (1.0.3-3) unstable; urgency=low
+
+  * Yay for understandable bug reports! *gmprf*
+  * debian/control:libdrm1 =~ s/development/runtime/ (closes: bug#325515)
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Fri, 16 Sep 2005 09:46:05 -0600
+
+libdrm (1.0.3-2) unstable; urgency=low
+
+  * libdrm.pc.in: add -ldrm to Libs
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Thu, 08 Sep 2005 20:49:01 -0600
+
+libdrm (1.0.3-1) unstable; urgency=low
+
+  * New upstream
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sun, 28 Aug 2005 11:12:07 -0600
+
+libdrm (1.0.2-3) unstable; urgency=low
+
+  * debian/control: it's "Direct Rendering Infraestructure".  I was rather
+    sure it stand for interface... thanks Michel.  (closes: bug#324514)
+  * debian/control: forgot to actually write this in the file.  Build-Depends
+    on libx11-dev.  Thanks Kurt (closes: bug#324560)
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sun, 28 Aug 2005 11:01:41 -0600
+
+libdrm (1.0.2-2) unstable; urgency=low
+
+  * Forgot to fix the other broken bit :-P
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Fri, 19 Aug 2005 22:01:32 -0600
+
+libdrm (1.0.2-1) unstable; urgency=low
+
+  * Initial release. Closes: #324074
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Fri, 19 Aug 2005 21:11:18 -0600
+
--- libdrm-2.4.32.orig/debian/libdrm2.NEWS
+++ libdrm-2.4.32/debian/libdrm2.NEWS
@@ -0,0 +1,8 @@
+libdrm (2.3.0-4) experimental; urgency=low
+
+  * We are now shipping libdrm with the default permissions set to 666,
+    rather than the upstream default of 660. If you have untrusted users,
+    you should configure the X server to explicitly use a mode of 660 in
+    the xorg.conf.
+
+ -- David Nusinow <dnusinow@debian.org>  Wed, 18 Apr 2007 22:44:21 -0400
--- libdrm-2.4.32.orig/debian/rules
+++ libdrm-2.4.32/debian/rules
@@ -0,0 +1,102 @@
+#!/usr/bin/make -f
+
+###
+### Configuration, decide what to build
+###
+
+# Some variables:
+DEB_HOST_ARCH_OS  ?= $(shell dpkg-architecture -qDEB_HOST_ARCH_OS)
+DEB_HOST_ARCH_CPU ?= $(shell dpkg-architecture -qDEB_HOST_ARCH_CPU)
+
+# Linux vs. the rest:
+ifeq (linux, $(DEB_HOST_ARCH_OS))
+	confflags += --enable-udev
+	confflags += --enable-libkms
+	LIBKMS = yes
+	confflags += --enable-vmwgfx-experimental-api
+	confflags += --enable-nouveau-experimental-api
+	NOUVEAU = yes
+	confflags += --enable-radeon
+	RADEON = yes
+ifeq (arm, $(DEB_HOST_ARCH_CPU))
+	confflags += --enable-omap-experimental-api
+	OMAP = yes
+endif
+# Plymouth wants libdrm-intel1, even on architectures where it's guaranteed
+# to be useless.  Satisfy it's depraved yearnings.
+	INTEL = yes
+else
+	confflags += --disable-udev
+	confflags += --disable-libkms
+	LIBKMS = no
+	confflags += --disable-vmwgfx-experimental-api
+	confflags += --disable-nouveau-experimental-api
+	NOUVEAU = no
+	confflags += --disable-radeon
+	RADEON = no
+	confflags += --disable-omap-experimental-api
+	OMAP = no
+endif
+
+ifeq ($(INTEL), yes)
+	confflags += --enable-intel
+else
+	confflags += --disable-intel
+endif
+
+###
+### Actual build
+###
+
+override_dh_auto_configure:
+	dh_auto_configure -- --enable-static=yes $(confflags)
+
+override_dh_auto_test:
+	dh_auto_test || echo "Test suite failure, but keeping on anyway"
+
+override_dh_auto_install:
+	dh_auto_install --destdir=debian/tmp
+
+override_dh_install:
+	find debian/tmp -name '*.la' -delete
+	dh_install --fail-missing
+
+override_dh_strip:
+	dh_strip -plibdrm2 --dbg-package=libdrm2-dbg
+ifeq ($(INTEL), yes)
+	dh_strip -plibdrm-intel1 --dbg-package=libdrm-intel1-dbg
+endif
+ifeq ($(NOUVEAU), yes)
+	dh_strip -plibdrm-nouveau1a --dbg-package=libdrm-nouveau1a-dbg
+endif
+ifeq ($(RADEON), yes)
+	dh_strip -plibdrm-radeon1 --dbg-package=libdrm-radeon1-dbg
+endif
+ifeq ($(OMAP), yes)
+	dh_strip -plibdrm-omap1 --dbg-package=libdrm-omap1-dbg
+endif
+ifeq ($(LIBKMS), yes)
+	dh_strip -p libkms1 --dbg-package=libkms1-dbg
+endif
+	dh_strip -s --remaining-packages
+
+override_dh_makeshlibs:
+	dh_makeshlibs -plibdrm2 -V'libdrm2 (>= 2.4.31)' -- -c4
+ifeq ($(INTEL), yes)
+	dh_makeshlibs -plibdrm-intel1 -V'libdrm-intel1 (>= 2.4.32)' -- -c4
+endif
+ifeq ($(NOUVEAU), yes)
+	dh_makeshlibs -plibdrm-nouveau1a -V'libdrm-nouveau1a (>= 2.4.23)' -- -c4
+endif
+ifeq ($(RADEON), yes)
+	dh_makeshlibs -plibdrm-radeon1 -V'libdrm-radeon1 (>= 2.4.31)' -- -c4
+endif
+ifeq ($(OMAP), yes)
+	dh_makeshlibs -plibdrm-omap1 -V'libdrm-omap1 (>= 2.4.30)' -- -c4
+endif
+ifeq ($(LIBKMS), yes)
+	dh_makeshlibs -plibkms1 -V'libkms1' -- -c4
+endif
+
+%:
+	dh $@ --with quilt,autoreconf --builddirectory=build/
--- libdrm-2.4.32.orig/debian/control
+++ libdrm-2.4.32/debian/control
@@ -0,0 +1,216 @@
+Source: libdrm
+Priority: optional
+Maintainer: Ubuntu X-SWAT <ubuntu-x@lists.ubuntu.com>
+XSBC-Original-Maintainer: Debian X Strike Force <debian-x@lists.debian.org>
+Uploaders: Cyril Brulebois <kibi@debian.org>
+Build-Depends:
+ debhelper (>= 8.1.2ubuntu2),
+ dh-autoreconf,
+ quilt,
+ libx11-dev,
+ pkg-config,
+ libpthread-stubs0-dev,
+ libudev-dev [linux-any],
+ libpciaccess-dev,
+Standards-Version: 3.9.2
+Section: libs
+Vcs-Git: git://git.debian.org/git/pkg-xorg/lib/libdrm
+Vcs-Browser: http://git.debian.org/?p=pkg-xorg/lib/libdrm.git
+
+Package: libdrm-dev
+Section: libdevel
+Architecture: any
+Depends:
+ libdrm2 (= ${binary:Version}),
+ libdrm-intel1 (= ${binary:Version}) [linux-any kfreebsd-any],
+ libdrm-radeon1 (= ${binary:Version}) [linux-any],
+ libdrm-nouveau1a (= ${binary:Version}) [linux-any],
+ libdrm-omap1 (= ${binary:Version}) [any-arm],
+ libkms1 (= ${binary:Version}) [linux-any],
+ ${misc:Depends},
+Replaces:
+ linux-libc-dev (<< 2.6.32-10)
+Description: Userspace interface to kernel DRM services -- development files
+ This library implements the userspace interface to the kernel DRM
+ services.  DRM stands for "Direct Rendering Manager", which is the
+ kernelspace portion of the "Direct Rendering Infrastructure" (DRI).
+ The DRI is currently used on Linux to provide hardware-accelerated
+ OpenGL drivers.
+ .
+ This package provides the development environment for libdrm.
+
+Package: libdrm2
+Section: libs
+Architecture: any
+Depends:
+ ${shlibs:Depends},
+ ${misc:Depends},
+Multi-Arch: same
+Pre-Depends: ${misc:Pre-Depends}
+Description: Userspace interface to kernel DRM services -- runtime
+ This library implements the userspace interface to the kernel DRM
+ services.  DRM stands for "Direct Rendering Manager", which is the
+ kernelspace portion of the "Direct Rendering Infrastructure" (DRI).
+ The DRI is currently used on Linux to provide hardware-accelerated
+ OpenGL drivers.
+ .
+ This package provides the runtime environment for libdrm.
+
+Package: libdrm2-dbg
+Section: debug
+Priority: extra
+Architecture: any
+Depends:
+ libdrm2 (= ${binary:Version}),
+ ${misc:Depends},
+Multi-Arch: same
+Description: Userspace interface to kernel DRM services -- debugging symbols
+ This library implements the userspace interface to the kernel DRM
+ services.  DRM stands for "Direct Rendering Manager", which is the
+ kernelspace portion of the "Direct Rendering Infrastructure" (DRI).
+ The DRI is currently used on Linux to provide hardware-accelerated
+ OpenGL drivers.
+ .
+ This package provides debugging symbols for the libdrm2 package.
+
+Package: libdrm-intel1
+Section: libs
+Architecture: linux-any kfreebsd-any
+Depends:
+ ${shlibs:Depends},
+ ${misc:Depends},
+Pre-Depends: ${misc:Pre-Depends}
+Multi-Arch: same
+Description: Userspace interface to intel-specific kernel DRM services -- runtime
+ This library implements the userspace interface to the intel-specific kernel
+ DRM services.  DRM stands for "Direct Rendering Manager", which is the
+ kernelspace portion of the "Direct Rendering Infrastructure" (DRI). The DRI is
+ currently used on Linux to provide hardware-accelerated OpenGL drivers.
+
+Package: libdrm-intel1-dbg
+Section: debug
+Priority: extra
+Architecture: linux-any kfreebsd-any
+Depends:
+ libdrm-intel1 (= ${binary:Version}),
+ ${misc:Depends},
+Multi-Arch: same
+Description: Userspace interface to intel-specific kernel DRM services -- debugging symbols
+ This library implements the userspace interface to the kernel DRM services.
+ DRM stands for "Direct Rendering Manager", which is the kernelspace portion
+ of the "Direct Rendering Infrastructure" (DRI). The DRI is currently used on
+ Linux to provide hardware-accelerated OpenGL drivers.
+ .
+ This package provides the debugging symbols for the libdrm-intel1 package.
+
+Package: libdrm-nouveau1a
+Section: libs
+Architecture: linux-any
+Depends: ${shlibs:Depends},
+ ${misc:Depends},
+Conflicts: libdrm-nouveau1
+Pre-Depends: ${misc:Pre-Depends}
+Multi-Arch: same
+Description: Userspace interface to nouveau-specific kernel DRM services -- runtime
+ This library implements the userspace interface to the nouveau-specific kernel
+ DRM services. DRM stands for "Direct Rendering Manager", which is the
+ kernelspace portion of the "Direct Rendering Infrastructure" (DRI). The DRI is
+ currently used on Linux to provide hardware-accelerated OpenGL drivers.
+
+Package: libdrm-nouveau1a-dbg
+Section: debug
+Priority: extra
+Architecture: linux-any
+Depends: libdrm-nouveau1a (= ${binary:Version}),
+ ${misc:Depends},
+Conflicts: libdrm-nouveau1-dbg
+Multi-Arch: same
+Description: Userspace interface to nouveau-specific kernel DRM -- debugging symbols
+ This library implements the userspace interface to the kernel DRM services.
+ DRM stands for "Direct Rendering Manager", which is the kernelspace portion
+ of the "Direct Rendering Infrastructure" (DRI). The DRI is currently used on
+ Linux to provide hardware-accelerated OpenGL drivers.
+ .
+ This package provides the debugging symbols for the libdrm-nouveau1a package.
+
+Package: libdrm-radeon1
+Section: libs
+Architecture: linux-any
+Depends:
+ ${shlibs:Depends},
+ ${misc:Depends},
+Pre-Depends: ${misc:Pre-Depends}
+Multi-Arch: same
+Description: Userspace interface to radeon-specific kernel DRM services -- runtime
+ This library implements the userspace interface to the radeon-specific kernel
+ DRM services.  DRM stands for "Direct Rendering Manager", which is the
+ kernelspace portion of the "Direct Rendering Infrastructure" (DRI). The DRI is
+ currently used on Linux to provide hardware-accelerated OpenGL drivers.
+
+Package: libdrm-radeon1-dbg
+Section: debug
+Priority: extra
+Architecture: linux-any
+Depends:
+ libdrm-radeon1 (= ${binary:Version}),
+ ${misc:Depends},
+Multi-Arch: same
+Description: Userspace interface to radeon-specific kernel DRM services -- debugging symbols
+ This library implements the userspace interface to the kernel DRM services.
+ DRM stands for "Direct Rendering Manager", which is the kernelspace portion
+ of the "Direct Rendering Infrastructure" (DRI). The DRI is currently used on
+ Linux to provide hardware-accelerated OpenGL drivers.
+ .
+ This package provides the debugging symbols for the libdrm-radeon1 package.
+
+Package: libkms1
+Section: libs
+Architecture: linux-any
+Depends: ${shlibs:Depends}, ${misc:Depends}
+Multi-Arch: same
+Pre-Depends: ${misc:Pre-Depends}
+Description: Userspace interface to kernel DRM buffer management
+ This library implements a unified userspace interface to the different buffer
+ management interfaces of the kernel DRM hardware drivers.
+
+Package: libkms1-dbg
+Section: debug
+Priority: extra
+Architecture: linux-any
+Depends: libkms1 (= ${binary:Version}), ${misc:Depends}
+Multi-Arch: same
+Description: Userspace interface to kernel DRM buffer management -- debugging symbols
+ This library implements a unified userspace interface to the different buffer
+ management interfaces of the kernel DRM hardware drivers.
+ .
+ This package provides the debugging symbols for the libkms1 package.
+
+Package: libdrm-omap1
+Section: libs
+Architecture: any-arm
+Depends:
+ ${shlibs:Depends},
+ ${misc:Depends},
+Pre-Depends: ${misc:Pre-Depends}
+Multi-Arch: same
+Description: Userspace interface to omap-specific kernel DRM services -- runtime
+ This library implements the userspace interface to the omap-specific kernel
+ DRM services.  DRM stands for "Direct Rendering Manager", which is the 
+ kernelspace portion of the "Direct Rendering Infrastructure" (DRI). The DRI is
+ currently used on Linux to provide hardware-accelerated OpenGL drivers.
+
+Package: libdrm-omap1-dbg
+Section: debug
+Priority: extra
+Architecture: any-arm
+Depends:
+ libdrm-omap1 (= ${binary:Version}),
+ ${misc:Depends},
+Multi-Arch: same
+Description: Userspace interface to omap-specific kernel DRM services -- debugging symbols
+ This library implements the userspace interface to the kernel DRM services.
+ DRM stands for "Direct Rendering Manager", which is the kernelspace portion
+ of the "Direct Rendering Infrastructure" (DRI). The DRI is currently used on
+ Linux to provide hardware-accelerated OpenGL drivers.
+ .
+ This package provides the debugging symbols for the libdrm-omap1 package.
--- libdrm-2.4.32.orig/debian/libdrm-intel1.install
+++ libdrm-2.4.32/debian/libdrm-intel1.install
@@ -0,0 +1 @@
+usr/lib/*/libdrm_intel.so.1*
--- libdrm-2.4.32.orig/debian/libkms1.install
+++ libdrm-2.4.32/debian/libkms1.install
@@ -0,0 +1 @@
+usr/lib/*/libkms.so.1*
--- libdrm-2.4.32.orig/debian/patches/909-modetest-add-YUV-and-multi-planar-support.patch
+++ libdrm-2.4.32/debian/patches/909-modetest-add-YUV-and-multi-planar-support.patch
@@ -0,0 +1,225 @@
+From b83ad866220911e5be1704e6df085705e5ba8eae Mon Sep 17 00:00:00 2001
+From: Rob Clark <rob@ti.com>
+Date: Wed, 14 Dec 2011 22:24:14 -0600
+Subject: [PATCH 09/21] modetest: add YUV and multi-planar support
+
+Signed-off-by: Rob Clark <rob@ti.com>
+---
+ tests/modetest/modetest.c |  151 ++++++++++++++++++++++++++++++++++++++++++---
+ 1 files changed, 142 insertions(+), 9 deletions(-)
+
+diff --git a/tests/modetest/modetest.c b/tests/modetest/modetest.c
+index 2936de0..36bdfff 100644
+--- a/tests/modetest/modetest.c
++++ b/tests/modetest/modetest.c
+@@ -335,6 +335,7 @@ struct plane {
+ 	uint32_t con_id;  /* the id of connector to bind to */
+ 	uint32_t w, h;
+ 	unsigned int fb_id;
++	char format_str[5]; /* need to leave room for terminating \0 */
+ };
+ 
+ static void
+@@ -594,6 +595,63 @@ page_flip_handler(int fd, unsigned int frame,
+ 	}
+ }
+ 
++/* swap these for big endian.. */
++#define RED   2
++#define GREEN 1
++#define BLUE  0
++
++static void
++fill420(unsigned char *y, unsigned char *u, unsigned char *v,
++		int cs /*chroma pixel stride */,
++		int n, int width, int height, int stride)
++{
++	int i, j;
++
++	/* paint the buffer with colored tiles, in blocks of 2x2 */
++	for (j = 0; j < height; j+=2) {
++		unsigned char *y1p = y + j * stride;
++		unsigned char *y2p = y1p + stride;
++		unsigned char *up = u + (j/2) * stride * cs / 2;
++		unsigned char *vp = v + (j/2) * stride * cs / 2;
++
++		for (i = 0; i < width; i+=2) {
++			div_t d = div(n+i+j, width);
++			uint32_t rgb = 0x00130502 * (d.quot >> 6) + 0x000a1120 * (d.rem >> 6);
++			unsigned char *rgbp = (unsigned char *)&rgb;
++			unsigned char y = (0.299 * rgbp[RED]) + (0.587 * rgbp[GREEN]) + (0.114 * rgbp[BLUE]);
++
++			*(y2p++) = *(y1p++) = y;
++			*(y2p++) = *(y1p++) = y;
++
++			*up = (rgbp[BLUE] - y) * 0.565 + 128;
++			*vp = (rgbp[RED] - y) * 0.713 + 128;
++			up += cs;
++			vp += cs;
++		}
++	}
++}
++
++static void
++fill422(unsigned char *virtual, int n, int width, int height, int stride)
++{
++	int i, j;
++	/* paint the buffer with colored tiles */
++	for (j = 0; j < height; j++) {
++		uint8_t *ptr = (uint8_t*)((char*)virtual + j * stride);
++		for (i = 0; i < width; i++) {
++			div_t d = div(n+i+j, width);
++			uint32_t rgb = 0x00130502 * (d.quot >> 6) + 0x000a1120 * (d.rem >> 6);
++			unsigned char *rgbp = (unsigned char *)&rgb;
++			unsigned char y = (0.299 * rgbp[RED]) + (0.587 * rgbp[GREEN]) + (0.114 * rgbp[BLUE]);
++
++			*(ptr++) = y;
++			*(ptr++) = (rgbp[BLUE] - y) * 0.565 + 128;
++			*(ptr++) = y;
++			*(ptr++) = (rgbp[RED] - y) * 0.713 + 128;
++		}
++	}
++}
++
+ static int
+ set_plane(struct kms_driver *kms, struct connector *c, struct plane *p)
+ {
+@@ -602,8 +660,8 @@ set_plane(struct kms_driver *kms, struct connector *c, struct plane *p)
+ 	uint32_t handles[4], pitches[4], offsets[4] = {0}; /* we only use [0] */
+ 	uint32_t plane_id = 0;
+ 	struct kms_bo *plane_bo;
+-	uint32_t plane_flags = 0;
+-	int i, crtc_x, crtc_y, crtc_w, crtc_h;
++	uint32_t plane_flags = 0, format;
++	int i, ret, crtc_x, crtc_y, crtc_w, crtc_h;
+ 
+ 	/* find an unused plane which can be connected to our crtc */
+ 	plane_resources = drmModeGetPlaneResources(fd);
+@@ -627,19 +685,87 @@ set_plane(struct kms_driver *kms, struct connector *c, struct plane *p)
+ 		drmModeFreePlane(ovr);
+ 	}
+ 
++	fprintf(stderr, "testing %dx%d@%s overlay plane\n",
++			p->w, p->h, p->format_str);
++
+ 	if (!plane_id) {
+ 		fprintf(stderr, "failed to find plane!\n");
+ 		return -1;
+ 	}
+ 
+-	/* TODO.. would be nice to test YUV overlays.. */
+-	if (create_test_buffer(kms, p->w, p->h, &pitches[0], &plane_bo))
+-		return -1;
++	if (!strcmp(p->format_str, "XR24")) {
++		if (create_test_buffer(kms, p->w, p->h, &pitches[0], &plane_bo))
++			return -1;
++		kms_bo_get_prop(plane_bo, KMS_HANDLE, &handles[0]);
++		format = DRM_FORMAT_XRGB8888;
++	} else {
++		void *virtual;
++
++		/* TODO: this always allocates a buffer for 32bpp RGB.. but for
++		 * YUV formats, we don't use all of it..  since 4bytes/pixel is
++		 * worst case, so live with it for now and just don't use all
++		 * the buffer:
++		 */
++		plane_bo = allocate_buffer(kms, p->w, p->h, &pitches[0]);
++		if (!plane_bo)
++			return -1;
+ 
+-	kms_bo_get_prop(plane_bo, KMS_HANDLE, &handles[0]);
++		ret = kms_bo_map(plane_bo, &virtual);
++		if (ret) {
++			fprintf(stderr, "failed to map buffer: %s\n",
++				strerror(-ret));
++			kms_bo_destroy(&plane_bo);
++			return -1;
++		}
++
++		/* just testing a limited # of formats to test single
++		 * and multi-planar path.. would be nice to add more..
++		 */
++		if (!strcmp(p->format_str, "YUYV")) {
++			pitches[0] = p->w * 2;
++			offsets[0] = 0;
++			kms_bo_get_prop(plane_bo, KMS_HANDLE, &handles[0]);
++
++			fill422(virtual, 0, p->w, p->h, pitches[0]);
++
++			format = DRM_FORMAT_YUYV;
++		} else if (!strcmp(p->format_str, "NV12")) {
++			pitches[0] = p->w;
++			offsets[0] = 0;
++			kms_bo_get_prop(plane_bo, KMS_HANDLE, &handles[0]);
++			pitches[1] = p->w;
++			offsets[1] = p->w * p->h;
++			kms_bo_get_prop(plane_bo, KMS_HANDLE, &handles[1]);
++
++			fill420(virtual, virtual+offsets[1], virtual+offsets[1]+1,
++					2, 0, p->w, p->h, pitches[0]);
++
++			format = DRM_FORMAT_NV12;
++		} else if (!strcmp(p->format_str, "YV12")) {
++			pitches[0] = p->w;
++			offsets[0] = 0;
++			kms_bo_get_prop(plane_bo, KMS_HANDLE, &handles[0]);
++			pitches[1] = p->w / 2;
++			offsets[1] = p->w * p->h;
++			kms_bo_get_prop(plane_bo, KMS_HANDLE, &handles[1]);
++			pitches[2] = p->w / 2;
++			offsets[2] = offsets[1] + (p->w * p->h) / 4;
++			kms_bo_get_prop(plane_bo, KMS_HANDLE, &handles[1]);
++
++			fill420(virtual, virtual+offsets[1], virtual+offsets[2],
++					1, 0, p->w, p->h, pitches[0]);
++
++			format = DRM_FORMAT_YVU420;
++		} else {
++			fprintf(stderr, "Unknown format: %s\n", p->format_str);
++			return -1;
++		}
++
++		kms_bo_unmap(plane_bo);
++	}
+ 
+ 	/* just use single plane format for now.. */
+-	if (drmModeAddFB2(fd, p->w, p->h, DRM_FORMAT_XRGB8888,
++	if (drmModeAddFB2(fd, p->w, p->h, format,
+ 			handles, pitches, offsets, &p->fb_id, plane_flags)) {
+ 		fprintf(stderr, "failed to add fb: %s\n", strerror(errno));
+ 		return -1;
+@@ -826,6 +952,7 @@ void usage(char *name)
+ 	fprintf(stderr, "\t-s <connector_id>:<mode>\tset a mode\n");
+ 	fprintf(stderr, "\t-s <connector_id>@<crtc_id>:<mode>\tset a mode\n");
+ 	fprintf(stderr, "\t-P <connector_id>:<w>x<h>\tset a plane\n");
++	fprintf(stderr, "\t-P <connector_id>:<w>x<h>@<format>\tset a plane\n");
+ 	fprintf(stderr, "\n\tDefault is to dump all info.\n");
+ 	exit(0);
+ }
+@@ -862,7 +989,7 @@ int main(int argc, char **argv)
+ 	char *modeset = NULL;
+ 	int i, count = 0, plane_count = 0;
+ 	struct connector con_args[2];
+-	struct plane plane_args[2];
++	struct plane plane_args[2] = {0};
+ 	
+ 	opterr = 0;
+ 	while ((c = getopt(argc, argv, optstr)) != -1) {
+@@ -900,7 +1027,13 @@ int main(int argc, char **argv)
+ 			count++;				      
+ 			break;
+ 		case 'P':
+-			if (sscanf(optarg, "%d:%dx%d",
++			strcpy(plane_args[plane_count].format_str, "XR24");
++			if (sscanf(optarg, "%d:%dx%d@%4s",
++					&plane_args[plane_count].con_id,
++					&plane_args[plane_count].w,
++					&plane_args[plane_count].h,
++					plane_args[plane_count].format_str) != 4 &&
++				sscanf(optarg, "%d:%dx%d",
+ 					&plane_args[plane_count].con_id,
+ 					&plane_args[plane_count].w,
+ 					&plane_args[plane_count].h) != 3)
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/919-Add-support-for-bitmask-properties.patch
+++ libdrm-2.4.32/debian/patches/919-Add-support-for-bitmask-properties.patch
@@ -0,0 +1,47 @@
+From 3647473bf1ad13e91dd7caacd0e2db6b5959e31f Mon Sep 17 00:00:00 2001
+From: Rob Clark <rob@ti.com>
+Date: Fri, 30 Mar 2012 14:55:02 -0500
+Subject: [PATCH 19/21] Add support for bitmask properties
+
+---
+ include/drm/drm_mode.h |    1 +
+ xf86drmMode.c          |    4 ++--
+ 2 files changed, 3 insertions(+), 2 deletions(-)
+
+diff --git a/include/drm/drm_mode.h b/include/drm/drm_mode.h
+index f303d94..62ba997 100644
+--- a/include/drm/drm_mode.h
++++ b/include/drm/drm_mode.h
+@@ -226,6 +226,7 @@ struct drm_mode_get_connector {
+ #define DRM_MODE_PROP_IMMUTABLE	(1<<2)
+ #define DRM_MODE_PROP_ENUM	(1<<3) /* enumerated type with text strings */
+ #define DRM_MODE_PROP_BLOB	(1<<4)
++#define DRM_MODE_PROP_BITMASK	(1<<5) /* bitmask of enumerated types */
+ 
+ struct drm_mode_property_enum {
+ 	__u64 value;
+diff --git a/xf86drmMode.c b/xf86drmMode.c
+index a60c7cb..04fdf1f 100644
+--- a/xf86drmMode.c
++++ b/xf86drmMode.c
+@@ -575,7 +575,7 @@ drmModePropertyPtr drmModeGetProperty(int fd, uint32_t property_id)
+ 	if (prop.count_values)
+ 		prop.values_ptr = VOID2U64(drmMalloc(prop.count_values * sizeof(uint64_t)));
+ 
+-	if (prop.count_enum_blobs && (prop.flags & DRM_MODE_PROP_ENUM))
++	if (prop.count_enum_blobs && (prop.flags & (DRM_MODE_PROP_ENUM | DRM_MODE_PROP_BITMASK)))
+ 		prop.enum_blob_ptr = VOID2U64(drmMalloc(prop.count_enum_blobs * sizeof(struct drm_mode_property_enum)));
+ 
+ 	if (prop.count_enum_blobs && (prop.flags & DRM_MODE_PROP_BLOB)) {
+@@ -597,7 +597,7 @@ drmModePropertyPtr drmModeGetProperty(int fd, uint32_t property_id)
+ 	r->flags = prop.flags;
+ 	if (prop.count_values)
+ 		r->values = drmAllocCpy(U642VOID(prop.values_ptr), prop.count_values, sizeof(uint64_t));
+-	if (prop.flags & DRM_MODE_PROP_ENUM) {
++	if (prop.flags & (DRM_MODE_PROP_ENUM | DRM_MODE_PROP_BITMASK)) {
+ 		r->count_enums = prop.count_enum_blobs;
+ 		r->enums = drmAllocCpy(U642VOID(prop.enum_blob_ptr), prop.count_enum_blobs, sizeof(struct drm_mode_property_enum));
+ 	} else if (prop.flags & DRM_MODE_PROP_BLOB) {
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/series
+++ libdrm-2.4.32/debian/patches/series
@@ -0,0 +1,25 @@
+01_default_perms.diff
+02_build_libkms_against_in_tree_drm.diff
+03_build_against_librt.diff
+100-revert-intel-fix-build-of-intel-drm.patch
+101-revert-dont-build-intel-drm.patch
+901-intel-Add-some-PCI-IDs-for-Haswell.patch
+902-omap-add-omapdrm-support.patch
+904-intel-add-Ivy-Bridge-GT2-server-variant.patch
+905-intel-decode-decode-MI_WAIT_FOR_EVENT.patch
+906-omap-fix-license-header.patch
+907-omap-fix-compiler-warning.patch
+908-modetest-add-drm_plane-support.patch
+909-modetest-add-YUV-and-multi-planar-support.patch
+910-modetest-add-AR15-XR15-RGB-1555-formats.patch
+911-modetest-fix-typo.patch
+912-libdrm-update-drm-headers-from-kernel-for-prime-dmab.patch
+913-omap-add-dmabuf-support.patch
+914-modetest-fix-some-compiler-warnings.patch
+915-modetest-fix-memory-leak.patch
+916-modetest-print-more-about-our-properties.patch
+917-Add-support-for-generic-object-properties-IOCTLs.patch
+918-modetest-print-CRTC-properties.patch
+919-Add-support-for-bitmask-properties.patch
+920-modetest-support-bitmask-properties.patch
+921-modetest-support-plane-properties.patch
--- libdrm-2.4.32.orig/debian/patches/920-modetest-support-bitmask-properties.patch
+++ libdrm-2.4.32/debian/patches/920-modetest-support-bitmask-properties.patch
@@ -0,0 +1,38 @@
+From 99afbcf09caec321d467dcda0b3f3c84d2d565d0 Mon Sep 17 00:00:00 2001
+From: Rob Clark <rob@ti.com>
+Date: Fri, 30 Mar 2012 14:57:14 -0500
+Subject: [PATCH 20/21] modetest: support bitmask properties
+
+---
+ tests/modetest/modetest.c |    8 ++++++++
+ 1 files changed, 8 insertions(+), 0 deletions(-)
+
+diff --git a/tests/modetest/modetest.c b/tests/modetest/modetest.c
+index d411dcb..efb375d 100644
+--- a/tests/modetest/modetest.c
++++ b/tests/modetest/modetest.c
+@@ -204,6 +204,8 @@ dump_prop(uint32_t prop_id, uint64_t value)
+ 		printf(" immutable");
+ 	if (prop->flags & DRM_MODE_PROP_ENUM)
+ 		printf(" enum");
++	if (prop->flags & DRM_MODE_PROP_BITMASK)
++		printf(" bitmask");
+ 	if (prop->flags & DRM_MODE_PROP_BLOB)
+ 		printf(" blob");
+ 	printf("\n");
+@@ -221,6 +223,12 @@ dump_prop(uint32_t prop_id, uint64_t value)
+ 			printf(" %s=%llu", prop->enums[i].name,
+ 			       prop->enums[i].value);
+ 		printf("\n");
++	} else if (prop->flags & DRM_MODE_PROP_BITMASK) {
++		printf("\t\tvalues:");
++		for (i = 0; i < prop->count_enums; i++)
++			printf(" %s=0x%llx", prop->enums[i].name,
++			       (1LL << prop->enums[i].value));
++		printf("\n");
+ 	} else {
+ 		assert(prop->count_enums == 0);
+ 	}
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/100-revert-intel-fix-build-of-intel-drm.patch
+++ libdrm-2.4.32/debian/patches/100-revert-intel-fix-build-of-intel-drm.patch
@@ -0,0 +1,28 @@
+From eeaba3a4430f711e3dfddb9210ade1038854f13d Mon Sep 17 00:00:00 2001
+From: Robert Hooker <sarvatt@ubuntu.com>
+Date: Thu, 22 Mar 2012 13:09:59 -0400
+Subject: [PATCH 1/2] Revert "intel: Fix build of Intel DRM on x86 systems"
+
+This reverts commit 82c6938d232327233caac743a07639ac91bceb7e.
+---
+ configure.ac |    4 ++--
+ 1 files changed, 2 insertions(+), 2 deletions(-)
+
+diff --git a/configure.ac b/configure.ac
+index ff2c840..38aae0d 100644
+--- a/configure.ac
++++ b/configure.ac
+@@ -246,8 +246,8 @@ if test "x$INTEL" != "xno" -o "x$RADEON" != "xno"; then
+ 
+     else
+            if test "x$INTEL" != "xno"; then
+-                   case $host_cpu in
+-                           i?86|x86_64) INTEL=yes ;;
++                   case $host_os in
++                           i?86-*|x86_64-*) INTEL=yes ;;
+                            *) INTEL=no ;;
+                    esac
+            fi
+-- 
+1.7.9.1
+
--- libdrm-2.4.32.orig/debian/patches/908-modetest-add-drm_plane-support.patch
+++ libdrm-2.4.32/debian/patches/908-modetest-add-drm_plane-support.patch
@@ -0,0 +1,294 @@
+From d55de747a2bdec5b4885a6c86ea6707e15dfefb5 Mon Sep 17 00:00:00 2001
+From: Rob Clark <rob@ti.com>
+Date: Wed, 14 Dec 2011 21:06:43 -0600
+Subject: [PATCH 08/21] modetest: add drm_plane support
+
+Signed-off-by: Rob Clark <rob@ti.com>
+---
+ tests/modetest/modetest.c |  166 ++++++++++++++++++++++++++++++++++++++++++---
+ 1 files changed, 157 insertions(+), 9 deletions(-)
+
+diff --git a/tests/modetest/modetest.c b/tests/modetest/modetest.c
+index 1e4ec91..2936de0 100644
+--- a/tests/modetest/modetest.c
++++ b/tests/modetest/modetest.c
+@@ -51,6 +51,7 @@
+ 
+ #include "xf86drm.h"
+ #include "xf86drmMode.h"
++#include "drm_fourcc.h"
+ #include "libkms.h"
+ 
+ #ifdef HAVE_CAIRO
+@@ -267,6 +268,49 @@ void dump_framebuffers(void)
+ 	printf("\n");
+ }
+ 
++static void dump_planes(void)
++{
++	drmModePlaneRes *plane_resources;
++	drmModePlane *ovr;
++	int i, j;
++
++	plane_resources = drmModeGetPlaneResources(fd);
++	if (!plane_resources) {
++		fprintf(stderr, "drmModeGetPlaneResources failed: %s\n",
++			strerror(errno));
++		return;
++	}
++
++	printf("Planes:\n");
++	printf("id\tcrtc\tfb\tCRTC x,y\tx,y\tgamma size\n");
++	for (i = 0; i < plane_resources->count_planes; i++) {
++		ovr = drmModeGetPlane(fd, plane_resources->planes[i]);
++		if (!ovr) {
++			fprintf(stderr, "drmModeGetPlane failed: %s\n",
++				strerror(errno));
++			continue;
++		}
++
++		printf("%d\t%d\t%d\t%d,%d\t\t%d,%d\t%d\n",
++		       ovr->plane_id, ovr->crtc_id, ovr->fb_id,
++		       ovr->crtc_x, ovr->crtc_y, ovr->x, ovr->y,
++		       ovr->gamma_size);
++
++		if (!ovr->count_formats)
++			continue;
++
++		printf("  formats:");
++		for (j = 0; j < ovr->count_formats; j++)
++			printf(" %4.4s", (char *)&ovr->formats[j]);
++		printf("\n");
++
++		drmModeFreePlane(ovr);
++	}
++	printf("\n");
++
++	return;
++}
++
+ /*
+  * Mode setting with the kernel interfaces is a bit of a chore.
+  * First you have to find the connector in question and make sure the
+@@ -280,11 +324,18 @@ struct connector {
+ 	drmModeModeInfo *mode;
+ 	drmModeEncoder *encoder;
+ 	int crtc;
++	int pipe;
+ 	unsigned int fb_id[2], current_fb_id;
+ 	struct timeval start;
+ 
+ 	int swap_count;
+-};	
++};
++
++struct plane {
++	uint32_t con_id;  /* the id of connector to bind to */
++	uint32_t w, h;
++	unsigned int fb_id;
++};
+ 
+ static void
+ connector_find_mode(struct connector *c)
+@@ -351,6 +402,15 @@ connector_find_mode(struct connector *c)
+ 
+ 	if (c->crtc == -1)
+ 		c->crtc = c->encoder->crtc_id;
++
++	/* and figure out which crtc index it is: */
++	for (i = 0; i < resources->count_crtcs; i++) {
++		if (c->crtc == resources->crtcs[i]) {
++			c->pipe = i;
++			break;
++		}
++	}
++
+ }
+ 
+ static struct kms_bo *
+@@ -534,13 +594,83 @@ page_flip_handler(int fd, unsigned int frame,
+ 	}
+ }
+ 
++static int
++set_plane(struct kms_driver *kms, struct connector *c, struct plane *p)
++{
++	drmModePlaneRes *plane_resources;
++	drmModePlane *ovr;
++	uint32_t handles[4], pitches[4], offsets[4] = {0}; /* we only use [0] */
++	uint32_t plane_id = 0;
++	struct kms_bo *plane_bo;
++	uint32_t plane_flags = 0;
++	int i, crtc_x, crtc_y, crtc_w, crtc_h;
++
++	/* find an unused plane which can be connected to our crtc */
++	plane_resources = drmModeGetPlaneResources(fd);
++	if (!plane_resources) {
++		fprintf(stderr, "drmModeGetPlaneResources failed: %s\n",
++			strerror(errno));
++		return -1;
++	}
++
++	for (i = 0; i < plane_resources->count_planes && !plane_id; i++) {
++		ovr = drmModeGetPlane(fd, plane_resources->planes[i]);
++		if (!ovr) {
++			fprintf(stderr, "drmModeGetPlane failed: %s\n",
++				strerror(errno));
++			return -1;
++		}
++
++		if ((ovr->possible_crtcs & (1 << c->pipe)) && !ovr->crtc_id)
++			plane_id = ovr->plane_id;
++
++		drmModeFreePlane(ovr);
++	}
++
++	if (!plane_id) {
++		fprintf(stderr, "failed to find plane!\n");
++		return -1;
++	}
++
++	/* TODO.. would be nice to test YUV overlays.. */
++	if (create_test_buffer(kms, p->w, p->h, &pitches[0], &plane_bo))
++		return -1;
++
++	kms_bo_get_prop(plane_bo, KMS_HANDLE, &handles[0]);
++
++	/* just use single plane format for now.. */
++	if (drmModeAddFB2(fd, p->w, p->h, DRM_FORMAT_XRGB8888,
++			handles, pitches, offsets, &p->fb_id, plane_flags)) {
++		fprintf(stderr, "failed to add fb: %s\n", strerror(errno));
++		return -1;
++	}
++
++	/* ok, boring.. but for now put in middle of screen: */
++	crtc_x = c->mode->hdisplay / 3;
++	crtc_y = c->mode->vdisplay / 3;
++	crtc_w = crtc_x;
++	crtc_h = crtc_y;
++
++	/* note src coords (last 4 args) are in Q16 format */
++	if (drmModeSetPlane(fd, plane_id, c->crtc, p->fb_id,
++			    plane_flags, crtc_x, crtc_y, crtc_w, crtc_h,
++			    0, 0, p->w << 16, p->h << 16)) {
++		fprintf(stderr, "failed to enable plane: %s\n",
++			strerror(errno));
++		return -1;
++	}
++
++	return 0;
++}
++
+ static void
+-set_mode(struct connector *c, int count, int page_flip)
++set_mode(struct connector *c, int count, struct plane *p, int plane_count,
++		int page_flip)
+ {
+ 	struct kms_driver *kms;
+ 	struct kms_bo *bo, *other_bo;
+ 	unsigned int fb_id, other_fb_id;
+-	int i, ret, width, height, x, stride;
++	int i, j, ret, width, height, x, stride;
+ 	unsigned handle;
+ 	drmEventContext evctx;
+ 
+@@ -593,6 +723,12 @@ set_mode(struct connector *c, int count, int page_flip)
+ 			fprintf(stderr, "failed to set mode: %s\n", strerror(errno));
+ 			return;
+ 		}
++
++		/* if we have a plane/overlay to show, set that up now: */
++		for (j = 0; j < plane_count; j++)
++			if (p[j].con_id == c[i].id)
++				if (set_plane(kms, &c[i], &p[j]))
++					return;
+ 	}
+ 
+ 	if (!page_flip)
+@@ -676,19 +812,20 @@ set_mode(struct connector *c, int count, int page_flip)
+ 
+ extern char *optarg;
+ extern int optind, opterr, optopt;
+-static char optstr[] = "ecpmfs:v";
++static char optstr[] = "ecpmfs:P:v";
+ 
+ void usage(char *name)
+ {
+ 	fprintf(stderr, "usage: %s [-ecpmf]\n", name);
+ 	fprintf(stderr, "\t-e\tlist encoders\n");
+ 	fprintf(stderr, "\t-c\tlist connectors\n");
+-	fprintf(stderr, "\t-p\tlist CRTCs (pipes)\n");
++	fprintf(stderr, "\t-p\tlist CRTCs and planes (pipes)\n");
+ 	fprintf(stderr, "\t-m\tlist modes\n");
+ 	fprintf(stderr, "\t-f\tlist framebuffers\n");
+ 	fprintf(stderr, "\t-v\ttest vsynced page flipping\n");
+ 	fprintf(stderr, "\t-s <connector_id>:<mode>\tset a mode\n");
+ 	fprintf(stderr, "\t-s <connector_id>@<crtc_id>:<mode>\tset a mode\n");
++	fprintf(stderr, "\t-P <connector_id>:<w>x<h>\tset a plane\n");
+ 	fprintf(stderr, "\n\tDefault is to dump all info.\n");
+ 	exit(0);
+ }
+@@ -719,12 +856,13 @@ static int page_flipping_supported(int fd)
+ int main(int argc, char **argv)
+ {
+ 	int c;
+-	int encoders = 0, connectors = 0, crtcs = 0, framebuffers = 0;
++	int encoders = 0, connectors = 0, crtcs = 0, planes = 0, framebuffers = 0;
+ 	int test_vsync = 0;
+ 	char *modules[] = { "i915", "radeon", "nouveau", "vmwgfx", "omapdrm" };
+ 	char *modeset = NULL;
+-	int i, count = 0;
++	int i, count = 0, plane_count = 0;
+ 	struct connector con_args[2];
++	struct plane plane_args[2];
+ 	
+ 	opterr = 0;
+ 	while ((c = getopt(argc, argv, optstr)) != -1) {
+@@ -737,6 +875,7 @@ int main(int argc, char **argv)
+ 			break;
+ 		case 'p':
+ 			crtcs = 1;
++			planes = 1;
+ 			break;
+ 		case 'm':
+ 			modes = 1;
+@@ -760,6 +899,14 @@ int main(int argc, char **argv)
+ 				usage(argv[0]);
+ 			count++;				      
+ 			break;
++		case 'P':
++			if (sscanf(optarg, "%d:%dx%d",
++					&plane_args[plane_count].con_id,
++					&plane_args[plane_count].w,
++					&plane_args[plane_count].h) != 3)
++				usage(argv[0]);
++			plane_count++;
++			break;
+ 		default:
+ 			usage(argv[0]);
+ 			break;
+@@ -767,7 +914,7 @@ int main(int argc, char **argv)
+ 	}
+ 
+ 	if (argc == 1)
+-		encoders = connectors = crtcs = modes = framebuffers = 1;
++		encoders = connectors = crtcs = planes = modes = framebuffers = 1;
+ 
+ 	for (i = 0; i < ARRAY_SIZE(modules); i++) {
+ 		printf("trying to load module %s...", modules[i]);
+@@ -801,10 +948,11 @@ int main(int argc, char **argv)
+ 	dump_resource(encoders);
+ 	dump_resource(connectors);
+ 	dump_resource(crtcs);
++	dump_resource(planes);
+ 	dump_resource(framebuffers);
+ 
+ 	if (count > 0) {
+-		set_mode(con_args, count, test_vsync);
++		set_mode(con_args, count, plane_args, plane_count, test_vsync);
+ 		getchar();
+ 	}
+ 
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/914-modetest-fix-some-compiler-warnings.patch
+++ libdrm-2.4.32/debian/patches/914-modetest-fix-some-compiler-warnings.patch
@@ -0,0 +1,78 @@
+From d4f6c59a5e95ae879ee6559a763b00fe2b79337a Mon Sep 17 00:00:00 2001
+From: Paulo Zanoni <paulo.r.zanoni@intel.com>
+Date: Thu, 12 Jan 2012 12:06:53 -0200
+Subject: [PATCH 14/21] modetest: fix some compiler warnings
+MIME-Version: 1.0
+Content-Type: text/plain; charset=UTF-8
+Content-Transfer-Encoding: 8bit
+
+Use unsigned int instead of int:
+- modetest.c:89:1: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
+- modetest.c:97:1: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
+- modetest.c:117:1: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
+- modetest.c:772:16: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
+
+The 'fd' variable is global, we don't need to pass it as an argument:
+- modetest.c:698:40: warning: unused parameter ‘fd’ [-Wunused-parameter]
+
+We don't use the 'modeset' variable:
+- modetest.c:725:8: warning: variable ‘modeset’ set but not used [-Wunused-but-set-variable]
+
+Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
+---
+ tests/modetest/modetest.c |   11 +++++------
+ 1 files changed, 5 insertions(+), 6 deletions(-)
+
+diff --git a/tests/modetest/modetest.c b/tests/modetest/modetest.c
+index 223adc4..9c0ef4a 100644
+--- a/tests/modetest/modetest.c
++++ b/tests/modetest/modetest.c
+@@ -71,7 +71,7 @@ struct type_name {
+ 
+ #define type_name_fn(res) \
+ char * res##_str(int type) {			\
+-	int i;						\
++	unsigned int i;					\
+ 	for (i = 0; i < ARRAY_SIZE(res##_names); i++) { \
+ 		if (res##_names[i].type == type)	\
+ 			return res##_names[i].name;	\
+@@ -995,7 +995,7 @@ void usage(char *name)
+ 
+ #define dump_resource(res) if (res) dump_##res()
+ 
+-static int page_flipping_supported(int fd)
++static int page_flipping_supported(void)
+ {
+ 	/*FIXME: generic ioctl needed? */
+ 	return 1;
+@@ -1022,8 +1022,8 @@ int main(int argc, char **argv)
+ 	int encoders = 0, connectors = 0, crtcs = 0, planes = 0, framebuffers = 0;
+ 	int test_vsync = 0;
+ 	char *modules[] = { "i915", "radeon", "nouveau", "vmwgfx", "omapdrm" };
+-	char *modeset = NULL;
+-	int i, count = 0, plane_count = 0;
++	unsigned int i;
++	int count = 0, plane_count = 0;
+ 	struct connector con_args[2];
+ 	struct plane plane_args[2] = {0};
+ 	
+@@ -1050,7 +1050,6 @@ int main(int argc, char **argv)
+ 			test_vsync = 1;
+ 			break;
+ 		case 's':
+-			modeset = strdup(optarg);
+ 			con_args[count].crtc = -1;
+ 			if (sscanf(optarg, "%d:%64s",
+ 				   &con_args[count].id,
+@@ -1096,7 +1095,7 @@ int main(int argc, char **argv)
+ 		}
+ 	}
+ 
+-	if (test_vsync && !page_flipping_supported(fd)) {
++	if (test_vsync && !page_flipping_supported()) {
+ 		fprintf(stderr, "page flipping not supported by drm.\n");
+ 		return -1;
+ 	}
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/915-modetest-fix-memory-leak.patch
+++ libdrm-2.4.32/debian/patches/915-modetest-fix-memory-leak.patch
@@ -0,0 +1,55 @@
+From 64d0a81ecc467130ae825d5f13c215ad50b6cd39 Mon Sep 17 00:00:00 2001
+From: Paulo Zanoni <paulo.r.zanoni@intel.com>
+Date: Thu, 12 Jan 2012 12:15:26 -0200
+Subject: [PATCH 15/21] modetest: fix memory leak
+
+Don't "continue" without freeing the connector.
+
+192 bytes in 6 blocks are indirectly lost in loss record 6 of 12
+   at 0x4C2779D: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
+   by 0x4E30DD8: drmMalloc (xf86drm.c:147)
+   by 0x4E35024: drmAllocCpy (xf86drmMode.c:73)
+   by 0x4E35D69: drmModeGetConnector (xf86drmMode.c:507)
+   by 0x402F22: dump_connectors (modetest.c:181)
+   by 0x40261B: main (modetest.c:801)
+
+Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
+---
+ tests/modetest/modetest.c |   21 ++++++++++-----------
+ 1 files changed, 10 insertions(+), 11 deletions(-)
+
+diff --git a/tests/modetest/modetest.c b/tests/modetest/modetest.c
+index 9c0ef4a..1e55a01 100644
+--- a/tests/modetest/modetest.c
++++ b/tests/modetest/modetest.c
+@@ -199,17 +199,16 @@ void dump_connectors(void)
+ 			printf("%s%d", j > 0 ? ", " : "", connector->encoders[j]);
+ 		printf("\n");
+ 
+-		if (!connector->count_modes)
+-			continue;
+-
+-		printf("  modes:\n");
+-		printf("  name refresh (Hz) hdisp hss hse htot vdisp "
+-		       "vss vse vtot)\n");
+-		for (j = 0; j < connector->count_modes; j++)
+-			dump_mode(&connector->modes[j]);
+-
+-		printf("  props:\n");
+-		dump_props(connector);
++		if (connector->count_modes) {
++			printf("  modes:\n");
++			printf("  name refresh (Hz) hdisp hss hse htot vdisp "
++			       "vss vse vtot)\n");
++			for (j = 0; j < connector->count_modes; j++)
++				dump_mode(&connector->modes[j]);
++
++			printf("  props:\n");
++			dump_props(connector);
++		}
+ 
+ 		drmModeFreeConnector(connector);
+ 	}
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/906-omap-fix-license-header.patch
+++ libdrm-2.4.32/debian/patches/906-omap-fix-license-header.patch
@@ -0,0 +1,64 @@
+From 06eaf09469f2234bf1ca9790dad2ba391ccceb5a Mon Sep 17 00:00:00 2001
+From: Rob Clark <rob@ti.com>
+Date: Tue, 3 Apr 2012 16:44:43 -0500
+Subject: [PATCH 06/21] omap: fix license header
+
+In syncing with the corresponding kernel header, the wrong license
+header was inadvertantly copied over.  The intention was for the
+userspace headers to have a MIT license following the convention
+of the rest of libdrm, xorg, etc.
+
+Signed-off-by: Rob Clark <rob@ti.com>
+---
+ omap/omap_drm.h |   33 +++++++++++++++++++++------------
+ 1 files changed, 21 insertions(+), 12 deletions(-)
+
+diff --git a/omap/omap_drm.h b/omap/omap_drm.h
+index f277cea..f677cd8 100644
+--- a/omap/omap_drm.h
++++ b/omap/omap_drm.h
+@@ -1,20 +1,29 @@
++/* -*- mode: C; c-file-style: "k&r"; tab-width 4; indent-tabs-mode: t; -*- */
++
+ /*
+- * include/drm/omap_drm.h
++ * Copyright (C) 2011 Texas Instruments, Inc
+  *
+- * Copyright (C) 2011 Texas Instruments
+- * Author: Rob Clark <rob@ti.com>
++ * Permission is hereby granted, free of charge, to any person obtaining a
++ * copy of this software and associated documentation files (the "Software"),
++ * to deal in the Software without restriction, including without limitation
++ * the rights to use, copy, modify, merge, publish, distribute, sublicense,
++ * and/or sell copies of the Software, and to permit persons to whom the
++ * Software is furnished to do so, subject to the following conditions:
+  *
+- * This program is free software; you can redistribute it and/or modify it
+- * under the terms of the GNU General Public License version 2 as published by
+- * the Free Software Foundation.
++ * The above copyright notice and this permission notice (including the next
++ * paragraph) shall be included in all copies or substantial portions of the
++ * Software.
+  *
+- * This program is distributed in the hope that it will be useful, but WITHOUT
+- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
+- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
+- * more details.
++ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
++ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
++ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
++ * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
++ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
++ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
++ * SOFTWARE.
+  *
+- * You should have received a copy of the GNU General Public License along with
+- * this program.  If not, see <http://www.gnu.org/licenses/>.
++ * Authors:
++ *    Rob Clark <rob@ti.com>
+  */
+ 
+ #ifndef __OMAP_DRM_H__
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/921-modetest-support-plane-properties.patch
+++ libdrm-2.4.32/debian/patches/921-modetest-support-plane-properties.patch
@@ -0,0 +1,44 @@
+From a6c82f816dadaf0e4d0c628857977665b21a2481 Mon Sep 17 00:00:00 2001
+From: Rob Clark <rob@ti.com>
+Date: Fri, 30 Mar 2012 14:57:33 -0500
+Subject: [PATCH 21/21] modetest: support plane properties
+
+---
+ tests/modetest/modetest.c |   14 ++++++++++++++
+ 1 files changed, 14 insertions(+), 0 deletions(-)
+
+diff --git a/tests/modetest/modetest.c b/tests/modetest/modetest.c
+index efb375d..b7b0eb1 100644
+--- a/tests/modetest/modetest.c
++++ b/tests/modetest/modetest.c
+@@ -366,6 +366,7 @@ void dump_framebuffers(void)
+ 
+ static void dump_planes(void)
+ {
++	drmModeObjectPropertiesPtr props;
+ 	drmModePlaneRes *plane_resources;
+ 	drmModePlane *ovr;
+ 	int i, j;
+@@ -400,6 +401,19 @@ static void dump_planes(void)
+ 			printf(" %4.4s", (char *)&ovr->formats[j]);
+ 		printf("\n");
+ 
++		printf("  props:\n");
++		props = drmModeObjectGetProperties(fd, ovr->plane_id,
++						   DRM_MODE_OBJECT_PLANE);
++		if (props) {
++			for (j = 0; j < props->count_props; j++)
++				dump_prop(props->props[j],
++					  props->prop_values[j]);
++			drmModeFreeObjectProperties(props);
++		} else {
++			printf("\tcould not get plane properties: %s\n",
++			       strerror(errno));
++		}
++
+ 		drmModeFreePlane(ovr);
+ 	}
+ 	printf("\n");
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/901-intel-Add-some-PCI-IDs-for-Haswell.patch
+++ libdrm-2.4.32/debian/patches/901-intel-Add-some-PCI-IDs-for-Haswell.patch
@@ -0,0 +1,60 @@
+From 617213357e94299a5e9a3cb1342de55de949d156 Mon Sep 17 00:00:00 2001
+From: Kenneth Graunke <kenneth@whitecape.org>
+Date: Mon, 19 Mar 2012 13:55:19 -0700
+Subject: [PATCH 01/21] intel: Add some PCI IDs for Haswell.
+
+Signed-off-by: Kenneth Graunke <kenneth@whitecape.org>
+Reviewed-by: Eugeni Dodonov <eugeni.dodonov@intel.com>
+---
+ intel/intel_chipset.h |   28 +++++++++++++++++++++++-----
+ 1 files changed, 23 insertions(+), 5 deletions(-)
+
+diff --git a/intel/intel_chipset.h b/intel/intel_chipset.h
+index e3a30fc..435d01a 100644
+--- a/intel/intel_chipset.h
++++ b/intel/intel_chipset.h
+@@ -45,6 +45,12 @@
+ #define PCI_CHIP_IVYBRIDGE_M_GT2	0x0166
+ #define PCI_CHIP_IVYBRIDGE_S		0x015a /* server */
+ 
++#define PCI_CHIP_HASWELL_GT1            0x0402 /* Desktop */
++#define PCI_CHIP_HASWELL_GT2            0x0412
++#define PCI_CHIP_HASWELL_M_GT1          0x0406 /* Mobile */
++#define PCI_CHIP_HASWELL_M_GT2          0x0416
++#define PCI_CHIP_HASWELL_M_ULT_GT2      0x0A16 /* Mobile ULT */
++
+ #define IS_830(dev) (dev == 0x3577)
+ #define IS_845(dev) (dev == 0x2562)
+ #define IS_85X(dev) (dev == 0x3582)
+@@ -115,11 +121,23 @@
+ 			 dev == PCI_CHIP_SANDYBRIDGE_M_GT2_PLUS || \
+ 			 dev == PCI_CHIP_SANDYBRIDGE_S)
+ 
+-#define IS_GEN7(dev)	(dev == PCI_CHIP_IVYBRIDGE_GT1 || \
+-			 dev == PCI_CHIP_IVYBRIDGE_GT2 || \
+-			 dev == PCI_CHIP_IVYBRIDGE_M_GT1 || \
+-			 dev == PCI_CHIP_IVYBRIDGE_M_GT2 || \
+-			 dev == PCI_CHIP_IVYBRIDGE_S)
++#define IS_GEN7(devid)          (IS_IVYBRIDGE(devid) || \
++                                 IS_HASWELL(devid))
++
++#define IS_IVYBRIDGE(dev)	(dev == PCI_CHIP_IVYBRIDGE_GT1 || \
++				 dev == PCI_CHIP_IVYBRIDGE_GT2 || \
++				 dev == PCI_CHIP_IVYBRIDGE_M_GT1 || \
++				 dev == PCI_CHIP_IVYBRIDGE_M_GT2 || \
++				 dev == PCI_CHIP_IVYBRIDGE_S)
++
++#define IS_HSW_GT1(devid)       (devid == PCI_CHIP_HASWELL_GT1 || \
++                                 devid == PCI_CHIP_HASWELL_M_GT1)
++#define IS_HSW_GT2(devid)       (devid == PCI_CHIP_HASWELL_GT2 || \
++                                 devid == PCI_CHIP_HASWELL_M_GT2 || \
++                                 devid == PCI_CHIP_HASWELL_M_ULT_GT2)
++
++#define IS_HASWELL(devid)       (IS_HSW_GT1(devid) || \
++                                 IS_HSW_GT2(devid))
+ 
+ #define IS_G4X(dev) (dev == 0x2E02 || \
+                      dev == 0x2E12 || \
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/01_default_perms.diff
+++ libdrm-2.4.32/debian/patches/01_default_perms.diff
@@ -0,0 +1,13 @@
+Index: libdrm/xf86drm.h
+===================================================================
+--- libdrm.orig/xf86drm.h	2012-03-06 10:32:24.409090383 +0100
++++ libdrm/xf86drm.h	2012-03-23 14:31:57.338206565 +0100
+@@ -74,7 +74,7 @@
+ /* Default /dev/dri directory permissions 0755 */
+ #define DRM_DEV_DIRMODE	 	\
+ 	(S_IRUSR|S_IWUSR|S_IXUSR|S_IRGRP|S_IXGRP|S_IROTH|S_IXOTH)
+-#define DRM_DEV_MODE	 (S_IRUSR|S_IWUSR|S_IRGRP|S_IWGRP)
++#define DRM_DEV_MODE	 (S_IRUSR|S_IWUSR|S_IRGRP|S_IWGRP|S_IROTH|S_IWOTH)
+ 
+ #define DRM_DIR_NAME  "/dev/dri"
+ #define DRM_DEV_NAME  "%s/card%d"
--- libdrm-2.4.32.orig/debian/patches/905-intel-decode-decode-MI_WAIT_FOR_EVENT.patch
+++ libdrm-2.4.32/debian/patches/905-intel-decode-decode-MI_WAIT_FOR_EVENT.patch
@@ -0,0 +1,132 @@
+From 437042568301269bb78df2def61436c1cd97411c Mon Sep 17 00:00:00 2001
+From: Daniel Vetter <daniel.vetter@ffwll.ch>
+Date: Mon, 2 Apr 2012 13:08:09 +0200
+Subject: [PATCH 05/21] intel/decode: decode MI_WAIT_FOR_EVENT
+
+... and add support to decode MI instructions with functions.
+
+Reviewed-by: Eugeni Dodonov <eugeni.dodonov@intel.com>
+Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+---
+ intel/intel_decode.c |   77 ++++++++++++++++++++++++++++++++++++++++++++++++-
+ 1 files changed, 75 insertions(+), 2 deletions(-)
+
+diff --git a/intel/intel_decode.c b/intel/intel_decode.c
+index df9b704..bf23706 100644
+--- a/intel/intel_decode.c
++++ b/intel/intel_decode.c
+@@ -139,6 +139,74 @@ instr_out(struct drm_intel_decode *ctx, unsigned int index,
+ }
+ 
+ static int
++decode_MI_WAIT_FOR_EVENT(struct drm_intel_decode *ctx)
++{
++	const char *cc_wait;
++	int cc_shift = 0;
++	uint32_t data = ctx->data[0];
++
++	if (ctx->gen <= 5)
++		cc_shift = 9;
++	else
++		cc_shift = 16;
++
++	switch ((data >> cc_shift) & 0x1f) {
++	case 1:
++		cc_wait = ", cc wait 1";
++		break;
++	case 2:
++		cc_wait = ", cc wait 2";
++		break;
++	case 3:
++		cc_wait = ", cc wait 3";
++		break;
++	case 4:
++		cc_wait = ", cc wait 4";
++		break;
++	case 5:
++		cc_wait = ", cc wait 4";
++		break;
++	default:
++		cc_wait = "";
++		break;
++	}
++
++	if (ctx->gen <= 5) {
++		instr_out(ctx, 0, "MI_WAIT_FOR_EVENT%s%s%s%s%s%s%s%s%s%s%s%s%s%s\n",
++			  data & (1<<18)? ", pipe B start vblank wait": "",
++			  data & (1<<17)? ", pipe A start vblank wait": "",
++			  data & (1<<16)? ", overlay flip pending wait": "",
++			  data & (1<<14)? ", pipe B hblank wait": "",
++			  data & (1<<13)? ", pipe A hblank wait": "",
++			  cc_wait,
++			  data & (1<<8)? ", plane C pending flip wait": "",
++			  data & (1<<7)? ", pipe B vblank wait": "",
++			  data & (1<<6)? ", plane B pending flip wait": "",
++			  data & (1<<5)? ", pipe B scan line wait": "",
++			  data & (1<<4)? ", fbc idle wait": "",
++			  data & (1<<3)? ", pipe A vblank wait": "",
++			  data & (1<<2)? ", plane A pending flip wait": "",
++			  data & (1<<1)? ", plane A scan line wait": "");
++	} else {
++		instr_out(ctx, 0, "MI_WAIT_FOR_EVENT%s%s%s%s%s%s%s%s%s%s%s%s\n",
++			  data & (1<<20)? ", sprite C pending flip wait": "", /* ivb */
++			  cc_wait,
++			  data & (1<<13)? ", pipe B hblank wait": "",
++			  data & (1<<11)? ", pipe B vblank wait": "",
++			  data & (1<<10)? ", sprite B pending flip wait": "",
++			  data & (1<<9)? ", plane B pending flip wait": "",
++			  data & (1<<8)? ", plane B scan line wait": "",
++			  data & (1<<5)? ", pipe A hblank wait": "",
++			  data & (1<<3)? ", pipe A vblank wait": "",
++			  data & (1<<2)? ", sprite A pending flip wait": "",
++			  data & (1<<1)? ", plane A pending flip wait": "",
++			  data & (1<<0)? ", plane A scan line wait": "");
++	}
++
++	return 1;
++}
++
++static int
+ decode_mi(struct drm_intel_decode *ctx)
+ {
+ 	unsigned int opcode, len = -1;
+@@ -151,6 +219,7 @@ decode_mi(struct drm_intel_decode *ctx)
+ 		unsigned int min_len;
+ 		unsigned int max_len;
+ 		const char *name;
++		int (*func)(struct drm_intel_decode *ctx);
+ 	} opcodes_mi[] = {
+ 		{ 0x08, 0, 1, 1, "MI_ARB_ON_OFF" },
+ 		{ 0x0a, 0, 1, 1, "MI_BATCH_BUFFER_END" },
+@@ -169,11 +238,11 @@ decode_mi(struct drm_intel_decode *ctx)
+ 		{ 0x21, 0x3f, 3, 4, "MI_STORE_DATA_INDEX" },
+ 		{ 0x24, 0x3f, 3, 3, "MI_STORE_REGISTER_MEM" },
+ 		{ 0x02, 0, 1, 1, "MI_USER_INTERRUPT" },
+-		{ 0x03, 0, 1, 1, "MI_WAIT_FOR_EVENT" },
++		{ 0x03, 0, 1, 1, "MI_WAIT_FOR_EVENT", decode_MI_WAIT_FOR_EVENT },
+ 		{ 0x16, 0x7f, 3, 3, "MI_SEMAPHORE_MBOX" },
+ 		{ 0x26, 0x1f, 3, 4, "MI_FLUSH_DW" },
+ 		{ 0x0b, 0, 1, 1, "MI_SUSPEND_FLUSH"},
+-	};
++	}, *opcode_mi = NULL;
+ 
+ 	/* check instruction length */
+ 	for (opcode = 0; opcode < sizeof(opcodes_mi) / sizeof(opcodes_mi[0]);
+@@ -192,10 +261,14 @@ decode_mi(struct drm_intel_decode *ctx)
+ 						opcodes_mi[opcode].max_len);
+ 				}
+ 			}
++			opcode_mi = &opcodes_mi[opcode];
+ 			break;
+ 		}
+ 	}
+ 
++	if (opcode_mi && opcode_mi->func)
++		return opcode_mi->func(ctx);
++
+ 	switch ((data[0] & 0x1f800000) >> 23) {
+ 	case 0x0a:
+ 		instr_out(ctx, 0, "MI_BATCH_BUFFER_END\n");
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/918-modetest-print-CRTC-properties.patch
+++ libdrm-2.4.32/debian/patches/918-modetest-print-CRTC-properties.patch
@@ -0,0 +1,47 @@
+From b5c60192c9133a4cb5a01cee80b040775c494a61 Mon Sep 17 00:00:00 2001
+From: Paulo Zanoni <paulo.r.zanoni@intel.com>
+Date: Thu, 12 Jan 2012 14:45:25 -0200
+Subject: [PATCH 18/21] modetest: print CRTC properties
+
+Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
+---
+ tests/modetest/modetest.c |   15 +++++++++++++++
+ 1 files changed, 15 insertions(+), 0 deletions(-)
+
+diff --git a/tests/modetest/modetest.c b/tests/modetest/modetest.c
+index 7dc6e75..d411dcb 100644
+--- a/tests/modetest/modetest.c
++++ b/tests/modetest/modetest.c
+@@ -292,7 +292,9 @@ void dump_connectors(void)
+ void dump_crtcs(void)
+ {
+ 	drmModeCrtc *crtc;
++	drmModeObjectPropertiesPtr props;
+ 	int i;
++	uint32_t j;
+ 
+ 	printf("CRTCs:\n");
+ 	printf("id\tfb\tpos\tsize\n");
+@@ -311,6 +313,19 @@ void dump_crtcs(void)
+ 		       crtc->width, crtc->height);
+ 		dump_mode(&crtc->mode);
+ 
++		printf("  props:\n");
++		props = drmModeObjectGetProperties(fd, crtc->crtc_id,
++						   DRM_MODE_OBJECT_CRTC);
++		if (props) {
++			for (j = 0; j < props->count_props; j++)
++				dump_prop(props->props[j],
++					  props->prop_values[j]);
++			drmModeFreeObjectProperties(props);
++		} else {
++			printf("\tcould not get crtc properties: %s\n",
++			       strerror(errno));
++		}
++
+ 		drmModeFreeCrtc(crtc);
+ 	}
+ 	printf("\n");
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/902-omap-add-omapdrm-support.patch
+++ libdrm-2.4.32/debian/patches/902-omap-add-omapdrm-support.patch
@@ -0,0 +1,662 @@
+From ef1b958cc831df3d33a366d1db2db2c88187229e Mon Sep 17 00:00:00 2001
+From: Rob Clark <rob@ti.com>
+Date: Wed, 28 Mar 2012 14:39:43 -0500
+Subject: [PATCH 02/21] omap: add omapdrm support
+
+This adds libdrm_omap helper layer (as used by xf86-video-omap,
+omapdrmtest, etc).
+
+Signed-off-by: Rob Clark <rob@ti.com>
+Reviewed-by: Alex Deucher <alexander.deucher@amd.com>
+[danvet: pushed for Rob, he doesn't yet have commit access.]
+Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
+---
+ Makefile.am               |    6 +-
+ configure.ac              |   12 ++
+ omap/Makefile.am          |   22 +++
+ omap/libdrm_omap.pc.in    |   11 ++
+ omap/omap_drm.c           |  310 +++++++++++++++++++++++++++++++++++++++++++++
+ omap/omap_drm.h           |  125 ++++++++++++++++++
+ omap/omap_drmif.h         |   61 +++++++++
+ tests/modetest/modetest.c |    2 +-
+ 8 files changed, 547 insertions(+), 2 deletions(-)
+ create mode 100644 omap/Makefile.am
+ create mode 100644 omap/libdrm_omap.pc.in
+ create mode 100644 omap/omap_drm.c
+ create mode 100644 omap/omap_drm.h
+ create mode 100644 omap/omap_drmif.h
+
+diff --git a/Makefile.am b/Makefile.am
+index a4d07f4..4f625a1 100644
+--- a/Makefile.am
++++ b/Makefile.am
+@@ -41,7 +41,11 @@ if HAVE_RADEON
+ RADEON_SUBDIR = radeon
+ endif
+ 
+-SUBDIRS = . $(LIBKMS_SUBDIR) $(INTEL_SUBDIR) $(NOUVEAU_SUBDIR) $(RADEON_SUBDIR) tests include
++if HAVE_OMAP
++OMAP_SUBDIR = omap
++endif
++
++SUBDIRS = . $(LIBKMS_SUBDIR) $(INTEL_SUBDIR) $(NOUVEAU_SUBDIR) $(RADEON_SUBDIR) $(OMAP_SUBDIR) tests include
+ 
+ libdrm_la_LTLIBRARIES = libdrm.la
+ libdrm_ladir = $(libdir)
+diff --git a/configure.ac b/configure.ac
+index ff2c840..921dcbd 100644
+--- a/configure.ac
++++ b/configure.ac
+@@ -83,6 +83,10 @@ AC_ARG_ENABLE(nouveau-experimental-api,
+ 	      [Enable support for nouveau's experimental API (default: disabled)]),
+ 	      [NOUVEAU=$enableval], [NOUVEAU=no])
+ 
++AC_ARG_ENABLE(omap-experimental-api,
++	      AS_HELP_STRING([--enable-omap-experimental-api],
++	      [Enable support for OMAP's experimental API (default: disabled)]),
++	      [OMAP=$enableval], [OMAP=no])
+ 
+ dnl ===========================================================================
+ dnl check compiler flags
+@@ -182,6 +186,11 @@ if test "x$NOUVEAU" = xyes; then
+ 	AC_DEFINE(HAVE_NOUVEAU, 1, [Have nouveau (nvidia) support])
+ fi
+ 
++AM_CONDITIONAL(HAVE_OMAP, [test "x$OMAP" = xyes])
++if test "x$OMAP" = xyes; then
++	AC_DEFINE(HAVE_OMAP, 1, [Have OMAP support])
++fi
++
+ PKG_CHECK_MODULES(CAIRO, cairo, [HAVE_CAIRO=yes], [HAVE_CAIRO=no])
+ if test "x$HAVE_CAIRO" = xyes; then
+ 	AC_DEFINE(HAVE_CAIRO, 1, [Have cairo support])
+@@ -291,6 +300,8 @@ AC_CONFIG_FILES([
+ 	radeon/libdrm_radeon.pc
+ 	nouveau/Makefile
+ 	nouveau/libdrm_nouveau.pc
++	omap/Makefile
++	omap/libdrm_omap.pc
+ 	tests/Makefile
+ 	tests/modeprint/Makefile
+ 	tests/modetest/Makefile
+@@ -310,4 +321,5 @@ echo "  Intel API      $INTEL"
+ echo "  vmwgfx API     $VMWGFX"
+ echo "  Radeon API     $RADEON"
+ echo "  Nouveau API    $NOUVEAU"
++echo "  OMAP API       $OMAP"
+ echo ""
+diff --git a/omap/Makefile.am b/omap/Makefile.am
+new file mode 100644
+index 0000000..c77520b
+--- /dev/null
++++ b/omap/Makefile.am
+@@ -0,0 +1,22 @@
++AM_CFLAGS = \
++	$(WARN_CFLAGS) \
++	-I$(top_srcdir) \
++	-I$(top_srcdir)/omap \
++	$(PTHREADSTUBS_CFLAGS) \
++	-I$(top_srcdir)/include/drm
++
++libdrm_omap_la_LTLIBRARIES = libdrm_omap.la
++libdrm_omap_ladir = $(libdir)
++libdrm_omap_la_LDFLAGS = -version-number 1:0:0 -no-undefined
++libdrm_omap_la_LIBADD = ../libdrm.la @PTHREADSTUBS_LIBS@
++
++libdrm_omap_la_SOURCES = omap_drm.c
++
++libdrm_omapcommonincludedir = ${includedir}/omap
++libdrm_omapcommoninclude_HEADERS = omap_drm.h
++
++libdrm_omapincludedir = ${includedir}/libdrm
++libdrm_omapinclude_HEADERS = omap_drmif.h
++
++pkgconfigdir = @pkgconfigdir@
++pkgconfig_DATA = libdrm_omap.pc
+diff --git a/omap/libdrm_omap.pc.in b/omap/libdrm_omap.pc.in
+new file mode 100644
+index 0000000..024533b
+--- /dev/null
++++ b/omap/libdrm_omap.pc.in
+@@ -0,0 +1,11 @@
++prefix=@prefix@
++exec_prefix=@exec_prefix@
++libdir=@libdir@
++includedir=@includedir@
++
++Name: libdrm_omap
++Description: Userspace interface to omap kernel DRM services
++Version: 0.6
++Libs: -L${libdir} -ldrm_omap
++Cflags: -I${includedir} -I${includedir}/libdrm -I${includedir}/omap
++Requires.private: libdrm
+diff --git a/omap/omap_drm.c b/omap/omap_drm.c
+new file mode 100644
+index 0000000..e611806
+--- /dev/null
++++ b/omap/omap_drm.c
+@@ -0,0 +1,310 @@
++/* -*- mode: C; c-file-style: "k&r"; tab-width 4; indent-tabs-mode: t; -*- */
++
++/*
++ * Copyright (C) 2011 Texas Instruments, Inc
++ *
++ * Permission is hereby granted, free of charge, to any person obtaining a
++ * copy of this software and associated documentation files (the "Software"),
++ * to deal in the Software without restriction, including without limitation
++ * the rights to use, copy, modify, merge, publish, distribute, sublicense,
++ * and/or sell copies of the Software, and to permit persons to whom the
++ * Software is furnished to do so, subject to the following conditions:
++ *
++ * The above copyright notice and this permission notice (including the next
++ * paragraph) shall be included in all copies or substantial portions of the
++ * Software.
++ *
++ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
++ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
++ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
++ * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
++ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
++ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
++ * SOFTWARE.
++ *
++ * Authors:
++ *    Rob Clark <rob@ti.com>
++ */
++
++#ifdef HAVE_CONFIG_H
++#include "config.h"
++#endif
++
++#include <stdlib.h>
++#include <linux/stddef.h>
++#include <errno.h>
++#include <sys/mman.h>
++
++#include <xf86drm.h>
++
++#include "omap_drm.h"
++#include "omap_drmif.h"
++
++#define __round_mask(x, y) ((__typeof__(x))((y)-1))
++#define round_up(x, y) ((((x)-1) | __round_mask(x, y))+1)
++#define PAGE_SIZE 4096
++
++struct omap_device {
++	int fd;
++};
++
++/* a GEM buffer object allocated from the DRM device */
++struct omap_bo {
++	struct omap_device	*dev;
++	void		*map;		/* userspace mmap'ing (if there is one) */
++	uint32_t	size;
++	uint32_t	handle;
++	uint32_t	name;		/* flink global handle (DRI2 name) */
++	uint64_t	offset;		/* offset to mmap() */
++};
++
++struct omap_device * omap_device_new(int fd)
++{
++	struct omap_device *dev = calloc(sizeof(*dev), 1);
++	if (!dev)
++		return NULL;
++	dev->fd = fd;
++	return dev;
++}
++
++void omap_device_del(struct omap_device *dev)
++{
++	free(dev);
++}
++
++int omap_get_param(struct omap_device *dev, uint64_t param, uint64_t *value)
++{
++	struct drm_omap_param req = {
++			.param = param,
++	};
++	int ret;
++
++	ret = drmCommandWriteRead(dev->fd, DRM_OMAP_GET_PARAM, &req, sizeof(req));
++	if (ret) {
++		return ret;
++	}
++
++	*value = req.value;
++
++	return 0;
++}
++
++int omap_set_param(struct omap_device *dev, uint64_t param, uint64_t value)
++{
++	struct drm_omap_param req = {
++			.param = param,
++			.value = value,
++	};
++	return drmCommandWrite(dev->fd, DRM_OMAP_SET_PARAM, &req, sizeof(req));
++}
++
++/* allocate a new buffer object */
++static struct omap_bo * omap_bo_new_impl(struct omap_device *dev,
++		union omap_gem_size size, uint32_t flags)
++{
++	struct omap_bo *bo;
++	struct drm_omap_gem_new req = {
++			.size = size,
++			.flags = flags,
++	};
++
++	if (size.bytes == 0) {
++		goto fail;
++	}
++
++	bo = calloc(sizeof(*bo), 1);
++	if (!bo) {
++		goto fail;
++	}
++
++	bo->dev = dev;
++
++	if (flags & OMAP_BO_TILED) {
++		bo->size = round_up(size.tiled.width, PAGE_SIZE) * size.tiled.height;
++	} else {
++		bo->size = size.bytes;
++	}
++
++	if (drmCommandWriteRead(dev->fd, DRM_OMAP_GEM_NEW, &req, sizeof(req))) {
++		goto fail;
++	}
++
++	bo->handle = req.handle;
++
++	return bo;
++
++fail:
++	free(bo);
++	return NULL;
++}
++
++
++/* allocate a new (un-tiled) buffer object */
++struct omap_bo * omap_bo_new(struct omap_device *dev,
++		uint32_t size, uint32_t flags)
++{
++	union omap_gem_size gsize = {
++			.bytes = size,
++	};
++	if (flags & OMAP_BO_TILED) {
++		return NULL;
++	}
++	return omap_bo_new_impl(dev, gsize, flags);
++}
++
++/* allocate a new buffer object */
++struct omap_bo * omap_bo_new_tiled(struct omap_device *dev,
++		uint32_t width, uint32_t height, uint32_t flags)
++{
++	union omap_gem_size gsize = {
++			.tiled = {
++				.width = width,
++				.height = height,
++			},
++	};
++	if (!(flags & OMAP_BO_TILED)) {
++		return NULL;
++	}
++	return omap_bo_new_impl(dev, gsize, flags);
++}
++
++/* get buffer info */
++static int get_buffer_info(struct omap_bo *bo)
++{
++	struct drm_omap_gem_info req = {
++			.handle = bo->handle,
++	};
++	int ret = drmCommandWriteRead(bo->dev->fd, DRM_OMAP_GEM_INFO,
++			&req, sizeof(req));
++	if (ret) {
++		return ret;
++	}
++
++	/* really all we need for now is mmap offset */
++	bo->offset = req.offset;
++	bo->size = req.size;
++
++	return 0;
++}
++
++/* import a buffer object from DRI2 name */
++struct omap_bo * omap_bo_from_name(struct omap_device *dev, uint32_t name)
++{
++	struct omap_bo *bo;
++	struct drm_gem_open req = {
++			.name = name,
++	};
++
++	bo = calloc(sizeof(*bo), 1);
++	if (!bo) {
++		goto fail;
++	}
++
++	if (drmIoctl(dev->fd, DRM_IOCTL_GEM_OPEN, &req)) {
++		goto fail;
++	}
++
++	bo->dev = dev;
++	bo->name = name;
++	bo->handle = req.handle;
++
++	return bo;
++
++fail:
++	free(bo);
++	return NULL;
++}
++
++/* destroy a buffer object */
++void omap_bo_del(struct omap_bo *bo)
++{
++	if (!bo) {
++		return;
++	}
++
++	if (bo->map) {
++		munmap(bo->map, bo->size);
++	}
++
++	if (bo->handle) {
++		struct drm_gem_close req = {
++				.handle = bo->handle,
++		};
++
++		drmIoctl(bo->dev->fd, DRM_IOCTL_GEM_CLOSE, &req);
++	}
++
++	free(bo);
++}
++
++/* get the global flink/DRI2 buffer name */
++int omap_bo_get_name(struct omap_bo *bo, uint32_t *name)
++{
++	if (!bo->name) {
++		struct drm_gem_flink req = {
++				.handle = bo->handle,
++		};
++		int ret;
++
++		ret = drmIoctl(bo->dev->fd, DRM_IOCTL_GEM_FLINK, &req);
++		if (ret) {
++			return ret;
++		}
++
++		bo->name = req.name;
++	}
++
++	*name = bo->name;
++
++	return 0;
++}
++
++uint32_t omap_bo_handle(struct omap_bo *bo)
++{
++	return bo->handle;
++}
++
++uint32_t omap_bo_size(struct omap_bo *bo)
++{
++	if (!bo->size) {
++		get_buffer_info(bo);
++	}
++	return bo->size;
++}
++
++void * omap_bo_map(struct omap_bo *bo)
++{
++	if (!bo->map) {
++		if (!bo->offset) {
++			get_buffer_info(bo);
++		}
++
++		bo->map = mmap(0, bo->size, PROT_READ | PROT_WRITE,
++				MAP_SHARED, bo->dev->fd, bo->offset);
++		if (bo->map == MAP_FAILED) {
++			bo->map = NULL;
++		}
++	}
++	return bo->map;
++}
++
++int omap_bo_cpu_prep(struct omap_bo *bo, enum omap_gem_op op)
++{
++	struct drm_omap_gem_cpu_prep req = {
++			.handle = bo->handle,
++			.op = op,
++	};
++	return drmCommandWrite(bo->dev->fd,
++			DRM_OMAP_GEM_CPU_PREP, &req, sizeof(req));
++}
++
++int omap_bo_cpu_fini(struct omap_bo *bo, enum omap_gem_op op)
++{
++	struct drm_omap_gem_cpu_fini req = {
++			.handle = bo->handle,
++			.op = op,
++			.nregions = 0,
++	};
++	return drmCommandWrite(bo->dev->fd,
++			DRM_OMAP_GEM_CPU_FINI, &req, sizeof(req));
++}
+diff --git a/omap/omap_drm.h b/omap/omap_drm.h
+new file mode 100644
+index 0000000..f277cea
+--- /dev/null
++++ b/omap/omap_drm.h
+@@ -0,0 +1,125 @@
++/*
++ * include/drm/omap_drm.h
++ *
++ * Copyright (C) 2011 Texas Instruments
++ * Author: Rob Clark <rob@ti.com>
++ *
++ * This program is free software; you can redistribute it and/or modify it
++ * under the terms of the GNU General Public License version 2 as published by
++ * the Free Software Foundation.
++ *
++ * This program is distributed in the hope that it will be useful, but WITHOUT
++ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
++ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
++ * more details.
++ *
++ * You should have received a copy of the GNU General Public License along with
++ * this program.  If not, see <http://www.gnu.org/licenses/>.
++ */
++
++#ifndef __OMAP_DRM_H__
++#define __OMAP_DRM_H__
++
++#include "drm.h"
++
++/* Please note that modifications to all structs defined here are
++ * subject to backwards-compatibility constraints.
++ */
++
++#define OMAP_PARAM_CHIPSET_ID	1	/* ie. 0x3430, 0x4430, etc */
++
++struct drm_omap_param {
++	uint64_t param;			/* in */
++	uint64_t value;			/* in (set_param), out (get_param) */
++};
++
++struct drm_omap_get_base {
++	char plugin_name[64];		/* in */
++	uint32_t ioctl_base;		/* out */
++	uint32_t __pad;
++};
++
++#define OMAP_BO_SCANOUT		0x00000001	/* scanout capable (phys contiguous) */
++#define OMAP_BO_CACHE_MASK	0x00000006	/* cache type mask, see cache modes */
++#define OMAP_BO_TILED_MASK	0x00000f00	/* tiled mapping mask, see tiled modes */
++
++/* cache modes */
++#define OMAP_BO_CACHED		0x00000000	/* default */
++#define OMAP_BO_WC		0x00000002	/* write-combine */
++#define OMAP_BO_UNCACHED	0x00000004	/* strongly-ordered (uncached) */
++
++/* tiled modes */
++#define OMAP_BO_TILED_8		0x00000100
++#define OMAP_BO_TILED_16	0x00000200
++#define OMAP_BO_TILED_32	0x00000300
++#define OMAP_BO_TILED		(OMAP_BO_TILED_8 | OMAP_BO_TILED_16 | OMAP_BO_TILED_32)
++
++union omap_gem_size {
++	uint32_t bytes;		/* (for non-tiled formats) */
++	struct {
++		uint16_t width;
++		uint16_t height;
++	} tiled;		/* (for tiled formats) */
++};
++
++struct drm_omap_gem_new {
++	union omap_gem_size size;	/* in */
++	uint32_t flags;			/* in */
++	uint32_t handle;		/* out */
++	uint32_t __pad;
++};
++
++/* mask of operations: */
++enum omap_gem_op {
++	OMAP_GEM_READ = 0x01,
++	OMAP_GEM_WRITE = 0x02,
++};
++
++struct drm_omap_gem_cpu_prep {
++	uint32_t handle;		/* buffer handle (in) */
++	uint32_t op;			/* mask of omap_gem_op (in) */
++};
++
++struct drm_omap_gem_cpu_fini {
++	uint32_t handle;		/* buffer handle (in) */
++	uint32_t op;			/* mask of omap_gem_op (in) */
++	/* TODO maybe here we pass down info about what regions are touched
++	 * by sw so we can be clever about cache ops?  For now a placeholder,
++	 * set to zero and we just do full buffer flush..
++	 */
++	uint32_t nregions;
++	uint32_t __pad;
++};
++
++struct drm_omap_gem_info {
++	uint32_t handle;		/* buffer handle (in) */
++	uint32_t pad;
++	uint64_t offset;		/* mmap offset (out) */
++	/* note: in case of tiled buffers, the user virtual size can be
++	 * different from the physical size (ie. how many pages are needed
++	 * to back the object) which is returned in DRM_IOCTL_GEM_OPEN..
++	 * This size here is the one that should be used if you want to
++	 * mmap() the buffer:
++	 */
++	uint32_t size;			/* virtual size for mmap'ing (out) */
++	uint32_t __pad;
++};
++
++#define DRM_OMAP_GET_PARAM		0x00
++#define DRM_OMAP_SET_PARAM		0x01
++#define DRM_OMAP_GET_BASE		0x02
++#define DRM_OMAP_GEM_NEW		0x03
++#define DRM_OMAP_GEM_CPU_PREP		0x04
++#define DRM_OMAP_GEM_CPU_FINI		0x05
++#define DRM_OMAP_GEM_INFO		0x06
++#define DRM_OMAP_NUM_IOCTLS		0x07
++
++#define DRM_IOCTL_OMAP_GET_PARAM	DRM_IOWR(DRM_COMMAND_BASE + DRM_OMAP_GET_PARAM, struct drm_omap_param)
++#define DRM_IOCTL_OMAP_SET_PARAM	DRM_IOW (DRM_COMMAND_BASE + DRM_OMAP_SET_PARAM, struct drm_omap_param)
++#define DRM_IOCTL_OMAP_GET_BASE		DRM_IOWR(DRM_COMMAND_BASE + DRM_OMAP_GET_BASE, struct drm_omap_get_base)
++#define DRM_IOCTL_OMAP_GEM_NEW		DRM_IOWR(DRM_COMMAND_BASE + DRM_OMAP_GEM_NEW, struct drm_omap_gem_new)
++#define DRM_IOCTL_OMAP_GEM_CPU_PREP	DRM_IOW (DRM_COMMAND_BASE + DRM_OMAP_GEM_CPU_PREP, struct drm_omap_gem_cpu_prep)
++#define DRM_IOCTL_OMAP_GEM_CPU_FINI	DRM_IOW (DRM_COMMAND_BASE + DRM_OMAP_GEM_CPU_FINI, struct drm_omap_gem_cpu_fini)
++#define DRM_IOCTL_OMAP_GEM_INFO		DRM_IOWR(DRM_COMMAND_BASE + DRM_OMAP_GEM_INFO, struct drm_omap_gem_info)
++
++#endif /* __OMAP_DRM_H__ */
+diff --git a/omap/omap_drmif.h b/omap/omap_drmif.h
+new file mode 100644
+index 0000000..eb75a80
+--- /dev/null
++++ b/omap/omap_drmif.h
+@@ -0,0 +1,61 @@
++/*
++ * Copyright (C) 2011 Texas Instruments, Inc
++ *
++ * Permission is hereby granted, free of charge, to any person obtaining a
++ * copy of this software and associated documentation files (the "Software"),
++ * to deal in the Software without restriction, including without limitation
++ * the rights to use, copy, modify, merge, publish, distribute, sublicense,
++ * and/or sell copies of the Software, and to permit persons to whom the
++ * Software is furnished to do so, subject to the following conditions:
++ *
++ * The above copyright notice and this permission notice (including the next
++ * paragraph) shall be included in all copies or substantial portions of the
++ * Software.
++ *
++ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
++ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
++ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
++ * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
++ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
++ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
++ * SOFTWARE.
++ *
++ * Authors:
++ *    Rob Clark <rob@ti.com>
++ */
++
++#ifndef OMAP_DRMIF_H_
++#define OMAP_DRMIF_H_
++
++#include <xf86drm.h>
++#include <stdint.h>
++#include <omap_drm.h>
++
++struct omap_bo;
++struct omap_device;
++
++/* device related functions:
++ */
++
++struct omap_device * omap_device_new(int fd);
++void omap_device_del(struct omap_device *dev);
++int omap_get_param(struct omap_device *dev, uint64_t param, uint64_t *value);
++int omap_set_param(struct omap_device *dev, uint64_t param, uint64_t value);
++
++/* buffer-object related functions:
++ */
++
++struct omap_bo * omap_bo_new(struct omap_device *dev,
++		uint32_t size, uint32_t flags);
++struct omap_bo * omap_bo_new_tiled(struct omap_device *dev,
++		uint32_t width, uint32_t height, uint32_t flags);
++struct omap_bo * omap_bo_from_name(struct omap_device *dev, uint32_t name);
++void omap_bo_del(struct omap_bo *bo);
++int omap_bo_get_name(struct omap_bo *bo, uint32_t *name);
++uint32_t omap_bo_handle(struct omap_bo *bo);
++uint32_t omap_bo_size(struct omap_bo *bo);
++void * omap_bo_map(struct omap_bo *bo);
++int omap_bo_cpu_prep(struct omap_bo *bo, enum omap_gem_op op);
++int omap_bo_cpu_fini(struct omap_bo *bo, enum omap_gem_op op);
++
++#endif /* OMAP_DRMIF_H_ */
+diff --git a/tests/modetest/modetest.c b/tests/modetest/modetest.c
+index 229ab8a..1e4ec91 100644
+--- a/tests/modetest/modetest.c
++++ b/tests/modetest/modetest.c
+@@ -721,7 +721,7 @@ int main(int argc, char **argv)
+ 	int c;
+ 	int encoders = 0, connectors = 0, crtcs = 0, framebuffers = 0;
+ 	int test_vsync = 0;
+-	char *modules[] = { "i915", "radeon", "nouveau", "vmwgfx" };
++	char *modules[] = { "i915", "radeon", "nouveau", "vmwgfx", "omapdrm" };
+ 	char *modeset = NULL;
+ 	int i, count = 0;
+ 	struct connector con_args[2];
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/917-Add-support-for-generic-object-properties-IOCTLs.patch
+++ libdrm-2.4.32/debian/patches/917-Add-support-for-generic-object-properties-IOCTLs.patch
@@ -0,0 +1,192 @@
+From 968912faf75325e4dc81c17b3f7f2b1bdcb230bf Mon Sep 17 00:00:00 2001
+From: Paulo Zanoni <paulo.r.zanoni@intel.com>
+Date: Thu, 12 Jan 2012 14:35:42 -0200
+Subject: [PATCH 17/21] Add support for generic object properties IOCTLs
+
+New library calls:
+- drmModeObjectGetProperties
+- drmModeFreeObjectProperties
+- drmModeObjectSetProperties
+
+Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
+---
+ include/drm/drm.h      |    2 +
+ include/drm/drm_mode.h |   24 ++++++++++++++
+ xf86drmMode.c          |   83 ++++++++++++++++++++++++++++++++++++++++++++++++
+ xf86drmMode.h          |   14 ++++++++
+ 4 files changed, 123 insertions(+), 0 deletions(-)
+
+diff --git a/include/drm/drm.h b/include/drm/drm.h
+index 753d2fc..5e6cd29 100644
+--- a/include/drm/drm.h
++++ b/include/drm/drm.h
+@@ -731,6 +731,8 @@ struct drm_prime_handle {
+ #define DRM_IOCTL_MODE_GETPLANE	DRM_IOWR(0xB6, struct drm_mode_get_plane)
+ #define DRM_IOCTL_MODE_SETPLANE	DRM_IOWR(0xB7, struct drm_mode_set_plane)
+ #define DRM_IOCTL_MODE_ADDFB2		DRM_IOWR(0xB8, struct drm_mode_fb_cmd2)
++#define DRM_IOCTL_MODE_OBJ_GETPROPERTIES	DRM_IOWR(0xB9, struct drm_mode_obj_get_properties)
++#define DRM_IOCTL_MODE_OBJ_SETPROPERTY	DRM_IOWR(0xBA, struct drm_mode_obj_set_property)
+ 
+ /**
+  * Device specific ioctls should only be in their respective headers
+diff --git a/include/drm/drm_mode.h b/include/drm/drm_mode.h
+index f36c61a..f303d94 100644
+--- a/include/drm/drm_mode.h
++++ b/include/drm/drm_mode.h
+@@ -250,6 +250,30 @@ struct drm_mode_connector_set_property {
+ 	__u32 connector_id;
+ };
+ 
++#define DRM_MODE_OBJECT_CRTC 0xcccccccc
++#define DRM_MODE_OBJECT_CONNECTOR 0xc0c0c0c0
++#define DRM_MODE_OBJECT_ENCODER 0xe0e0e0e0
++#define DRM_MODE_OBJECT_MODE 0xdededede
++#define DRM_MODE_OBJECT_PROPERTY 0xb0b0b0b0
++#define DRM_MODE_OBJECT_FB 0xfbfbfbfb
++#define DRM_MODE_OBJECT_BLOB 0xbbbbbbbb
++#define DRM_MODE_OBJECT_PLANE 0xeeeeeeee
++
++struct drm_mode_obj_get_properties {
++	__u64 props_ptr;
++	__u64 prop_values_ptr;
++	__u32 count_props;
++	__u32 obj_id;
++	__u32 obj_type;
++};
++
++struct drm_mode_obj_set_property {
++	__u64 value;
++	__u32 prop_id;
++	__u32 obj_id;
++	__u32 obj_type;
++};
++
+ struct drm_mode_get_blob {
+ 	__u32 blob_id;
+ 	__u32 length;
+diff --git a/xf86drmMode.c b/xf86drmMode.c
+index c809c44..a60c7cb 100644
+--- a/xf86drmMode.c
++++ b/xf86drmMode.c
+@@ -974,3 +974,86 @@ void drmModeFreePlaneResources(drmModePlaneResPtr ptr)
+ 	drmFree(ptr->planes);
+ 	drmFree(ptr);
+ }
++
++drmModeObjectPropertiesPtr drmModeObjectGetProperties(int fd,
++						      uint32_t object_id,
++						      uint32_t object_type)
++{
++	struct drm_mode_obj_get_properties properties;
++	drmModeObjectPropertiesPtr ret = NULL;
++	uint32_t count;
++
++retry:
++	memset(&properties, 0, sizeof(struct drm_mode_obj_get_properties));
++	properties.obj_id = object_id;
++	properties.obj_type = object_type;
++
++	if (drmIoctl(fd, DRM_IOCTL_MODE_OBJ_GETPROPERTIES, &properties))
++		return 0;
++
++	count = properties.count_props;
++
++	if (count) {
++		properties.props_ptr = VOID2U64(drmMalloc(count *
++							  sizeof(uint32_t)));
++		if (!properties.props_ptr)
++			goto err_allocs;
++		properties.prop_values_ptr = VOID2U64(drmMalloc(count *
++						      sizeof(uint64_t)));
++		if (!properties.prop_values_ptr)
++			goto err_allocs;
++	}
++
++	if (drmIoctl(fd, DRM_IOCTL_MODE_OBJ_GETPROPERTIES, &properties))
++		goto err_allocs;
++
++	if (count < properties.count_props) {
++		drmFree(U642VOID(properties.props_ptr));
++		drmFree(U642VOID(properties.prop_values_ptr));
++		goto retry;
++	}
++	count = properties.count_props;
++
++	ret = drmMalloc(sizeof(*ret));
++	if (!ret)
++		goto err_allocs;
++
++	ret->count_props = count;
++	ret->props = drmAllocCpy(U642VOID(properties.props_ptr),
++				 count, sizeof(uint32_t));
++	ret->prop_values = drmAllocCpy(U642VOID(properties.prop_values_ptr),
++				       count, sizeof(uint64_t));
++	if (ret->count_props && (!ret->props || !ret->prop_values)) {
++		drmFree(ret->props);
++		drmFree(ret->prop_values);
++		drmFree(ret);
++		ret = NULL;
++	}
++
++err_allocs:
++	drmFree(U642VOID(properties.props_ptr));
++	drmFree(U642VOID(properties.prop_values_ptr));
++	return ret;
++}
++
++void drmModeFreeObjectProperties(drmModeObjectPropertiesPtr ptr)
++{
++	if (!ptr)
++		return;
++	drmFree(ptr->props);
++	drmFree(ptr->prop_values);
++	drmFree(ptr);
++}
++
++int drmModeObjectSetProperty(int fd, uint32_t object_id, uint32_t object_type,
++			     uint32_t property_id, uint64_t value)
++{
++	struct drm_mode_obj_set_property prop;
++
++	prop.value = value;
++	prop.prop_id = property_id;
++	prop.obj_id = object_id;
++	prop.obj_type = object_type;
++
++	return DRM_IOCTL(fd, DRM_IOCTL_MODE_OBJ_SETPROPERTY, &prop);
++}
+diff --git a/xf86drmMode.h b/xf86drmMode.h
+index 991e3f9..8e40034 100644
+--- a/xf86drmMode.h
++++ b/xf86drmMode.h
+@@ -281,6 +281,12 @@ typedef struct _drmModeConnector {
+ 	uint32_t *encoders; /**< List of encoder ids */
+ } drmModeConnector, *drmModeConnectorPtr;
+ 
++typedef struct _drmModeObjectProperties {
++	uint32_t count_props;
++	uint32_t *props;
++	uint64_t *prop_values;
++} drmModeObjectProperties, *drmModeObjectPropertiesPtr;
++
+ typedef struct _drmModePlane {
+ 	uint32_t count_formats;
+ 	uint32_t *formats;
+@@ -428,6 +434,14 @@ extern int drmModeSetPlane(int fd, uint32_t plane_id, uint32_t crtc_id,
+ 			   uint32_t src_x, uint32_t src_y,
+ 			   uint32_t src_w, uint32_t src_h);
+ 
++extern drmModeObjectPropertiesPtr drmModeObjectGetProperties(int fd,
++							uint32_t object_id,
++							uint32_t object_type);
++extern void drmModeFreeObjectProperties(drmModeObjectPropertiesPtr ptr);
++extern int drmModeObjectSetProperty(int fd, uint32_t object_id,
++				    uint32_t object_type, uint32_t property_id,
++				    uint64_t value);
++
+ #if defined(__cplusplus) || defined(c_plusplus)
+ }
+ #endif
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/913-omap-add-dmabuf-support.patch
+++ libdrm-2.4.32/debian/patches/913-omap-add-dmabuf-support.patch
@@ -0,0 +1,72 @@
+From f00efc7ab442f106d3ac7699e80f1f7aee8451f4 Mon Sep 17 00:00:00 2001
+From: Rob Clark <rob@ti.com>
+Date: Wed, 11 Apr 2012 09:51:36 -0500
+Subject: [PATCH 13/21] omap: add dmabuf support
+
+Signed-off-by: Rob Clark <rob@ti.com>
+---
+ omap/omap_drm.c   |   21 +++++++++++++++++++++
+ omap/omap_drmif.h |    1 +
+ 2 files changed, 22 insertions(+), 0 deletions(-)
+
+diff --git a/omap/omap_drm.c b/omap/omap_drm.c
+index 96e1871..336da11 100644
+--- a/omap/omap_drm.c
++++ b/omap/omap_drm.c
+@@ -34,6 +34,7 @@
+ #include <linux/stddef.h>
+ #include <errno.h>
+ #include <sys/mman.h>
++#include <fcntl.h>
+ 
+ #include <xf86drm.h>
+ 
+@@ -56,6 +57,7 @@ struct omap_bo {
+ 	uint32_t	handle;
+ 	uint32_t	name;		/* flink global handle (DRI2 name) */
+ 	uint64_t	offset;		/* offset to mmap() */
++	int		fd;		/* dmabuf handle */
+ };
+ 
+ struct omap_device * omap_device_new(int fd)
+@@ -264,6 +266,25 @@ uint32_t omap_bo_handle(struct omap_bo *bo)
+ 	return bo->handle;
+ }
+ 
++int omap_bo_dmabuf(struct omap_bo *bo)
++{
++	if (!bo->fd) {
++		struct drm_prime_handle req = {
++				.handle = bo->handle,
++				.flags = DRM_CLOEXEC,
++		};
++		int ret;
++
++		ret = drmIoctl(bo->dev->fd, DRM_IOCTL_PRIME_HANDLE_TO_FD, &req);
++		if (ret) {
++			return ret;
++		}
++
++		bo->fd = req.fd;
++	}
++	return bo->fd;
++}
++
+ uint32_t omap_bo_size(struct omap_bo *bo)
+ {
+ 	if (!bo->size) {
+diff --git a/omap/omap_drmif.h b/omap/omap_drmif.h
+index eb75a80..1e03eee 100644
+--- a/omap/omap_drmif.h
++++ b/omap/omap_drmif.h
+@@ -53,6 +53,7 @@ struct omap_bo * omap_bo_from_name(struct omap_device *dev, uint32_t name);
+ void omap_bo_del(struct omap_bo *bo);
+ int omap_bo_get_name(struct omap_bo *bo, uint32_t *name);
+ uint32_t omap_bo_handle(struct omap_bo *bo);
++int omap_bo_dmabuf(struct omap_bo *bo);
+ uint32_t omap_bo_size(struct omap_bo *bo);
+ void * omap_bo_map(struct omap_bo *bo);
+ int omap_bo_cpu_prep(struct omap_bo *bo, enum omap_gem_op op);
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/03_build_against_librt.diff
+++ libdrm-2.4.32/debian/patches/03_build_against_librt.diff
@@ -0,0 +1,11 @@
+--- a/tests/Makefile.am
++++ b/tests/Makefile.am
+@@ -10,6 +10,8 @@ check_PROGRAMS = \
+ 	dristat \
+ 	drmstat
+ 
++dristat_LDADD = $(CLOCK_LIB)
++
+ SUBDIRS = modeprint
+ 
+ if HAVE_LIBKMS
--- libdrm-2.4.32.orig/debian/patches/101-revert-dont-build-intel-drm.patch
+++ libdrm-2.4.32/debian/patches/101-revert-dont-build-intel-drm.patch
@@ -0,0 +1,30 @@
+From 1e13e415ca07b27d0ab064ff1ed8b4dd022d2065 Mon Sep 17 00:00:00 2001
+From: Robert Hooker <sarvatt@ubuntu.com>
+Date: Thu, 22 Mar 2012 13:10:03 -0400
+Subject: [PATCH 2/2] Revert "Don't build Intel DRM if $CHOST is not i?86-* or
+ x86_64-*"
+
+This reverts commit efd6e81e2ba112105457887ae18a58dfa4bbc8ef.
+---
+ configure.ac |    5 +----
+ 1 files changed, 1 insertions(+), 4 deletions(-)
+
+diff --git a/configure.ac b/configure.ac
+index 38aae0d..f7f33c6 100644
+--- a/configure.ac
++++ b/configure.ac
+@@ -246,10 +246,7 @@ if test "x$INTEL" != "xno" -o "x$RADEON" != "xno"; then
+ 
+     else
+            if test "x$INTEL" != "xno"; then
+-                   case $host_os in
+-                           i?86-*|x86_64-*) INTEL=yes ;;
+-                           *) INTEL=no ;;
+-                   esac
++                   INTEL=yes
+            fi
+            if test "x$RADEON" != "xno"; then
+                    RADEON=yes
+-- 
+1.7.9.1
+
--- libdrm-2.4.32.orig/debian/patches/907-omap-fix-compiler-warning.patch
+++ libdrm-2.4.32/debian/patches/907-omap-fix-compiler-warning.patch
@@ -0,0 +1,38 @@
+From e98ed38ca9c9328f88e0b2fab376020049e4a7fb Mon Sep 17 00:00:00 2001
+From: =?UTF-8?q?V=C3=ADctor=20Manuel=20J=C3=A1quez=20Leal?= <vjaquez@igalia.com>
+Date: Mon, 2 Apr 2012 18:08:29 +0200
+Subject: [PATCH 07/21] omap: fix compiler warning
+MIME-Version: 1.0
+Content-Type: text/plain; charset=UTF-8
+Content-Transfer-Encoding: 8bit
+
+When compiling with linaro toolchain version 4.6.2 got this warning.
+
+  CC     omap_drm.lo
+omap_drm.c: In function 'omap_bo_new_impl':
+omap_drm.c:139:6: warning: 'bo' may be used uninitialized in this function [-Wuninitialized]
+
+This patch initialize bo to NULL avoiding the warning.
+
+Signed-off-by: Víctor Manuel Jáquez Leal <vjaquez@igalia.com>
+Signed-off-by: Rob Clark <rob@ti.com>
+---
+ omap/omap_drm.c |    2 +-
+ 1 files changed, 1 insertions(+), 1 deletions(-)
+
+diff --git a/omap/omap_drm.c b/omap/omap_drm.c
+index e611806..96e1871 100644
+--- a/omap/omap_drm.c
++++ b/omap/omap_drm.c
+@@ -102,7 +102,7 @@ int omap_set_param(struct omap_device *dev, uint64_t param, uint64_t value)
+ static struct omap_bo * omap_bo_new_impl(struct omap_device *dev,
+ 		union omap_gem_size size, uint32_t flags)
+ {
+-	struct omap_bo *bo;
++	struct omap_bo *bo = NULL;
+ 	struct drm_omap_gem_new req = {
+ 			.size = size,
+ 			.flags = flags,
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/911-modetest-fix-typo.patch
+++ libdrm-2.4.32/debian/patches/911-modetest-fix-typo.patch
@@ -0,0 +1,30 @@
+From 67fd052c013a493cd644d2e3495fab8b5823b330 Mon Sep 17 00:00:00 2001
+From: Rob Clark <rob@ti.com>
+Date: Tue, 10 Apr 2012 10:23:50 -0500
+Subject: [PATCH 11/21] modetest: fix typo
+MIME-Version: 1.0
+Content-Type: text/plain; charset=UTF-8
+Content-Transfer-Encoding: 8bit
+
+Reported-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
+Signed-off-by: Rob Clark <rob@ti.com>
+---
+ tests/modetest/modetest.c |    2 +-
+ 1 files changed, 1 insertions(+), 1 deletions(-)
+
+diff --git a/tests/modetest/modetest.c b/tests/modetest/modetest.c
+index 819724a..223adc4 100644
+--- a/tests/modetest/modetest.c
++++ b/tests/modetest/modetest.c
+@@ -770,7 +770,7 @@ set_plane(struct kms_driver *kms, struct connector *c, struct plane *p)
+ 			kms_bo_get_prop(plane_bo, KMS_HANDLE, &handles[1]);
+ 			pitches[2] = p->w / 2;
+ 			offsets[2] = offsets[1] + (p->w * p->h) / 4;
+-			kms_bo_get_prop(plane_bo, KMS_HANDLE, &handles[1]);
++			kms_bo_get_prop(plane_bo, KMS_HANDLE, &handles[2]);
+ 
+ 			fill420(virtual, virtual+offsets[1], virtual+offsets[2],
+ 					1, 0, p->w, p->h, pitches[0]);
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/916-modetest-print-more-about-our-properties.patch
+++ libdrm-2.4.32/debian/patches/916-modetest-print-more-about-our-properties.patch
@@ -0,0 +1,160 @@
+From 0fb1f7a0fc2bd6a92d6ab96e08fd9474de9872bb Mon Sep 17 00:00:00 2001
+From: Paulo Zanoni <paulo.r.zanoni@intel.com>
+Date: Thu, 12 Jan 2012 14:21:56 -0200
+Subject: [PATCH 16/21] modetest: print more about our properties
+
+In the future we'll have more than just connector properties, so create
+a dump_prop function that can handle any property (instead of the
+current dump_props function that only handles connector properties).
+
+Also, make this function print a lot more information about the existing
+properties.
+
+Also change the printed indentation of the modes to make the output more
+readable.
+
+The previous function dump_props also segfaulted when we didn't have
+enought permissions. The new function does not segfault in this case (by
+checking for the return value of drmModeGetProperty).
+
+Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
+---
+ tests/modetest/modetest.c |   92 ++++++++++++++++++++++++++++++++++++++++----
+ 1 files changed, 83 insertions(+), 9 deletions(-)
+
+diff --git a/tests/modetest/modetest.c b/tests/modetest/modetest.c
+index 1e55a01..7dc6e75 100644
+--- a/tests/modetest/modetest.c
++++ b/tests/modetest/modetest.c
+@@ -43,6 +43,7 @@
+ #include <stdio.h>
+ #include <stdlib.h>
+ #include <stdint.h>
++#include <inttypes.h>
+ #include <unistd.h>
+ #include <string.h>
+ #include <errno.h>
+@@ -145,7 +146,7 @@ void dump_encoders(void)
+ 
+ void dump_mode(drmModeModeInfo *mode)
+ {
+-	printf("  %s %d %d %d %d %d %d %d %d %d\n",
++	printf("\t%s %d %d %d %d %d %d %d %d %d\n",
+ 	       mode->name,
+ 	       mode->vrefresh,
+ 	       mode->hdisplay,
+@@ -159,16 +160,87 @@ void dump_mode(drmModeModeInfo *mode)
+ }
+ 
+ static void
+-dump_props(drmModeConnector *connector)
++dump_blob(uint32_t blob_id)
++{
++	uint32_t i;
++	unsigned char *blob_data;
++	drmModePropertyBlobPtr blob;
++
++	blob = drmModeGetPropertyBlob(fd, blob_id);
++	blob_data = blob->data;
++
++	for (i = 0; i < blob->length; i++) {
++		if (i % 16 == 0)
++			printf("\n\t\t\t");
++		printf("%.2hhx", blob_data[i]);
++	}
++	printf("\n");
++
++	drmModeFreePropertyBlob(blob);
++}
++
++static void
++dump_prop(uint32_t prop_id, uint64_t value)
+ {
+-	drmModePropertyPtr props;
+ 	int i;
++	drmModePropertyPtr prop;
++
++	prop = drmModeGetProperty(fd, prop_id);
++
++	printf("\t%d", prop_id);
++	if (!prop) {
++		printf("\n");
++		return;
++	}
+ 
+-	for (i = 0; i < connector->count_props; i++) {
+-		props = drmModeGetProperty(fd, connector->props[i]);
+-		printf("\t%s, flags %d\n", props->name, props->flags);
+-		drmModeFreeProperty(props);
++	printf(" %s:\n", prop->name);
++
++	printf("\t\tflags:");
++	if (prop->flags & DRM_MODE_PROP_PENDING)
++		printf(" pending");
++	if (prop->flags & DRM_MODE_PROP_RANGE)
++		printf(" range");
++	if (prop->flags & DRM_MODE_PROP_IMMUTABLE)
++		printf(" immutable");
++	if (prop->flags & DRM_MODE_PROP_ENUM)
++		printf(" enum");
++	if (prop->flags & DRM_MODE_PROP_BLOB)
++		printf(" blob");
++	printf("\n");
++
++	if (prop->flags & DRM_MODE_PROP_RANGE) {
++		printf("\t\tvalues:");
++		for (i = 0; i < prop->count_values; i++)
++			printf(" %"PRIu64, prop->values[i]);
++		printf("\n");
++	}
++
++	if (prop->flags & DRM_MODE_PROP_ENUM) {
++		printf("\t\tenums:");
++		for (i = 0; i < prop->count_enums; i++)
++			printf(" %s=%llu", prop->enums[i].name,
++			       prop->enums[i].value);
++		printf("\n");
++	} else {
++		assert(prop->count_enums == 0);
+ 	}
++
++	if (prop->flags & DRM_MODE_PROP_BLOB) {
++		printf("\t\tblobs:\n");
++		for (i = 0; i < prop->count_blobs; i++)
++			dump_blob(prop->blob_ids[i]);
++		printf("\n");
++	} else {
++		assert(prop->count_blobs == 0);
++	}
++
++	printf("\t\tvalue:");
++	if (prop->flags & DRM_MODE_PROP_BLOB)
++		dump_blob(value);
++	else
++		printf(" %"PRIu64"\n", value);
++
++	drmModeFreeProperty(prop);
+ }
+ 
+ void dump_connectors(void)
+@@ -201,13 +273,15 @@ void dump_connectors(void)
+ 
+ 		if (connector->count_modes) {
+ 			printf("  modes:\n");
+-			printf("  name refresh (Hz) hdisp hss hse htot vdisp "
++			printf("\tname refresh (Hz) hdisp hss hse htot vdisp "
+ 			       "vss vse vtot)\n");
+ 			for (j = 0; j < connector->count_modes; j++)
+ 				dump_mode(&connector->modes[j]);
+ 
+ 			printf("  props:\n");
+-			dump_props(connector);
++			for (j = 0; j < connector->count_props; j++)
++				dump_prop(connector->props[j],
++					  connector->prop_values[j]);
+ 		}
+ 
+ 		drmModeFreeConnector(connector);
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/912-libdrm-update-drm-headers-from-kernel-for-prime-dmab.patch
+++ libdrm-2.4.32/debian/patches/912-libdrm-update-drm-headers-from-kernel-for-prime-dmab.patch
@@ -0,0 +1,49 @@
+From 9b893e4a429d58bf0954ffc09b18890fcfe92941 Mon Sep 17 00:00:00 2001
+From: Rob Clark <rob@ti.com>
+Date: Wed, 11 Apr 2012 09:44:35 -0500
+Subject: [PATCH 12/21] libdrm: update drm headers from kernel for prime/dmabuf
+
+Sync drm.h with from kernel headers for the new PRIME_HANDLE_TO_FD
+and PRIME_FD_TO_HANDLE ioctls from Dave Airlie's "drm: base prime/
+dma-buf support (v5)" kernel patch.
+
+Signed-off-by: Rob Clark <rob@ti.com>
+---
+ include/drm/drm.h |   14 ++++++++++++++
+ 1 files changed, 14 insertions(+), 0 deletions(-)
+
+diff --git a/include/drm/drm.h b/include/drm/drm.h
+index 8adb9d5..753d2fc 100644
+--- a/include/drm/drm.h
++++ b/include/drm/drm.h
+@@ -618,6 +618,17 @@ struct drm_get_cap {
+ 	__u64 value;
+ };
+ 
++#define DRM_CLOEXEC O_CLOEXEC
++struct drm_prime_handle {
++	__u32 handle;
++
++	/** Flags.. only applicable for handle->fd */
++	__u32 flags;
++
++	/** Returned dmabuf file descriptor */
++	__s32 fd;
++};
++
+ #include "drm_mode.h"
+ 
+ #define DRM_IOCTL_BASE			'd'
+@@ -686,6 +697,9 @@ struct drm_get_cap {
+ #define DRM_IOCTL_SG_ALLOC		DRM_IOWR(0x38, struct drm_scatter_gather)
+ #define DRM_IOCTL_SG_FREE		DRM_IOW( 0x39, struct drm_scatter_gather)
+ 
++#define DRM_IOCTL_PRIME_HANDLE_TO_FD    DRM_IOWR(0x2d, struct drm_prime_handle)
++#define DRM_IOCTL_PRIME_FD_TO_HANDLE    DRM_IOWR(0x2e, struct drm_prime_handle)
++
+ #define DRM_IOCTL_WAIT_VBLANK		DRM_IOWR(0x3a, union drm_wait_vblank)
+ 
+ #define DRM_IOCTL_UPDATE_DRAW		DRM_IOW(0x3f, struct drm_update_draw)
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/910-modetest-add-AR15-XR15-RGB-1555-formats.patch
+++ libdrm-2.4.32/debian/patches/910-modetest-add-AR15-XR15-RGB-1555-formats.patch
@@ -0,0 +1,67 @@
+From 2f1e2101b4dc0a6dc1c1d1c59c5cc5fbc54b90cf Mon Sep 17 00:00:00 2001
+From: Rob Clark <rob@ti.com>
+Date: Mon, 2 Jan 2012 10:31:25 -0600
+Subject: [PATCH 10/21] modetest: add AR15/XR15 (RGB-1555) formats
+
+Signed-off-by: Rob Clark <rob@ti.com>
+---
+ tests/modetest/modetest.c |   36 ++++++++++++++++++++++++++++++++++++
+ 1 files changed, 36 insertions(+), 0 deletions(-)
+
+diff --git a/tests/modetest/modetest.c b/tests/modetest/modetest.c
+index 36bdfff..819724a 100644
+--- a/tests/modetest/modetest.c
++++ b/tests/modetest/modetest.c
+@@ -652,6 +652,26 @@ fill422(unsigned char *virtual, int n, int width, int height, int stride)
+ 	}
+ }
+ 
++static void
++fill1555(unsigned char *virtual, int n, int width, int height, int stride)
++{
++	int i, j;
++	/* paint the buffer with colored tiles */
++	for (j = 0; j < height; j++) {
++		uint16_t *ptr = (uint16_t*)((char*)virtual + j * stride);
++		for (i = 0; i < width; i++) {
++			div_t d = div(n+i+j, width);
++			uint32_t rgb = 0x00130502 * (d.quot >> 6) + 0x000a1120 * (d.rem >> 6);
++			unsigned char *rgbp = (unsigned char *)&rgb;
++
++			*(ptr++) = 0x8000 |
++					(rgbp[RED] >> 3) << 10 |
++					(rgbp[GREEN] >> 3) << 5 |
++					(rgbp[BLUE] >> 3);
++		}
++	}
++}
++
+ static int
+ set_plane(struct kms_driver *kms, struct connector *c, struct plane *p)
+ {
+@@ -756,6 +776,22 @@ set_plane(struct kms_driver *kms, struct connector *c, struct plane *p)
+ 					1, 0, p->w, p->h, pitches[0]);
+ 
+ 			format = DRM_FORMAT_YVU420;
++		} else if (!strcmp(p->format_str, "XR15")) {
++			pitches[0] = p->w * 2;
++			offsets[0] = 0;
++			kms_bo_get_prop(plane_bo, KMS_HANDLE, &handles[0]);
++
++			fill1555(virtual, 0, p->w, p->h, pitches[0]);
++
++			format = DRM_FORMAT_XRGB1555;
++		} else if (!strcmp(p->format_str, "AR15")) {
++			pitches[0] = p->w * 2;
++			offsets[0] = 0;
++			kms_bo_get_prop(plane_bo, KMS_HANDLE, &handles[0]);
++
++			fill1555(virtual, 0, p->w, p->h, pitches[0]);
++
++			format = DRM_FORMAT_ARGB1555;
+ 		} else {
+ 			fprintf(stderr, "Unknown format: %s\n", p->format_str);
+ 			return -1;
+-- 
+1.7.4.1
+
--- libdrm-2.4.32.orig/debian/patches/02_build_libkms_against_in_tree_drm.diff
+++ libdrm-2.4.32/debian/patches/02_build_libkms_against_in_tree_drm.diff
@@ -0,0 +1,17 @@
+Description: Add libdrm to LIBADD as libkms uses symbols from libdrm
+Author: Christopher Halse Rogers <christopher.halse.rogers@canonical.com>
+Bug: https://bugs.freedesktop.org/show_bug.cgi?id=26852
+
+Index: libdrm/libkms/Makefile.am
+===================================================================
+--- libdrm.orig/libkms/Makefile.am
++++ libdrm/libkms/Makefile.am
+@@ -6,7 +6,7 @@ AM_CFLAGS = \
+ libkms_la_LTLIBRARIES = libkms.la
+ libkms_ladir = $(libdir)
+ libkms_la_LDFLAGS = -version-number 1:0:0 -no-undefined
+-libkms_la_LIBADD =
++libkms_la_LIBADD = ../libdrm.la
+ 
+ #if HAVE_LIBUDEV
+ #libkms_la_LIBADD += $(LIBUDEV_LIBS)
--- libdrm-2.4.32.orig/debian/patches/904-intel-add-Ivy-Bridge-GT2-server-variant.patch
+++ libdrm-2.4.32/debian/patches/904-intel-add-Ivy-Bridge-GT2-server-variant.patch
@@ -0,0 +1,37 @@
+From e057a56448e2e785f74bc13dbd6ead8572ebed91 Mon Sep 17 00:00:00 2001
+From: Eugeni Dodonov <eugeni@dodonov.net>
+Date: Thu, 29 Mar 2012 21:03:29 -0300
+Subject: [PATCH 04/21] intel: add Ivy Bridge GT2 server variant
+
+We were missing this one and it is being used by Bromolow.
+
+Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>
+---
+ intel/intel_chipset.h |    4 +++-
+ 1 files changed, 3 insertions(+), 1 deletions(-)
+
+diff --git a/intel/intel_chipset.h b/intel/intel_chipset.h
+index 435d01a..9c1abc8 100644
+--- a/intel/intel_chipset.h
++++ b/intel/intel_chipset.h
+@@ -44,6 +44,7 @@
+ #define PCI_CHIP_IVYBRIDGE_M_GT1	0x0156 /* mobile */
+ #define PCI_CHIP_IVYBRIDGE_M_GT2	0x0166
+ #define PCI_CHIP_IVYBRIDGE_S		0x015a /* server */
++#define PCI_CHIP_IVYBRIDGE_S_GT2	0x016a /* server */
+ 
+ #define PCI_CHIP_HASWELL_GT1            0x0402 /* Desktop */
+ #define PCI_CHIP_HASWELL_GT2            0x0412
+@@ -128,7 +129,8 @@
+ 				 dev == PCI_CHIP_IVYBRIDGE_GT2 || \
+ 				 dev == PCI_CHIP_IVYBRIDGE_M_GT1 || \
+ 				 dev == PCI_CHIP_IVYBRIDGE_M_GT2 || \
+-				 dev == PCI_CHIP_IVYBRIDGE_S)
++				 dev == PCI_CHIP_IVYBRIDGE_S || \
++				 dev == PCI_CHIP_IVYBRIDGE_S_GT2)
+ 
+ #define IS_HSW_GT1(devid)       (devid == PCI_CHIP_HASWELL_GT1 || \
+                                  devid == PCI_CHIP_HASWELL_M_GT1)
+-- 
+1.7.4.1
+
