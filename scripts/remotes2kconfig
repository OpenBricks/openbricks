#!/bin/sh

KCONFIG=build/config/Kconfig.remote

cat > $KCONFIG <<EOF
############################################
# This file is autogenerated, do not edit! #
############################################

choice REMOTE
  prompt "Remote"
  depends on PKG_lirc
  default REMOTE_atiusb

EOF

remotes=`ls packages/lirc*/config/lircd* | grep ^\.*.conf$ | sed 's:^.*lircd_\(.*\)\.conf$:\1:g' | sort`

for remote in $remotes; do
  cat >> $KCONFIG <<EOF
config REMOTE_${remote}
  bool "${remote}"
EOF
done

cat >> $KCONFIG <<EOF

endchoice

choice RECEIVER
  prompt "Receiver"
  depends on PKG_lirc
  default RECEIVER_atiusb

EOF

receivers=`ls packages/lirc*/config/lircd* | grep -v ^\.*.conf$ | sed 's:^.*lircd_\(.*\)$:\1:g' | sort`

for receiver in $receivers; do
  cat >> $KCONFIG <<EOF
config RECEIVER_${receiver}
  bool "${receiver}"
EOF
done

cat >> $KCONFIG <<EOF

endchoice

config OPT_REMOTE
  string
EOF

for remote in $remotes; do
  echo "  default \"${remote}\" if REMOTE_${remote}" >> $KCONFIG
done

cat >> $KCONFIG <<EOF

config OPT_RECEIVER
  string
EOF

for receiver in $receivers; do
  echo "  default \"${receiver}\" if RECEIVER_${receiver}" >> $KCONFIG
done
